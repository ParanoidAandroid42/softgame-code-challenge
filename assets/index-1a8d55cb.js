var Nt=(_,O)=>()=>(O||_((O={exports:{}}).exports,O),O.exports);var jt=Nt((rt,Ye)=>{(function(){const O=document.createElement("link").relList;if(O&&O.supports&&O.supports("modulepreload"))return;for(const x of document.querySelectorAll('link[rel="modulepreload"]'))w(x);new MutationObserver(x=>{for(const g of x)if(g.type==="childList")for(const u of g.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&w(u)}).observe(document,{childList:!0,subtree:!0});function p(x){const g={};return x.integrity&&(g.integrity=x.integrity),x.referrerPolicy&&(g.referrerPolicy=x.referrerPolicy),x.crossOrigin==="use-credentials"?g.credentials="include":x.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function w(x){if(x.ep)return;x.ep=!0;const g=p(x);fetch(x.href,g)}})();/*!
 * pixi.js - v4.8.2
 * Compiled Mon, 03 Sep 2018 15:52:06 UTC
 *
 * pixi.js is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */(function(_){if(typeof rt=="object"&&typeof Ye<"u")Ye.exports=_();else if(typeof define=="function"&&define.amd)define([],_);else{var O;typeof window<"u"?O=window:typeof global<"u"?O=global:typeof self<"u"?O=self:O=this,O.PIXI=_()}})(function(){return function(){function _(O,p,w){function x(v,h){if(!p[v]){if(!O[v]){var s=typeof require=="function"&&require;if(!h&&s)return s(v,!0);if(g)return g(v,!0);var a=new Error("Cannot find module '"+v+"'");throw a.code="MODULE_NOT_FOUND",a}var r=p[v]={exports:{}};O[v][0].call(r.exports,function(t){var e=O[v][1][t];return x(e||t)},r,r.exports,_,O,p,w)}return p[v].exports}for(var g=typeof require=="function"&&require,u=0;u<w.length;u++)x(w[u]);return x}return _}()({1:[function(_,O,p){"use restrict";var w=32;p.INT_BITS=w,p.INT_MAX=2147483647,p.INT_MIN=-1<<w-1,p.sign=function(u){return(u>0)-(u<0)},p.abs=function(u){var v=u>>w-1;return(u^v)-v},p.min=function(u,v){return v^(u^v)&-(u<v)},p.max=function(u,v){return u^(u^v)&-(u<v)},p.isPow2=function(u){return!(u&u-1)&&!!u},p.log2=function(u){var v,h;return v=(u>65535)<<4,u>>>=v,h=(u>255)<<3,u>>>=h,v|=h,h=(u>15)<<2,u>>>=h,v|=h,h=(u>3)<<1,u>>>=h,v|=h,v|u>>1},p.log10=function(u){return u>=1e9?9:u>=1e8?8:u>=1e7?7:u>=1e6?6:u>=1e5?5:u>=1e4?4:u>=1e3?3:u>=100?2:u>=10?1:0},p.popCount=function(u){return u=u-(u>>>1&1431655765),u=(u&858993459)+(u>>>2&858993459),(u+(u>>>4)&252645135)*16843009>>>24};function x(u){var v=32;return u&=-u,u&&v--,u&65535&&(v-=16),u&16711935&&(v-=8),u&252645135&&(v-=4),u&858993459&&(v-=2),u&1431655765&&(v-=1),v}p.countTrailingZeros=x,p.nextPow2=function(u){return u+=u===0,--u,u|=u>>>1,u|=u>>>2,u|=u>>>4,u|=u>>>8,u|=u>>>16,u+1},p.prevPow2=function(u){return u|=u>>>1,u|=u>>>2,u|=u>>>4,u|=u>>>8,u|=u>>>16,u-(u>>>1)},p.parity=function(u){return u^=u>>>16,u^=u>>>8,u^=u>>>4,u&=15,27030>>>u&1};var g=new Array(256);(function(u){for(var v=0;v<256;++v){var h=v,s=v,a=7;for(h>>>=1;h;h>>>=1)s<<=1,s|=h&1,--a;u[v]=s<<a&255}})(g),p.reverse=function(u){return g[u&255]<<24|g[u>>>8&255]<<16|g[u>>>16&255]<<8|g[u>>>24&255]},p.interleave2=function(u,v){return u&=65535,u=(u|u<<8)&16711935,u=(u|u<<4)&252645135,u=(u|u<<2)&858993459,u=(u|u<<1)&1431655765,v&=65535,v=(v|v<<8)&16711935,v=(v|v<<4)&252645135,v=(v|v<<2)&858993459,v=(v|v<<1)&1431655765,u|v<<1},p.deinterleave2=function(u,v){return u=u>>>v&1431655765,u=(u|u>>>1)&858993459,u=(u|u>>>2)&252645135,u=(u|u>>>4)&16711935,u=(u|u>>>16)&65535,u<<16>>16},p.interleave3=function(u,v,h){return u&=1023,u=(u|u<<16)&4278190335,u=(u|u<<8)&251719695,u=(u|u<<4)&3272356035,u=(u|u<<2)&1227133513,v&=1023,v=(v|v<<16)&4278190335,v=(v|v<<8)&251719695,v=(v|v<<4)&3272356035,v=(v|v<<2)&1227133513,u|=v<<1,h&=1023,h=(h|h<<16)&4278190335,h=(h|h<<8)&251719695,h=(h|h<<4)&3272356035,h=(h|h<<2)&1227133513,u|h<<2},p.deinterleave3=function(u,v){return u=u>>>v&1227133513,u=(u|u>>>2)&3272356035,u=(u|u>>>4)&251719695,u=(u|u>>>8)&4278190335,u=(u|u>>>16)&1023,u<<22>>22},p.nextCombination=function(u){var v=u|u-1;return v+1|(~v&-~v)-1>>>x(u)+1}},{}],2:[function(_,O,p){O.exports=w,O.exports.default=w;function w(M,D,L){L=L||2;var I=D&&D.length,N=I?D[0]*L:M.length,U=x(M,0,N,L,!0),B=[];if(!U)return B;var X,W,Z,K,Q,J,H;if(I&&(U=r(M,D,U,L)),M.length>80*L){X=Z=M[0],W=K=M[1];for(var q=L;q<N;q+=L)Q=M[q],J=M[q+1],Q<X&&(X=Q),J<W&&(W=J),Q>Z&&(Z=Q),J>K&&(K=J);H=Math.max(Z-X,K-W),H=H!==0?1/H:0}return u(U,B,L,X,W,H),B}function x(M,D,L,I,N){var U,B;if(N===F(M,D,L,I)>0)for(U=D;U<L;U+=I)B=C(U,M[U],M[U+1],B);else for(U=L-I;U>=D;U-=I)B=C(U,M[U],M[U+1],B);return B&&b(B,B.next)&&(A(B),B=B.next),B}function g(M,D){if(!M)return M;D||(D=M);var L=M,I;do if(I=!1,!L.steiner&&(b(L,L.next)||c(L.prev,L,L.next)===0)){if(A(L),L=D=L.prev,L===L.next)break;I=!0}else L=L.next;while(I||L!==D);return D}function u(M,D,L,I,N,U,B){if(M){!B&&U&&n(M,I,N,U);for(var X=M,W,Z;M.prev!==M.next;){if(W=M.prev,Z=M.next,U?h(M,I,N,U):v(M)){D.push(W.i/L),D.push(M.i/L),D.push(Z.i/L),A(M),M=Z.next,X=Z.next;continue}if(M=Z,M===X){B?B===1?(M=s(M,D,L),u(M,D,L,I,N,U,2)):B===2&&a(M,D,L,I,N,U):u(g(M),D,L,I,N,U,1);break}}}}function v(M){var D=M.prev,L=M,I=M.next;if(c(D,L,I)>=0)return!1;for(var N=M.next.next;N!==M.prev;){if(d(D.x,D.y,L.x,L.y,I.x,I.y,N.x,N.y)&&c(N.prev,N,N.next)>=0)return!1;N=N.next}return!0}function h(M,D,L,I){var N=M.prev,U=M,B=M.next;if(c(N,U,B)>=0)return!1;for(var X=N.x<U.x?N.x<B.x?N.x:B.x:U.x<B.x?U.x:B.x,W=N.y<U.y?N.y<B.y?N.y:B.y:U.y<B.y?U.y:B.y,Z=N.x>U.x?N.x>B.x?N.x:B.x:U.x>B.x?U.x:B.x,K=N.y>U.y?N.y>B.y?N.y:B.y:U.y>B.y?U.y:B.y,Q=f(X,W,D,L,I),J=f(Z,K,D,L,I),H=M.prevZ,q=M.nextZ;H&&H.z>=Q&&q&&q.z<=J;){if(H!==M.prev&&H!==M.next&&d(N.x,N.y,U.x,U.y,B.x,B.y,H.x,H.y)&&c(H.prev,H,H.next)>=0||(H=H.prevZ,q!==M.prev&&q!==M.next&&d(N.x,N.y,U.x,U.y,B.x,B.y,q.x,q.y)&&c(q.prev,q,q.next)>=0))return!1;q=q.nextZ}for(;H&&H.z>=Q;){if(H!==M.prev&&H!==M.next&&d(N.x,N.y,U.x,U.y,B.x,B.y,H.x,H.y)&&c(H.prev,H,H.next)>=0)return!1;H=H.prevZ}for(;q&&q.z<=J;){if(q!==M.prev&&q!==M.next&&d(N.x,N.y,U.x,U.y,B.x,B.y,q.x,q.y)&&c(q.prev,q,q.next)>=0)return!1;q=q.nextZ}return!0}function s(M,D,L){var I=M;do{var N=I.prev,U=I.next.next;!b(N,U)&&y(N,I,I.next,U)&&E(N,U)&&E(U,N)&&(D.push(N.i/L),D.push(I.i/L),D.push(U.i/L),A(I),A(I.next),I=M=U),I=I.next}while(I!==M);return I}function a(M,D,L,I,N,U){var B=M;do{for(var X=B.next.next;X!==B.prev;){if(B.i!==X.i&&m(B,X)){var W=S(B,X);B=g(B,B.next),W=g(W,W.next),u(B,D,L,I,N,U),u(W,D,L,I,N,U);return}X=X.next}B=B.next}while(B!==M)}function r(M,D,L,I){var N=[],U,B,X,W,Z;for(U=0,B=D.length;U<B;U++)X=D[U]*I,W=U<B-1?D[U+1]*I:M.length,Z=x(M,X,W,I,!1),Z===Z.next&&(Z.steiner=!0),N.push(l(Z));for(N.sort(t),U=0;U<N.length;U++)e(N[U],L),L=g(L,L.next);return L}function t(M,D){return M.x-D.x}function e(M,D){if(D=o(M,D),D){var L=S(D,M);g(L,L.next)}}function o(M,D){var L=D,I=M.x,N=M.y,U=-1/0,B;do{if(N<=L.y&&N>=L.next.y&&L.next.y!==L.y){var X=L.x+(N-L.y)*(L.next.x-L.x)/(L.next.y-L.y);if(X<=I&&X>U){if(U=X,X===I){if(N===L.y)return L;if(N===L.next.y)return L.next}B=L.x<L.next.x?L:L.next}}L=L.next}while(L!==D);if(!B)return null;if(I===U)return B.prev;var W=B,Z=B.x,K=B.y,Q=1/0,J;for(L=B.next;L!==W;)I>=L.x&&L.x>=Z&&I!==L.x&&d(N<K?I:U,N,Z,K,N<K?U:I,N,L.x,L.y)&&(J=Math.abs(N-L.y)/(I-L.x),(J<Q||J===Q&&L.x>B.x)&&E(L,M)&&(B=L,Q=J)),L=L.next;return B}function n(M,D,L,I){var N=M;do N.z===null&&(N.z=f(N.x,N.y,D,L,I)),N.prevZ=N.prev,N.nextZ=N.next,N=N.next;while(N!==M);N.prevZ.nextZ=null,N.prevZ=null,i(N)}function i(M){var D,L,I,N,U,B,X,W,Z=1;do{for(L=M,M=null,U=null,B=0;L;){for(B++,I=L,X=0,D=0;D<Z&&(X++,I=I.nextZ,!!I);D++);for(W=Z;X>0||W>0&&I;)X!==0&&(W===0||!I||L.z<=I.z)?(N=L,L=L.nextZ,X--):(N=I,I=I.nextZ,W--),U?U.nextZ=N:M=N,N.prevZ=U,U=N;L=I}U.nextZ=null,Z*=2}while(B>1);return M}function f(M,D,L,I,N){return M=32767*(M-L)*N,D=32767*(D-I)*N,M=(M|M<<8)&16711935,M=(M|M<<4)&252645135,M=(M|M<<2)&858993459,M=(M|M<<1)&1431655765,D=(D|D<<8)&16711935,D=(D|D<<4)&252645135,D=(D|D<<2)&858993459,D=(D|D<<1)&1431655765,M|D<<1}function l(M){var D=M,L=M;do D.x<L.x&&(L=D),D=D.next;while(D!==M);return L}function d(M,D,L,I,N,U,B,X){return(N-B)*(D-X)-(M-B)*(U-X)>=0&&(M-B)*(I-X)-(L-B)*(D-X)>=0&&(L-B)*(U-X)-(N-B)*(I-X)>=0}function m(M,D){return M.next.i!==D.i&&M.prev.i!==D.i&&!T(M,D)&&E(M,D)&&E(D,M)&&R(M,D)}function c(M,D,L){return(D.y-M.y)*(L.x-D.x)-(D.x-M.x)*(L.y-D.y)}function b(M,D){return M.x===D.x&&M.y===D.y}function y(M,D,L,I){return b(M,D)&&b(L,I)||b(M,I)&&b(L,D)?!0:c(M,D,L)>0!=c(M,D,I)>0&&c(L,I,M)>0!=c(L,I,D)>0}function T(M,D){var L=M;do{if(L.i!==M.i&&L.next.i!==M.i&&L.i!==D.i&&L.next.i!==D.i&&y(L,L.next,M,D))return!0;L=L.next}while(L!==M);return!1}function E(M,D){return c(M.prev,M,M.next)<0?c(M,D,M.next)>=0&&c(M,M.prev,D)>=0:c(M,D,M.prev)<0||c(M,M.next,D)<0}function R(M,D){var L=M,I=!1,N=(M.x+D.x)/2,U=(M.y+D.y)/2;do L.y>U!=L.next.y>U&&L.next.y!==L.y&&N<(L.next.x-L.x)*(U-L.y)/(L.next.y-L.y)+L.x&&(I=!I),L=L.next;while(L!==M);return I}function S(M,D){var L=new k(M.i,M.x,M.y),I=new k(D.i,D.x,D.y),N=M.next,U=D.prev;return M.next=D,D.prev=M,L.next=N,N.prev=L,I.next=L,L.prev=I,U.next=I,I.prev=U,I}function C(M,D,L,I){var N=new k(M,D,L);return I?(N.next=I.next,N.prev=I,I.next.prev=N,I.next=N):(N.prev=N,N.next=N),N}function A(M){M.next.prev=M.prev,M.prev.next=M.next,M.prevZ&&(M.prevZ.nextZ=M.nextZ),M.nextZ&&(M.nextZ.prevZ=M.prevZ)}function k(M,D,L){this.i=M,this.x=D,this.y=L,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}w.deviation=function(M,D,L,I){var N=D&&D.length,U=N?D[0]*L:M.length,B=Math.abs(F(M,0,U,L));if(N)for(var X=0,W=D.length;X<W;X++){var Z=D[X]*L,K=X<W-1?D[X+1]*L:M.length;B-=Math.abs(F(M,Z,K,L))}var Q=0;for(X=0;X<I.length;X+=3){var J=I[X]*L,H=I[X+1]*L,q=I[X+2]*L;Q+=Math.abs((M[J]-M[q])*(M[H+1]-M[J+1])-(M[J]-M[H])*(M[q+1]-M[J+1]))}return B===0&&Q===0?0:Math.abs((Q-B)/B)};function F(M,D,L,I){for(var N=0,U=D,B=L-I;U<L;U+=I)N+=(M[B]-M[U])*(M[U+1]+M[B+1]),B=U;return N}w.flatten=function(M){for(var D=M[0][0].length,L={vertices:[],holes:[],dimensions:D},I=0,N=0;N<M.length;N++){for(var U=0;U<M[N].length;U++)for(var B=0;B<D;B++)L.vertices.push(M[N][U][B]);N>0&&(I+=M[N-1].length,L.holes.push(I))}return L}},{}],3:[function(_,O,p){var w=Object.prototype.hasOwnProperty,x="~";function g(){}Object.create&&(g.prototype=Object.create(null),new g().__proto__||(x=!1));function u(h,s,a){this.fn=h,this.context=s,this.once=a||!1}function v(){this._events=new g,this._eventsCount=0}v.prototype.eventNames=function(){var s=[],a,r;if(this._eventsCount===0)return s;for(r in a=this._events)w.call(a,r)&&s.push(x?r.slice(1):r);return Object.getOwnPropertySymbols?s.concat(Object.getOwnPropertySymbols(a)):s},v.prototype.listeners=function(s,a){var r=x?x+s:s,t=this._events[r];if(a)return!!t;if(!t)return[];if(t.fn)return[t.fn];for(var e=0,o=t.length,n=new Array(o);e<o;e++)n[e]=t[e].fn;return n},v.prototype.emit=function(s,a,r,t,e,o){var n=x?x+s:s;if(!this._events[n])return!1;var i=this._events[n],f=arguments.length,l,d;if(i.fn){switch(i.once&&this.removeListener(s,i.fn,void 0,!0),f){case 1:return i.fn.call(i.context),!0;case 2:return i.fn.call(i.context,a),!0;case 3:return i.fn.call(i.context,a,r),!0;case 4:return i.fn.call(i.context,a,r,t),!0;case 5:return i.fn.call(i.context,a,r,t,e),!0;case 6:return i.fn.call(i.context,a,r,t,e,o),!0}for(d=1,l=new Array(f-1);d<f;d++)l[d-1]=arguments[d];i.fn.apply(i.context,l)}else{var m=i.length,c;for(d=0;d<m;d++)switch(i[d].once&&this.removeListener(s,i[d].fn,void 0,!0),f){case 1:i[d].fn.call(i[d].context);break;case 2:i[d].fn.call(i[d].context,a);break;case 3:i[d].fn.call(i[d].context,a,r);break;case 4:i[d].fn.call(i[d].context,a,r,t);break;default:if(!l)for(c=1,l=new Array(f-1);c<f;c++)l[c-1]=arguments[c];i[d].fn.apply(i[d].context,l)}}return!0},v.prototype.on=function(s,a,r){var t=new u(a,r||this),e=x?x+s:s;return this._events[e]?this._events[e].fn?this._events[e]=[this._events[e],t]:this._events[e].push(t):(this._events[e]=t,this._eventsCount++),this},v.prototype.once=function(s,a,r){var t=new u(a,r||this,!0),e=x?x+s:s;return this._events[e]?this._events[e].fn?this._events[e]=[this._events[e],t]:this._events[e].push(t):(this._events[e]=t,this._eventsCount++),this},v.prototype.removeListener=function(s,a,r,t){var e=x?x+s:s;if(!this._events[e])return this;if(!a)return--this._eventsCount===0?this._events=new g:delete this._events[e],this;var o=this._events[e];if(o.fn)o.fn===a&&(!t||o.once)&&(!r||o.context===r)&&(--this._eventsCount===0?this._events=new g:delete this._events[e]);else{for(var n=0,i=[],f=o.length;n<f;n++)(o[n].fn!==a||t&&!o[n].once||r&&o[n].context!==r)&&i.push(o[n]);i.length?this._events[e]=i.length===1?i[0]:i:--this._eventsCount===0?this._events=new g:delete this._events[e]}return this},v.prototype.removeAllListeners=function(s){var a;return s?(a=x?x+s:s,this._events[a]&&(--this._eventsCount===0?this._events=new g:delete this._events[a])):(this._events=new g,this._eventsCount=0),this},v.prototype.off=v.prototype.removeListener,v.prototype.addListener=v.prototype.on,v.prototype.setMaxListeners=function(){return this},v.prefixed=x,v.EventEmitter=v,typeof O<"u"&&(O.exports=v)},{}],4:[function(_,O,p){/**
 * isMobile.js v0.4.1
 *
 * A simple library to detect Apple phones and tablets,
 * Android phones and tablets, other mobile devices (like blackberry, mini-opera and windows phone),
 * and any kind of seven inch device, via user agent sniffing.
 *
 * @author: Kai Mallea (kmallea@gmail.com)
 *
 * @license: http://creativecommons.org/publicdomain/zero/1.0/
 */(function(w){var x=/iPhone/i,g=/iPod/i,u=/iPad/i,v=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,h=/Android/i,s=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,a=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,r=/Windows Phone/i,t=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,e=/BlackBerry/i,o=/BB10/i,n=/Opera Mini/i,i=/(CriOS|Chrome)(?=.*\bMobile\b)/i,f=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,l=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),d=function(b,y){return b.test(y)},m=function(b){var y=b||navigator.userAgent,T=y.split("[FBAN");if(typeof T[1]<"u"&&(y=T[0]),T=y.split("Twitter"),typeof T[1]<"u"&&(y=T[0]),this.apple={phone:d(x,y),ipod:d(g,y),tablet:!d(x,y)&&d(u,y),device:d(x,y)||d(g,y)||d(u,y)},this.amazon={phone:d(s,y),tablet:!d(s,y)&&d(a,y),device:d(s,y)||d(a,y)},this.android={phone:d(s,y)||d(v,y),tablet:!d(s,y)&&!d(v,y)&&(d(a,y)||d(h,y)),device:d(s,y)||d(a,y)||d(v,y)||d(h,y)},this.windows={phone:d(r,y),tablet:d(t,y),device:d(r,y)||d(t,y)},this.other={blackberry:d(e,y),blackberry10:d(o,y),opera:d(n,y),firefox:d(f,y),chrome:d(i,y),device:d(e,y)||d(o,y)||d(n,y)||d(f,y)||d(i,y)},this.seven_inch=d(l,y),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,typeof window>"u")return this},c=function(){var b=new m;return b.Class=m,b};typeof O<"u"&&O.exports&&typeof window>"u"?O.exports=m:typeof O<"u"&&O.exports&&typeof window<"u"?O.exports=c():w.isMobile=c()})(this)},{}],5:[function(_,O,p){Object.defineProperty(p,"__esModule",{value:!0});var w=function(){function h(s,a){for(var r=0;r<a.length;r++){var t=a[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(s,t.key,t)}}return function(s,a,r){return a&&h(s.prototype,a),r&&h(s,r),s}}();function x(h,s){if(!(h instanceof s))throw new TypeError("Cannot call a class as a function")}var g=function(){function h(s,a,r){a===void 0&&(a=!1),x(this,h),this._fn=s,this._once=a,this._thisArg=r,this._next=this._prev=this._owner=null}return w(h,[{key:"detach",value:function(){return this._owner===null?!1:(this._owner.detach(this),!0)}}]),h}();function u(h,s){return h._head?(h._tail._next=s,s._prev=h._tail,h._tail=s):(h._head=s,h._tail=s),s._owner=h,s}var v=function(){function h(){x(this,h),this._head=this._tail=void 0}return w(h,[{key:"handlers",value:function(){var a=arguments.length<=0||arguments[0]===void 0?!1:arguments[0],r=this._head;if(a)return!!r;for(var t=[];r;)t.push(r),r=r._next;return t}},{key:"has",value:function(a){if(!(a instanceof g))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return a._owner===this}},{key:"dispatch",value:function(){var a=this._head;if(!a)return!1;for(;a;)a._once&&this.detach(a),a._fn.apply(a._thisArg,arguments),a=a._next;return!0}},{key:"add",value:function(a){var r=arguments.length<=1||arguments[1]===void 0?null:arguments[1];if(typeof a!="function")throw new Error("MiniSignal#add(): First arg must be a Function.");return u(this,new g(a,!1,r))}},{key:"once",value:function(a){var r=arguments.length<=1||arguments[1]===void 0?null:arguments[1];if(typeof a!="function")throw new Error("MiniSignal#once(): First arg must be a Function.");return u(this,new g(a,!0,r))}},{key:"detach",value:function(a){if(!(a instanceof g))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return a._owner!==this?this:(a._prev&&(a._prev._next=a._next),a._next&&(a._next._prev=a._prev),a===this._head?(this._head=a._next,a._next===null&&(this._tail=null)):a===this._tail&&(this._tail=a._prev,this._tail._next=null),a._owner=null,this)}},{key:"detachAll",value:function(){var a=this._head;if(!a)return this;for(this._head=this._tail=null;a;)a._owner=null,a=a._next;return this}}]),h}();v.MiniSignalBinding=g,p.default=v,O.exports=p.default},{}],6:[function(_,O,p){var w=Object.getOwnPropertySymbols,x=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable;function u(h){if(h==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(h)}function v(){try{if(!Object.assign)return!1;var h=new String("abc");if(h[5]="de",Object.getOwnPropertyNames(h)[0]==="5")return!1;for(var s={},a=0;a<10;a++)s["_"+String.fromCharCode(a)]=a;var r=Object.getOwnPropertyNames(s).map(function(e){return s[e]});if(r.join("")!=="0123456789")return!1;var t={};return"abcdefghijklmnopqrst".split("").forEach(function(e){t[e]=e}),Object.keys(Object.assign({},t)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}O.exports=v()?Object.assign:function(h,s){for(var a,r=u(h),t,e=1;e<arguments.length;e++){a=Object(arguments[e]);for(var o in a)x.call(a,o)&&(r[o]=a[o]);if(w){t=w(a);for(var n=0;n<t.length;n++)g.call(a,t[n])&&(r[t[n]]=a[t[n]])}}return r}},{}],7:[function(_,O,p){O.exports=function(x,g){g=g||{};for(var u={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},v=u.parser[g.strictMode?"strict":"loose"].exec(x),h={},s=14;s--;)h[u.key[s]]=v[s]||"";return h[u.q.name]={},h[u.key[12]].replace(u.q.parser,function(a,r,t){r&&(h[u.q.name][r]=t)}),h}},{}],8:[function(_,O,p){(function(w){function x(s,a){for(var r=0,t=s.length-1;t>=0;t--){var e=s[t];e==="."?s.splice(t,1):e===".."?(s.splice(t,1),r++):r&&(s.splice(t,1),r--)}if(a)for(;r--;r)s.unshift("..");return s}var g=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,u=function(s){return g.exec(s).slice(1)};p.resolve=function(){for(var s="",a=!1,r=arguments.length-1;r>=-1&&!a;r--){var t=r>=0?arguments[r]:w.cwd();if(typeof t!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!t)continue;s=t+"/"+s,a=t.charAt(0)==="/"}return s=x(v(s.split("/"),function(e){return!!e}),!a).join("/"),(a?"/":"")+s||"."},p.normalize=function(s){var a=p.isAbsolute(s),r=h(s,-1)==="/";return s=x(v(s.split("/"),function(t){return!!t}),!a).join("/"),!s&&!a&&(s="."),s&&r&&(s+="/"),(a?"/":"")+s},p.isAbsolute=function(s){return s.charAt(0)==="/"},p.join=function(){var s=Array.prototype.slice.call(arguments,0);return p.normalize(v(s,function(a,r){if(typeof a!="string")throw new TypeError("Arguments to path.join must be strings");return a}).join("/"))},p.relative=function(s,a){s=p.resolve(s).substr(1),a=p.resolve(a).substr(1);function r(l){for(var d=0;d<l.length&&l[d]==="";d++);for(var m=l.length-1;m>=0&&l[m]==="";m--);return d>m?[]:l.slice(d,m-d+1)}for(var t=r(s.split("/")),e=r(a.split("/")),o=Math.min(t.length,e.length),n=o,i=0;i<o;i++)if(t[i]!==e[i]){n=i;break}for(var f=[],i=n;i<t.length;i++)f.push("..");return f=f.concat(e.slice(n)),f.join("/")},p.sep="/",p.delimiter=":",p.dirname=function(s){var a=u(s),r=a[0],t=a[1];return!r&&!t?".":(t&&(t=t.substr(0,t.length-1)),r+t)},p.basename=function(s,a){var r=u(s)[2];return a&&r.substr(-1*a.length)===a&&(r=r.substr(0,r.length-a.length)),r},p.extname=function(s){return u(s)[3]};function v(s,a){if(s.filter)return s.filter(a);for(var r=[],t=0;t<s.length;t++)a(s[t],t,s)&&r.push(s[t]);return r}var h="ab".substr(-1)==="b"?function(s,a,r){return s.substr(a,r)}:function(s,a,r){return a<0&&(a=s.length+a),s.substr(a,r)}}).call(this,_("_process"))},{_process:26}],9:[function(_,O,p){var w=new ArrayBuffer(0),x=function(g,u,v,h){this.gl=g,this.buffer=g.createBuffer(),this.type=u||g.ARRAY_BUFFER,this.drawType=h||g.STATIC_DRAW,this.data=w,v&&this.upload(v),this._updateID=0};x.prototype.upload=function(g,u,v){v||this.bind();var h=this.gl;g=g||this.data,u=u||0,this.data.byteLength>=g.byteLength?h.bufferSubData(this.type,u,g):h.bufferData(this.type,g,this.drawType),this.data=g},x.prototype.bind=function(){var g=this.gl;g.bindBuffer(this.type,this.buffer)},x.createVertexBuffer=function(g,u,v){return new x(g,g.ARRAY_BUFFER,u,v)},x.createIndexBuffer=function(g,u,v){return new x(g,g.ELEMENT_ARRAY_BUFFER,u,v)},x.create=function(g,u,v,h){return new x(g,u,v,h)},x.prototype.destroy=function(){this.gl.deleteBuffer(this.buffer)},O.exports=x},{}],10:[function(_,O,p){var w=_("./GLTexture"),x=function(g,u,v){this.gl=g,this.framebuffer=g.createFramebuffer(),this.stencil=null,this.texture=null,this.width=u||100,this.height=v||100};x.prototype.enableTexture=function(g){var u=this.gl;this.texture=g||new w(u),this.texture.bind(),this.bind(),u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,this.texture.texture,0)},x.prototype.enableStencil=function(){if(!this.stencil){var g=this.gl;this.stencil=g.createRenderbuffer(),g.bindRenderbuffer(g.RENDERBUFFER,this.stencil),g.framebufferRenderbuffer(g.FRAMEBUFFER,g.DEPTH_STENCIL_ATTACHMENT,g.RENDERBUFFER,this.stencil),g.renderbufferStorage(g.RENDERBUFFER,g.DEPTH_STENCIL,this.width,this.height)}},x.prototype.clear=function(g,u,v,h){this.bind();var s=this.gl;s.clearColor(g,u,v,h),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT)},x.prototype.bind=function(){var g=this.gl;g.bindFramebuffer(g.FRAMEBUFFER,this.framebuffer)},x.prototype.unbind=function(){var g=this.gl;g.bindFramebuffer(g.FRAMEBUFFER,null)},x.prototype.resize=function(g,u){var v=this.gl;this.width=g,this.height=u,this.texture&&this.texture.uploadData(null,g,u),this.stencil&&(v.bindRenderbuffer(v.RENDERBUFFER,this.stencil),v.renderbufferStorage(v.RENDERBUFFER,v.DEPTH_STENCIL,g,u))},x.prototype.destroy=function(){var g=this.gl;this.texture&&this.texture.destroy(),g.deleteFramebuffer(this.framebuffer),this.gl=null,this.stencil=null,this.texture=null},x.createRGBA=function(g,u,v,h){var s=w.fromData(g,null,u,v);s.enableNearestScaling(),s.enableWrapClamp();var a=new x(g,u,v);return a.enableTexture(s),a.unbind(),a},x.createFloat32=function(g,u,v,h){var s=new w.fromData(g,h,u,v);s.enableNearestScaling(),s.enableWrapClamp();var a=new x(g,u,v);return a.enableTexture(s),a.unbind(),a},O.exports=x},{"./GLTexture":12}],11:[function(_,O,p){var w=_("./shader/compileProgram"),x=_("./shader/extractAttributes"),g=_("./shader/extractUniforms"),u=_("./shader/setPrecision"),v=_("./shader/generateUniformAccessObject"),h=function(s,a,r,t,e){this.gl=s,t&&(a=u(a,t),r=u(r,t)),this.program=w(s,a,r,e),this.attributes=x(s,this.program),this.uniformData=g(s,this.program),this.uniforms=v(s,this.uniformData)};h.prototype.bind=function(){return this.gl.useProgram(this.program),this},h.prototype.destroy=function(){this.attributes=null,this.uniformData=null,this.uniforms=null;var s=this.gl;s.deleteProgram(this.program)},O.exports=h},{"./shader/compileProgram":17,"./shader/extractAttributes":19,"./shader/extractUniforms":20,"./shader/generateUniformAccessObject":21,"./shader/setPrecision":25}],12:[function(_,O,p){var w=function(g,u,v,h,s){this.gl=g,this.texture=g.createTexture(),this.mipmap=!1,this.premultiplyAlpha=!1,this.width=u||-1,this.height=v||-1,this.format=h||g.RGBA,this.type=s||g.UNSIGNED_BYTE};w.prototype.upload=function(g){this.bind();var u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);var v=g.videoWidth||g.width,h=g.videoHeight||g.height;h!==this.height||v!==this.width?u.texImage2D(u.TEXTURE_2D,0,this.format,this.format,this.type,g):u.texSubImage2D(u.TEXTURE_2D,0,0,0,this.format,this.type,g),this.width=v,this.height=h};var x=!1;w.prototype.uploadData=function(g,u,v){this.bind();var h=this.gl;if(g instanceof Float32Array){if(!x){var s=h.getExtension("OES_texture_float");if(s)x=!0;else throw new Error("floating point textures not available")}this.type=h.FLOAT}else this.type=this.type||h.UNSIGNED_BYTE;h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),u!==this.width||v!==this.height?h.texImage2D(h.TEXTURE_2D,0,this.format,u,v,0,this.format,this.type,g||null):h.texSubImage2D(h.TEXTURE_2D,0,0,0,u,v,this.format,this.type,g||null),this.width=u,this.height=v},w.prototype.bind=function(g){var u=this.gl;g!==void 0&&u.activeTexture(u.TEXTURE0+g),u.bindTexture(u.TEXTURE_2D,this.texture)},w.prototype.unbind=function(){var g=this.gl;g.bindTexture(g.TEXTURE_2D,null)},w.prototype.minFilter=function(g){var u=this.gl;this.bind(),this.mipmap?u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,g?u.LINEAR_MIPMAP_LINEAR:u.NEAREST_MIPMAP_NEAREST):u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,g?u.LINEAR:u.NEAREST)},w.prototype.magFilter=function(g){var u=this.gl;this.bind(),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,g?u.LINEAR:u.NEAREST)},w.prototype.enableMipmap=function(){var g=this.gl;this.bind(),this.mipmap=!0,g.generateMipmap(g.TEXTURE_2D)},w.prototype.enableLinearScaling=function(){this.minFilter(!0),this.magFilter(!0)},w.prototype.enableNearestScaling=function(){this.minFilter(!1),this.magFilter(!1)},w.prototype.enableWrapClamp=function(){var g=this.gl;this.bind(),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE)},w.prototype.enableWrapRepeat=function(){var g=this.gl;this.bind(),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.REPEAT),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.REPEAT)},w.prototype.enableWrapMirrorRepeat=function(){var g=this.gl;this.bind(),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.MIRRORED_REPEAT),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.MIRRORED_REPEAT)},w.prototype.destroy=function(){var g=this.gl;g.deleteTexture(this.texture)},w.fromSource=function(g,u,v){var h=new w(g);return h.premultiplyAlpha=v||!1,h.upload(u),h},w.fromData=function(g,u,v,h){var s=new w(g);return s.uploadData(u,v,h),s},O.exports=w},{}],13:[function(_,O,p){var w=_("./setVertexAttribArrays");function x(g,u){if(this.nativeVaoExtension=null,x.FORCE_NATIVE||(this.nativeVaoExtension=g.getExtension("OES_vertex_array_object")||g.getExtension("MOZ_OES_vertex_array_object")||g.getExtension("WEBKIT_OES_vertex_array_object")),this.nativeState=u,this.nativeVaoExtension){this.nativeVao=this.nativeVaoExtension.createVertexArrayOES();var v=g.getParameter(g.MAX_VERTEX_ATTRIBS);this.nativeState={tempAttribState:new Array(v),attribState:new Array(v)}}this.gl=g,this.attributes=[],this.indexBuffer=null,this.dirty=!1}x.prototype.constructor=x,O.exports=x,x.FORCE_NATIVE=!1,x.prototype.bind=function(){if(this.nativeVao){if(this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.dirty)return this.dirty=!1,this.activate(),this;this.indexBuffer&&this.indexBuffer.bind()}else this.activate();return this},x.prototype.unbind=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(null),this},x.prototype.activate=function(){for(var g=this.gl,u=null,v=0;v<this.attributes.length;v++){var h=this.attributes[v];u!==h.buffer&&(h.buffer.bind(),u=h.buffer),g.vertexAttribPointer(h.attribute.location,h.attribute.size,h.type||g.FLOAT,h.normalized||!1,h.stride||0,h.start||0)}return w(g,this.attributes,this.nativeState),this.indexBuffer&&this.indexBuffer.bind(),this},x.prototype.addAttribute=function(g,u,v,h,s,a){return this.attributes.push({buffer:g,attribute:u,location:u.location,type:v||this.gl.FLOAT,normalized:h||!1,stride:s||0,start:a||0}),this.dirty=!0,this},x.prototype.addIndex=function(g){return this.indexBuffer=g,this.dirty=!0,this},x.prototype.clear=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.attributes.length=0,this.indexBuffer=null,this},x.prototype.draw=function(g,u,v){var h=this.gl;return this.indexBuffer?h.drawElements(g,u||this.indexBuffer.data.length,h.UNSIGNED_SHORT,(v||0)*2):h.drawArrays(g,v,u||this.getSize()),this},x.prototype.destroy=function(){this.gl=null,this.indexBuffer=null,this.attributes=null,this.nativeState=null,this.nativeVao&&this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao),this.nativeVaoExtension=null,this.nativeVao=null},x.prototype.getSize=function(){var g=this.attributes[0];return g.buffer.data.length/(g.stride/4||g.attribute.size)}},{"./setVertexAttribArrays":16}],14:[function(_,O,p){var w=function(x,g){var u=x.getContext("webgl",g)||x.getContext("experimental-webgl",g);if(!u)throw new Error("This browser does not support webGL. Try using the canvas renderer");return u};O.exports=w},{}],15:[function(_,O,p){var w={createContext:_("./createContext"),setVertexAttribArrays:_("./setVertexAttribArrays"),GLBuffer:_("./GLBuffer"),GLFramebuffer:_("./GLFramebuffer"),GLShader:_("./GLShader"),GLTexture:_("./GLTexture"),VertexArrayObject:_("./VertexArrayObject"),shader:_("./shader")};typeof O<"u"&&O.exports&&(O.exports=w),typeof window<"u"&&(window.PIXI=window.PIXI||{},window.PIXI.glCore=w)},{"./GLBuffer":9,"./GLFramebuffer":10,"./GLShader":11,"./GLTexture":12,"./VertexArrayObject":13,"./createContext":14,"./setVertexAttribArrays":16,"./shader":22}],16:[function(_,O,p){var w=function(x,g,u){var v;if(u){var h=u.tempAttribState,s=u.attribState;for(v=0;v<h.length;v++)h[v]=!1;for(v=0;v<g.length;v++)h[g[v].attribute.location]=!0;for(v=0;v<s.length;v++)s[v]!==h[v]&&(s[v]=h[v],u.attribState[v]?x.enableVertexAttribArray(v):x.disableVertexAttribArray(v))}else for(v=0;v<g.length;v++){var a=g[v];x.enableVertexAttribArray(a.attribute.location)}};O.exports=w},{}],17:[function(_,O,p){var w=function(g,u,v,h){var s=x(g,g.VERTEX_SHADER,u),a=x(g,g.FRAGMENT_SHADER,v),r=g.createProgram();if(g.attachShader(r,s),g.attachShader(r,a),h)for(var t in h)g.bindAttribLocation(r,h[t],t);return g.linkProgram(r),g.getProgramParameter(r,g.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",g.getProgramParameter(r,g.VALIDATE_STATUS)),console.error("gl.getError()",g.getError()),g.getProgramInfoLog(r)!==""&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",g.getProgramInfoLog(r)),g.deleteProgram(r),r=null),g.deleteShader(s),g.deleteShader(a),r},x=function(g,u,v){var h=g.createShader(u);return g.shaderSource(h,v),g.compileShader(h),g.getShaderParameter(h,g.COMPILE_STATUS)?h:(console.log(g.getShaderInfoLog(h)),null)};O.exports=w},{}],18:[function(_,O,p){var w=function(g,u){switch(g){case"float":return 0;case"vec2":return new Float32Array(2*u);case"vec3":return new Float32Array(3*u);case"vec4":return new Float32Array(4*u);case"int":case"sampler2D":return 0;case"ivec2":return new Int32Array(2*u);case"ivec3":return new Int32Array(3*u);case"ivec4":return new Int32Array(4*u);case"bool":return!1;case"bvec2":return x(2*u);case"bvec3":return x(3*u);case"bvec4":return x(4*u);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}},x=function(g){for(var u=new Array(g),v=0;v<u.length;v++)u[v]=!1;return u};O.exports=w},{}],19:[function(_,O,p){var w=_("./mapType"),x=_("./mapSize"),g=function(v,h){for(var s={},a=v.getProgramParameter(h,v.ACTIVE_ATTRIBUTES),r=0;r<a;r++){var t=v.getActiveAttrib(h,r),e=w(v,t.type);s[t.name]={type:e,size:x(e),location:v.getAttribLocation(h,t.name),pointer:u}}return s},u=function(v,h,s,a){gl.vertexAttribPointer(this.location,this.size,v||gl.FLOAT,h||!1,s||0,a||0)};O.exports=g},{"./mapSize":23,"./mapType":24}],20:[function(_,O,p){var w=_("./mapType"),x=_("./defaultValue"),g=function(u,v){for(var h={},s=u.getProgramParameter(v,u.ACTIVE_UNIFORMS),a=0;a<s;a++){var r=u.getActiveUniform(v,a),t=r.name.replace(/\[.*?\]/,""),e=w(u,r.type);h[t]={type:e,size:r.size,location:u.getUniformLocation(v,t),value:x(e,r.size)}}return h};O.exports=g},{"./defaultValue":18,"./mapType":24}],21:[function(_,O,p){var w=function(s,a){var r={data:{}};r.gl=s;for(var t=Object.keys(a),e=0;e<t.length;e++){var o=t[e],n=o.split("."),i=n[n.length-1],f=h(n,r),l=a[o];f.data[i]=l,f.gl=s,Object.defineProperty(f,i,{get:x(i),set:v(i,l)})}return r},x=function(s){return function(){return this.data[s].value}},g={float:function(a,r,t){a.uniform1f(r,t)},vec2:function(a,r,t){a.uniform2f(r,t[0],t[1])},vec3:function(a,r,t){a.uniform3f(r,t[0],t[1],t[2])},vec4:function(a,r,t){a.uniform4f(r,t[0],t[1],t[2],t[3])},int:function(a,r,t){a.uniform1i(r,t)},ivec2:function(a,r,t){a.uniform2i(r,t[0],t[1])},ivec3:function(a,r,t){a.uniform3i(r,t[0],t[1],t[2])},ivec4:function(a,r,t){a.uniform4i(r,t[0],t[1],t[2],t[3])},bool:function(a,r,t){a.uniform1i(r,t)},bvec2:function(a,r,t){a.uniform2i(r,t[0],t[1])},bvec3:function(a,r,t){a.uniform3i(r,t[0],t[1],t[2])},bvec4:function(a,r,t){a.uniform4i(r,t[0],t[1],t[2],t[3])},mat2:function(a,r,t){a.uniformMatrix2fv(r,!1,t)},mat3:function(a,r,t){a.uniformMatrix3fv(r,!1,t)},mat4:function(a,r,t){a.uniformMatrix4fv(r,!1,t)},sampler2D:function(a,r,t){a.uniform1i(r,t)}},u={float:function(a,r,t){a.uniform1fv(r,t)},vec2:function(a,r,t){a.uniform2fv(r,t)},vec3:function(a,r,t){a.uniform3fv(r,t)},vec4:function(a,r,t){a.uniform4fv(r,t)},int:function(a,r,t){a.uniform1iv(r,t)},ivec2:function(a,r,t){a.uniform2iv(r,t)},ivec3:function(a,r,t){a.uniform3iv(r,t)},ivec4:function(a,r,t){a.uniform4iv(r,t)},bool:function(a,r,t){a.uniform1iv(r,t)},bvec2:function(a,r,t){a.uniform2iv(r,t)},bvec3:function(a,r,t){a.uniform3iv(r,t)},bvec4:function(a,r,t){a.uniform4iv(r,t)},sampler2D:function(a,r,t){a.uniform1iv(r,t)}};function v(s,a){return function(r){this.data[s].value=r;var t=this.data[s].location;a.size===1?g[a.type](this.gl,t,r):u[a.type](this.gl,t,r)}}function h(s,a){for(var r=a,t=0;t<s.length-1;t++){var e=r[s[t]]||{data:{}};r[s[t]]=e,r=e}return r}O.exports=w},{}],22:[function(_,O,p){O.exports={compileProgram:_("./compileProgram"),defaultValue:_("./defaultValue"),extractAttributes:_("./extractAttributes"),extractUniforms:_("./extractUniforms"),generateUniformAccessObject:_("./generateUniformAccessObject"),setPrecision:_("./setPrecision"),mapSize:_("./mapSize"),mapType:_("./mapType")}},{"./compileProgram":17,"./defaultValue":18,"./extractAttributes":19,"./extractUniforms":20,"./generateUniformAccessObject":21,"./mapSize":23,"./mapType":24,"./setPrecision":25}],23:[function(_,O,p){var w=function(g){return x[g]},x={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};O.exports=w},{}],24:[function(_,O,p){var w=function(u,v){if(!x){var h=Object.keys(g);x={};for(var s=0;s<h.length;++s){var a=h[s];x[u[a]]=g[a]}}return x[v]},x=null,g={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D"};O.exports=w},{}],25:[function(_,O,p){var w=function(x,g){return x.substring(0,9)!=="precision"?"precision "+g+` float;
`+x:x};O.exports=w},{}],26:[function(_,O,p){var w=O.exports={},x,g;function u(){throw new Error("setTimeout has not been defined")}function v(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?x=setTimeout:x=u}catch{x=u}try{typeof clearTimeout=="function"?g=clearTimeout:g=v}catch{g=v}})();function h(l){if(x===setTimeout)return setTimeout(l,0);if((x===u||!x)&&setTimeout)return x=setTimeout,setTimeout(l,0);try{return x(l,0)}catch{try{return x.call(null,l,0)}catch{return x.call(this,l,0)}}}function s(l){if(g===clearTimeout)return clearTimeout(l);if((g===v||!g)&&clearTimeout)return g=clearTimeout,clearTimeout(l);try{return g(l)}catch{try{return g.call(null,l)}catch{return g.call(this,l)}}}var a=[],r=!1,t,e=-1;function o(){!r||!t||(r=!1,t.length?a=t.concat(a):e=-1,a.length&&n())}function n(){if(!r){var l=h(o);r=!0;for(var d=a.length;d;){for(t=a,a=[];++e<d;)t&&t[e].run();e=-1,d=a.length}t=null,r=!1,s(l)}}w.nextTick=function(l){var d=new Array(arguments.length-1);if(arguments.length>1)for(var m=1;m<arguments.length;m++)d[m-1]=arguments[m];a.push(new i(l,d)),a.length===1&&!r&&h(n)};function i(l,d){this.fun=l,this.array=d}i.prototype.run=function(){this.fun.apply(null,this.array)},w.title="browser",w.browser=!0,w.env={},w.argv=[],w.version="",w.versions={};function f(){}w.on=f,w.addListener=f,w.once=f,w.off=f,w.removeListener=f,w.removeAllListeners=f,w.emit=f,w.prependListener=f,w.prependOnceListener=f,w.listeners=function(l){return[]},w.binding=function(l){throw new Error("process.binding is not supported")},w.cwd=function(){return"/"},w.chdir=function(l){throw new Error("process.chdir is not supported")},w.umask=function(){return 0}},{}],27:[function(_,O,p){(function(w){(function(x){var g=typeof p=="object"&&p&&!p.nodeType&&p,u=typeof O=="object"&&O&&!O.nodeType&&O,v=typeof w=="object"&&w;(v.global===v||v.window===v||v.self===v)&&(x=v);var h,s=2147483647,a=36,r=1,t=26,e=38,o=700,n=72,i=128,f="-",l=/^xn--/,d=/[^\x20-\x7E]/,m=/[\x2E\u3002\uFF0E\uFF61]/g,c={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},b=a-r,y=Math.floor,T=String.fromCharCode,E;function R(B){throw new RangeError(c[B])}function S(B,X){for(var W=B.length,Z=[];W--;)Z[W]=X(B[W]);return Z}function C(B,X){var W=B.split("@"),Z="";W.length>1&&(Z=W[0]+"@",B=W[1]),B=B.replace(m,".");var K=B.split("."),Q=S(K,X).join(".");return Z+Q}function A(B){for(var X=[],W=0,Z=B.length,K,Q;W<Z;)K=B.charCodeAt(W++),K>=55296&&K<=56319&&W<Z?(Q=B.charCodeAt(W++),(Q&64512)==56320?X.push(((K&1023)<<10)+(Q&1023)+65536):(X.push(K),W--)):X.push(K);return X}function k(B){return S(B,function(X){var W="";return X>65535&&(X-=65536,W+=T(X>>>10&1023|55296),X=56320|X&1023),W+=T(X),W}).join("")}function F(B){return B-48<10?B-22:B-65<26?B-65:B-97<26?B-97:a}function M(B,X){return B+22+75*(B<26)-((X!=0)<<5)}function D(B,X,W){var Z=0;for(B=W?y(B/o):B>>1,B+=y(B/X);B>b*t>>1;Z+=a)B=y(B/b);return y(Z+(b+1)*B/(B+e))}function L(B){var X=[],W=B.length,Z,K=0,Q=i,J=n,H,q,$,ie,ne,ae,se,re,ee;for(H=B.lastIndexOf(f),H<0&&(H=0),q=0;q<H;++q)B.charCodeAt(q)>=128&&R("not-basic"),X.push(B.charCodeAt(q));for($=H>0?H+1:0;$<W;){for(ie=K,ne=1,ae=a;$>=W&&R("invalid-input"),se=F(B.charCodeAt($++)),(se>=a||se>y((s-K)/ne))&&R("overflow"),K+=se*ne,re=ae<=J?r:ae>=J+t?t:ae-J,!(se<re);ae+=a)ee=a-re,ne>y(s/ee)&&R("overflow"),ne*=ee;Z=X.length+1,J=D(K-ie,Z,ie==0),y(K/Z)>s-Q&&R("overflow"),Q+=y(K/Z),K%=Z,X.splice(K++,0,Q)}return k(X)}function I(B){var X,W,Z,K,Q,J,H,q,$,ie,ne,ae=[],se,re,ee,ue;for(B=A(B),se=B.length,X=i,W=0,Q=n,J=0;J<se;++J)ne=B[J],ne<128&&ae.push(T(ne));for(Z=K=ae.length,K&&ae.push(f);Z<se;){for(H=s,J=0;J<se;++J)ne=B[J],ne>=X&&ne<H&&(H=ne);for(re=Z+1,H-X>y((s-W)/re)&&R("overflow"),W+=(H-X)*re,X=H,J=0;J<se;++J)if(ne=B[J],ne<X&&++W>s&&R("overflow"),ne==X){for(q=W,$=a;ie=$<=Q?r:$>=Q+t?t:$-Q,!(q<ie);$+=a)ue=q-ie,ee=a-ie,ae.push(T(M(ie+ue%ee,0))),q=y(ue/ee);ae.push(T(M(q,0))),Q=D(W,re,Z==K),W=0,++Z}++W,++X}return ae.join("")}function N(B){return C(B,function(X){return l.test(X)?L(X.slice(4).toLowerCase()):X})}function U(B){return C(B,function(X){return d.test(X)?"xn--"+I(X):X})}if(h={version:"1.4.1",ucs2:{decode:A,encode:k},decode:L,encode:I,toASCII:U,toUnicode:N},g&&u)if(O.exports==g)u.exports=h;else for(E in h)h.hasOwnProperty(E)&&(g[E]=h[E]);else x.punycode=h})(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],28:[function(_,O,p){function w(g,u){return Object.prototype.hasOwnProperty.call(g,u)}O.exports=function(g,u,v,h){u=u||"&",v=v||"=";var s={};if(typeof g!="string"||g.length===0)return s;var a=/\+/g;g=g.split(u);var r=1e3;h&&typeof h.maxKeys=="number"&&(r=h.maxKeys);var t=g.length;r>0&&t>r&&(t=r);for(var e=0;e<t;++e){var o=g[e].replace(a,"%20"),n=o.indexOf(v),i,f,l,d;n>=0?(i=o.substr(0,n),f=o.substr(n+1)):(i=o,f=""),l=decodeURIComponent(i),d=decodeURIComponent(f),w(s,l)?x(s[l])?s[l].push(d):s[l]=[s[l],d]:s[l]=d}return s};var x=Array.isArray||function(g){return Object.prototype.toString.call(g)==="[object Array]"}},{}],29:[function(_,O,p){var w=function(v){switch(typeof v){case"string":return v;case"boolean":return v?"true":"false";case"number":return isFinite(v)?v:"";default:return""}};O.exports=function(v,h,s,a){return h=h||"&",s=s||"=",v===null&&(v=void 0),typeof v=="object"?g(u(v),function(r){var t=encodeURIComponent(w(r))+s;return x(v[r])?g(v[r],function(e){return t+encodeURIComponent(w(e))}).join(h):t+encodeURIComponent(w(v[r]))}).join(h):a?encodeURIComponent(w(a))+s+encodeURIComponent(w(v)):""};var x=Array.isArray||function(v){return Object.prototype.toString.call(v)==="[object Array]"};function g(v,h){if(v.map)return v.map(h);for(var s=[],a=0;a<v.length;a++)s.push(h(v[a],a));return s}var u=Object.keys||function(v){var h=[];for(var s in v)Object.prototype.hasOwnProperty.call(v,s)&&h.push(s);return h}},{}],30:[function(_,O,p){p.decode=p.parse=_("./decode"),p.encode=p.stringify=_("./encode")},{"./decode":28,"./encode":29}],31:[function(_,O,p){O.exports=function(x,g,u){var v,h=x.length;if(!(g>=h||u===0)){u=g+u>h?h-g:u;var s=h-u;for(v=g;v<s;++v)x[v]=x[v+u];x.length=s}}},{}],32:[function(_,O,p){p.__esModule=!0;var w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},x=function(){function d(m,c){for(var b=0;b<c.length;b++){var y=c[b];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(m,y.key,y)}}return function(m,c,b){return c&&d(m.prototype,c),b&&d(m,b),m}}(),g=_("mini-signals"),u=o(g),v=_("parse-uri"),h=o(v),s=_("./async"),a=e(s),r=_("./Resource"),t=o(r);function e(d){if(d&&d.__esModule)return d;var m={};if(d!=null)for(var c in d)Object.prototype.hasOwnProperty.call(d,c)&&(m[c]=d[c]);return m.default=d,m}function o(d){return d&&d.__esModule?d:{default:d}}function n(d,m){if(!(d instanceof m))throw new TypeError("Cannot call a class as a function")}var i=100,f=/(#[\w-]+)?$/,l=function(){function d(){var m=this,c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:10;n(this,d),this.baseUrl=c,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(y,T){return m._loadResource(y,T)},this._queue=a.queue(this._boundLoadResource,b),this._queue.pause(),this.resources={},this.onProgress=new u.default,this.onError=new u.default,this.onLoad=new u.default,this.onStart=new u.default,this.onComplete=new u.default}return d.prototype.add=function(c,b,y,T){if(Array.isArray(c)){for(var E=0;E<c.length;++E)this.add(c[E]);return this}if((typeof c>"u"?"undefined":w(c))==="object"&&(T=b||c.callback||c.onComplete,y=c,b=c.url,c=c.name||c.key||c.url),typeof b!="string"&&(T=y,y=b,b=c),typeof b!="string")throw new Error("No url passed to add resource to loader.");if(typeof y=="function"&&(T=y,y=null),this.loading&&(!y||!y.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[c])throw new Error('Resource named "'+c+'" already exists.');if(b=this._prepareUrl(b),this.resources[c]=new t.default(c,b,y),typeof T=="function"&&this.resources[c].onAfterMiddleware.once(T),this.loading){for(var R=y.parentResource,S=[],C=0;C<R.children.length;++C)R.children[C].isComplete||S.push(R.children[C]);var A=R.progressChunk*(S.length+1),k=A/(S.length+2);R.children.push(this.resources[c]),R.progressChunk=k;for(var F=0;F<S.length;++F)S[F].progressChunk=k;this.resources[c].progressChunk=k}return this._queue.push(this.resources[c]),this},d.prototype.pre=function(c){return this._beforeMiddleware.push(c),this},d.prototype.use=function(c){return this._afterMiddleware.push(c),this},d.prototype.reset=function(){this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause();for(var c in this.resources){var b=this.resources[c];b._onLoadBinding&&b._onLoadBinding.detach(),b.isLoading&&b.abort()}return this.resources={},this},d.prototype.load=function(c){if(typeof c=="function"&&this.onComplete.once(c),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var b=this._queue._tasks.length,y=100/b,T=0;T<this._queue._tasks.length;++T)this._queue._tasks[T].data.progressChunk=y;this._onStart(),this._queue.resume()}return this},d.prototype._prepareUrl=function(c){var b=(0,h.default)(c,{strictMode:!0}),y=void 0;if(b.protocol||!b.path||c.indexOf("//")===0?y=c:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&c.charAt(0)!=="/"?y=this.baseUrl+"/"+c:y=this.baseUrl+c,this.defaultQueryString){var T=f.exec(y)[0];y=y.substr(0,y.length-T.length),y.indexOf("?")!==-1?y+="&"+this.defaultQueryString:y+="?"+this.defaultQueryString,y+=T}return y},d.prototype._loadResource=function(c,b){var y=this;c._dequeue=b,a.eachSeries(this._beforeMiddleware,function(T,E){T.call(y,c,function(){E(c.isComplete?{}:null)})},function(){c.isComplete?y._onLoad(c):(c._onLoadBinding=c.onComplete.once(y._onLoad,y),c.load())},!0)},d.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},d.prototype._onComplete=function(){this.progress=i,this.loading=!1,this.onComplete.dispatch(this,this.resources)},d.prototype._onLoad=function(c){var b=this;c._onLoadBinding=null,this._resourcesParsing.push(c),c._dequeue(),a.eachSeries(this._afterMiddleware,function(y,T){y.call(b,c,T)},function(){c.onAfterMiddleware.dispatch(c),b.progress+=c.progressChunk,b.onProgress.dispatch(b,c),c.error?b.onError.dispatch(c.error,b,c):b.onLoad.dispatch(b,c),b._resourcesParsing.splice(b._resourcesParsing.indexOf(c),1),b._queue.idle()&&b._resourcesParsing.length===0&&b._onComplete()},!0)},x(d,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(c){this._queue.concurrency=c}}]),d}();p.default=l},{"./Resource":33,"./async":34,"mini-signals":5,"parse-uri":7}],33:[function(_,O,p){p.__esModule=!0;var w=function(){function c(b,y){for(var T=0;T<y.length;T++){var E=y[T];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(b,E.key,E)}}return function(b,y,T){return y&&c(b.prototype,y),T&&c(b,T),b}}(),x=_("parse-uri"),g=h(x),u=_("mini-signals"),v=h(u);function h(c){return c&&c.__esModule?c:{default:c}}function s(c,b){if(!(c instanceof b))throw new TypeError("Cannot call a class as a function")}var a=!!(window.XDomainRequest&&!("withCredentials"in new XMLHttpRequest)),r=null,t=0,e=200,o=204,n=1223,i=2;function f(){}var l=function(){c.setExtensionLoadType=function(y,T){d(c._loadTypeMap,y,T)},c.setExtensionXhrType=function(y,T){d(c._xhrTypeMap,y,T)};function c(b,y,T){if(s(this,c),typeof b!="string"||typeof y!="string")throw new Error("Both name and url are required for constructing a resource.");T=T||{},this._flags=0,this._setFlag(c.STATUS_FLAGS.DATA_URL,y.indexOf("data:")===0),this.name=b,this.url=y,this.extension=this._getExtension(),this.data=null,this.crossOrigin=T.crossOrigin===!0?"anonymous":T.crossOrigin,this.loadType=T.loadType||this._determineLoadType(),this.xhrType=T.xhrType,this.metadata=T.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=c.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=f,this._onLoadBinding=null,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this),this.onStart=new v.default,this.onProgress=new v.default,this.onComplete=new v.default,this.onAfterMiddleware=new v.default}return c.prototype.complete=function(){if(this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null)),this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(c.STATUS_FLAGS.COMPLETE,!0),this._setFlag(c.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},c.prototype.abort=function(y){if(!this.error){if(this.error=new Error(y),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=c.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this.complete()}},c.prototype.load=function(y){var T=this;if(!this.isLoading){if(this.isComplete){y&&setTimeout(function(){return y(T)},1);return}else y&&this.onComplete.once(y);switch(this._setFlag(c.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),(this.crossOrigin===!1||typeof this.crossOrigin!="string")&&(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case c.LOAD_TYPE.IMAGE:this.type=c.TYPE.IMAGE,this._loadElement("image");break;case c.LOAD_TYPE.AUDIO:this.type=c.TYPE.AUDIO,this._loadSourceElement("audio");break;case c.LOAD_TYPE.VIDEO:this.type=c.TYPE.VIDEO,this._loadSourceElement("video");break;case c.LOAD_TYPE.XHR:default:a&&this.crossOrigin?this._loadXdr():this._loadXhr();break}}},c.prototype._hasFlag=function(y){return!!(this._flags&y)},c.prototype._setFlag=function(y,T){this._flags=T?this._flags|y:this._flags&~y},c.prototype._loadElement=function(y){this.metadata.loadElement?this.data=this.metadata.loadElement:y==="image"&&typeof window.Image<"u"?this.data=new Image:this.data=document.createElement(y),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1)},c.prototype._loadSourceElement=function(y){if(this.metadata.loadElement?this.data=this.metadata.loadElement:y==="audio"&&typeof window.Audio<"u"?this.data=new Audio:this.data=document.createElement(y),this.data===null){this.abort("Unsupported element: "+y);return}if(!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var T=this.metadata.mimeType,E=0;E<this.url.length;++E)this.data.appendChild(this._createSource(y,this.url[E],Array.isArray(T)?T[E]:T));else{var R=this.metadata.mimeType;this.data.appendChild(this._createSource(y,this.url,Array.isArray(R)?R[0]:R))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load()},c.prototype._loadXhr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var y=this.xhr=new XMLHttpRequest;y.open("GET",this.url,!0),this.xhrType===c.XHR_RESPONSE_TYPE.JSON||this.xhrType===c.XHR_RESPONSE_TYPE.DOCUMENT?y.responseType=c.XHR_RESPONSE_TYPE.TEXT:y.responseType=this.xhrType,y.addEventListener("error",this._boundXhrOnError,!1),y.addEventListener("abort",this._boundXhrOnAbort,!1),y.addEventListener("progress",this._boundOnProgress,!1),y.addEventListener("load",this._boundXhrOnLoad,!1),y.send()},c.prototype._loadXdr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var y=this.xhr=new XDomainRequest;y.timeout=5e3,y.onerror=this._boundXhrOnError,y.ontimeout=this._boundXdrOnTimeout,y.onprogress=this._boundOnProgress,y.onload=this._boundXhrOnLoad,y.open("GET",this.url,!0),setTimeout(function(){return y.send()},1)},c.prototype._createSource=function(y,T,E){E||(E=y+"/"+this._getExtension(T));var R=document.createElement("source");return R.src=T,R.type=E,R},c.prototype._onError=function(y){this.abort("Failed to load element using: "+y.target.nodeName)},c.prototype._onProgress=function(y){y&&y.lengthComputable&&this.onProgress.dispatch(this,y.loaded/y.total)},c.prototype._xhrOnError=function(){var y=this.xhr;this.abort(m(y)+" Request failed. Status: "+y.status+', text: "'+y.statusText+'"')},c.prototype._xhrOnAbort=function(){this.abort(m(this.xhr)+" Request was aborted by the user.")},c.prototype._xdrOnTimeout=function(){this.abort(m(this.xhr)+" Request timed out.")},c.prototype._xhrOnLoad=function(){var y=this.xhr,T="",E=typeof y.status>"u"?e:y.status;(y.responseType===""||y.responseType==="text"||typeof y.responseType>"u")&&(T=y.responseText),E===t&&(T.length>0||y.responseType===c.XHR_RESPONSE_TYPE.BUFFER)?E=e:E===n&&(E=o);var R=E/100|0;if(R===i)if(this.xhrType===c.XHR_RESPONSE_TYPE.TEXT)this.data=T,this.type=c.TYPE.TEXT;else if(this.xhrType===c.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(T),this.type=c.TYPE.JSON}catch(A){this.abort("Error trying to parse loaded json: "+A);return}else if(this.xhrType===c.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var S=new DOMParser;this.data=S.parseFromString(T,"text/xml")}else{var C=document.createElement("div");C.innerHTML=T,this.data=C}this.type=c.TYPE.XML}catch(A){this.abort("Error trying to parse loaded xml: "+A);return}else this.data=y.response||T;else{this.abort("["+y.status+"] "+y.statusText+": "+y.responseURL);return}this.complete()},c.prototype._determineCrossOrigin=function(y,T){if(y.indexOf("data:")===0)return"";T=T||window.location,r||(r=document.createElement("a")),r.href=y,y=(0,g.default)(r.href,{strictMode:!0});var E=!y.port&&T.port===""||y.port===T.port,R=y.protocol?y.protocol+":":"";return y.host!==T.hostname||!E||R!==T.protocol?"anonymous":""},c.prototype._determineXhrType=function(){return c._xhrTypeMap[this.extension]||c.XHR_RESPONSE_TYPE.TEXT},c.prototype._determineLoadType=function(){return c._loadTypeMap[this.extension]||c.LOAD_TYPE.XHR},c.prototype._getExtension=function(){var y=this.url,T="";if(this.isDataUrl){var E=y.indexOf("/");T=y.substring(E+1,y.indexOf(";",E))}else{var R=y.indexOf("?"),S=y.indexOf("#"),C=Math.min(R>-1?R:y.length,S>-1?S:y.length);y=y.substring(0,C),T=y.substring(y.lastIndexOf(".")+1)}return T.toLowerCase()},c.prototype._getMimeFromXhrType=function(y){switch(y){case c.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case c.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case c.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case c.XHR_RESPONSE_TYPE.JSON:return"application/json";case c.XHR_RESPONSE_TYPE.DEFAULT:case c.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},w(c,[{key:"isDataUrl",get:function(){return this._hasFlag(c.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(c.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(c.STATUS_FLAGS.LOADING)}}]),c}();p.default=l,l.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},l.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},l.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},l.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},l._loadTypeMap={gif:l.LOAD_TYPE.IMAGE,png:l.LOAD_TYPE.IMAGE,bmp:l.LOAD_TYPE.IMAGE,jpg:l.LOAD_TYPE.IMAGE,jpeg:l.LOAD_TYPE.IMAGE,tif:l.LOAD_TYPE.IMAGE,tiff:l.LOAD_TYPE.IMAGE,webp:l.LOAD_TYPE.IMAGE,tga:l.LOAD_TYPE.IMAGE,svg:l.LOAD_TYPE.IMAGE,"svg+xml":l.LOAD_TYPE.IMAGE,mp3:l.LOAD_TYPE.AUDIO,ogg:l.LOAD_TYPE.AUDIO,wav:l.LOAD_TYPE.AUDIO,mp4:l.LOAD_TYPE.VIDEO,webm:l.LOAD_TYPE.VIDEO},l._xhrTypeMap={xhtml:l.XHR_RESPONSE_TYPE.DOCUMENT,html:l.XHR_RESPONSE_TYPE.DOCUMENT,htm:l.XHR_RESPONSE_TYPE.DOCUMENT,xml:l.XHR_RESPONSE_TYPE.DOCUMENT,tmx:l.XHR_RESPONSE_TYPE.DOCUMENT,svg:l.XHR_RESPONSE_TYPE.DOCUMENT,tsx:l.XHR_RESPONSE_TYPE.DOCUMENT,gif:l.XHR_RESPONSE_TYPE.BLOB,png:l.XHR_RESPONSE_TYPE.BLOB,bmp:l.XHR_RESPONSE_TYPE.BLOB,jpg:l.XHR_RESPONSE_TYPE.BLOB,jpeg:l.XHR_RESPONSE_TYPE.BLOB,tif:l.XHR_RESPONSE_TYPE.BLOB,tiff:l.XHR_RESPONSE_TYPE.BLOB,webp:l.XHR_RESPONSE_TYPE.BLOB,tga:l.XHR_RESPONSE_TYPE.BLOB,json:l.XHR_RESPONSE_TYPE.JSON,text:l.XHR_RESPONSE_TYPE.TEXT,txt:l.XHR_RESPONSE_TYPE.TEXT,ttf:l.XHR_RESPONSE_TYPE.BUFFER,otf:l.XHR_RESPONSE_TYPE.BUFFER},l.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";function d(c,b,y){b&&b.indexOf(".")===0&&(b=b.substring(1)),b&&(c[b]=y)}function m(c){return c.toString().replace("object ","")}},{"mini-signals":5,"parse-uri":7}],34:[function(_,O,p){p.__esModule=!0,p.eachSeries=x,p.queue=u;function w(){}function x(v,h,s,a){var r=0,t=v.length;(function e(o){if(o||r===t){s&&s(o);return}a?setTimeout(function(){h(v[r++],e)},1):h(v[r++],e)})()}function g(v){return function(){if(v===null)throw new Error("Callback was already called.");var s=v;v=null,s.apply(this,arguments)}}function u(v,h){if(h==null)h=1;else if(h===0)throw new Error("Concurrency must not be zero");var s=0,a={_tasks:[],concurrency:h,saturated:w,unsaturated:w,buffer:h/4,empty:w,drain:w,error:w,started:!1,paused:!1,push:function(o,n){r(o,!1,n)},kill:function(){s=0,a.drain=w,a.started=!1,a._tasks=[]},unshift:function(o,n){r(o,!0,n)},process:function(){for(;!a.paused&&s<a.concurrency&&a._tasks.length;){var o=a._tasks.shift();a._tasks.length===0&&a.empty(),s+=1,s===a.concurrency&&a.saturated(),v(o.data,g(t(o)))}},length:function(){return a._tasks.length},running:function(){return s},idle:function(){return a._tasks.length+s===0},pause:function(){a.paused!==!0&&(a.paused=!0)},resume:function(){if(a.paused!==!1){a.paused=!1;for(var o=1;o<=a.concurrency;o++)a.process()}}};function r(e,o,n){if(n!=null&&typeof n!="function")throw new Error("task callback must be a function");if(a.started=!0,e==null&&a.idle()){setTimeout(function(){return a.drain()},1);return}var i={data:e,callback:typeof n=="function"?n:w};o?a._tasks.unshift(i):a._tasks.push(i),setTimeout(function(){return a.process()},1)}function t(e){return function(){s-=1,e.callback.apply(e,arguments),arguments[0]!=null&&a.error(arguments[0],e.data),s<=a.concurrency-a.buffer&&a.unsaturated(),a.idle()&&a.drain(),a.process()}}return a}},{}],35:[function(_,O,p){p.__esModule=!0,p.encodeBinary=x;var w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function x(g){for(var u="",v=0;v<g.length;){for(var h=[0,0,0],s=[0,0,0,0],a=0;a<h.length;++a)v<g.length?h[a]=g.charCodeAt(v++)&255:h[a]=0;s[0]=h[0]>>2,s[1]=(h[0]&3)<<4|h[1]>>4,s[2]=(h[1]&15)<<2|h[2]>>6,s[3]=h[2]&63;var r=v-(g.length-1);switch(r){case 2:s[3]=64,s[2]=64;break;case 1:s[3]=64;break}for(var t=0;t<s.length;++t)u+=w.charAt(s[t])}return u}},{}],36:[function(_,O,p){var w=_("./Loader").default,x=_("./Resource").default,g=_("./async"),u=_("./b64");w.Resource=x,w.async=g,w.base64=u,O.exports=w,O.exports.default=w},{"./Loader":32,"./Resource":33,"./async":34,"./b64":35}],37:[function(_,O,p){p.__esModule=!0;var w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r};p.blobMiddlewareFactory=a;var x=_("../../Resource"),g=h(x),u=_("../../b64"),v=h(u);function h(r){return r&&r.__esModule?r:{default:r}}var s=window.URL||window.webkitURL;function a(){return function(t,e){if(!t.data){e();return}if(t.xhr&&t.xhrType===g.default.XHR_RESPONSE_TYPE.BLOB){if(!window.Blob||typeof t.data=="string"){var o=t.xhr.getResponseHeader("content-type");if(o&&o.indexOf("image")===0){t.data=new Image,t.data.src="data:"+o+";base64,"+v.default.encodeBinary(t.xhr.responseText),t.type=g.default.TYPE.IMAGE,t.data.onload=function(){t.data.onload=null,e()};return}}else if(t.data.type.indexOf("image")===0){var n=function(){var i=s.createObjectURL(t.data);return t.blob=t.data,t.data=new Image,t.data.src=i,t.type=g.default.TYPE.IMAGE,t.data.onload=function(){s.revokeObjectURL(i),t.data.onload=null,e()},{v:void 0}}();if((typeof n>"u"?"undefined":w(n))==="object")return n.v}}e()}}},{"../../Resource":33,"../../b64":35}],38:[function(_,O,p){var w=_("punycode"),x=_("./util");p.parse=c,p.resolve=y,p.resolveObject=T,p.format=b,p.Url=g;function g(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var u=/^([a-z0-9.+-]+:)/i,v=/:[0-9]*$/,h=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,s=["<",">",'"',"`"," ","\r",`
`,"	"],a=["{","}","|","\\","^","`"].concat(s),r=["'"].concat(a),t=["%","/","?",";","#"].concat(r),e=["/","?","#"],o=255,n=/^[+a-z0-9A-Z_-]{0,63}$/,i=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,f={javascript:!0,"javascript:":!0},l={javascript:!0,"javascript:":!0},d={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},m=_("querystring");function c(E,R,S){if(E&&x.isObject(E)&&E instanceof g)return E;var C=new g;return C.parse(E,R,S),C}g.prototype.parse=function(E,R,S){if(!x.isString(E))throw new TypeError("Parameter 'url' must be a string, not "+typeof E);var C=E.indexOf("?"),A=C!==-1&&C<E.indexOf("#")?"?":"#",k=E.split(A),F=/\\/g;k[0]=k[0].replace(F,"/"),E=k.join(A);var M=E;if(M=M.trim(),!S&&E.split("#").length===1){var D=h.exec(M);if(D)return this.path=M,this.href=M,this.pathname=D[1],D[2]?(this.search=D[2],R?this.query=m.parse(this.search.substr(1)):this.query=this.search.substr(1)):R&&(this.search="",this.query={}),this}var L=u.exec(M);if(L){L=L[0];var I=L.toLowerCase();this.protocol=I,M=M.substr(L.length)}if(S||L||M.match(/^\/\/[^@\/]+@[^@\/]+/)){var N=M.substr(0,2)==="//";N&&!(L&&l[L])&&(M=M.substr(2),this.slashes=!0)}if(!l[L]&&(N||L&&!d[L])){for(var U=-1,B=0;B<e.length;B++){var X=M.indexOf(e[B]);X!==-1&&(U===-1||X<U)&&(U=X)}var W,Z;U===-1?Z=M.lastIndexOf("@"):Z=M.lastIndexOf("@",U),Z!==-1&&(W=M.slice(0,Z),M=M.slice(Z+1),this.auth=decodeURIComponent(W)),U=-1;for(var B=0;B<t.length;B++){var X=M.indexOf(t[B]);X!==-1&&(U===-1||X<U)&&(U=X)}U===-1&&(U=M.length),this.host=M.slice(0,U),M=M.slice(U),this.parseHost(),this.hostname=this.hostname||"";var K=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!K)for(var Q=this.hostname.split(/\./),B=0,J=Q.length;B<J;B++){var H=Q[B];if(H&&!H.match(n)){for(var q="",$=0,ie=H.length;$<ie;$++)H.charCodeAt($)>127?q+="x":q+=H[$];if(!q.match(n)){var ne=Q.slice(0,B),ae=Q.slice(B+1),se=H.match(i);se&&(ne.push(se[1]),ae.unshift(se[2])),ae.length&&(M="/"+ae.join(".")+M),this.hostname=ne.join(".");break}}}this.hostname.length>o?this.hostname="":this.hostname=this.hostname.toLowerCase(),K||(this.hostname=w.toASCII(this.hostname));var re=this.port?":"+this.port:"",ee=this.hostname||"";this.host=ee+re,this.href+=this.host,K&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),M[0]!=="/"&&(M="/"+M))}if(!f[I])for(var B=0,J=r.length;B<J;B++){var ue=r[B];if(M.indexOf(ue)!==-1){var he=encodeURIComponent(ue);he===ue&&(he=escape(ue)),M=M.split(ue).join(he)}}var de=M.indexOf("#");de!==-1&&(this.hash=M.substr(de),M=M.slice(0,de));var ce=M.indexOf("?");if(ce!==-1?(this.search=M.substr(ce),this.query=M.substr(ce+1),R&&(this.query=m.parse(this.query)),M=M.slice(0,ce)):R&&(this.search="",this.query={}),M&&(this.pathname=M),d[I]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var re=this.pathname||"",ve=this.search||"";this.path=re+ve}return this.href=this.format(),this};function b(E){return x.isString(E)&&(E=c(E)),E instanceof g?E.format():g.prototype.format.call(E)}g.prototype.format=function(){var E=this.auth||"";E&&(E=encodeURIComponent(E),E=E.replace(/%3A/i,":"),E+="@");var R=this.protocol||"",S=this.pathname||"",C=this.hash||"",A=!1,k="";this.host?A=E+this.host:this.hostname&&(A=E+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(A+=":"+this.port)),this.query&&x.isObject(this.query)&&Object.keys(this.query).length&&(k=m.stringify(this.query));var F=this.search||k&&"?"+k||"";return R&&R.substr(-1)!==":"&&(R+=":"),this.slashes||(!R||d[R])&&A!==!1?(A="//"+(A||""),S&&S.charAt(0)!=="/"&&(S="/"+S)):A||(A=""),C&&C.charAt(0)!=="#"&&(C="#"+C),F&&F.charAt(0)!=="?"&&(F="?"+F),S=S.replace(/[?#]/g,function(M){return encodeURIComponent(M)}),F=F.replace("#","%23"),R+A+S+F+C};function y(E,R){return c(E,!1,!0).resolve(R)}g.prototype.resolve=function(E){return this.resolveObject(c(E,!1,!0)).format()};function T(E,R){return E?c(E,!1,!0).resolveObject(R):R}g.prototype.resolveObject=function(E){if(x.isString(E)){var R=new g;R.parse(E,!1,!0),E=R}for(var S=new g,C=Object.keys(this),A=0;A<C.length;A++){var k=C[A];S[k]=this[k]}if(S.hash=E.hash,E.href==="")return S.href=S.format(),S;if(E.slashes&&!E.protocol){for(var F=Object.keys(E),M=0;M<F.length;M++){var D=F[M];D!=="protocol"&&(S[D]=E[D])}return d[S.protocol]&&S.hostname&&!S.pathname&&(S.path=S.pathname="/"),S.href=S.format(),S}if(E.protocol&&E.protocol!==S.protocol){if(!d[E.protocol]){for(var L=Object.keys(E),I=0;I<L.length;I++){var N=L[I];S[N]=E[N]}return S.href=S.format(),S}if(S.protocol=E.protocol,!E.host&&!l[E.protocol]){for(var J=(E.pathname||"").split("/");J.length&&!(E.host=J.shift()););E.host||(E.host=""),E.hostname||(E.hostname=""),J[0]!==""&&J.unshift(""),J.length<2&&J.unshift(""),S.pathname=J.join("/")}else S.pathname=E.pathname;if(S.search=E.search,S.query=E.query,S.host=E.host||"",S.auth=E.auth,S.hostname=E.hostname||E.host,S.port=E.port,S.pathname||S.search){var U=S.pathname||"",B=S.search||"";S.path=U+B}return S.slashes=S.slashes||E.slashes,S.href=S.format(),S}var X=S.pathname&&S.pathname.charAt(0)==="/",W=E.host||E.pathname&&E.pathname.charAt(0)==="/",Z=W||X||S.host&&E.pathname,K=Z,Q=S.pathname&&S.pathname.split("/")||[],J=E.pathname&&E.pathname.split("/")||[],H=S.protocol&&!d[S.protocol];if(H&&(S.hostname="",S.port=null,S.host&&(Q[0]===""?Q[0]=S.host:Q.unshift(S.host)),S.host="",E.protocol&&(E.hostname=null,E.port=null,E.host&&(J[0]===""?J[0]=E.host:J.unshift(E.host)),E.host=null),Z=Z&&(J[0]===""||Q[0]==="")),W)S.host=E.host||E.host===""?E.host:S.host,S.hostname=E.hostname||E.hostname===""?E.hostname:S.hostname,S.search=E.search,S.query=E.query,Q=J;else if(J.length)Q||(Q=[]),Q.pop(),Q=Q.concat(J),S.search=E.search,S.query=E.query;else if(!x.isNullOrUndefined(E.search)){if(H){S.hostname=S.host=Q.shift();var q=S.host&&S.host.indexOf("@")>0?S.host.split("@"):!1;q&&(S.auth=q.shift(),S.host=S.hostname=q.shift())}return S.search=E.search,S.query=E.query,(!x.isNull(S.pathname)||!x.isNull(S.search))&&(S.path=(S.pathname?S.pathname:"")+(S.search?S.search:"")),S.href=S.format(),S}if(!Q.length)return S.pathname=null,S.search?S.path="/"+S.search:S.path=null,S.href=S.format(),S;for(var $=Q.slice(-1)[0],ie=(S.host||E.host||Q.length>1)&&($==="."||$==="..")||$==="",ne=0,ae=Q.length;ae>=0;ae--)$=Q[ae],$==="."?Q.splice(ae,1):$===".."?(Q.splice(ae,1),ne++):ne&&(Q.splice(ae,1),ne--);if(!Z&&!K)for(;ne--;ne)Q.unshift("..");Z&&Q[0]!==""&&(!Q[0]||Q[0].charAt(0)!=="/")&&Q.unshift(""),ie&&Q.join("/").substr(-1)!=="/"&&Q.push("");var se=Q[0]===""||Q[0]&&Q[0].charAt(0)==="/";if(H){S.hostname=S.host=se?"":Q.length?Q.shift():"";var q=S.host&&S.host.indexOf("@")>0?S.host.split("@"):!1;q&&(S.auth=q.shift(),S.host=S.hostname=q.shift())}return Z=Z||S.host&&Q.length,Z&&!se&&Q.unshift(""),Q.length?S.pathname=Q.join("/"):(S.pathname=null,S.path=null),(!x.isNull(S.pathname)||!x.isNull(S.search))&&(S.path=(S.pathname?S.pathname:"")+(S.search?S.search:"")),S.auth=E.auth||S.auth,S.slashes=S.slashes||E.slashes,S.href=S.format(),S},g.prototype.parseHost=function(){var E=this.host,R=v.exec(E);R&&(R=R[0],R!==":"&&(this.port=R.substr(1)),E=E.substr(0,E.length-R.length)),E&&(this.hostname=E)}},{"./util":39,punycode:27,querystring:30}],39:[function(_,O,p){O.exports={isString:function(w){return typeof w=="string"},isObject:function(w){return typeof w=="object"&&w!==null},isNull:function(w){return w===null},isNullOrUndefined:function(w){return w==null}}},{}],40:[function(_,O,p){p.__esModule=!0;var w=_("../core"),x=a(w),g=_("ismobilejs"),u=s(g),v=_("./accessibleTarget"),h=s(v);function s(b){return b&&b.__esModule?b:{default:b}}function a(b){if(b&&b.__esModule)return b;var y={};if(b!=null)for(var T in b)Object.prototype.hasOwnProperty.call(b,T)&&(y[T]=b[T]);return y.default=b,y}function r(b,y){if(!(b instanceof y))throw new TypeError("Cannot call a class as a function")}x.utils.mixins.delayMixin(x.DisplayObject.prototype,h.default);var t=9,e=100,o=0,n=0,i=2,f=1,l=-1e3,d=-1e3,m=2,c=function(){function b(y){r(this,b),(u.default.tablet||u.default.phone)&&!navigator.isCocoonJS&&this.createTouchHook();var T=document.createElement("div");T.style.width=e+"px",T.style.height=e+"px",T.style.position="absolute",T.style.top=o+"px",T.style.left=n+"px",T.style.zIndex=i,this.div=T,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=y,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,this.isMobileAccessabillity=!1,window.addEventListener("keydown",this._onKeyDown,!1)}return b.prototype.createTouchHook=function(){var T=this,E=document.createElement("button");E.style.width=f+"px",E.style.height=f+"px",E.style.position="absolute",E.style.top=l+"px",E.style.left=d+"px",E.style.zIndex=m,E.style.backgroundColor="#FF0000",E.title="HOOK DIV",E.addEventListener("focus",function(){T.isMobileAccessabillity=!0,T.activate(),document.body.removeChild(E)}),document.body.appendChild(E)},b.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},b.prototype.deactivate=function(){!this.isActive||this.isMobileAccessabillity||(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},b.prototype.updateAccessibleObjects=function(T){if(T.visible){T.accessible&&T.interactive&&(T._accessibleActive||this.addChild(T),T.renderId=this.renderId);for(var E=T.children,R=0;R<E.length;R++)this.updateAccessibleObjects(E[R])}},b.prototype.update=function(){if(this.renderer.renderingToScreen){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var T=this.renderer.view.getBoundingClientRect(),E=T.width/this.renderer.width,R=T.height/this.renderer.height,S=this.div;S.style.left=T.left+"px",S.style.top=T.top+"px",S.style.width=this.renderer.width+"px",S.style.height=this.renderer.height+"px";for(var C=0;C<this.children.length;C++){var A=this.children[C];if(A.renderId!==this.renderId)A._accessibleActive=!1,x.utils.removeItems(this.children,C,1),this.div.removeChild(A._accessibleDiv),this.pool.push(A._accessibleDiv),A._accessibleDiv=null,C--,this.children.length===0&&this.deactivate();else{S=A._accessibleDiv;var k=A.hitArea,F=A.worldTransform;A.hitArea?(S.style.left=(F.tx+k.x*F.a)*E+"px",S.style.top=(F.ty+k.y*F.d)*R+"px",S.style.width=k.width*F.a*E+"px",S.style.height=k.height*F.d*R+"px"):(k=A.getBounds(),this.capHitArea(k),S.style.left=k.x*E+"px",S.style.top=k.y*R+"px",S.style.width=k.width*E+"px",S.style.height=k.height*R+"px",S.title!==A.accessibleTitle&&A.accessibleTitle!==null&&(S.title=A.accessibleTitle),S.getAttribute("aria-label")!==A.accessibleHint&&A.accessibleHint!==null&&S.setAttribute("aria-label",A.accessibleHint))}}this.renderId++}},b.prototype.capHitArea=function(T){T.x<0&&(T.width+=T.x,T.x=0),T.y<0&&(T.height+=T.y,T.y=0),T.x+T.width>this.renderer.width&&(T.width=this.renderer.width-T.x),T.y+T.height>this.renderer.height&&(T.height=this.renderer.height-T.y)},b.prototype.addChild=function(T){var E=this.pool.pop();E||(E=document.createElement("button"),E.style.width=e+"px",E.style.height=e+"px",E.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent",E.style.position="absolute",E.style.zIndex=i,E.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?E.setAttribute("aria-live","off"):E.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?E.setAttribute("aria-relevant","additions"):E.setAttribute("aria-relevant","text"),E.addEventListener("click",this._onClick.bind(this)),E.addEventListener("focus",this._onFocus.bind(this)),E.addEventListener("focusout",this._onFocusOut.bind(this))),T.accessibleTitle&&T.accessibleTitle!==null?E.title=T.accessibleTitle:(!T.accessibleHint||T.accessibleHint===null)&&(E.title="displayObject "+T.tabIndex),T.accessibleHint&&T.accessibleHint!==null&&E.setAttribute("aria-label",T.accessibleHint),T._accessibleActive=!0,T._accessibleDiv=E,E.displayObject=T,this.children.push(T),this.div.appendChild(T._accessibleDiv),T._accessibleDiv.tabIndex=T.tabIndex},b.prototype._onClick=function(T){var E=this.renderer.plugins.interaction;E.dispatchEvent(T.target.displayObject,"click",E.eventData)},b.prototype._onFocus=function(T){T.target.getAttribute("aria-live","off")||T.target.setAttribute("aria-live","assertive");var E=this.renderer.plugins.interaction;E.dispatchEvent(T.target.displayObject,"mouseover",E.eventData)},b.prototype._onFocusOut=function(T){T.target.getAttribute("aria-live","off")||T.target.setAttribute("aria-live","polite");var E=this.renderer.plugins.interaction;E.dispatchEvent(T.target.displayObject,"mouseout",E.eventData)},b.prototype._onKeyDown=function(T){T.keyCode===t&&this.activate()},b.prototype._onMouseMove=function(T){T.movementX===0&&T.movementY===0||this.deactivate()},b.prototype.destroy=function(){this.div=null;for(var T=0;T<this.children.length;T++)this.children[T].div=null;window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},b}();p.default=c,x.WebGLRenderer.registerPlugin("accessibility",c),x.CanvasRenderer.registerPlugin("accessibility",c)},{"../core":65,"./accessibleTarget":41,ismobilejs:4}],41:[function(_,O,p){p.__esModule=!0,p.default={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1}},{}],42:[function(_,O,p){p.__esModule=!0;var w=_("./accessibleTarget");Object.defineProperty(p,"accessibleTarget",{enumerable:!0,get:function(){return g(w).default}});var x=_("./AccessibilityManager");Object.defineProperty(p,"AccessibilityManager",{enumerable:!0,get:function(){return g(x).default}});function g(u){return u&&u.__esModule?u:{default:u}}},{"./AccessibilityManager":40,"./accessibleTarget":41}],43:[function(_,O,p){p.__esModule=!0;var w=function(){function o(n,i){for(var f=0;f<i.length;f++){var l=i[f];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(n,l.key,l)}}return function(n,i,f){return i&&o(n.prototype,i),f&&o(n,f),n}}(),x=_("./autoDetectRenderer"),g=_("./display/Container"),u=r(g),v=_("./ticker"),h=_("./settings"),s=r(h),a=_("./const");function r(o){return o&&o.__esModule?o:{default:o}}function t(o,n){if(!(o instanceof n))throw new TypeError("Cannot call a class as a function")}var e=function(){function o(n,i,f,l,d){t(this,o),typeof n=="number"&&(n=Object.assign({width:n,height:i||s.default.RENDER_OPTIONS.height,forceCanvas:!!l,sharedTicker:!!d},f)),this._options=n=Object.assign({autoStart:!0,sharedTicker:!1,forceCanvas:!1,sharedLoader:!1},n),this.renderer=(0,x.autoDetectRenderer)(n),this.stage=new u.default,this._ticker=null,this.ticker=n.sharedTicker?v.shared:new v.Ticker,n.autoStart&&this.start()}return o.prototype.render=function(){this.renderer.render(this.stage)},o.prototype.stop=function(){this._ticker.stop()},o.prototype.start=function(){this._ticker.start()},o.prototype.destroy=function(i,f){if(this._ticker){var l=this._ticker;this.ticker=null,l.destroy()}this.stage.destroy(f),this.stage=null,this.renderer.destroy(i),this.renderer=null,this._options=null},w(o,[{key:"ticker",set:function(i){this._ticker&&this._ticker.remove(this.render,this),this._ticker=i,i&&i.add(this.render,this,a.UPDATE_PRIORITY.LOW)},get:function(){return this._ticker}},{key:"view",get:function(){return this.renderer.view}},{key:"screen",get:function(){return this.renderer.screen}}]),o}();p.default=e},{"./autoDetectRenderer":45,"./const":46,"./display/Container":48,"./settings":101,"./ticker":121}],44:[function(_,O,p){p.__esModule=!0;var w=_("pixi-gl-core"),x=_("./settings"),g=u(x);function u(t){return t&&t.__esModule?t:{default:t}}function v(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function s(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){if(t instanceof Array){if(t[0].substring(0,9)!=="precision"){var o=t.slice(0);return o.unshift("precision "+e+" float;"),o}}else if(t.trim().substring(0,9)!=="precision")return"precision "+e+` float;
`+t;return t}var r=function(t){s(e,t);function e(o,n,i,f,l){return v(this,e),h(this,t.call(this,o,a(n,l||g.default.PRECISION_VERTEX),a(i,l||g.default.PRECISION_FRAGMENT),void 0,f))}return e}(w.GLShader);p.default=r},{"./settings":101,"pixi-gl-core":15}],45:[function(_,O,p){p.__esModule=!0,p.autoDetectRenderer=r;var w=_("./utils"),x=a(w),g=_("./renderers/canvas/CanvasRenderer"),u=s(g),v=_("./renderers/webgl/WebGLRenderer"),h=s(v);function s(t){return t&&t.__esModule?t:{default:t}}function a(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e.default=t,e}function r(t,e,o,n){var i=t&&t.forceCanvas;return n!==void 0&&(i=n),!i&&x.isWebGLSupported()?new h.default(t,e,o):new u.default(t,e,o)}},{"./renderers/canvas/CanvasRenderer":77,"./renderers/webgl/WebGLRenderer":84,"./utils":125}],46:[function(_,O,p){p.__esModule=!0,p.VERSION="4.8.2",p.PI_2=Math.PI*2,p.RAD_TO_DEG=180/Math.PI,p.DEG_TO_RAD=Math.PI/180,p.RENDERER_TYPE={UNKNOWN:0,WEBGL:1,CANVAS:2},p.BLEND_MODES={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,NORMAL_NPM:17,ADD_NPM:18,SCREEN_NPM:19},p.DRAW_MODES={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},p.SCALE_MODES={LINEAR:0,NEAREST:1},p.WRAP_MODES={CLAMP:0,REPEAT:1,MIRRORED_REPEAT:2},p.GC_MODES={AUTO:0,MANUAL:1},p.URL_FILE_EXTENSION=/\.(\w{3,4})(?:$|\?|#)/i,p.DATA_URI=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i,p.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,p.SHAPES={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},p.PRECISION={LOW:"lowp",MEDIUM:"mediump",HIGH:"highp"},p.TRANSFORM_MODE={STATIC:0,DYNAMIC:1},p.TEXT_GRADIENT={LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1},p.UPDATE_PRIORITY={INTERACTION:50,HIGH:25,NORMAL:0,LOW:-25,UTILITY:-50}},{}],47:[function(_,O,p){p.__esModule=!0;var w=_("../math");function x(u,v){if(!(u instanceof v))throw new TypeError("Cannot call a class as a function")}var g=function(){function u(){x(this,u),this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null}return u.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},u.prototype.clear=function(){this.updateID++,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},u.prototype.getRectangle=function(h){return this.minX>this.maxX||this.minY>this.maxY?w.Rectangle.EMPTY:(h=h||new w.Rectangle(0,0,1,1),h.x=this.minX,h.y=this.minY,h.width=this.maxX-this.minX,h.height=this.maxY-this.minY,h)},u.prototype.addPoint=function(h){this.minX=Math.min(this.minX,h.x),this.maxX=Math.max(this.maxX,h.x),this.minY=Math.min(this.minY,h.y),this.maxY=Math.max(this.maxY,h.y)},u.prototype.addQuad=function(h){var s=this.minX,a=this.minY,r=this.maxX,t=this.maxY,e=h[0],o=h[1];s=e<s?e:s,a=o<a?o:a,r=e>r?e:r,t=o>t?o:t,e=h[2],o=h[3],s=e<s?e:s,a=o<a?o:a,r=e>r?e:r,t=o>t?o:t,e=h[4],o=h[5],s=e<s?e:s,a=o<a?o:a,r=e>r?e:r,t=o>t?o:t,e=h[6],o=h[7],s=e<s?e:s,a=o<a?o:a,r=e>r?e:r,t=o>t?o:t,this.minX=s,this.minY=a,this.maxX=r,this.maxY=t},u.prototype.addFrame=function(h,s,a,r,t){var e=h.worldTransform,o=e.a,n=e.b,i=e.c,f=e.d,l=e.tx,d=e.ty,m=this.minX,c=this.minY,b=this.maxX,y=this.maxY,T=o*s+i*a+l,E=n*s+f*a+d;m=T<m?T:m,c=E<c?E:c,b=T>b?T:b,y=E>y?E:y,T=o*r+i*a+l,E=n*r+f*a+d,m=T<m?T:m,c=E<c?E:c,b=T>b?T:b,y=E>y?E:y,T=o*s+i*t+l,E=n*s+f*t+d,m=T<m?T:m,c=E<c?E:c,b=T>b?T:b,y=E>y?E:y,T=o*r+i*t+l,E=n*r+f*t+d,m=T<m?T:m,c=E<c?E:c,b=T>b?T:b,y=E>y?E:y,this.minX=m,this.minY=c,this.maxX=b,this.maxY=y},u.prototype.addVertices=function(h,s,a,r){for(var t=h.worldTransform,e=t.a,o=t.b,n=t.c,i=t.d,f=t.tx,l=t.ty,d=this.minX,m=this.minY,c=this.maxX,b=this.maxY,y=a;y<r;y+=2){var T=s[y],E=s[y+1],R=e*T+n*E+f,S=i*E+o*T+l;d=R<d?R:d,m=S<m?S:m,c=R>c?R:c,b=S>b?S:b}this.minX=d,this.minY=m,this.maxX=c,this.maxY=b},u.prototype.addBounds=function(h){var s=this.minX,a=this.minY,r=this.maxX,t=this.maxY;this.minX=h.minX<s?h.minX:s,this.minY=h.minY<a?h.minY:a,this.maxX=h.maxX>r?h.maxX:r,this.maxY=h.maxY>t?h.maxY:t},u.prototype.addBoundsMask=function(h,s){var a=h.minX>s.minX?h.minX:s.minX,r=h.minY>s.minY?h.minY:s.minY,t=h.maxX<s.maxX?h.maxX:s.maxX,e=h.maxY<s.maxY?h.maxY:s.maxY;if(a<=t&&r<=e){var o=this.minX,n=this.minY,i=this.maxX,f=this.maxY;this.minX=a<o?a:o,this.minY=r<n?r:n,this.maxX=t>i?t:i,this.maxY=e>f?e:f}},u.prototype.addBoundsArea=function(h,s){var a=h.minX>s.x?h.minX:s.x,r=h.minY>s.y?h.minY:s.y,t=h.maxX<s.x+s.width?h.maxX:s.x+s.width,e=h.maxY<s.y+s.height?h.maxY:s.y+s.height;if(a<=t&&r<=e){var o=this.minX,n=this.minY,i=this.maxX,f=this.maxY;this.minX=a<o?a:o,this.minY=r<n?r:n,this.maxX=t>i?t:i,this.maxY=e>f?e:f}},u}();p.default=g},{"../math":70}],48:[function(_,O,p){p.__esModule=!0;var w=function(){function t(e,o){for(var n=0;n<o.length;n++){var i=o[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),x=_("../utils"),g=_("./DisplayObject"),u=v(g);function v(t){return t&&t.__esModule?t:{default:t}}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function a(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(t){a(e,t);function e(){h(this,e);var o=s(this,t.call(this));return o.children=[],o}return e.prototype.onChildrenChange=function(){},e.prototype.addChild=function(n){var i=arguments.length;if(i>1)for(var f=0;f<i;f++)this.addChild(arguments[f]);else n.parent&&n.parent.removeChild(n),n.parent=this,n.transform._parentID=-1,this.children.push(n),this._boundsID++,this.onChildrenChange(this.children.length-1),n.emit("added",this);return n},e.prototype.addChildAt=function(n,i){if(i<0||i>this.children.length)throw new Error(n+"addChildAt: The index "+i+" supplied is out of bounds "+this.children.length);return n.parent&&n.parent.removeChild(n),n.parent=this,n.transform._parentID=-1,this.children.splice(i,0,n),this._boundsID++,this.onChildrenChange(i),n.emit("added",this),n},e.prototype.swapChildren=function(n,i){if(n!==i){var f=this.getChildIndex(n),l=this.getChildIndex(i);this.children[f]=i,this.children[l]=n,this.onChildrenChange(f<l?f:l)}},e.prototype.getChildIndex=function(n){var i=this.children.indexOf(n);if(i===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return i},e.prototype.setChildIndex=function(n,i){if(i<0||i>=this.children.length)throw new Error("The index "+i+" supplied is out of bounds "+this.children.length);var f=this.getChildIndex(n);(0,x.removeItems)(this.children,f,1),this.children.splice(i,0,n),this.onChildrenChange(i)},e.prototype.getChildAt=function(n){if(n<0||n>=this.children.length)throw new Error("getChildAt: Index ("+n+") does not exist.");return this.children[n]},e.prototype.removeChild=function(n){var i=arguments.length;if(i>1)for(var f=0;f<i;f++)this.removeChild(arguments[f]);else{var l=this.children.indexOf(n);if(l===-1)return null;n.parent=null,n.transform._parentID=-1,(0,x.removeItems)(this.children,l,1),this._boundsID++,this.onChildrenChange(l),n.emit("removed",this)}return n},e.prototype.removeChildAt=function(n){var i=this.getChildAt(n);return i.parent=null,i.transform._parentID=-1,(0,x.removeItems)(this.children,n,1),this._boundsID++,this.onChildrenChange(n),i.emit("removed",this),i},e.prototype.removeChildren=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=arguments[1],f=n,l=typeof i=="number"?i:this.children.length,d=l-f,m=void 0;if(d>0&&d<=l){m=this.children.splice(f,d);for(var c=0;c<m.length;++c)m[c].parent=null,m[c].transform&&(m[c].transform._parentID=-1);this._boundsID++,this.onChildrenChange(n);for(var b=0;b<m.length;++b)m[b].emit("removed",this);return m}else if(d===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var n=0,i=this.children.length;n<i;++n){var f=this.children[n];f.visible&&f.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var n=0;n<this.children.length;n++){var i=this.children[n];!i.visible||!i.renderable||(i.calculateBounds(),i._mask?(i._mask.calculateBounds(),this._bounds.addBoundsMask(i._bounds,i._mask._bounds)):i.filterArea?this._bounds.addBoundsArea(i._bounds,i.filterArea):this._bounds.addBounds(i._bounds))}this._lastBoundsID=this._boundsID},e.prototype._calculateBounds=function(){},e.prototype.renderWebGL=function(n){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this._filters)this.renderAdvancedWebGL(n);else{this._renderWebGL(n);for(var i=0,f=this.children.length;i<f;++i)this.children[i].renderWebGL(n)}},e.prototype.renderAdvancedWebGL=function(n){n.flush();var i=this._filters,f=this._mask;if(i){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var l=0;l<i.length;l++)i[l].enabled&&this._enabledFilters.push(i[l]);this._enabledFilters.length&&n.filterManager.pushFilter(this,this._enabledFilters)}f&&n.maskManager.pushMask(this,this._mask),this._renderWebGL(n);for(var d=0,m=this.children.length;d<m;d++)this.children[d].renderWebGL(n);n.flush(),f&&n.maskManager.popMask(this,this._mask),i&&this._enabledFilters&&this._enabledFilters.length&&n.filterManager.popFilter()},e.prototype._renderWebGL=function(n){},e.prototype._renderCanvas=function(n){},e.prototype.renderCanvas=function(n){if(!(!this.visible||this.worldAlpha<=0||!this.renderable)){this._mask&&n.maskManager.pushMask(this._mask),this._renderCanvas(n);for(var i=0,f=this.children.length;i<f;++i)this.children[i].renderCanvas(n);this._mask&&n.maskManager.popMask(n)}},e.prototype.destroy=function(n){t.prototype.destroy.call(this);var i=typeof n=="boolean"?n:n&&n.children,f=this.removeChildren(0,this.children.length);if(i)for(var l=0;l<f.length;++l)f[l].destroy(n)},w(e,[{key:"width",get:function(){return this.scale.x*this.getLocalBounds().width},set:function(n){var i=this.getLocalBounds().width;i!==0?this.scale.x=n/i:this.scale.x=1,this._width=n}},{key:"height",get:function(){return this.scale.y*this.getLocalBounds().height},set:function(n){var i=this.getLocalBounds().height;i!==0?this.scale.y=n/i:this.scale.y=1,this._height=n}}]),e}(u.default);p.default=r,r.prototype.containerUpdateTransform=r.prototype.updateTransform},{"../utils":125,"./DisplayObject":49}],49:[function(_,O,p){p.__esModule=!0;var w=function(){function c(b,y){for(var T=0;T<y.length;T++){var E=y[T];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(b,E.key,E)}}return function(b,y,T){return y&&c(b.prototype,y),T&&c(b,T),b}}(),x=_("eventemitter3"),g=i(x),u=_("../const"),v=_("../settings"),h=i(v),s=_("./TransformStatic"),a=i(s),r=_("./Transform"),t=i(r),e=_("./Bounds"),o=i(e),n=_("../math");function i(c){return c&&c.__esModule?c:{default:c}}function f(c,b){if(!(c instanceof b))throw new TypeError("Cannot call a class as a function")}function l(c,b){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:c}function d(c,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);c.prototype=Object.create(b&&b.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(c,b):c.__proto__=b)}var m=function(c){d(b,c);function b(){f(this,b);var y=l(this,c.call(this)),T=h.default.TRANSFORM_MODE===u.TRANSFORM_MODE.STATIC?a.default:t.default;return y.tempDisplayObjectParent=null,y.transform=new T,y.alpha=1,y.visible=!0,y.renderable=!0,y.parent=null,y.worldAlpha=1,y.filterArea=null,y._filters=null,y._enabledFilters=null,y._bounds=new o.default,y._boundsID=0,y._lastBoundsID=-1,y._boundsRect=null,y._localBoundsRect=null,y._mask=null,y._destroyed=!1,y}return b.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._bounds.updateID++},b.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},b.prototype.getBounds=function(T,E){return T||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&this.calculateBounds(),E||(this._boundsRect||(this._boundsRect=new n.Rectangle),E=this._boundsRect),this._bounds.getRectangle(E)},b.prototype.getLocalBounds=function(T){var E=this.transform,R=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform,T||(this._localBoundsRect||(this._localBoundsRect=new n.Rectangle),T=this._localBoundsRect);var S=this.getBounds(!1,T);return this.parent=R,this.transform=E,S},b.prototype.toGlobal=function(T,E){var R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return R||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(T,E)},b.prototype.toLocal=function(T,E,R,S){return E&&(T=E.toGlobal(T,R,S)),S||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(T,R)},b.prototype.renderWebGL=function(T){},b.prototype.renderCanvas=function(T){},b.prototype.setParent=function(T){if(!T||!T.addChild)throw new Error("setParent: Argument must be a Container");return T.addChild(this),T},b.prototype.setTransform=function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,S=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,C=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,A=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,k=arguments.length>6&&arguments[6]!==void 0?arguments[6]:0,F=arguments.length>7&&arguments[7]!==void 0?arguments[7]:0,M=arguments.length>8&&arguments[8]!==void 0?arguments[8]:0;return this.position.x=T,this.position.y=E,this.scale.x=R||1,this.scale.y=S||1,this.rotation=C,this.skew.x=A,this.skew.y=k,this.pivot.x=F,this.pivot.y=M,this},b.prototype.destroy=function(){this.removeAllListeners(),this.parent&&this.parent.removeChild(this),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filterArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},w(b,[{key:"_tempDisplayObjectParent",get:function(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new b),this.tempDisplayObjectParent}},{key:"x",get:function(){return this.position.x},set:function(T){this.transform.position.x=T}},{key:"y",get:function(){return this.position.y},set:function(T){this.transform.position.y=T}},{key:"worldTransform",get:function(){return this.transform.worldTransform}},{key:"localTransform",get:function(){return this.transform.localTransform}},{key:"position",get:function(){return this.transform.position},set:function(T){this.transform.position.copy(T)}},{key:"scale",get:function(){return this.transform.scale},set:function(T){this.transform.scale.copy(T)}},{key:"pivot",get:function(){return this.transform.pivot},set:function(T){this.transform.pivot.copy(T)}},{key:"skew",get:function(){return this.transform.skew},set:function(T){this.transform.skew.copy(T)}},{key:"rotation",get:function(){return this.transform.rotation},set:function(T){this.transform.rotation=T}},{key:"worldVisible",get:function(){var T=this;do{if(!T.visible)return!1;T=T.parent}while(T);return!0}},{key:"mask",get:function(){return this._mask},set:function(T){this._mask&&(this._mask.renderable=!0,this._mask.isMask=!1),this._mask=T,this._mask&&(this._mask.renderable=!1,this._mask.isMask=!0)}},{key:"filters",get:function(){return this._filters&&this._filters.slice()},set:function(T){this._filters=T&&T.slice()}}]),b}(g.default);p.default=m,m.prototype.displayObjectUpdateTransform=m.prototype.updateTransform},{"../const":46,"../math":70,"../settings":101,"./Bounds":47,"./Transform":50,"./TransformStatic":52,eventemitter3:3}],50:[function(_,O,p){p.__esModule=!0;var w=function(){function t(e,o){for(var n=0;n<o.length;n++){var i=o[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),x=_("../math"),g=_("./TransformBase"),u=v(g);function v(t){return t&&t.__esModule?t:{default:t}}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function a(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(t){a(e,t);function e(){h(this,e);var o=s(this,t.call(this));return o.position=new x.Point(0,0),o.scale=new x.Point(1,1),o.skew=new x.ObservablePoint(o.updateSkew,o,0,0),o.pivot=new x.Point(0,0),o._rotation=0,o._cx=1,o._sx=0,o._cy=0,o._sy=1,o}return e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x)},e.prototype.updateLocalTransform=function(){var n=this.localTransform;n.a=this._cx*this.scale.x,n.b=this._sx*this.scale.x,n.c=this._cy*this.scale.y,n.d=this._sy*this.scale.y,n.tx=this.position.x-(this.pivot.x*n.a+this.pivot.y*n.c),n.ty=this.position.y-(this.pivot.x*n.b+this.pivot.y*n.d)},e.prototype.updateTransform=function(n){var i=this.localTransform;i.a=this._cx*this.scale.x,i.b=this._sx*this.scale.x,i.c=this._cy*this.scale.y,i.d=this._sy*this.scale.y,i.tx=this.position.x-(this.pivot.x*i.a+this.pivot.y*i.c),i.ty=this.position.y-(this.pivot.x*i.b+this.pivot.y*i.d);var f=n.worldTransform,l=this.worldTransform;l.a=i.a*f.a+i.b*f.c,l.b=i.a*f.b+i.b*f.d,l.c=i.c*f.a+i.d*f.c,l.d=i.c*f.b+i.d*f.d,l.tx=i.tx*f.a+i.ty*f.c+f.tx,l.ty=i.tx*f.b+i.ty*f.d+f.ty,this._worldID++},e.prototype.setFromMatrix=function(n){n.decompose(this)},w(e,[{key:"rotation",get:function(){return this._rotation},set:function(n){this._rotation=n,this.updateSkew()}}]),e}(u.default);p.default=r},{"../math":70,"./TransformBase":51}],51:[function(_,O,p){p.__esModule=!0;var w=_("../math");function x(u,v){if(!(u instanceof v))throw new TypeError("Cannot call a class as a function")}var g=function(){function u(){x(this,u),this.worldTransform=new w.Matrix,this.localTransform=new w.Matrix,this._worldID=0,this._parentID=0}return u.prototype.updateLocalTransform=function(){},u.prototype.updateTransform=function(h){var s=h.worldTransform,a=this.worldTransform,r=this.localTransform;a.a=r.a*s.a+r.b*s.c,a.b=r.a*s.b+r.b*s.d,a.c=r.c*s.a+r.d*s.c,a.d=r.c*s.b+r.d*s.d,a.tx=r.tx*s.a+r.ty*s.c+s.tx,a.ty=r.tx*s.b+r.ty*s.d+s.ty,this._worldID++},u}();p.default=g,g.prototype.updateWorldTransform=g.prototype.updateTransform,g.IDENTITY=new g},{"../math":70}],52:[function(_,O,p){p.__esModule=!0;var w=function(){function t(e,o){for(var n=0;n<o.length;n++){var i=o[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),x=_("../math"),g=_("./TransformBase"),u=v(g);function v(t){return t&&t.__esModule?t:{default:t}}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function a(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(t){a(e,t);function e(){h(this,e);var o=s(this,t.call(this));return o.position=new x.ObservablePoint(o.onChange,o,0,0),o.scale=new x.ObservablePoint(o.onChange,o,1,1),o.pivot=new x.ObservablePoint(o.onChange,o,0,0),o.skew=new x.ObservablePoint(o.updateSkew,o,0,0),o._rotation=0,o._cx=1,o._sx=0,o._cy=0,o._sy=1,o._localID=0,o._currentLocalID=0,o}return e.prototype.onChange=function(){this._localID++},e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x),this._localID++},e.prototype.updateLocalTransform=function(){var n=this.localTransform;this._localID!==this._currentLocalID&&(n.a=this._cx*this.scale._x,n.b=this._sx*this.scale._x,n.c=this._cy*this.scale._y,n.d=this._sy*this.scale._y,n.tx=this.position._x-(this.pivot._x*n.a+this.pivot._y*n.c),n.ty=this.position._y-(this.pivot._x*n.b+this.pivot._y*n.d),this._currentLocalID=this._localID,this._parentID=-1)},e.prototype.updateTransform=function(n){var i=this.localTransform;if(this._localID!==this._currentLocalID&&(i.a=this._cx*this.scale._x,i.b=this._sx*this.scale._x,i.c=this._cy*this.scale._y,i.d=this._sy*this.scale._y,i.tx=this.position._x-(this.pivot._x*i.a+this.pivot._y*i.c),i.ty=this.position._y-(this.pivot._x*i.b+this.pivot._y*i.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==n._worldID){var f=n.worldTransform,l=this.worldTransform;l.a=i.a*f.a+i.b*f.c,l.b=i.a*f.b+i.b*f.d,l.c=i.c*f.a+i.d*f.c,l.d=i.c*f.b+i.d*f.d,l.tx=i.tx*f.a+i.ty*f.c+f.tx,l.ty=i.tx*f.b+i.ty*f.d+f.ty,this._parentID=n._worldID,this._worldID++}},e.prototype.setFromMatrix=function(n){n.decompose(this),this._localID++},w(e,[{key:"rotation",get:function(){return this._rotation},set:function(n){this._rotation=n,this.updateSkew()}}]),e}(u.default);p.default=r},{"../math":70,"./TransformBase":51}],53:[function(_,O,p){p.__esModule=!0;var w=_("../display/Container"),x=b(w),g=_("../textures/RenderTexture"),u=b(g),v=_("../textures/Texture"),h=b(v),s=_("./GraphicsData"),a=b(s),r=_("../sprites/Sprite"),t=b(r),e=_("../math"),o=_("../utils"),n=_("../const"),i=_("../display/Bounds"),f=b(i),l=_("./utils/bezierCurveTo"),d=b(l),m=_("../renderers/canvas/CanvasRenderer"),c=b(m);function b(M){return M&&M.__esModule?M:{default:M}}function y(M,D){if(!(M instanceof D))throw new TypeError("Cannot call a class as a function")}function T(M,D){if(!M)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D&&(typeof D=="object"||typeof D=="function")?D:M}function E(M,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof D);M.prototype=Object.create(D&&D.prototype,{constructor:{value:M,enumerable:!1,writable:!0,configurable:!0}}),D&&(Object.setPrototypeOf?Object.setPrototypeOf(M,D):M.__proto__=D)}var R=void 0,S=new e.Matrix,C=new e.Point,A=new Float32Array(4),k=new Float32Array(4),F=function(M){E(D,M);function D(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;y(this,D);var I=T(this,M.call(this));return I.fillAlpha=1,I.lineWidth=0,I.nativeLines=L,I.lineColor=0,I.lineAlignment=.5,I.graphicsData=[],I.tint=16777215,I._prevTint=16777215,I.blendMode=n.BLEND_MODES.NORMAL,I.currentPath=null,I._webGL={},I.isMask=!1,I.boundsPadding=0,I._localBounds=new f.default,I.dirty=0,I.fastRectDirty=-1,I.clearDirty=0,I.boundsDirty=-1,I.cachedSpriteDirty=!1,I._spriteRect=null,I._fastRect=!1,I._prevRectTint=null,I._prevRectFillColor=null,I}return D.prototype.clone=function(){var I=new D;I.renderable=this.renderable,I.fillAlpha=this.fillAlpha,I.lineWidth=this.lineWidth,I.lineColor=this.lineColor,I.lineAlignment=this.lineAlignment,I.tint=this.tint,I.blendMode=this.blendMode,I.isMask=this.isMask,I.boundsPadding=this.boundsPadding,I.dirty=0,I.cachedSpriteDirty=this.cachedSpriteDirty;for(var N=0;N<this.graphicsData.length;++N)I.graphicsData.push(this.graphicsData[N].clone());return I.currentPath=I.graphicsData[I.graphicsData.length-1],I.updateLocalBounds(),I},D.prototype._quadraticCurveLength=function(I,N,U,B,X,W){var Z=I-(2*U+X),K=N-(2*B+W),Q=2*((U-2)*I),J=2*((B-2)*N),H=4*(Z*Z+K*K),q=4*(Z*Q+K*J),$=Q*Q+J*J,ie=2*Math.sqrt(H+q+$),ne=Math.sqrt(H),ae=2*H*ne,se=2*Math.sqrt($),re=q/ne;return(ae*ie+ne*q*(ie-se)+(4*$*H-q*q)*Math.log((2*ne+re+ie)/(re+se)))/(4*ae)},D.prototype._bezierCurveLength=function(I,N,U,B,X,W,Z,K){for(var Q=10,J=0,H=0,q=0,$=0,ie=0,ne=0,ae=0,se=0,re=0,ee=0,ue=0,he=I,de=N,ce=1;ce<=Q;++ce)H=ce/Q,q=H*H,$=q*H,ie=1-H,ne=ie*ie,ae=ne*ie,se=ae*I+3*ne*H*U+3*ie*q*X+$*Z,re=ae*N+3*ne*H*B+3*ie*q*W+$*K,ee=he-se,ue=de-re,he=se,de=re,J+=Math.sqrt(ee*ee+ue*ue);return J},D.prototype._segmentsCount=function(I){var N=Math.ceil(I/D.CURVES.maxLength);return N<D.CURVES.minSegments?N=D.CURVES.minSegments:N>D.CURVES.maxSegments&&(N=D.CURVES.maxSegments),N},D.prototype.lineStyle=function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,B=arguments.length>3&&arguments[3]!==void 0?arguments[3]:.5;if(this.lineWidth=I,this.lineColor=N,this.lineAlpha=U,this.lineAlignment=B,this.currentPath)if(this.currentPath.shape.points.length){var X=new e.Polygon(this.currentPath.shape.points.slice(-2));X.closed=!1,this.drawShape(X)}else this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha,this.currentPath.lineAlignment=this.lineAlignment;return this},D.prototype.moveTo=function(I,N){var U=new e.Polygon([I,N]);return U.closed=!1,this.drawShape(U),this},D.prototype.lineTo=function(I,N){var U=this.currentPath.shape.points,B=U[U.length-2],X=U[U.length-1];return(B!==I||X!==N)&&(U.push(I,N),this.dirty++),this},D.prototype.quadraticCurveTo=function(I,N,U,B){this.currentPath?this.currentPath.shape.points.length===0&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var X=this.currentPath.shape.points,W=0,Z=0;X.length===0&&this.moveTo(0,0);for(var K=X[X.length-2],Q=X[X.length-1],J=D.CURVES.adaptive?this._segmentsCount(this._quadraticCurveLength(K,Q,I,N,U,B)):20,H=1;H<=J;++H){var q=H/J;W=K+(I-K)*q,Z=Q+(N-Q)*q,X.push(W+(I+(U-I)*q-W)*q,Z+(N+(B-N)*q-Z)*q)}return this.dirty++,this},D.prototype.bezierCurveTo=function(I,N,U,B,X,W){this.currentPath?this.currentPath.shape.points.length===0&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var Z=this.currentPath.shape.points,K=Z[Z.length-2],Q=Z[Z.length-1];Z.length-=2;var J=D.CURVES.adaptive?this._segmentsCount(this._bezierCurveLength(K,Q,I,N,U,B,X,W)):20;return(0,d.default)(K,Q,I,N,U,B,X,W,J,Z),this.dirty++,this},D.prototype.arcTo=function(I,N,U,B,X){this.currentPath?this.currentPath.shape.points.length===0&&this.currentPath.shape.points.push(I,N):this.moveTo(I,N);var W=this.currentPath.shape.points,Z=W[W.length-2],K=W[W.length-1],Q=K-N,J=Z-I,H=B-N,q=U-I,$=Math.abs(Q*q-J*H);if($<1e-8||X===0)(W[W.length-2]!==I||W[W.length-1]!==N)&&W.push(I,N);else{var ie=Q*Q+J*J,ne=H*H+q*q,ae=Q*H+J*q,se=X*Math.sqrt(ie)/$,re=X*Math.sqrt(ne)/$,ee=se*ae/ie,ue=re*ae/ne,he=se*q+re*J,de=se*H+re*Q,ce=J*(re+ee),ve=Q*(re+ee),Fe=q*(se+ue),pe=H*(se+ue),Oe=Math.atan2(ve-de,ce-he),ze=Math.atan2(pe-de,Fe-he);this.arc(he+I,de+N,X,Oe,ze,J*H>q*Q)}return this.dirty++,this},D.prototype.arc=function(I,N,U,B,X){var W=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1;if(B===X)return this;!W&&X<=B?X+=n.PI_2:W&&B<=X&&(B+=n.PI_2);var Z=X-B,K=D.CURVES.adaptive?this._segmentsCount(Math.abs(Z)*U):Math.ceil(Math.abs(Z)/n.PI_2)*40;if(Z===0)return this;var Q=I+Math.cos(B)*U,J=N+Math.sin(B)*U,H=this.currentPath?this.currentPath.shape.points:null;if(H){var q=Math.abs(H[H.length-2]-Q),$=Math.abs(H[H.length-1]-J);q<.001&&$<.001||H.push(Q,J)}else this.moveTo(Q,J),H=this.currentPath.shape.points;for(var ie=Z/(K*2),ne=ie*2,ae=Math.cos(ie),se=Math.sin(ie),re=K-1,ee=re%1/re,ue=0;ue<=re;++ue){var he=ue+ee*ue,de=ie+B+ne*he,ce=Math.cos(de),ve=-Math.sin(de);H.push((ae*ce+se*ve)*U+I,(ae*-ve+se*ce)*U+N)}return this.dirty++,this},D.prototype.beginFill=function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return this.filling=!0,this.fillColor=I,this.fillAlpha=N,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},D.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},D.prototype.drawRect=function(I,N,U,B){return this.drawShape(new e.Rectangle(I,N,U,B)),this},D.prototype.drawRoundedRect=function(I,N,U,B,X){return this.drawShape(new e.RoundedRectangle(I,N,U,B,X)),this},D.prototype.drawCircle=function(I,N,U){return this.drawShape(new e.Circle(I,N,U)),this},D.prototype.drawEllipse=function(I,N,U,B){return this.drawShape(new e.Ellipse(I,N,U,B)),this},D.prototype.drawPolygon=function(I){var N=I,U=!0;if(N instanceof e.Polygon&&(U=N.closed,N=N.points),!Array.isArray(N)){N=new Array(arguments.length);for(var B=0;B<N.length;++B)N[B]=arguments[B]}var X=new e.Polygon(N);return X.closed=U,this.drawShape(X),this},D.prototype.drawStar=function(I,N,U,B,X){var W=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0;X=X||B/2;for(var Z=-1*Math.PI/2+W,K=U*2,Q=n.PI_2/K,J=[],H=0;H<K;H++){var q=H%2?X:B,$=H*Q+Z;J.push(I+q*Math.cos($),N+q*Math.sin($))}return this.drawPolygon(J)},D.prototype.clear=function(){return(this.lineWidth||this.filling||this.graphicsData.length>0)&&(this.lineWidth=0,this.lineAlignment=.5,this.filling=!1,this.boundsDirty=-1,this.canvasTintDirty=-1,this.dirty++,this.clearDirty++,this.graphicsData.length=0),this.currentPath=null,this._spriteRect=null,this},D.prototype.isFastRect=function(){return this.graphicsData.length===1&&this.graphicsData[0].shape.type===n.SHAPES.RECT&&!this.graphicsData[0].lineWidth},D.prototype._renderWebGL=function(I){this.dirty!==this.fastRectDirty&&(this.fastRectDirty=this.dirty,this._fastRect=this.isFastRect()),this._fastRect?this._renderSpriteRect(I):(I.setObjectRenderer(I.plugins.graphics),I.plugins.graphics.render(this))},D.prototype._renderSpriteRect=function(I){var N=this.graphicsData[0].shape;this._spriteRect||(this._spriteRect=new t.default(new h.default(h.default.WHITE)));var U=this._spriteRect,B=this.graphicsData[0].fillColor;if(this.tint===16777215)U.tint=B;else if(this.tint!==this._prevRectTint||B!==this._prevRectFillColor){var X=A,W=k;(0,o.hex2rgb)(B,X),(0,o.hex2rgb)(this.tint,W),X[0]*=W[0],X[1]*=W[1],X[2]*=W[2],U.tint=(0,o.rgb2hex)(X),this._prevRectTint=this.tint,this._prevRectFillColor=B}U.alpha=this.graphicsData[0].fillAlpha,U.worldAlpha=this.worldAlpha*U.alpha,U.blendMode=this.blendMode,U._texture._frame.width=N.width,U._texture._frame.height=N.height,U.transform.worldTransform=this.transform.worldTransform,U.anchor.set(-N.x/N.width,-N.y/N.height),U._onAnchorUpdate(),U._renderWebGL(I)},D.prototype._renderCanvas=function(I){this.isMask!==!0&&I.plugins.graphics.render(this)},D.prototype._calculateBounds=function(){this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.updateLocalBounds(),this.cachedSpriteDirty=!0);var I=this._localBounds;this._bounds.addFrame(this.transform,I.minX,I.minY,I.maxX,I.maxY)},D.prototype.containsPoint=function(I){this.worldTransform.applyInverse(I,C);for(var N=this.graphicsData,U=0;U<N.length;++U){var B=N[U];if(B.fill&&B.shape&&B.shape.contains(C.x,C.y)){if(B.holes)for(var X=0;X<B.holes.length;X++){var W=B.holes[X];if(W.contains(C.x,C.y))return!1}return!0}}return!1},D.prototype.updateLocalBounds=function(){var I=1/0,N=-1/0,U=1/0,B=-1/0;if(this.graphicsData.length)for(var X=0,W=0,Z=0,K=0,Q=0,J=0;J<this.graphicsData.length;J++){var H=this.graphicsData[J],q=H.type,$=H.lineWidth;if(X=H.shape,q===n.SHAPES.RECT||q===n.SHAPES.RREC)W=X.x-$/2,Z=X.y-$/2,K=X.width+$,Q=X.height+$,I=W<I?W:I,N=W+K>N?W+K:N,U=Z<U?Z:U,B=Z+Q>B?Z+Q:B;else if(q===n.SHAPES.CIRC)W=X.x,Z=X.y,K=X.radius+$/2,Q=X.radius+$/2,I=W-K<I?W-K:I,N=W+K>N?W+K:N,U=Z-Q<U?Z-Q:U,B=Z+Q>B?Z+Q:B;else if(q===n.SHAPES.ELIP)W=X.x,Z=X.y,K=X.width+$/2,Q=X.height+$/2,I=W-K<I?W-K:I,N=W+K>N?W+K:N,U=Z-Q<U?Z-Q:U,B=Z+Q>B?Z+Q:B;else for(var ie=X.points,ne=0,ae=0,se=0,re=0,ee=0,ue=0,he=0,de=0,ce=0;ce+2<ie.length;ce+=2)W=ie[ce],Z=ie[ce+1],ne=ie[ce+2],ae=ie[ce+3],se=Math.abs(ne-W),re=Math.abs(ae-Z),Q=$,K=Math.sqrt(se*se+re*re),!(K<1e-9)&&(ee=(Q/K*re+se)/2,ue=(Q/K*se+re)/2,he=(ne+W)/2,de=(ae+Z)/2,I=he-ee<I?he-ee:I,N=he+ee>N?he+ee:N,U=de-ue<U?de-ue:U,B=de+ue>B?de+ue:B)}else I=0,N=0,U=0,B=0;var ve=this.boundsPadding;this._localBounds.minX=I-ve,this._localBounds.maxX=N+ve,this._localBounds.minY=U-ve,this._localBounds.maxY=B+ve},D.prototype.drawShape=function(I){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var N=new a.default(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,this.nativeLines,I,this.lineAlignment);return this.graphicsData.push(N),N.type===n.SHAPES.POLY&&(N.shape.closed=N.shape.closed,this.currentPath=N),this.dirty++,N},D.prototype.generateCanvasTexture=function(I){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,U=this.getLocalBounds(),B=u.default.create(U.width,U.height,I,N);R||(R=new c.default),this.transform.updateLocalTransform(),this.transform.localTransform.copy(S),S.invert(),S.tx-=U.x,S.ty-=U.y,R.render(this,B,!0,S);var X=h.default.fromCanvas(B.baseTexture._canvasRenderTarget.canvas,I,"graphics");return X.baseTexture.resolution=N,X.baseTexture.update(),X},D.prototype.closePath=function(){var I=this.currentPath;return I&&I.shape&&I.shape.close(),this},D.prototype.addHole=function(){var I=this.graphicsData.pop();return this.currentPath=this.graphicsData[this.graphicsData.length-1],this.currentPath.addHole(I.shape),this.currentPath=null,this},D.prototype.destroy=function(I){M.prototype.destroy.call(this,I);for(var N=0;N<this.graphicsData.length;++N)this.graphicsData[N].destroy();for(var U in this._webGL)for(var B=0;B<this._webGL[U].data.length;++B)this._webGL[U].data[B].destroy();this._spriteRect&&this._spriteRect.destroy(),this.graphicsData=null,this.currentPath=null,this._webGL=null,this._localBounds=null},D}(x.default);p.default=F,F._SPRITE_TEXTURE=null,F.CURVES={adaptive:!1,maxLength:10,minSegments:8,maxSegments:2048}},{"../const":46,"../display/Bounds":47,"../display/Container":48,"../math":70,"../renderers/canvas/CanvasRenderer":77,"../sprites/Sprite":102,"../textures/RenderTexture":113,"../textures/Texture":115,"../utils":125,"./GraphicsData":54,"./utils/bezierCurveTo":56}],54:[function(_,O,p){p.__esModule=!0;function w(g,u){if(!(g instanceof u))throw new TypeError("Cannot call a class as a function")}var x=function(){function g(u,v,h,s,a,r,t,e,o){w(this,g),this.lineWidth=u,this.lineAlignment=o,this.nativeLines=t,this.lineColor=v,this.lineAlpha=h,this._lineTint=v,this.fillColor=s,this.fillAlpha=a,this._fillTint=s,this.fill=r,this.holes=[],this.shape=e,this.type=e.type}return g.prototype.clone=function(){return new g(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.nativeLines,this.shape)},g.prototype.addHole=function(v){this.holes.push(v)},g.prototype.destroy=function(){this.shape=null,this.holes=null},g}();p.default=x},{}],55:[function(_,O,p){p.__esModule=!0;var w=_("../../renderers/canvas/CanvasRenderer"),x=u(w),g=_("../../const");function u(s){return s&&s.__esModule?s:{default:s}}function v(s,a){if(!(s instanceof a))throw new TypeError("Cannot call a class as a function")}var h=function(){function s(a){v(this,s),this.renderer=a}return s.prototype.render=function(r){var t=this.renderer,e=t.context,o=r.worldAlpha,n=r.transform.worldTransform,i=t.resolution;e.setTransform(n.a*i,n.b*i,n.c*i,n.d*i,n.tx*i,n.ty*i),(r.canvasTintDirty!==r.dirty||r._prevTint!==r.tint)&&this.updateGraphicsTint(r),t.setBlendMode(r.blendMode);for(var f=0;f<r.graphicsData.length;f++){var l=r.graphicsData[f],d=l.shape,m=l._fillTint,c=l._lineTint;if(e.lineWidth=l.lineWidth,l.type===g.SHAPES.POLY){e.beginPath(),this.renderPolygon(d.points,d.closed,e);for(var b=0;b<l.holes.length;b++)this.renderPolygon(l.holes[b].points,!0,e);l.fill&&(e.globalAlpha=l.fillAlpha*o,e.fillStyle="#"+("00000"+(m|0).toString(16)).substr(-6),e.fill()),l.lineWidth&&(e.globalAlpha=l.lineAlpha*o,e.strokeStyle="#"+("00000"+(c|0).toString(16)).substr(-6),e.stroke())}else if(l.type===g.SHAPES.RECT)(l.fillColor||l.fillColor===0)&&(e.globalAlpha=l.fillAlpha*o,e.fillStyle="#"+("00000"+(m|0).toString(16)).substr(-6),e.fillRect(d.x,d.y,d.width,d.height)),l.lineWidth&&(e.globalAlpha=l.lineAlpha*o,e.strokeStyle="#"+("00000"+(c|0).toString(16)).substr(-6),e.strokeRect(d.x,d.y,d.width,d.height));else if(l.type===g.SHAPES.CIRC)e.beginPath(),e.arc(d.x,d.y,d.radius,0,2*Math.PI),e.closePath(),l.fill&&(e.globalAlpha=l.fillAlpha*o,e.fillStyle="#"+("00000"+(m|0).toString(16)).substr(-6),e.fill()),l.lineWidth&&(e.globalAlpha=l.lineAlpha*o,e.strokeStyle="#"+("00000"+(c|0).toString(16)).substr(-6),e.stroke());else if(l.type===g.SHAPES.ELIP){var y=d.width*2,T=d.height*2,E=d.x-y/2,R=d.y-T/2;e.beginPath();var S=.5522848,C=y/2*S,A=T/2*S,k=E+y,F=R+T,M=E+y/2,D=R+T/2;e.moveTo(E,D),e.bezierCurveTo(E,D-A,M-C,R,M,R),e.bezierCurveTo(M+C,R,k,D-A,k,D),e.bezierCurveTo(k,D+A,M+C,F,M,F),e.bezierCurveTo(M-C,F,E,D+A,E,D),e.closePath(),l.fill&&(e.globalAlpha=l.fillAlpha*o,e.fillStyle="#"+("00000"+(m|0).toString(16)).substr(-6),e.fill()),l.lineWidth&&(e.globalAlpha=l.lineAlpha*o,e.strokeStyle="#"+("00000"+(c|0).toString(16)).substr(-6),e.stroke())}else if(l.type===g.SHAPES.RREC){var L=d.x,I=d.y,N=d.width,U=d.height,B=d.radius,X=Math.min(N,U)/2|0;B=B>X?X:B,e.beginPath(),e.moveTo(L,I+B),e.lineTo(L,I+U-B),e.quadraticCurveTo(L,I+U,L+B,I+U),e.lineTo(L+N-B,I+U),e.quadraticCurveTo(L+N,I+U,L+N,I+U-B),e.lineTo(L+N,I+B),e.quadraticCurveTo(L+N,I,L+N-B,I),e.lineTo(L+B,I),e.quadraticCurveTo(L,I,L,I+B),e.closePath(),(l.fillColor||l.fillColor===0)&&(e.globalAlpha=l.fillAlpha*o,e.fillStyle="#"+("00000"+(m|0).toString(16)).substr(-6),e.fill()),l.lineWidth&&(e.globalAlpha=l.lineAlpha*o,e.strokeStyle="#"+("00000"+(c|0).toString(16)).substr(-6),e.stroke())}}},s.prototype.updateGraphicsTint=function(r){r._prevTint=r.tint,r.canvasTintDirty=r.dirty;for(var t=(r.tint>>16&255)/255,e=(r.tint>>8&255)/255,o=(r.tint&255)/255,n=0;n<r.graphicsData.length;++n){var i=r.graphicsData[n],f=i.fillColor|0,l=i.lineColor|0;i._fillTint=((f>>16&255)/255*t*255<<16)+((f>>8&255)/255*e*255<<8)+(f&255)/255*o*255,i._lineTint=((l>>16&255)/255*t*255<<16)+((l>>8&255)/255*e*255<<8)+(l&255)/255*o*255}},s.prototype.renderPolygon=function(r,t,e){e.moveTo(r[0],r[1]);for(var o=1;o<r.length/2;++o)e.lineTo(r[o*2],r[o*2+1]);t&&e.closePath()},s.prototype.destroy=function(){this.renderer=null},s}();p.default=h,x.default.registerPlugin("graphics",h)},{"../../const":46,"../../renderers/canvas/CanvasRenderer":77}],56:[function(_,O,p){p.__esModule=!0,p.default=w;function w(x,g,u,v,h,s,a,r,t){var e=arguments.length>9&&arguments[9]!==void 0?arguments[9]:[],o=0,n=0,i=0,f=0,l=0;e.push(x,g);for(var d=1,m=0;d<=t;++d)m=d/t,o=1-m,n=o*o,i=n*o,f=m*m,l=f*m,e.push(i*x+3*n*m*u+3*o*f*h+l*a,i*g+3*n*m*v+3*o*f*s+l*r);return e}},{}],57:[function(_,O,p){p.__esModule=!0;var w=_("../../utils"),x=_("../../const"),g=_("../../renderers/webgl/utils/ObjectRenderer"),u=c(g),v=_("../../renderers/webgl/WebGLRenderer"),h=c(v),s=_("./WebGLGraphicsData"),a=c(s),r=_("./shaders/PrimitiveShader"),t=c(r),e=_("./utils/buildPoly"),o=c(e),n=_("./utils/buildRectangle"),i=c(n),f=_("./utils/buildRoundedRectangle"),l=c(f),d=_("./utils/buildCircle"),m=c(d);function c(R){return R&&R.__esModule?R:{default:R}}function b(R,S){if(!(R instanceof S))throw new TypeError("Cannot call a class as a function")}function y(R,S){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:R}function T(R,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);R.prototype=Object.create(S&&S.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(R,S):R.__proto__=S)}var E=function(R){T(S,R);function S(C){b(this,S);var A=y(this,R.call(this,C));return A.graphicsDataPool=[],A.primitiveShader=null,A.gl=C.gl,A.CONTEXT_UID=0,A}return S.prototype.onContextChange=function(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.primitiveShader=new t.default(this.gl)},S.prototype.destroy=function(){u.default.prototype.destroy.call(this);for(var A=0;A<this.graphicsDataPool.length;++A)this.graphicsDataPool[A].destroy();this.graphicsDataPool=null},S.prototype.render=function(A){var k=this.renderer,F=k.gl,M=void 0,D=A._webGL[this.CONTEXT_UID];(!D||A.dirty!==D.dirty)&&(this.updateGraphics(A),D=A._webGL[this.CONTEXT_UID]);var L=this.primitiveShader;k.bindShader(L),k.state.setBlendMode(A.blendMode);for(var I=0,N=D.data.length;I<N;I++){M=D.data[I];var U=M.shader;k.bindShader(U),U.uniforms.translationMatrix=A.transform.worldTransform.toArray(!0),U.uniforms.tint=(0,w.hex2rgb)(A.tint),U.uniforms.alpha=A.worldAlpha,k.bindVao(M.vao),M.nativeLines?F.drawArrays(F.LINES,0,M.points.length/6):M.vao.draw(F.TRIANGLE_STRIP,M.indices.length)}},S.prototype.updateGraphics=function(A){var k=this.renderer.gl,F=A._webGL[this.CONTEXT_UID];if(F||(F=A._webGL[this.CONTEXT_UID]={lastIndex:0,data:[],gl:k,clearDirty:-1,dirty:-1}),F.dirty=A.dirty,A.clearDirty!==F.clearDirty){F.clearDirty=A.clearDirty;for(var M=0;M<F.data.length;M++)this.graphicsDataPool.push(F.data[M]);F.data.length=0,F.lastIndex=0}for(var D=void 0,L=void 0,I=F.lastIndex;I<A.graphicsData.length;I++){var N=A.graphicsData[I];D=this.getWebGLData(F,0),N.nativeLines&&N.lineWidth&&(L=this.getWebGLData(F,0,!0),F.lastIndex++),N.type===x.SHAPES.POLY&&(0,o.default)(N,D,L),N.type===x.SHAPES.RECT?(0,i.default)(N,D,L):N.type===x.SHAPES.CIRC||N.type===x.SHAPES.ELIP?(0,m.default)(N,D,L):N.type===x.SHAPES.RREC&&(0,l.default)(N,D,L),F.lastIndex++}this.renderer.bindVao(null);for(var U=0;U<F.data.length;U++)D=F.data[U],D.dirty&&D.upload()},S.prototype.getWebGLData=function(A,k,F){var M=A.data[A.data.length-1];return(!M||M.nativeLines!==F||M.points.length>32e4)&&(M=this.graphicsDataPool.pop()||new a.default(this.renderer.gl,this.primitiveShader,this.renderer.state.attribsState),M.nativeLines=F,M.reset(k),A.data.push(M)),M.dirty=!0,M},S}(u.default);p.default=E,h.default.registerPlugin("graphics",E)},{"../../const":46,"../../renderers/webgl/WebGLRenderer":84,"../../renderers/webgl/utils/ObjectRenderer":94,"../../utils":125,"./WebGLGraphicsData":58,"./shaders/PrimitiveShader":59,"./utils/buildCircle":60,"./utils/buildPoly":62,"./utils/buildRectangle":63,"./utils/buildRoundedRectangle":64}],58:[function(_,O,p){p.__esModule=!0;var w=_("pixi-gl-core"),x=g(w);function g(h){return h&&h.__esModule?h:{default:h}}function u(h,s){if(!(h instanceof s))throw new TypeError("Cannot call a class as a function")}var v=function(){function h(s,a,r){u(this,h),this.gl=s,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=x.default.GLBuffer.createVertexBuffer(s),this.indexBuffer=x.default.GLBuffer.createIndexBuffer(s),this.dirty=!0,this.nativeLines=!1,this.glPoints=null,this.glIndices=null,this.shader=a,this.vao=new x.default.VertexArrayObject(s,r).addIndex(this.indexBuffer).addAttribute(this.buffer,a.attributes.aVertexPosition,s.FLOAT,!1,4*6,0).addAttribute(this.buffer,a.attributes.aColor,s.FLOAT,!1,4*6,2*4)}return h.prototype.reset=function(){this.points.length=0,this.indices.length=0},h.prototype.upload=function(){this.glPoints=new Float32Array(this.points),this.buffer.upload(this.glPoints),this.glIndices=new Uint16Array(this.indices),this.indexBuffer.upload(this.glIndices),this.dirty=!1},h.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.vao.destroy(),this.buffer.destroy(),this.indexBuffer.destroy(),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null},h}();p.default=v},{"pixi-gl-core":15}],59:[function(_,O,p){p.__esModule=!0;var w=_("../../../Shader"),x=g(w);function g(a){return a&&a.__esModule?a:{default:a}}function u(a,r){if(!(a instanceof r))throw new TypeError("Cannot call a class as a function")}function v(a,r){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&(typeof r=="object"||typeof r=="function")?r:a}function h(a,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof r);a.prototype=Object.create(r&&r.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(a,r):a.__proto__=r)}var s=function(a){h(r,a);function r(t){return u(this,r),v(this,a.call(this,t,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join(`
`),["varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join(`
`)))}return r}(x.default);p.default=s},{"../../../Shader":44}],60:[function(_,O,p){p.__esModule=!0,p.default=h;var w=_("./buildLine"),x=v(w),g=_("../../../const"),u=_("../../../utils");function v(s){return s&&s.__esModule?s:{default:s}}function h(s,a,r){var t=s.shape,e=t.x,o=t.y,n=void 0,i=void 0;if(s.type===g.SHAPES.CIRC?(n=t.radius,i=t.radius):(n=t.width,i=t.height),!(n===0||i===0)){var f=Math.floor(30*Math.sqrt(t.radius))||Math.floor(15*Math.sqrt(t.width+t.height)),l=Math.PI*2/f;if(s.fill){var d=(0,u.hex2rgb)(s.fillColor),m=s.fillAlpha,c=d[0]*m,b=d[1]*m,y=d[2]*m,T=a.points,E=a.indices,R=T.length/6;E.push(R);for(var S=0;S<f+1;S++)T.push(e,o,c,b,y,m),T.push(e+Math.sin(l*S)*n,o+Math.cos(l*S)*i,c,b,y,m),E.push(R++,R++);E.push(R-1)}if(s.lineWidth){var C=s.points;s.points=[];for(var A=0;A<f;A++)s.points.push(e+Math.sin(l*-A)*n,o+Math.cos(l*-A)*i);s.points.push(s.points[0],s.points[1]),(0,x.default)(s,a,r),s.points=C}}}},{"../../../const":46,"../../../utils":125,"./buildLine":61}],61:[function(_,O,p){p.__esModule=!0,p.default=function(v,h,s){v.nativeLines?u(v,s):g(v,h)};var w=_("../../../math"),x=_("../../../utils");function g(v,h){var s=v.points;if(s.length!==0){var a=new w.Point(s[0],s[1]),r=new w.Point(s[s.length-2],s[s.length-1]);if(a.x===r.x&&a.y===r.y){s=s.slice(),s.pop(),s.pop(),r=new w.Point(s[s.length-2],s[s.length-1]);var t=r.x+(a.x-r.x)*.5,e=r.y+(a.y-r.y)*.5;s.unshift(t,e),s.push(t,e)}var o=h.points,n=h.indices,i=s.length/2,f=s.length,l=o.length/6,d=v.lineWidth/2,m=(0,x.hex2rgb)(v.lineColor),c=v.lineAlpha,b=m[0]*c,y=m[1]*c,T=m[2]*c,E=s[0],R=s[1],S=s[2],C=s[3],A=0,k=0,F=-(R-C),M=E-S,D=0,L=0,I=0,N=0,U=Math.sqrt(F*F+M*M);F/=U,M/=U,F*=d,M*=d;var B=v.lineAlignment,X=(1-B)*2,W=B*2;o.push(E-F*X,R-M*X,b,y,T,c),o.push(E+F*W,R+M*W,b,y,T,c);for(var Z=1;Z<i-1;++Z){E=s[(Z-1)*2],R=s[(Z-1)*2+1],S=s[Z*2],C=s[Z*2+1],A=s[(Z+1)*2],k=s[(Z+1)*2+1],F=-(R-C),M=E-S,U=Math.sqrt(F*F+M*M),F/=U,M/=U,F*=d,M*=d,D=-(C-k),L=S-A,U=Math.sqrt(D*D+L*L),D/=U,L/=U,D*=d,L*=d;var K=-M+R-(-M+C),Q=-F+S-(-F+E),J=(-F+E)*(-M+C)-(-F+S)*(-M+R),H=-L+k-(-L+C),q=-D+S-(-D+A),$=(-D+A)*(-L+C)-(-D+S)*(-L+k),ie=K*q-H*Q;if(Math.abs(ie)<.1){ie+=10.1,o.push(S-F*X,C-M*X,b,y,T,c),o.push(S+F*W,C+M*W,b,y,T,c);continue}var ne=(Q*$-q*J)/ie,ae=(H*J-K*$)/ie,se=(ne-S)*(ne-S)+(ae-C)*(ae-C);se>196*d*d?(I=F-D,N=M-L,U=Math.sqrt(I*I+N*N),I/=U,N/=U,I*=d,N*=d,o.push(S-I*X,C-N*X),o.push(b,y,T,c),o.push(S+I*W,C+N*W),o.push(b,y,T,c),o.push(S-I*W*X,C-N*X),o.push(b,y,T,c),f++):(o.push(S+(ne-S)*X,C+(ae-C)*X),o.push(b,y,T,c),o.push(S-(ne-S)*W,C-(ae-C)*W),o.push(b,y,T,c))}E=s[(i-2)*2],R=s[(i-2)*2+1],S=s[(i-1)*2],C=s[(i-1)*2+1],F=-(R-C),M=E-S,U=Math.sqrt(F*F+M*M),F/=U,M/=U,F*=d,M*=d,o.push(S-F*X,C-M*X),o.push(b,y,T,c),o.push(S+F*W,C+M*W),o.push(b,y,T,c),n.push(l);for(var re=0;re<f;++re)n.push(l++);n.push(l-1)}}function u(v,h){var s=0,a=v.points;if(a.length!==0){var r=h.points,t=a.length/2,e=(0,x.hex2rgb)(v.lineColor),o=v.lineAlpha,n=e[0]*o,i=e[1]*o,f=e[2]*o;for(s=1;s<t;s++){var l=a[(s-1)*2],d=a[(s-1)*2+1],m=a[s*2],c=a[s*2+1];r.push(l,d),r.push(n,i,f,o),r.push(m,c),r.push(n,i,f,o)}}}},{"../../../math":70,"../../../utils":125}],62:[function(_,O,p){p.__esModule=!0,p.default=s;var w=_("./buildLine"),x=h(w),g=_("../../../utils"),u=_("earcut"),v=h(u);function h(a){return a&&a.__esModule?a:{default:a}}function s(a,r,t){a.points=a.shape.points.slice();var e=a.points;if(a.fill&&e.length>=6){for(var o=[],n=a.holes,i=0;i<n.length;i++){var f=n[i];o.push(e.length/2),e=e.concat(f.points)}var l=r.points,d=r.indices,m=e.length/2,c=(0,g.hex2rgb)(a.fillColor),b=a.fillAlpha,y=c[0]*b,T=c[1]*b,E=c[2]*b,R=(0,v.default)(e,o,2);if(!R)return;for(var S=l.length/6,C=0;C<R.length;C+=3)d.push(R[C]+S),d.push(R[C]+S),d.push(R[C+1]+S),d.push(R[C+2]+S),d.push(R[C+2]+S);for(var A=0;A<m;A++)l.push(e[A*2],e[A*2+1],y,T,E,b)}a.lineWidth>0&&(0,x.default)(a,r,t)}},{"../../../utils":125,"./buildLine":61,earcut:2}],63:[function(_,O,p){p.__esModule=!0,p.default=v;var w=_("./buildLine"),x=u(w),g=_("../../../utils");function u(h){return h&&h.__esModule?h:{default:h}}function v(h,s,a){var r=h.shape,t=r.x,e=r.y,o=r.width,n=r.height;if(h.fill){var i=(0,g.hex2rgb)(h.fillColor),f=h.fillAlpha,l=i[0]*f,d=i[1]*f,m=i[2]*f,c=s.points,b=s.indices,y=c.length/6;c.push(t,e),c.push(l,d,m,f),c.push(t+o,e),c.push(l,d,m,f),c.push(t,e+n),c.push(l,d,m,f),c.push(t+o,e+n),c.push(l,d,m,f),b.push(y,y,y+1,y+2,y+3,y+3)}if(h.lineWidth){var T=h.points;h.points=[t,e,t+o,e,t+o,e+n,t,e+n,t,e],(0,x.default)(h,s,a),h.points=T}}},{"../../../utils":125,"./buildLine":61}],64:[function(_,O,p){p.__esModule=!0,p.default=s;var w=_("earcut"),x=h(w),g=_("./buildLine"),u=h(g),v=_("../../../utils");function h(t){return t&&t.__esModule?t:{default:t}}function s(t,e,o){var n=t.shape,i=n.x,f=n.y,l=n.width,d=n.height,m=n.radius,c=[];if(c.push(i,f+m),r(i,f+d-m,i,f+d,i+m,f+d,c),r(i+l-m,f+d,i+l,f+d,i+l,f+d-m,c),r(i+l,f+m,i+l,f,i+l-m,f,c),r(i+m,f,i,f,i,f+m+1e-10,c),t.fill){for(var b=(0,v.hex2rgb)(t.fillColor),y=t.fillAlpha,T=b[0]*y,E=b[1]*y,R=b[2]*y,S=e.points,C=e.indices,A=S.length/6,k=(0,x.default)(c,null,2),F=0,M=k.length;F<M;F+=3)C.push(k[F]+A),C.push(k[F]+A),C.push(k[F+1]+A),C.push(k[F+2]+A),C.push(k[F+2]+A);for(var D=0,L=c.length;D<L;D++)S.push(c[D],c[++D],T,E,R,y)}if(t.lineWidth){var I=t.points;t.points=c,(0,u.default)(t,e,o),t.points=I}}function a(t,e,o){var n=e-t;return t+n*o}function r(t,e,o,n,i,f){for(var l=arguments.length>6&&arguments[6]!==void 0?arguments[6]:[],d=20,m=l,c=0,b=0,y=0,T=0,E=0,R=0,S=0,C=0;S<=d;++S)C=S/d,c=a(t,o,C),b=a(e,n,C),y=a(o,i,C),T=a(n,f,C),E=a(c,y,C),R=a(b,T,C),m.push(E,R);return m}},{"../../../utils":125,"./buildLine":61,earcut:2}],65:[function(_,O,p){p.__esModule=!0,p.autoDetectRenderer=p.Application=p.Filter=p.SpriteMaskFilter=p.Quad=p.RenderTarget=p.ObjectRenderer=p.WebGLManager=p.Shader=p.CanvasRenderTarget=p.TextureUvs=p.VideoBaseTexture=p.BaseRenderTexture=p.RenderTexture=p.BaseTexture=p.TextureMatrix=p.Texture=p.Spritesheet=p.CanvasGraphicsRenderer=p.GraphicsRenderer=p.GraphicsData=p.Graphics=p.TextMetrics=p.TextStyle=p.Text=p.SpriteRenderer=p.CanvasTinter=p.CanvasSpriteRenderer=p.Sprite=p.TransformBase=p.TransformStatic=p.Transform=p.Container=p.DisplayObject=p.Bounds=p.glCore=p.WebGLRenderer=p.CanvasRenderer=p.ticker=p.utils=p.settings=void 0;var w=_("./const");Object.keys(w).forEach(function(ee){ee==="default"||ee==="__esModule"||Object.defineProperty(p,ee,{enumerable:!0,get:function(){return w[ee]}})});var x=_("./math");Object.keys(x).forEach(function(ee){ee==="default"||ee==="__esModule"||Object.defineProperty(p,ee,{enumerable:!0,get:function(){return x[ee]}})});var g=_("pixi-gl-core");Object.defineProperty(p,"glCore",{enumerable:!0,get:function(){return re(g).default}});var u=_("./display/Bounds");Object.defineProperty(p,"Bounds",{enumerable:!0,get:function(){return re(u).default}});var v=_("./display/DisplayObject");Object.defineProperty(p,"DisplayObject",{enumerable:!0,get:function(){return re(v).default}});var h=_("./display/Container");Object.defineProperty(p,"Container",{enumerable:!0,get:function(){return re(h).default}});var s=_("./display/Transform");Object.defineProperty(p,"Transform",{enumerable:!0,get:function(){return re(s).default}});var a=_("./display/TransformStatic");Object.defineProperty(p,"TransformStatic",{enumerable:!0,get:function(){return re(a).default}});var r=_("./display/TransformBase");Object.defineProperty(p,"TransformBase",{enumerable:!0,get:function(){return re(r).default}});var t=_("./sprites/Sprite");Object.defineProperty(p,"Sprite",{enumerable:!0,get:function(){return re(t).default}});var e=_("./sprites/canvas/CanvasSpriteRenderer");Object.defineProperty(p,"CanvasSpriteRenderer",{enumerable:!0,get:function(){return re(e).default}});var o=_("./sprites/canvas/CanvasTinter");Object.defineProperty(p,"CanvasTinter",{enumerable:!0,get:function(){return re(o).default}});var n=_("./sprites/webgl/SpriteRenderer");Object.defineProperty(p,"SpriteRenderer",{enumerable:!0,get:function(){return re(n).default}});var i=_("./text/Text");Object.defineProperty(p,"Text",{enumerable:!0,get:function(){return re(i).default}});var f=_("./text/TextStyle");Object.defineProperty(p,"TextStyle",{enumerable:!0,get:function(){return re(f).default}});var l=_("./text/TextMetrics");Object.defineProperty(p,"TextMetrics",{enumerable:!0,get:function(){return re(l).default}});var d=_("./graphics/Graphics");Object.defineProperty(p,"Graphics",{enumerable:!0,get:function(){return re(d).default}});var m=_("./graphics/GraphicsData");Object.defineProperty(p,"GraphicsData",{enumerable:!0,get:function(){return re(m).default}});var c=_("./graphics/webgl/GraphicsRenderer");Object.defineProperty(p,"GraphicsRenderer",{enumerable:!0,get:function(){return re(c).default}});var b=_("./graphics/canvas/CanvasGraphicsRenderer");Object.defineProperty(p,"CanvasGraphicsRenderer",{enumerable:!0,get:function(){return re(b).default}});var y=_("./textures/Spritesheet");Object.defineProperty(p,"Spritesheet",{enumerable:!0,get:function(){return re(y).default}});var T=_("./textures/Texture");Object.defineProperty(p,"Texture",{enumerable:!0,get:function(){return re(T).default}});var E=_("./textures/TextureMatrix");Object.defineProperty(p,"TextureMatrix",{enumerable:!0,get:function(){return re(E).default}});var R=_("./textures/BaseTexture");Object.defineProperty(p,"BaseTexture",{enumerable:!0,get:function(){return re(R).default}});var S=_("./textures/RenderTexture");Object.defineProperty(p,"RenderTexture",{enumerable:!0,get:function(){return re(S).default}});var C=_("./textures/BaseRenderTexture");Object.defineProperty(p,"BaseRenderTexture",{enumerable:!0,get:function(){return re(C).default}});var A=_("./textures/VideoBaseTexture");Object.defineProperty(p,"VideoBaseTexture",{enumerable:!0,get:function(){return re(A).default}});var k=_("./textures/TextureUvs");Object.defineProperty(p,"TextureUvs",{enumerable:!0,get:function(){return re(k).default}});var F=_("./renderers/canvas/utils/CanvasRenderTarget");Object.defineProperty(p,"CanvasRenderTarget",{enumerable:!0,get:function(){return re(F).default}});var M=_("./Shader");Object.defineProperty(p,"Shader",{enumerable:!0,get:function(){return re(M).default}});var D=_("./renderers/webgl/managers/WebGLManager");Object.defineProperty(p,"WebGLManager",{enumerable:!0,get:function(){return re(D).default}});var L=_("./renderers/webgl/utils/ObjectRenderer");Object.defineProperty(p,"ObjectRenderer",{enumerable:!0,get:function(){return re(L).default}});var I=_("./renderers/webgl/utils/RenderTarget");Object.defineProperty(p,"RenderTarget",{enumerable:!0,get:function(){return re(I).default}});var N=_("./renderers/webgl/utils/Quad");Object.defineProperty(p,"Quad",{enumerable:!0,get:function(){return re(N).default}});var U=_("./renderers/webgl/filters/spriteMask/SpriteMaskFilter");Object.defineProperty(p,"SpriteMaskFilter",{enumerable:!0,get:function(){return re(U).default}});var B=_("./renderers/webgl/filters/Filter");Object.defineProperty(p,"Filter",{enumerable:!0,get:function(){return re(B).default}});var X=_("./Application");Object.defineProperty(p,"Application",{enumerable:!0,get:function(){return re(X).default}});var W=_("./autoDetectRenderer");Object.defineProperty(p,"autoDetectRenderer",{enumerable:!0,get:function(){return W.autoDetectRenderer}});var Z=_("./utils"),K=se(Z),Q=_("./ticker"),J=se(Q),H=_("./settings"),q=re(H),$=_("./renderers/canvas/CanvasRenderer"),ie=re($),ne=_("./renderers/webgl/WebGLRenderer"),ae=re(ne);function se(ee){if(ee&&ee.__esModule)return ee;var ue={};if(ee!=null)for(var he in ee)Object.prototype.hasOwnProperty.call(ee,he)&&(ue[he]=ee[he]);return ue.default=ee,ue}function re(ee){return ee&&ee.__esModule?ee:{default:ee}}p.settings=q.default,p.utils=K,p.ticker=J,p.CanvasRenderer=ie.default,p.WebGLRenderer=ae.default},{"./Application":43,"./Shader":44,"./autoDetectRenderer":45,"./const":46,"./display/Bounds":47,"./display/Container":48,"./display/DisplayObject":49,"./display/Transform":50,"./display/TransformBase":51,"./display/TransformStatic":52,"./graphics/Graphics":53,"./graphics/GraphicsData":54,"./graphics/canvas/CanvasGraphicsRenderer":55,"./graphics/webgl/GraphicsRenderer":57,"./math":70,"./renderers/canvas/CanvasRenderer":77,"./renderers/canvas/utils/CanvasRenderTarget":79,"./renderers/webgl/WebGLRenderer":84,"./renderers/webgl/filters/Filter":86,"./renderers/webgl/filters/spriteMask/SpriteMaskFilter":89,"./renderers/webgl/managers/WebGLManager":93,"./renderers/webgl/utils/ObjectRenderer":94,"./renderers/webgl/utils/Quad":95,"./renderers/webgl/utils/RenderTarget":96,"./settings":101,"./sprites/Sprite":102,"./sprites/canvas/CanvasSpriteRenderer":103,"./sprites/canvas/CanvasTinter":104,"./sprites/webgl/SpriteRenderer":106,"./text/Text":108,"./text/TextMetrics":109,"./text/TextStyle":110,"./textures/BaseRenderTexture":111,"./textures/BaseTexture":112,"./textures/RenderTexture":113,"./textures/Spritesheet":114,"./textures/Texture":115,"./textures/TextureMatrix":116,"./textures/TextureUvs":117,"./textures/VideoBaseTexture":118,"./ticker":121,"./utils":125,"pixi-gl-core":15}],66:[function(_,O,p){p.__esModule=!0;var w=_("./Matrix"),x=g(w);function g(n){return n&&n.__esModule?n:{default:n}}var u=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],v=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],h=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],s=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],a=[],r=[];function t(n){return n<0?-1:n>0?1:0}function e(){for(var n=0;n<16;n++){var i=[];r.push(i);for(var f=0;f<16;f++)for(var l=t(u[n]*u[f]+h[n]*v[f]),d=t(v[n]*u[f]+s[n]*v[f]),m=t(u[n]*h[f]+h[n]*s[f]),c=t(v[n]*h[f]+s[n]*s[f]),b=0;b<16;b++)if(u[b]===l&&v[b]===d&&h[b]===m&&s[b]===c){i.push(b);break}}for(var y=0;y<16;y++){var T=new x.default;T.set(u[y],v[y],h[y],s[y],0,0),a.push(T)}}e();var o={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(i){return u[i]},uY:function(i){return v[i]},vX:function(i){return h[i]},vY:function(i){return s[i]},inv:function(i){return i&8?i&15:-i&7},add:function(i,f){return r[i][f]},sub:function(i,f){return r[i][o.inv(f)]},rotate180:function(i){return i^4},isVertical:function(i){return(i&3)===2},byDirection:function(i,f){return Math.abs(i)*2<=Math.abs(f)?f>=0?o.S:o.N:Math.abs(f)*2<=Math.abs(i)?i>0?o.E:o.W:f>0?i>0?o.SE:o.SW:i>0?o.NE:o.NW},matrixAppendRotationInv:function(i,f){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,m=a[o.inv(f)];m.tx=l,m.ty=d,i.append(m)}};p.default=o},{"./Matrix":67}],67:[function(_,O,p){p.__esModule=!0;var w=function(){function a(r,t){for(var e=0;e<t.length;e++){var o=t[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(r,o.key,o)}}return function(r,t,e){return t&&a(r.prototype,t),e&&a(r,e),r}}(),x=_("./Point"),g=v(x),u=_("../const");function v(a){return a&&a.__esModule?a:{default:a}}function h(a,r){if(!(a instanceof r))throw new TypeError("Cannot call a class as a function")}var s=function(){function a(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0;h(this,a),this.a=r,this.b=t,this.c=e,this.d=o,this.tx=n,this.ty=i,this.array=null}return a.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},a.prototype.set=function(t,e,o,n,i,f){return this.a=t,this.b=e,this.c=o,this.d=n,this.tx=i,this.ty=f,this},a.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var o=e||this.array;return t?(o[0]=this.a,o[1]=this.b,o[2]=0,o[3]=this.c,o[4]=this.d,o[5]=0,o[6]=this.tx,o[7]=this.ty,o[8]=1):(o[0]=this.a,o[1]=this.c,o[2]=this.tx,o[3]=this.b,o[4]=this.d,o[5]=this.ty,o[6]=0,o[7]=0,o[8]=1),o},a.prototype.apply=function(t,e){e=e||new g.default;var o=t.x,n=t.y;return e.x=this.a*o+this.c*n+this.tx,e.y=this.b*o+this.d*n+this.ty,e},a.prototype.applyInverse=function(t,e){e=e||new g.default;var o=1/(this.a*this.d+this.c*-this.b),n=t.x,i=t.y;return e.x=this.d*o*n+-this.c*o*i+(this.ty*this.c-this.tx*this.d)*o,e.y=this.a*o*i+-this.b*o*n+(-this.ty*this.a+this.tx*this.b)*o,e},a.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},a.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},a.prototype.rotate=function(t){var e=Math.cos(t),o=Math.sin(t),n=this.a,i=this.c,f=this.tx;return this.a=n*e-this.b*o,this.b=n*o+this.b*e,this.c=i*e-this.d*o,this.d=i*o+this.d*e,this.tx=f*e-this.ty*o,this.ty=f*o+this.ty*e,this},a.prototype.append=function(t){var e=this.a,o=this.b,n=this.c,i=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*o+t.b*i,this.c=t.c*e+t.d*n,this.d=t.c*o+t.d*i,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*o+t.ty*i+this.ty,this},a.prototype.setTransform=function(t,e,o,n,i,f,l,d,m){return this.a=Math.cos(l+m)*i,this.b=Math.sin(l+m)*i,this.c=-Math.sin(l-d)*f,this.d=Math.cos(l-d)*f,this.tx=t-(o*this.a+n*this.c),this.ty=e-(o*this.b+n*this.d),this},a.prototype.prepend=function(t){var e=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){var o=this.a,n=this.c;this.a=o*t.a+this.b*t.c,this.b=o*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},a.prototype.decompose=function(t){var e=this.a,o=this.b,n=this.c,i=this.d,f=-Math.atan2(-n,i),l=Math.atan2(o,e),d=Math.abs(f+l);return d<1e-5||Math.abs(u.PI_2-d)<1e-5?(t.rotation=l,e<0&&i>=0&&(t.rotation+=t.rotation<=0?Math.PI:-Math.PI),t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=f,t.skew.y=l),t.scale.x=Math.sqrt(e*e+o*o),t.scale.y=Math.sqrt(n*n+i*i),t.position.x=this.tx,t.position.y=this.ty,t},a.prototype.invert=function(){var t=this.a,e=this.b,o=this.c,n=this.d,i=this.tx,f=t*n-e*o;return this.a=n/f,this.b=-e/f,this.c=-o/f,this.d=t/f,this.tx=(o*this.ty-n*i)/f,this.ty=-(t*this.ty-e*i)/f,this},a.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},a.prototype.clone=function(){var t=new a;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},a.prototype.copy=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},w(a,null,[{key:"IDENTITY",get:function(){return new a}},{key:"TEMP_MATRIX",get:function(){return new a}}]),a}();p.default=s},{"../const":46,"./Point":69}],68:[function(_,O,p){p.__esModule=!0;var w=function(){function u(v,h){for(var s=0;s<h.length;s++){var a=h[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(v,a.key,a)}}return function(v,h,s){return h&&u(v.prototype,h),s&&u(v,s),v}}();function x(u,v){if(!(u instanceof v))throw new TypeError("Cannot call a class as a function")}var g=function(){function u(v,h){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;x(this,u),this._x=s,this._y=a,this.cb=v,this.scope=h}return u.prototype.clone=function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,a=h||this.cb,r=s||this.scope;return new u(a,r,this._x,this._y)},u.prototype.set=function(h,s){var a=h||0,r=s||(s!==0?a:0);(this._x!==a||this._y!==r)&&(this._x=a,this._y=r,this.cb.call(this.scope))},u.prototype.copy=function(h){(this._x!==h.x||this._y!==h.y)&&(this._x=h.x,this._y=h.y,this.cb.call(this.scope))},u.prototype.equals=function(h){return h.x===this._x&&h.y===this._y},w(u,[{key:"x",get:function(){return this._x},set:function(h){this._x!==h&&(this._x=h,this.cb.call(this.scope))}},{key:"y",get:function(){return this._y},set:function(h){this._y!==h&&(this._y=h,this.cb.call(this.scope))}}]),u}();p.default=g},{}],69:[function(_,O,p){p.__esModule=!0;function w(g,u){if(!(g instanceof u))throw new TypeError("Cannot call a class as a function")}var x=function(){function g(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;w(this,g),this.x=u,this.y=v}return g.prototype.clone=function(){return new g(this.x,this.y)},g.prototype.copy=function(v){this.set(v.x,v.y)},g.prototype.equals=function(v){return v.x===this.x&&v.y===this.y},g.prototype.set=function(v,h){this.x=v||0,this.y=h||(h!==0?this.x:0)},g}();p.default=x},{}],70:[function(_,O,p){p.__esModule=!0;var w=_("./Point");Object.defineProperty(p,"Point",{enumerable:!0,get:function(){return t(w).default}});var x=_("./ObservablePoint");Object.defineProperty(p,"ObservablePoint",{enumerable:!0,get:function(){return t(x).default}});var g=_("./Matrix");Object.defineProperty(p,"Matrix",{enumerable:!0,get:function(){return t(g).default}});var u=_("./GroupD8");Object.defineProperty(p,"GroupD8",{enumerable:!0,get:function(){return t(u).default}});var v=_("./shapes/Circle");Object.defineProperty(p,"Circle",{enumerable:!0,get:function(){return t(v).default}});var h=_("./shapes/Ellipse");Object.defineProperty(p,"Ellipse",{enumerable:!0,get:function(){return t(h).default}});var s=_("./shapes/Polygon");Object.defineProperty(p,"Polygon",{enumerable:!0,get:function(){return t(s).default}});var a=_("./shapes/Rectangle");Object.defineProperty(p,"Rectangle",{enumerable:!0,get:function(){return t(a).default}});var r=_("./shapes/RoundedRectangle");Object.defineProperty(p,"RoundedRectangle",{enumerable:!0,get:function(){return t(r).default}});function t(e){return e&&e.__esModule?e:{default:e}}},{"./GroupD8":66,"./Matrix":67,"./ObservablePoint":68,"./Point":69,"./shapes/Circle":71,"./shapes/Ellipse":72,"./shapes/Polygon":73,"./shapes/Rectangle":74,"./shapes/RoundedRectangle":75}],71:[function(_,O,p){p.__esModule=!0;var w=_("./Rectangle"),x=u(w),g=_("../../const");function u(s){return s&&s.__esModule?s:{default:s}}function v(s,a){if(!(s instanceof a))throw new TypeError("Cannot call a class as a function")}var h=function(){function s(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;v(this,s),this.x=a,this.y=r,this.radius=t,this.type=g.SHAPES.CIRC}return s.prototype.clone=function(){return new s(this.x,this.y,this.radius)},s.prototype.contains=function(r,t){if(this.radius<=0)return!1;var e=this.radius*this.radius,o=this.x-r,n=this.y-t;return o*=o,n*=n,o+n<=e},s.prototype.getBounds=function(){return new x.default(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)},s}();p.default=h},{"../../const":46,"./Rectangle":74}],72:[function(_,O,p){p.__esModule=!0;var w=_("./Rectangle"),x=u(w),g=_("../../const");function u(s){return s&&s.__esModule?s:{default:s}}function v(s,a){if(!(s instanceof a))throw new TypeError("Cannot call a class as a function")}var h=function(){function s(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;v(this,s),this.x=a,this.y=r,this.width=t,this.height=e,this.type=g.SHAPES.ELIP}return s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height)},s.prototype.contains=function(r,t){if(this.width<=0||this.height<=0)return!1;var e=(r-this.x)/this.width,o=(t-this.y)/this.height;return e*=e,o*=o,e+o<=1},s.prototype.getBounds=function(){return new x.default(this.x-this.width,this.y-this.height,this.width,this.height)},s}();p.default=h},{"../../const":46,"./Rectangle":74}],73:[function(_,O,p){p.__esModule=!0;var w=_("../Point"),x=u(w),g=_("../../const");function u(s){return s&&s.__esModule?s:{default:s}}function v(s,a){if(!(s instanceof a))throw new TypeError("Cannot call a class as a function")}var h=function(){function s(){for(var a=arguments.length,r=Array(a),t=0;t<a;t++)r[t]=arguments[t];if(v(this,s),Array.isArray(r[0])&&(r=r[0]),r[0]instanceof x.default){for(var e=[],o=0,n=r.length;o<n;o++)e.push(r[o].x,r[o].y);r=e}this.closed=!0,this.points=r,this.type=g.SHAPES.POLY}return s.prototype.clone=function(){return new s(this.points.slice())},s.prototype.close=function(){var r=this.points;(r[0]!==r[r.length-2]||r[1]!==r[r.length-1])&&r.push(r[0],r[1])},s.prototype.contains=function(r,t){for(var e=!1,o=this.points.length/2,n=0,i=o-1;n<o;i=n++){var f=this.points[n*2],l=this.points[n*2+1],d=this.points[i*2],m=this.points[i*2+1],c=l>t!=m>t&&r<(d-f)*((t-l)/(m-l))+f;c&&(e=!e)}return e},s}();p.default=h},{"../../const":46,"../Point":69}],74:[function(_,O,p){p.__esModule=!0;var w=function(){function v(h,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(h,r.key,r)}}return function(h,s,a){return s&&v(h.prototype,s),a&&v(h,a),h}}(),x=_("../../const");function g(v,h){if(!(v instanceof h))throw new TypeError("Cannot call a class as a function")}var u=function(){function v(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;g(this,v),this.x=Number(h),this.y=Number(s),this.width=Number(a),this.height=Number(r),this.type=x.SHAPES.RECT}return v.prototype.clone=function(){return new v(this.x,this.y,this.width,this.height)},v.prototype.copy=function(s){return this.x=s.x,this.y=s.y,this.width=s.width,this.height=s.height,this},v.prototype.contains=function(s,a){return this.width<=0||this.height<=0?!1:s>=this.x&&s<this.x+this.width&&a>=this.y&&a<this.y+this.height},v.prototype.pad=function(s,a){s=s||0,a=a||(a!==0?s:0),this.x-=s,this.y-=a,this.width+=s*2,this.height+=a*2},v.prototype.fit=function(s){this.x<s.x&&(this.width+=this.x,this.width<0&&(this.width=0),this.x=s.x),this.y<s.y&&(this.height+=this.y,this.height<0&&(this.height=0),this.y=s.y),this.x+this.width>s.x+s.width&&(this.width=s.width-this.x,this.width<0&&(this.width=0)),this.y+this.height>s.y+s.height&&(this.height=s.height-this.y,this.height<0&&(this.height=0))},v.prototype.enlarge=function(s){var a=Math.min(this.x,s.x),r=Math.max(this.x+this.width,s.x+s.width),t=Math.min(this.y,s.y),e=Math.max(this.y+this.height,s.y+s.height);this.x=a,this.width=r-a,this.y=t,this.height=e-t},w(v,[{key:"left",get:function(){return this.x}},{key:"right",get:function(){return this.x+this.width}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.height}}],[{key:"EMPTY",get:function(){return new v(0,0,0,0)}}]),v}();p.default=u},{"../../const":46}],75:[function(_,O,p){p.__esModule=!0;var w=_("../../const");function x(u,v){if(!(u instanceof v))throw new TypeError("Cannot call a class as a function")}var g=function(){function u(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:20;x(this,u),this.x=v,this.y=h,this.width=s,this.height=a,this.radius=r,this.type=w.SHAPES.RREC}return u.prototype.clone=function(){return new u(this.x,this.y,this.width,this.height,this.radius)},u.prototype.contains=function(h,s){if(this.width<=0||this.height<=0)return!1;if(h>=this.x&&h<=this.x+this.width&&s>=this.y&&s<=this.y+this.height){if(s>=this.y+this.radius&&s<=this.y+this.height-this.radius||h>=this.x+this.radius&&h<=this.x+this.width-this.radius)return!0;var a=h-(this.x+this.radius),r=s-(this.y+this.radius),t=this.radius*this.radius;if(a*a+r*r<=t||(a=h-(this.x+this.width-this.radius),a*a+r*r<=t)||(r=s-(this.y+this.height-this.radius),a*a+r*r<=t)||(a=h-(this.x+this.radius),a*a+r*r<=t))return!0}return!1},u}();p.default=g},{"../../const":46}],76:[function(_,O,p){p.__esModule=!0;var w=function(){function c(b,y){for(var T=0;T<y.length;T++){var E=y[T];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(b,E.key,E)}}return function(b,y,T){return y&&c(b.prototype,y),T&&c(b,T),b}}(),x=_("../utils"),g=_("../math"),u=_("../const"),v=_("../settings"),h=n(v),s=_("../display/Container"),a=n(s),r=_("../textures/RenderTexture"),t=n(r),e=_("eventemitter3"),o=n(e);function n(c){return c&&c.__esModule?c:{default:c}}function i(c,b){if(!(c instanceof b))throw new TypeError("Cannot call a class as a function")}function f(c,b){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:c}function l(c,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);c.prototype=Object.create(b&&b.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(c,b):c.__proto__=b)}var d=new g.Matrix,m=function(c){l(b,c);function b(y,T,E,R){i(this,b);var S=f(this,c.call(this));return(0,x.sayHello)(y),typeof T=="number"&&(T=Object.assign({width:T,height:E||h.default.RENDER_OPTIONS.height},R)),T=Object.assign({},h.default.RENDER_OPTIONS,T),S.options=T,S.type=u.RENDERER_TYPE.UNKNOWN,S.screen=new g.Rectangle(0,0,T.width,T.height),S.view=T.view||document.createElement("canvas"),S.resolution=T.resolution||h.default.RESOLUTION,S.transparent=T.transparent,S.autoResize=T.autoResize||!1,S.blendModes=null,S.preserveDrawingBuffer=T.preserveDrawingBuffer,S.clearBeforeRender=T.clearBeforeRender,S.roundPixels=T.roundPixels,S._backgroundColor=0,S._backgroundColorRgba=[0,0,0,0],S._backgroundColorString="#000000",S.backgroundColor=T.backgroundColor||S._backgroundColor,S._tempDisplayObjectParent=new a.default,S._lastObjectRendered=S._tempDisplayObjectParent,S}return b.prototype.resize=function(T,E){this.screen.width=T,this.screen.height=E,this.view.width=T*this.resolution,this.view.height=E*this.resolution,this.autoResize&&(this.view.style.width=T+"px",this.view.style.height=E+"px")},b.prototype.generateTexture=function(T,E,R,S){S=S||T.getLocalBounds();var C=t.default.create(S.width|0,S.height|0,E,R);return d.tx=-S.x,d.ty=-S.y,this.render(T,C,!1,d,!!T.parent),C},b.prototype.destroy=function(T){T&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=u.RENDERER_TYPE.UNKNOWN,this.view=null,this.screen=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.options=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this._tempDisplayObjectParent=null,this._lastObjectRendered=null},w(b,[{key:"width",get:function(){return this.view.width}},{key:"height",get:function(){return this.view.height}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(T){this._backgroundColor=T,this._backgroundColorString=(0,x.hex2string)(T),(0,x.hex2rgb)(T,this._backgroundColorRgba)}}]),b}(o.default);p.default=m},{"../const":46,"../display/Container":48,"../math":70,"../settings":101,"../textures/RenderTexture":113,"../utils":125,eventemitter3:3}],77:[function(_,O,p){p.__esModule=!0;var w=_("../SystemRenderer"),x=n(w),g=_("./utils/CanvasMaskManager"),u=n(g),v=_("./utils/CanvasRenderTarget"),h=n(v),s=_("./utils/mapCanvasBlendModesToPixi"),a=n(s),r=_("../../utils"),t=_("../../const"),e=_("../../settings"),o=n(e);function n(m){return m&&m.__esModule?m:{default:m}}function i(m,c){if(!(m instanceof c))throw new TypeError("Cannot call a class as a function")}function f(m,c){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c&&(typeof c=="object"||typeof c=="function")?c:m}function l(m,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof c);m.prototype=Object.create(c&&c.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(m,c):m.__proto__=c)}var d=function(m){l(c,m);function c(b,y,T){i(this,c);var E=f(this,m.call(this,"Canvas",b,y,T));return E.type=t.RENDERER_TYPE.CANVAS,E.rootContext=E.view.getContext("2d",{alpha:E.transparent}),E.context=E.rootContext,E.refresh=!0,E.maskManager=new u.default(E),E.smoothProperty="imageSmoothingEnabled",E.rootContext.imageSmoothingEnabled||(E.rootContext.webkitImageSmoothingEnabled?E.smoothProperty="webkitImageSmoothingEnabled":E.rootContext.mozImageSmoothingEnabled?E.smoothProperty="mozImageSmoothingEnabled":E.rootContext.oImageSmoothingEnabled?E.smoothProperty="oImageSmoothingEnabled":E.rootContext.msImageSmoothingEnabled&&(E.smoothProperty="msImageSmoothingEnabled")),E.initPlugins(),E.blendModes=(0,a.default)(),E._activeBlendMode=null,E.renderingToScreen=!1,E.resize(E.options.width,E.options.height),E}return c.prototype.render=function(y,T,E,R,S){if(this.view){this.renderingToScreen=!T,this.emit("prerender");var C=this.resolution;T?(T=T.baseTexture||T,T._canvasRenderTarget||(T._canvasRenderTarget=new h.default(T.width,T.height,T.resolution),T.source=T._canvasRenderTarget.canvas,T.valid=!0),this.context=T._canvasRenderTarget.context,this.resolution=T._canvasRenderTarget.resolution):this.context=this.rootContext;var A=this.context;if(T||(this._lastObjectRendered=y),!S){var k=y.parent,F=this._tempDisplayObjectParent.transform.worldTransform;R?(R.copy(F),this._tempDisplayObjectParent.transform._worldID=-1):F.identity(),y.parent=this._tempDisplayObjectParent,y.updateTransform(),y.parent=k}A.save(),A.setTransform(1,0,0,1,0,0),A.globalAlpha=1,this._activeBlendMode=t.BLEND_MODES.NORMAL,A.globalCompositeOperation=this.blendModes[t.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(A.fillStyle="black",A.clear()),(E!==void 0?E:this.clearBeforeRender)&&this.renderingToScreen&&(this.transparent?A.clearRect(0,0,this.width,this.height):(A.fillStyle=this._backgroundColorString,A.fillRect(0,0,this.width,this.height)));var M=this.context;this.context=A,y.renderCanvas(this),this.context=M,A.restore(),this.resolution=C,this.emit("postrender")}},c.prototype.clear=function(y){var T=this.context;y=y||this._backgroundColorString,!this.transparent&&y?(T.fillStyle=y,T.fillRect(0,0,this.width,this.height)):T.clearRect(0,0,this.width,this.height)},c.prototype.setBlendMode=function(y){this._activeBlendMode!==y&&(this._activeBlendMode=y,this.context.globalCompositeOperation=this.blendModes[y])},c.prototype.destroy=function(y){this.destroyPlugins(),m.prototype.destroy.call(this,y),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},c.prototype.resize=function(y,T){m.prototype.resize.call(this,y,T),this.smoothProperty&&(this.rootContext[this.smoothProperty]=o.default.SCALE_MODE===t.SCALE_MODES.LINEAR)},c.prototype.invalidateBlendMode=function(){this._activeBlendMode=this.blendModes.indexOf(this.context.globalCompositeOperation)},c}(x.default);p.default=d,r.pluginTarget.mixin(d)},{"../../const":46,"../../settings":101,"../../utils":125,"../SystemRenderer":76,"./utils/CanvasMaskManager":78,"./utils/CanvasRenderTarget":79,"./utils/mapCanvasBlendModesToPixi":81}],78:[function(_,O,p){p.__esModule=!0;var w=_("../../../const");function x(u,v){if(!(u instanceof v))throw new TypeError("Cannot call a class as a function")}var g=function(){function u(v){x(this,u),this.renderer=v}return u.prototype.pushMask=function(h){var s=this.renderer;s.context.save();var a=h.alpha,r=h.transform.worldTransform,t=s.resolution;s.context.setTransform(r.a*t,r.b*t,r.c*t,r.d*t,r.tx*t,r.ty*t),h._texture||(this.renderGraphicsShape(h),s.context.clip()),h.worldAlpha=a},u.prototype.renderGraphicsShape=function(h){var s=this.renderer.context,a=h.graphicsData.length;if(a!==0){s.beginPath();for(var r=0;r<a;r++){var t=h.graphicsData[r],e=t.shape;if(t.type===w.SHAPES.POLY){var o=e.points;s.moveTo(o[0],o[1]);for(var n=1;n<o.length/2;n++)s.lineTo(o[n*2],o[n*2+1]);o[0]===o[o.length-2]&&o[1]===o[o.length-1]&&s.closePath()}else if(t.type===w.SHAPES.RECT)s.rect(e.x,e.y,e.width,e.height),s.closePath();else if(t.type===w.SHAPES.CIRC)s.arc(e.x,e.y,e.radius,0,2*Math.PI),s.closePath();else if(t.type===w.SHAPES.ELIP){var i=e.width*2,f=e.height*2,l=e.x-i/2,d=e.y-f/2,m=.5522848,c=i/2*m,b=f/2*m,y=l+i,T=d+f,E=l+i/2,R=d+f/2;s.moveTo(l,R),s.bezierCurveTo(l,R-b,E-c,d,E,d),s.bezierCurveTo(E+c,d,y,R-b,y,R),s.bezierCurveTo(y,R+b,E+c,T,E,T),s.bezierCurveTo(E-c,T,l,R+b,l,R),s.closePath()}else if(t.type===w.SHAPES.RREC){var S=e.x,C=e.y,A=e.width,k=e.height,F=e.radius,M=Math.min(A,k)/2|0;F=F>M?M:F,s.moveTo(S,C+F),s.lineTo(S,C+k-F),s.quadraticCurveTo(S,C+k,S+F,C+k),s.lineTo(S+A-F,C+k),s.quadraticCurveTo(S+A,C+k,S+A,C+k-F),s.lineTo(S+A,C+F),s.quadraticCurveTo(S+A,C,S+A-F,C),s.lineTo(S+F,C),s.quadraticCurveTo(S,C,S,C+F),s.closePath()}}}},u.prototype.popMask=function(h){h.context.restore(),h.invalidateBlendMode()},u.prototype.destroy=function(){},u}();p.default=g},{"../../../const":46}],79:[function(_,O,p){p.__esModule=!0;var w=function(){function s(a,r){for(var t=0;t<r.length;t++){var e=r[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(a,e.key,e)}}return function(a,r,t){return r&&s(a.prototype,r),t&&s(a,t),a}}(),x=_("../../../settings"),g=u(x);function u(s){return s&&s.__esModule?s:{default:s}}function v(s,a){if(!(s instanceof a))throw new TypeError("Cannot call a class as a function")}var h=function(){function s(a,r,t){v(this,s),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=t||g.default.RESOLUTION,this.resize(a,r)}return s.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},s.prototype.resize=function(r,t){this.canvas.width=r*this.resolution,this.canvas.height=t*this.resolution},s.prototype.destroy=function(){this.context=null,this.canvas=null},w(s,[{key:"width",get:function(){return this.canvas.width},set:function(r){this.canvas.width=r}},{key:"height",get:function(){return this.canvas.height},set:function(r){this.canvas.height=r}}]),s}();p.default=h},{"../../../settings":101}],80:[function(_,O,p){p.__esModule=!0,p.default=x;function w(g){var u=document.createElement("canvas");u.width=6,u.height=1;var v=u.getContext("2d");return v.fillStyle=g,v.fillRect(0,0,6,1),u}function x(){if(typeof document>"u")return!1;var g=w("#ff00ff"),u=w("#ffff00"),v=document.createElement("canvas");v.width=6,v.height=1;var h=v.getContext("2d");h.globalCompositeOperation="multiply",h.drawImage(g,0,0),h.drawImage(u,2,0);var s=h.getImageData(2,0,1,1);if(!s)return!1;var a=s.data;return a[0]===255&&a[1]===0&&a[2]===0}},{}],81:[function(_,O,p){p.__esModule=!0,p.default=v;var w=_("../../../const"),x=_("./canUseNewCanvasBlendModes"),g=u(x);function u(h){return h&&h.__esModule?h:{default:h}}function v(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return(0,g.default)()?(h[w.BLEND_MODES.NORMAL]="source-over",h[w.BLEND_MODES.ADD]="lighter",h[w.BLEND_MODES.MULTIPLY]="multiply",h[w.BLEND_MODES.SCREEN]="screen",h[w.BLEND_MODES.OVERLAY]="overlay",h[w.BLEND_MODES.DARKEN]="darken",h[w.BLEND_MODES.LIGHTEN]="lighten",h[w.BLEND_MODES.COLOR_DODGE]="color-dodge",h[w.BLEND_MODES.COLOR_BURN]="color-burn",h[w.BLEND_MODES.HARD_LIGHT]="hard-light",h[w.BLEND_MODES.SOFT_LIGHT]="soft-light",h[w.BLEND_MODES.DIFFERENCE]="difference",h[w.BLEND_MODES.EXCLUSION]="exclusion",h[w.BLEND_MODES.HUE]="hue",h[w.BLEND_MODES.SATURATION]="saturate",h[w.BLEND_MODES.COLOR]="color",h[w.BLEND_MODES.LUMINOSITY]="luminosity"):(h[w.BLEND_MODES.NORMAL]="source-over",h[w.BLEND_MODES.ADD]="lighter",h[w.BLEND_MODES.MULTIPLY]="source-over",h[w.BLEND_MODES.SCREEN]="source-over",h[w.BLEND_MODES.OVERLAY]="source-over",h[w.BLEND_MODES.DARKEN]="source-over",h[w.BLEND_MODES.LIGHTEN]="source-over",h[w.BLEND_MODES.COLOR_DODGE]="source-over",h[w.BLEND_MODES.COLOR_BURN]="source-over",h[w.BLEND_MODES.HARD_LIGHT]="source-over",h[w.BLEND_MODES.SOFT_LIGHT]="source-over",h[w.BLEND_MODES.DIFFERENCE]="source-over",h[w.BLEND_MODES.EXCLUSION]="source-over",h[w.BLEND_MODES.HUE]="source-over",h[w.BLEND_MODES.SATURATION]="source-over",h[w.BLEND_MODES.COLOR]="source-over",h[w.BLEND_MODES.LUMINOSITY]="source-over"),h[w.BLEND_MODES.NORMAL_NPM]=h[w.BLEND_MODES.NORMAL],h[w.BLEND_MODES.ADD_NPM]=h[w.BLEND_MODES.ADD],h[w.BLEND_MODES.SCREEN_NPM]=h[w.BLEND_MODES.SCREEN],h}},{"../../../const":46,"./canUseNewCanvasBlendModes":80}],82:[function(_,O,p){p.__esModule=!0;var w=_("../../const"),x=_("../../settings"),g=u(x);function u(s){return s&&s.__esModule?s:{default:s}}function v(s,a){if(!(s instanceof a))throw new TypeError("Cannot call a class as a function")}var h=function(){function s(a){v(this,s),this.renderer=a,this.count=0,this.checkCount=0,this.maxIdle=g.default.GC_MAX_IDLE,this.checkCountMax=g.default.GC_MAX_CHECK_COUNT,this.mode=g.default.GC_MODE}return s.prototype.update=function(){this.count++,this.mode!==w.GC_MODES.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run()))},s.prototype.run=function(){for(var r=this.renderer.textureManager,t=r._managedTextures,e=!1,o=0;o<t.length;o++){var n=t[o];!n._glRenderTargets&&this.count-n.touched>this.maxIdle&&(r.destroyTexture(n,!0),t[o]=null,e=!0)}if(e){for(var i=0,f=0;f<t.length;f++)t[f]!==null&&(t[i++]=t[f]);t.length=i}},s.prototype.unload=function(r){var t=this.renderer.textureManager;r._texture&&r._texture._glRenderTargets&&t.destroyTexture(r._texture,!0);for(var e=r.children.length-1;e>=0;e--)this.unload(r.children[e])},s}();p.default=h},{"../../const":46,"../../settings":101}],83:[function(_,O,p){p.__esModule=!0;var w=_("pixi-gl-core"),x=_("../../const"),g=_("./utils/RenderTarget"),u=h(g),v=_("../../utils");function h(r){return r&&r.__esModule?r:{default:r}}function s(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function r(t){s(this,r),this.renderer=t,this.gl=t.gl,this._managedTextures=[]}return r.prototype.bindTexture=function(){},r.prototype.getTexture=function(){},r.prototype.updateTexture=function(e,o){var n=this.gl,i=!!e._glRenderTargets;if(!e.hasLoaded)return null;var f=this.renderer.boundTextures;if(o===void 0){o=0;for(var l=0;l<f.length;++l)if(f[l]===e){o=l;break}}f[o]=e,n.activeTexture(n.TEXTURE0+o);var d=e._glTextures[this.renderer.CONTEXT_UID];if(d)i?e._glRenderTargets[this.renderer.CONTEXT_UID].resize(e.width,e.height):d.upload(e.source);else{if(i){var m=new u.default(this.gl,e.width,e.height,e.scaleMode,e.resolution);m.resize(e.width,e.height),e._glRenderTargets[this.renderer.CONTEXT_UID]=m,d=m.texture}else d=new w.GLTexture(this.gl,null,null,null,null),d.bind(o),d.premultiplyAlpha=!0,d.upload(e.source);e._glTextures[this.renderer.CONTEXT_UID]=d,e.on("update",this.updateTexture,this),e.on("dispose",this.destroyTexture,this),this._managedTextures.push(e),e.isPowerOfTwo?(e.mipmap&&d.enableMipmap(),e.wrapMode===x.WRAP_MODES.CLAMP?d.enableWrapClamp():e.wrapMode===x.WRAP_MODES.REPEAT?d.enableWrapRepeat():d.enableWrapMirrorRepeat()):d.enableWrapClamp(),e.scaleMode===x.SCALE_MODES.NEAREST?d.enableNearestScaling():d.enableLinearScaling()}return d},r.prototype.destroyTexture=function(e,o){if(e=e.baseTexture||e,!!e.hasLoaded){var n=this.renderer.CONTEXT_UID,i=e._glTextures,f=e._glRenderTargets;if(i[n]&&(this.renderer.unbindTexture(e),i[n].destroy(),e.off("update",this.updateTexture,this),e.off("dispose",this.destroyTexture,this),delete i[n],!o)){var l=this._managedTextures.indexOf(e);l!==-1&&(0,v.removeItems)(this._managedTextures,l,1)}f&&f[n]&&(f[n].destroy(),delete f[n])}},r.prototype.removeAll=function(){for(var e=0;e<this._managedTextures.length;++e){var o=this._managedTextures[e];o._glTextures[this.renderer.CONTEXT_UID]&&delete o._glTextures[this.renderer.CONTEXT_UID]}},r.prototype.destroy=function(){for(var e=0;e<this._managedTextures.length;++e){var o=this._managedTextures[e];this.destroyTexture(o,!0),o.off("update",this.updateTexture,this),o.off("dispose",this.destroyTexture,this)}this._managedTextures=null},r}();p.default=a},{"../../const":46,"../../utils":125,"./utils/RenderTarget":96,"pixi-gl-core":15}],84:[function(_,O,p){p.__esModule=!0;var w=_("../SystemRenderer"),x=F(w),g=_("./managers/MaskManager"),u=F(g),v=_("./managers/StencilManager"),h=F(v),s=_("./managers/FilterManager"),a=F(s),r=_("./utils/RenderTarget"),t=F(r),e=_("./utils/ObjectRenderer"),o=F(e),n=_("./TextureManager"),i=F(n),f=_("../../textures/BaseTexture"),l=F(f),d=_("./TextureGarbageCollector"),m=F(d),c=_("./WebGLState"),b=F(c),y=_("./utils/mapWebGLDrawModesToPixi"),T=F(y),E=_("./utils/validateContext"),R=F(E),S=_("../../utils"),C=_("pixi-gl-core"),A=F(C),k=_("../../const");function F(U){return U&&U.__esModule?U:{default:U}}function M(U,B){if(!(U instanceof B))throw new TypeError("Cannot call a class as a function")}function D(U,B){if(!U)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B&&(typeof B=="object"||typeof B=="function")?B:U}function L(U,B){if(typeof B!="function"&&B!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof B);U.prototype=Object.create(B&&B.prototype,{constructor:{value:U,enumerable:!1,writable:!0,configurable:!0}}),B&&(Object.setPrototypeOf?Object.setPrototypeOf(U,B):U.__proto__=B)}var I=0,N=function(U){L(B,U);function B(X,W,Z){M(this,B);var K=D(this,U.call(this,"WebGL",X,W,Z));return K.legacy=K.options.legacy,K.legacy&&(A.default.VertexArrayObject.FORCE_NATIVE=!0),K.type=k.RENDERER_TYPE.WEBGL,K.handleContextLost=K.handleContextLost.bind(K),K.handleContextRestored=K.handleContextRestored.bind(K),K.view.addEventListener("webglcontextlost",K.handleContextLost,!1),K.view.addEventListener("webglcontextrestored",K.handleContextRestored,!1),K._contextOptions={alpha:K.transparent,antialias:K.options.antialias,premultipliedAlpha:K.transparent&&K.transparent!=="notMultiplied",stencil:!0,preserveDrawingBuffer:K.options.preserveDrawingBuffer,powerPreference:K.options.powerPreference},K._backgroundColorRgba[3]=K.transparent?0:1,K.maskManager=new u.default(K),K.stencilManager=new h.default(K),K.emptyRenderer=new o.default(K),K.currentRenderer=K.emptyRenderer,K.textureManager=null,K.filterManager=null,K.initPlugins(),K.options.context&&(0,R.default)(K.options.context),K.gl=K.options.context||A.default.createContext(K.view,K._contextOptions),K.CONTEXT_UID=I++,K.state=new b.default(K.gl),K.renderingToScreen=!0,K.boundTextures=null,K._activeShader=null,K._activeVao=null,K._activeRenderTarget=null,K._initContext(),K.drawModes=(0,T.default)(K.gl),K._nextTextureLocation=0,K.setBlendMode(0),K}return B.prototype._initContext=function(){var W=this.gl;W.isContextLost()&&W.getExtension("WEBGL_lose_context")&&W.getExtension("WEBGL_lose_context").restoreContext();var Z=W.getParameter(W.MAX_TEXTURE_IMAGE_UNITS);this._activeShader=null,this._activeVao=null,this.boundTextures=new Array(Z),this.emptyTextures=new Array(Z),this.textureManager=new i.default(this),this.filterManager=new a.default(this),this.textureGC=new m.default(this),this.state.resetToDefault(),this.rootRenderTarget=new t.default(W,this.width,this.height,null,this.resolution,!0),this.rootRenderTarget.clearColor=this._backgroundColorRgba,this.bindRenderTarget(this.rootRenderTarget);var K=new A.default.GLTexture.fromData(W,null,1,1),Q={_glTextures:{}};Q._glTextures[this.CONTEXT_UID]={};for(var J=0;J<Z;J++){var H=new l.default;H._glTextures[this.CONTEXT_UID]=K,this.boundTextures[J]=Q,this.emptyTextures[J]=H,this.bindTexture(null,J)}this.emit("context",W),this.resize(this.screen.width,this.screen.height)},B.prototype.render=function(W,Z,K,Q,J){if(this.renderingToScreen=!Z,this.emit("prerender"),!(!this.gl||this.gl.isContextLost())){if(this._nextTextureLocation=0,Z||(this._lastObjectRendered=W),!J){var H=W.parent;W.parent=this._tempDisplayObjectParent,W.updateTransform(),W.parent=H}this.bindRenderTexture(Z,Q),this.currentRenderer.start(),(K!==void 0?K:this.clearBeforeRender)&&this._activeRenderTarget.clear(),W.renderWebGL(this),this.currentRenderer.flush(),this.textureGC.update(),this.emit("postrender")}},B.prototype.setObjectRenderer=function(W){this.currentRenderer!==W&&(this.currentRenderer.stop(),this.currentRenderer=W,this.currentRenderer.start())},B.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},B.prototype.resize=function(W,Z){x.default.prototype.resize.call(this,W,Z),this.rootRenderTarget.resize(W,Z),this._activeRenderTarget===this.rootRenderTarget&&(this.rootRenderTarget.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=this.rootRenderTarget.projectionMatrix.toArray(!0)))},B.prototype.setBlendMode=function(W){this.state.setBlendMode(W)},B.prototype.clear=function(W){this._activeRenderTarget.clear(W)},B.prototype.setTransform=function(W){this._activeRenderTarget.transform=W},B.prototype.clearRenderTexture=function(W,Z){var K=W.baseTexture,Q=K._glRenderTargets[this.CONTEXT_UID];return Q&&Q.clear(Z),this},B.prototype.bindRenderTexture=function(W,Z){var K=void 0;if(W){var Q=W.baseTexture;Q._glRenderTargets[this.CONTEXT_UID]||this.textureManager.updateTexture(Q,0),this.unbindTexture(Q),K=Q._glRenderTargets[this.CONTEXT_UID],K.setFrame(W.frame)}else K=this.rootRenderTarget;return K.transform=Z,this.bindRenderTarget(K),this},B.prototype.bindRenderTarget=function(W){return W!==this._activeRenderTarget&&(this._activeRenderTarget=W,W.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=W.projectionMatrix.toArray(!0)),this.stencilManager.setMaskStack(W.stencilMaskStack)),this},B.prototype.bindShader=function(W,Z){return this._activeShader!==W&&(this._activeShader=W,W.bind(),Z!==!1&&(W.uniforms.projectionMatrix=this._activeRenderTarget.projectionMatrix.toArray(!0))),this},B.prototype.bindTexture=function(W,Z,K){if(W=W||this.emptyTextures[Z],W=W.baseTexture||W,W.touched=this.textureGC.count,K)Z=Z||0;else{for(var Q=0;Q<this.boundTextures.length;Q++)if(this.boundTextures[Q]===W)return Q;Z===void 0&&(this._nextTextureLocation++,this._nextTextureLocation%=this.boundTextures.length,Z=this.boundTextures.length-this._nextTextureLocation-1)}var J=this.gl,H=W._glTextures[this.CONTEXT_UID];return H?(this.boundTextures[Z]=W,J.activeTexture(J.TEXTURE0+Z),J.bindTexture(J.TEXTURE_2D,H.texture)):this.textureManager.updateTexture(W,Z),Z},B.prototype.unbindTexture=function(W){var Z=this.gl;W=W.baseTexture||W;for(var K=0;K<this.boundTextures.length;K++)this.boundTextures[K]===W&&(this.boundTextures[K]=this.emptyTextures[K],Z.activeTexture(Z.TEXTURE0+K),Z.bindTexture(Z.TEXTURE_2D,this.emptyTextures[K]._glTextures[this.CONTEXT_UID].texture));return this},B.prototype.createVao=function(){return new A.default.VertexArrayObject(this.gl,this.state.attribState)},B.prototype.bindVao=function(W){return this._activeVao===W?this:(W?W.bind():this._activeVao&&this._activeVao.unbind(),this._activeVao=W,this)},B.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer),this.bindVao(null),this._activeShader=null,this._activeRenderTarget=this.rootRenderTarget;for(var W=0;W<this.boundTextures.length;W++)this.boundTextures[W]=this.emptyTextures[W];return this.rootRenderTarget.activate(),this.state.resetToDefault(),this},B.prototype.handleContextLost=function(W){W.preventDefault()},B.prototype.handleContextRestored=function(){this.textureManager.removeAll(),this.filterManager.destroy(!0),this._initContext()},B.prototype.destroy=function(W){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored),this.textureManager.destroy(),U.prototype.destroy.call(this,W),this.uid=0,this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.maskManager=null,this.filterManager=null,this.textureManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this.gl.useProgram(null),this.gl.getExtension("WEBGL_lose_context")&&this.gl.getExtension("WEBGL_lose_context").loseContext(),this.gl=null},B}(x.default);p.default=N,S.pluginTarget.mixin(N)},{"../../const":46,"../../textures/BaseTexture":112,"../../utils":125,"../SystemRenderer":76,"./TextureGarbageCollector":82,"./TextureManager":83,"./WebGLState":85,"./managers/FilterManager":90,"./managers/MaskManager":91,"./managers/StencilManager":92,"./utils/ObjectRenderer":94,"./utils/RenderTarget":96,"./utils/mapWebGLDrawModesToPixi":99,"./utils/validateContext":100,"pixi-gl-core":15}],85:[function(_,O,p){p.__esModule=!0;var w=_("./utils/mapWebGLBlendModesToPixi"),x=g(w);function g(e){return e&&e.__esModule?e:{default:e}}function u(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}var v=0,h=1,s=2,a=3,r=4,t=function(){function e(o){u(this,e),this.activeState=new Uint8Array(16),this.defaultState=new Uint8Array(16),this.defaultState[0]=1,this.stackIndex=0,this.stack=[],this.gl=o,this.maxAttribs=o.getParameter(o.MAX_VERTEX_ATTRIBS),this.attribState={tempAttribState:new Array(this.maxAttribs),attribState:new Array(this.maxAttribs)},this.blendModes=(0,x.default)(o),this.nativeVaoExtension=o.getExtension("OES_vertex_array_object")||o.getExtension("MOZ_OES_vertex_array_object")||o.getExtension("WEBKIT_OES_vertex_array_object")}return e.prototype.push=function(){var n=this.stack[this.stackIndex];n||(n=this.stack[this.stackIndex]=new Uint8Array(16)),++this.stackIndex;for(var i=0;i<this.activeState.length;i++)n[i]=this.activeState[i]},e.prototype.pop=function(){var n=this.stack[--this.stackIndex];this.setState(n)},e.prototype.setState=function(n){this.setBlend(n[v]),this.setDepthTest(n[h]),this.setFrontFace(n[s]),this.setCullFace(n[a]),this.setBlendMode(n[r])},e.prototype.setBlend=function(n){n=n?1:0,this.activeState[v]!==n&&(this.activeState[v]=n,this.gl[n?"enable":"disable"](this.gl.BLEND))},e.prototype.setBlendMode=function(n){if(n!==this.activeState[r]){this.activeState[r]=n;var i=this.blendModes[n];i.length===2?this.gl.blendFunc(i[0],i[1]):this.gl.blendFuncSeparate(i[0],i[1],i[2],i[3])}},e.prototype.setDepthTest=function(n){n=n?1:0,this.activeState[h]!==n&&(this.activeState[h]=n,this.gl[n?"enable":"disable"](this.gl.DEPTH_TEST))},e.prototype.setCullFace=function(n){n=n?1:0,this.activeState[a]!==n&&(this.activeState[a]=n,this.gl[n?"enable":"disable"](this.gl.CULL_FACE))},e.prototype.setFrontFace=function(n){n=n?1:0,this.activeState[s]!==n&&(this.activeState[s]=n,this.gl.frontFace(this.gl[n?"CW":"CCW"]))},e.prototype.resetAttributes=function(){for(var n=0;n<this.attribState.tempAttribState.length;n++)this.attribState.tempAttribState[n]=0;for(var i=0;i<this.attribState.attribState.length;i++)this.attribState.attribState[i]=0;for(var f=1;f<this.maxAttribs;f++)this.gl.disableVertexAttribArray(f)},e.prototype.resetToDefault=function(){this.nativeVaoExtension&&this.nativeVaoExtension.bindVertexArrayOES(null),this.resetAttributes();for(var n=0;n<this.activeState.length;++n)this.activeState[n]=32;this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.setState(this.defaultState)},e}();p.default=t},{"./utils/mapWebGLBlendModesToPixi":98}],86:[function(_,O,p){p.__esModule=!0;var w=function(){function o(n,i){for(var f=0;f<i.length;f++){var l=i[f];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(n,l.key,l)}}return function(n,i,f){return i&&o(n.prototype,i),f&&o(n,f),n}}(),x=_("./extractUniformsFromSrc"),g=a(x),u=_("../../../utils"),v=_("../../../const"),h=_("../../../settings"),s=a(h);function a(o){return o&&o.__esModule?o:{default:o}}function r(o,n){if(!(o instanceof n))throw new TypeError("Cannot call a class as a function")}var t={},e=function(){function o(n,i,f){r(this,o),this.vertexSrc=n||o.defaultVertexSrc,this.fragmentSrc=i||o.defaultFragmentSrc,this._blendMode=v.BLEND_MODES.NORMAL,this.uniformData=f||(0,g.default)(this.vertexSrc,this.fragmentSrc,"projectionMatrix|uSampler"),this.uniforms={};for(var l in this.uniformData)this.uniforms[l]=this.uniformData[l].value,this.uniformData[l].type&&(this.uniformData[l].type=this.uniformData[l].type.toLowerCase());this.glShaders={},t[this.vertexSrc+this.fragmentSrc]||(t[this.vertexSrc+this.fragmentSrc]=(0,u.uid)()),this.glShaderKey=t[this.vertexSrc+this.fragmentSrc],this.padding=4,this.resolution=s.default.FILTER_RESOLUTION,this.enabled=!0,this.autoFit=!0}return o.prototype.apply=function(i,f,l,d,m){i.applyFilter(this,f,l,d)},w(o,[{key:"blendMode",get:function(){return this._blendMode},set:function(i){this._blendMode=i}}],[{key:"defaultVertexSrc",get:function(){return["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 projectionMatrix;","uniform mat3 filterMatrix;","varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;","   vTextureCoord = aTextureCoord ;","}"].join(`
`)}},{key:"defaultFragmentSrc",get:function(){return["varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","uniform sampler2D uSampler;","uniform sampler2D filterSampler;","void main(void){","   vec4 masky = texture2D(filterSampler, vFilterCoord);","   vec4 sample = texture2D(uSampler, vTextureCoord);","   vec4 color;","   if(mod(vFilterCoord.x, 1.0) > 0.5)","   {","     color = vec4(1.0, 0.0, 0.0, 1.0);","   }","   else","   {","     color = vec4(0.0, 1.0, 0.0, 1.0);","   }","   gl_FragColor = mix(sample, masky, 0.5);","   gl_FragColor *= sample.a;","}"].join(`
`)}}]),o}();p.default=e},{"../../../const":46,"../../../settings":101,"../../../utils":125,"./extractUniformsFromSrc":87}],87:[function(_,O,p){p.__esModule=!0,p.default=v;var w=_("pixi-gl-core"),x=g(w);function g(s){return s&&s.__esModule?s:{default:s}}var u=x.default.shader.defaultValue;function v(s,a,r){var t=h(s),e=h(a);return Object.assign(t,e)}function h(s){for(var a=new RegExp("^(projectionMatrix|uSampler|filterArea|filterClamp)$"),r={},t=void 0,e=s.replace(/\s+/g," ").split(/\s*;\s*/),o=0;o<e.length;o++){var n=e[o].trim();if(n.indexOf("uniform")>-1){var i=n.split(" "),f=i[1],l=i[2],d=1;l.indexOf("[")>-1&&(t=l.split(/\[|]/),l=t[0],d*=Number(t[1])),l.match(a)||(r[l]={value:u(f,d),name:l,type:f})}}return r}},{"pixi-gl-core":15}],88:[function(_,O,p){p.__esModule=!0,p.calculateScreenSpaceMatrix=x,p.calculateNormalizedScreenSpaceMatrix=g,p.calculateSpriteMatrix=u;var w=_("../../../math");function x(v,h,s){var a=v.identity();return a.translate(h.x/s.width,h.y/s.height),a.scale(s.width,s.height),a}function g(v,h,s){var a=v.identity();a.translate(h.x/s.width,h.y/s.height);var r=s.width/h.width,t=s.height/h.height;return a.scale(r,t),a}function u(v,h,s,a){var r=a._texture.orig,t=v.set(s.width,0,0,s.height,h.x,h.y),e=a.worldTransform.copy(w.Matrix.TEMP_MATRIX);return e.invert(),t.prepend(e),t.scale(1/r.width,1/r.height),t.translate(a.anchor.x,a.anchor.y),t}},{"../../../math":70}],89:[function(_,O,p){p.__esModule=!0;var w=_("../Filter"),x=h(w),g=_("../../../../math");_("path");var u=_("../../../../textures/TextureMatrix"),v=h(u);function h(e){return e&&e.__esModule?e:{default:e}}function s(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}function a(e,o){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&(typeof o=="object"||typeof o=="function")?o:e}function r(e,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof o);e.prototype=Object.create(o&&o.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(e,o):e.__proto__=o)}var t=function(e){r(o,e);function o(n){s(this,o);var i=new g.Matrix,f=a(this,e.call(this,`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`,`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);

    original *= (masky.r * masky.a * alpha * clip);

    gl_FragColor = original;
}
`));return n.renderable=!1,f.maskSprite=n,f.maskMatrix=i,f}return o.prototype.apply=function(i,f,l){var d=this.maskSprite,m=this.maskSprite.texture;m.valid&&(m.transform||(m.transform=new v.default(m,0)),m.transform.update(),this.uniforms.mask=m,this.uniforms.otherMatrix=i.calculateSpriteMatrix(this.maskMatrix,d).prepend(m.transform.mapCoord),this.uniforms.alpha=d.worldAlpha,this.uniforms.maskClamp=m.transform.uClampFrame,i.applyFilter(this,f,l))},o}(x.default);p.default=t},{"../../../../math":70,"../../../../textures/TextureMatrix":116,"../Filter":86,path:8}],90:[function(_,O,p){p.__esModule=!0;var w=_("./WebGLManager"),x=f(w),g=_("../utils/RenderTarget"),u=f(g),v=_("../utils/Quad"),h=f(v),s=_("../../../math"),a=_("../../../Shader"),r=f(a),t=_("../filters/filterTransforms"),e=i(t),o=_("bit-twiddle"),n=f(o);function i(T){if(T&&T.__esModule)return T;var E={};if(T!=null)for(var R in T)Object.prototype.hasOwnProperty.call(T,R)&&(E[R]=T[R]);return E.default=T,E}function f(T){return T&&T.__esModule?T:{default:T}}function l(T,E){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:T}function d(T,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);T.prototype=Object.create(E&&E.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(T,E):T.__proto__=E)}function m(T,E){if(!(T instanceof E))throw new TypeError("Cannot call a class as a function")}var c=function(){function T(){m(this,T),this.renderTarget=null,this.target=null,this.resolution=1,this.sourceFrame=new s.Rectangle,this.destinationFrame=new s.Rectangle,this.filters=[]}return T.prototype.clear=function(){this.filters=null,this.target=null,this.renderTarget=null},T}(),b="screen",y=function(T){d(E,T);function E(R){m(this,E);var S=l(this,T.call(this,R));return S.gl=S.renderer.gl,S.quad=new h.default(S.gl,R.state.attribState),S.shaderCache={},S.pool={},S.filterData=null,S.managedFilters=[],S.renderer.on("prerender",S.onPrerender,S),S._screenWidth=R.view.width,S._screenHeight=R.view.height,S}return E.prototype.pushFilter=function(S,C){var A=this.renderer,k=this.filterData;if(!k){k=this.renderer._activeRenderTarget.filterStack;var F=new c;F.sourceFrame=F.destinationFrame=this.renderer._activeRenderTarget.size,F.renderTarget=A._activeRenderTarget,this.renderer._activeRenderTarget.filterData=k={index:0,stack:[F]},this.filterData=k}var M=k.stack[++k.index],D=k.stack[0].destinationFrame;M||(M=k.stack[k.index]=new c);var L=S.filterArea&&S.filterArea.x===0&&S.filterArea.y===0&&S.filterArea.width===A.screen.width&&S.filterArea.height===A.screen.height,I=C[0].resolution,N=C[0].padding|0,U=L?A.screen:S.filterArea||S.getBounds(!0),B=M.sourceFrame,X=M.destinationFrame;B.x=(U.x*I|0)/I,B.y=(U.y*I|0)/I,B.width=(U.width*I|0)/I,B.height=(U.height*I|0)/I,L||(k.stack[0].renderTarget.transform||C[0].autoFit&&B.fit(D),B.pad(N)),X.width=B.width,X.height=B.height;var W=this.getPotRenderTarget(A.gl,B.width,B.height,I);M.target=S,M.filters=C,M.resolution=I,M.renderTarget=W,W.setFrame(X,B),A.bindRenderTarget(W),W.clear()},E.prototype.popFilter=function(){var S=this.filterData,C=S.stack[S.index-1],A=S.stack[S.index];this.quad.map(A.renderTarget.size,A.sourceFrame).upload();var k=A.filters;if(k.length===1)k[0].apply(this,A.renderTarget,C.renderTarget,!1,A),this.freePotRenderTarget(A.renderTarget);else{var F=A.renderTarget,M=this.getPotRenderTarget(this.renderer.gl,A.sourceFrame.width,A.sourceFrame.height,A.resolution);M.setFrame(A.destinationFrame,A.sourceFrame),M.clear();var D=0;for(D=0;D<k.length-1;++D){k[D].apply(this,F,M,!0,A);var L=F;F=M,M=L}k[D].apply(this,F,C.renderTarget,!1,A),this.freePotRenderTarget(F),this.freePotRenderTarget(M)}A.clear(),S.index--,S.index===0&&(this.filterData=null)},E.prototype.applyFilter=function(S,C,A,k){var F=this.renderer,M=F.gl,D=S.glShaders[F.CONTEXT_UID];D||(S.glShaderKey?(D=this.shaderCache[S.glShaderKey],D||(D=new r.default(this.gl,S.vertexSrc,S.fragmentSrc),S.glShaders[F.CONTEXT_UID]=this.shaderCache[S.glShaderKey]=D,this.managedFilters.push(S))):(D=S.glShaders[F.CONTEXT_UID]=new r.default(this.gl,S.vertexSrc,S.fragmentSrc),this.managedFilters.push(S)),F.bindVao(null),this.quad.initVao(D)),F.bindVao(this.quad.vao),F.bindRenderTarget(A),k&&(M.disable(M.SCISSOR_TEST),F.clear(),M.enable(M.SCISSOR_TEST)),A===F.maskManager.scissorRenderTarget&&F.maskManager.pushScissorMask(null,F.maskManager.scissorData),F.bindShader(D);var L=this.renderer.emptyTextures[0];this.renderer.boundTextures[0]=L,this.syncUniforms(D,S),F.state.setBlendMode(S.blendMode),M.activeTexture(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,C.texture.texture),this.quad.vao.draw(this.renderer.gl.TRIANGLES,6,0),M.bindTexture(M.TEXTURE_2D,L._glTextures[this.renderer.CONTEXT_UID].texture)},E.prototype.syncUniforms=function(S,C){var A=C.uniformData,k=C.uniforms,F=1,M=void 0;if(S.uniforms.filterArea){M=this.filterData.stack[this.filterData.index];var D=S.uniforms.filterArea;D[0]=M.renderTarget.size.width,D[1]=M.renderTarget.size.height,D[2]=M.sourceFrame.x,D[3]=M.sourceFrame.y,S.uniforms.filterArea=D}if(S.uniforms.filterClamp){M=M||this.filterData.stack[this.filterData.index];var L=S.uniforms.filterClamp;L[0]=0,L[1]=0,L[2]=(M.sourceFrame.width-1)/M.renderTarget.size.width,L[3]=(M.sourceFrame.height-1)/M.renderTarget.size.height,S.uniforms.filterClamp=L}for(var I in A){var N=A[I].type;if(N==="sampler2d"&&k[I]!==0){if(k[I].baseTexture)S.uniforms[I]=this.renderer.bindTexture(k[I].baseTexture,F);else{S.uniforms[I]=F;var U=this.renderer.gl;this.renderer.boundTextures[F]=this.renderer.emptyTextures[F],U.activeTexture(U.TEXTURE0+F),k[I].texture.bind()}F++}else if(N==="mat3")k[I].a!==void 0?S.uniforms[I]=k[I].toArray(!0):S.uniforms[I]=k[I];else if(N==="vec2")if(k[I].x!==void 0){var B=S.uniforms[I]||new Float32Array(2);B[0]=k[I].x,B[1]=k[I].y,S.uniforms[I]=B}else S.uniforms[I]=k[I];else N==="float"?S.uniforms.data[I].value!==A[I]&&(S.uniforms[I]=k[I]):S.uniforms[I]=k[I]}},E.prototype.getRenderTarget=function(S,C){var A=this.filterData.stack[this.filterData.index],k=this.getPotRenderTarget(this.renderer.gl,A.sourceFrame.width,A.sourceFrame.height,C||A.resolution);return k.setFrame(A.destinationFrame,A.sourceFrame),k},E.prototype.returnRenderTarget=function(S){this.freePotRenderTarget(S)},E.prototype.calculateScreenSpaceMatrix=function(S){var C=this.filterData.stack[this.filterData.index];return e.calculateScreenSpaceMatrix(S,C.sourceFrame,C.renderTarget.size)},E.prototype.calculateNormalizedScreenSpaceMatrix=function(S){var C=this.filterData.stack[this.filterData.index];return e.calculateNormalizedScreenSpaceMatrix(S,C.sourceFrame,C.renderTarget.size,C.destinationFrame)},E.prototype.calculateSpriteMatrix=function(S,C){var A=this.filterData.stack[this.filterData.index];return e.calculateSpriteMatrix(S,A.sourceFrame,A.renderTarget.size,C)},E.prototype.destroy=function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,C=this.renderer,A=this.managedFilters;C.off("prerender",this.onPrerender,this);for(var k=0;k<A.length;k++)S||A[k].glShaders[C.CONTEXT_UID].destroy(),delete A[k].glShaders[C.CONTEXT_UID];this.shaderCache={},S?this.pool={}:this.emptyPool()},E.prototype.getPotRenderTarget=function(S,C,A,k){var F=b;C*=k,A*=k,(C!==this._screenWidth||A!==this._screenHeight)&&(C=n.default.nextPow2(C),A=n.default.nextPow2(A),F=(C&65535)<<16|A&65535),this.pool[F]||(this.pool[F]=[]);var M=this.pool[F].pop();if(!M){var D=this.renderer.boundTextures[0];S.activeTexture(S.TEXTURE0),M=new u.default(S,C,A,null,1),S.bindTexture(S.TEXTURE_2D,D._glTextures[this.renderer.CONTEXT_UID].texture)}return M.resolution=k,M.defaultFrame.width=M.size.width=C/k,M.defaultFrame.height=M.size.height=A/k,M.filterPoolKey=F,M},E.prototype.emptyPool=function(){for(var S in this.pool){var C=this.pool[S];if(C)for(var A=0;A<C.length;A++)C[A].destroy(!0)}this.pool={}},E.prototype.freePotRenderTarget=function(S){this.pool[S.filterPoolKey].push(S)},E.prototype.onPrerender=function(){if(this._screenWidth!==this.renderer.view.width||this._screenHeight!==this.renderer.view.height){this._screenWidth=this.renderer.view.width,this._screenHeight=this.renderer.view.height;var S=this.pool[b];if(S)for(var C=0;C<S.length;C++)S[C].destroy(!0);this.pool[b]=[]}},E}(x.default);p.default=y},{"../../../Shader":44,"../../../math":70,"../filters/filterTransforms":88,"../utils/Quad":95,"../utils/RenderTarget":96,"./WebGLManager":93,"bit-twiddle":1}],91:[function(_,O,p){p.__esModule=!0;var w=_("./WebGLManager"),x=v(w),g=_("../filters/spriteMask/SpriteMaskFilter"),u=v(g);function v(t){return t&&t.__esModule?t:{default:t}}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function a(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(t){a(e,t);function e(o){h(this,e);var n=s(this,t.call(this,o));return n.scissor=!1,n.scissorData=null,n.scissorRenderTarget=null,n.enableScissor=!0,n.alphaMaskPool=[],n.alphaMaskIndex=0,n}return e.prototype.pushMask=function(n,i){if(i.texture)this.pushSpriteMask(n,i);else if(this.enableScissor&&!this.scissor&&this.renderer._activeRenderTarget.root&&!this.renderer.stencilManager.stencilMaskStack.length&&i.isFastRect()){var f=i.worldTransform,l=Math.atan2(f.b,f.a);l=Math.round(l*(180/Math.PI)),l%90?this.pushStencilMask(i):this.pushScissorMask(n,i)}else this.pushStencilMask(i)},e.prototype.popMask=function(n,i){i.texture?this.popSpriteMask(n,i):this.enableScissor&&!this.renderer.stencilManager.stencilMaskStack.length?this.popScissorMask(n,i):this.popStencilMask(n,i)},e.prototype.pushSpriteMask=function(n,i){var f=this.alphaMaskPool[this.alphaMaskIndex];f||(f=this.alphaMaskPool[this.alphaMaskIndex]=[new u.default(i)]),f[0].resolution=this.renderer.resolution,f[0].maskSprite=i,n.filterArea=i.getBounds(!0),this.renderer.filterManager.pushFilter(n,f),this.alphaMaskIndex++},e.prototype.popSpriteMask=function(){this.renderer.filterManager.popFilter(),this.alphaMaskIndex--},e.prototype.pushStencilMask=function(n){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.pushStencil(n)},e.prototype.popStencilMask=function(){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.popStencil()},e.prototype.pushScissorMask=function(n,i){i.renderable=!0;var f=this.renderer._activeRenderTarget,l=i.getBounds();l.fit(f.size),i.renderable=!1,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST);var d=this.renderer.resolution;this.renderer.gl.scissor(l.x*d,(f.root?f.size.height-l.y-l.height:l.y)*d,l.width*d,l.height*d),this.scissorRenderTarget=f,this.scissorData=i,this.scissor=!0},e.prototype.popScissorMask=function(){this.scissorRenderTarget=null,this.scissorData=null,this.scissor=!1;var n=this.renderer.gl;n.disable(n.SCISSOR_TEST)},e}(x.default);p.default=r},{"../filters/spriteMask/SpriteMaskFilter":89,"./WebGLManager":93}],92:[function(_,O,p){p.__esModule=!0;var w=_("./WebGLManager"),x=g(w);function g(a){return a&&a.__esModule?a:{default:a}}function u(a,r){if(!(a instanceof r))throw new TypeError("Cannot call a class as a function")}function v(a,r){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&(typeof r=="object"||typeof r=="function")?r:a}function h(a,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof r);a.prototype=Object.create(r&&r.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(a,r):a.__proto__=r)}var s=function(a){h(r,a);function r(t){u(this,r);var e=v(this,a.call(this,t));return e.stencilMaskStack=null,e}return r.prototype.setMaskStack=function(e){this.stencilMaskStack=e;var o=this.renderer.gl;e.length===0?o.disable(o.STENCIL_TEST):o.enable(o.STENCIL_TEST)},r.prototype.pushStencil=function(e){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.renderer._activeRenderTarget.attachStencilBuffer();var o=this.renderer.gl,n=this.stencilMaskStack.length;n===0&&o.enable(o.STENCIL_TEST),this.stencilMaskStack.push(e),o.colorMask(!1,!1,!1,!1),o.stencilFunc(o.EQUAL,n,this._getBitwiseMask()),o.stencilOp(o.KEEP,o.KEEP,o.INCR),this.renderer.plugins.graphics.render(e),this._useCurrent()},r.prototype.popStencil=function(){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);var e=this.renderer.gl,o=this.stencilMaskStack.pop();this.stencilMaskStack.length===0?(e.disable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),e.clearStencil(0)):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),this.renderer.plugins.graphics.render(o),this._useCurrent())},r.prototype._useCurrent=function(){var e=this.renderer.gl;e.colorMask(!0,!0,!0,!0),e.stencilFunc(e.EQUAL,this.stencilMaskStack.length,this._getBitwiseMask()),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)},r.prototype._getBitwiseMask=function(){return(1<<this.stencilMaskStack.length)-1},r.prototype.destroy=function(){x.default.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},r}(x.default);p.default=s},{"./WebGLManager":93}],93:[function(_,O,p){p.__esModule=!0;function w(g,u){if(!(g instanceof u))throw new TypeError("Cannot call a class as a function")}var x=function(){function g(u){w(this,g),this.renderer=u,this.renderer.on("context",this.onContextChange,this)}return g.prototype.onContextChange=function(){},g.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null},g}();p.default=x},{}],94:[function(_,O,p){p.__esModule=!0;var w=_("../managers/WebGLManager"),x=g(w);function g(a){return a&&a.__esModule?a:{default:a}}function u(a,r){if(!(a instanceof r))throw new TypeError("Cannot call a class as a function")}function v(a,r){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&(typeof r=="object"||typeof r=="function")?r:a}function h(a,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof r);a.prototype=Object.create(r&&r.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(a,r):a.__proto__=r)}var s=function(a){h(r,a);function r(){return u(this,r),v(this,a.apply(this,arguments))}return r.prototype.start=function(){},r.prototype.stop=function(){this.flush()},r.prototype.flush=function(){},r.prototype.render=function(e){},r}(x.default);p.default=s},{"../managers/WebGLManager":93}],95:[function(_,O,p){p.__esModule=!0;var w=_("pixi-gl-core"),x=v(w),g=_("../../../utils/createIndicesForQuads"),u=v(g);function v(a){return a&&a.__esModule?a:{default:a}}function h(a,r){if(!(a instanceof r))throw new TypeError("Cannot call a class as a function")}var s=function(){function a(r,t){h(this,a),this.gl=r,this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.interleaved=new Float32Array(8*2);for(var e=0;e<4;e++)this.interleaved[e*4]=this.vertices[e*2],this.interleaved[e*4+1]=this.vertices[e*2+1],this.interleaved[e*4+2]=this.uvs[e*2],this.interleaved[e*4+3]=this.uvs[e*2+1];this.indices=(0,u.default)(1),this.vertexBuffer=x.default.GLBuffer.createVertexBuffer(r,this.interleaved,r.STATIC_DRAW),this.indexBuffer=x.default.GLBuffer.createIndexBuffer(r,this.indices,r.STATIC_DRAW),this.vao=new x.default.VertexArrayObject(r,t)}return a.prototype.initVao=function(t){this.vao.clear().addIndex(this.indexBuffer).addAttribute(this.vertexBuffer,t.attributes.aVertexPosition,this.gl.FLOAT,!1,4*4,0).addAttribute(this.vertexBuffer,t.attributes.aTextureCoord,this.gl.FLOAT,!1,4*4,2*4)},a.prototype.map=function(t,e){var o=0,n=0;return this.uvs[0]=o,this.uvs[1]=n,this.uvs[2]=o+e.width/t.width,this.uvs[3]=n,this.uvs[4]=o+e.width/t.width,this.uvs[5]=n+e.height/t.height,this.uvs[6]=o,this.uvs[7]=n+e.height/t.height,o=e.x,n=e.y,this.vertices[0]=o,this.vertices[1]=n,this.vertices[2]=o+e.width,this.vertices[3]=n,this.vertices[4]=o+e.width,this.vertices[5]=n+e.height,this.vertices[6]=o,this.vertices[7]=n+e.height,this},a.prototype.upload=function(){for(var t=0;t<4;t++)this.interleaved[t*4]=this.vertices[t*2],this.interleaved[t*4+1]=this.vertices[t*2+1],this.interleaved[t*4+2]=this.uvs[t*2],this.interleaved[t*4+3]=this.uvs[t*2+1];return this.vertexBuffer.upload(this.interleaved),this},a.prototype.destroy=function(){var t=this.gl;t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.indexBuffer)},a}();p.default=s},{"../../../utils/createIndicesForQuads":123,"pixi-gl-core":15}],96:[function(_,O,p){p.__esModule=!0;var w=_("../../../math"),x=_("../../../const"),g=_("../../../settings"),u=h(g),v=_("pixi-gl-core");function h(r){return r&&r.__esModule?r:{default:r}}function s(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function r(t,e,o,n,i,f){s(this,r),this.gl=t,this.frameBuffer=null,this.texture=null,this.clearColor=[0,0,0,0],this.size=new w.Rectangle(0,0,1,1),this.resolution=i||u.default.RESOLUTION,this.projectionMatrix=new w.Matrix,this.transform=null,this.frame=null,this.defaultFrame=new w.Rectangle,this.destinationFrame=null,this.sourceFrame=null,this.stencilBuffer=null,this.stencilMaskStack=[],this.filterData=null,this.filterPoolKey="",this.scaleMode=n!==void 0?n:u.default.SCALE_MODE,this.root=f,this.root?(this.frameBuffer=new v.GLFramebuffer(t,100,100),this.frameBuffer.framebuffer=null):(this.frameBuffer=v.GLFramebuffer.createRGBA(t,100,100),this.scaleMode===x.SCALE_MODES.NEAREST?this.frameBuffer.texture.enableNearestScaling():this.frameBuffer.texture.enableLinearScaling(),this.texture=this.frameBuffer.texture),this.setFrame(),this.resize(e,o)}return r.prototype.clear=function(e){var o=e||this.clearColor;this.frameBuffer.clear(o[0],o[1],o[2],o[3])},r.prototype.attachStencilBuffer=function(){this.root||this.frameBuffer.enableStencil()},r.prototype.setFrame=function(e,o){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=o||this.sourceFrame||this.destinationFrame},r.prototype.activate=function(){var e=this.gl;this.frameBuffer.bind(),this.calculateProjection(this.destinationFrame,this.sourceFrame),this.transform&&this.projectionMatrix.append(this.transform),this.destinationFrame!==this.sourceFrame?(e.enable(e.SCISSOR_TEST),e.scissor(this.destinationFrame.x|0,this.destinationFrame.y|0,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)):e.disable(e.SCISSOR_TEST),e.viewport(this.destinationFrame.x|0,this.destinationFrame.y|0,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)},r.prototype.calculateProjection=function(e,o){var n=this.projectionMatrix;o=o||e,n.identity(),this.root?(n.a=1/e.width*2,n.d=-1/e.height*2,n.tx=-1-o.x*n.a,n.ty=1-o.y*n.d):(n.a=1/e.width*2,n.d=1/e.height*2,n.tx=-1-o.x*n.a,n.ty=-1-o.y*n.d)},r.prototype.resize=function(e,o){if(e=e|0,o=o|0,!(this.size.width===e&&this.size.height===o)){this.size.width=e,this.size.height=o,this.defaultFrame.width=e,this.defaultFrame.height=o,this.frameBuffer.resize(e*this.resolution,o*this.resolution);var n=this.frame||this.size;this.calculateProjection(n)}},r.prototype.destroy=function(){this.frameBuffer.destroy(),this.frameBuffer=null,this.texture=null},r}();p.default=a},{"../../../const":46,"../../../math":70,"../../../settings":101,"pixi-gl-core":15}],97:[function(_,O,p){p.__esModule=!0,p.default=v;var w=_("pixi-gl-core"),x=g(w);function g(s){return s&&s.__esModule?s:{default:s}}var u=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function v(s,a){var r=!a;if(s===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");if(r){var t=document.createElement("canvas");t.width=1,t.height=1,a=x.default.createContext(t)}for(var e=a.createShader(a.FRAGMENT_SHADER);;){var o=u.replace(/%forloop%/gi,h(s));if(a.shaderSource(e,o),a.compileShader(e),!a.getShaderParameter(e,a.COMPILE_STATUS))s=s/2|0;else break}return r&&a.getExtension("WEBGL_lose_context")&&a.getExtension("WEBGL_lose_context").loseContext(),s}function h(s){for(var a="",r=0;r<s;++r)r>0&&(a+=`
else `),r<s-1&&(a+="if(test == "+r+".0){}");return a}},{"pixi-gl-core":15}],98:[function(_,O,p){p.__esModule=!0,p.default=x;var w=_("../../../const");function x(g){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return u[w.BLEND_MODES.NORMAL]=[g.ONE,g.ONE_MINUS_SRC_ALPHA],u[w.BLEND_MODES.ADD]=[g.ONE,g.DST_ALPHA],u[w.BLEND_MODES.MULTIPLY]=[g.DST_COLOR,g.ONE_MINUS_SRC_ALPHA],u[w.BLEND_MODES.SCREEN]=[g.ONE,g.ONE_MINUS_SRC_COLOR],u[w.BLEND_MODES.OVERLAY]=[g.ONE,g.ONE_MINUS_SRC_ALPHA],u[w.BLEND_MODES.DARKEN]=[g.ONE,g.ONE_MINUS_SRC_ALPHA],u[w.BLEND_MODES.LIGHTEN]=[g.ONE,g.ONE_MINUS_SRC_ALPHA],u[w.BLEND_MODES.COLOR_DODGE]=[g.ONE,g.ONE_MINUS_SRC_ALPHA],u[w.BLEND_MODES.COLOR_BURN]=[g.ONE,g.ONE_MINUS_SRC_ALPHA],u[w.BLEND_MODES.HARD_LIGHT]=[g.ONE,g.ONE_MINUS_SRC_ALPHA],u[w.BLEND_MODES.SOFT_LIGHT]=[g.ONE,g.ONE_MINUS_SRC_ALPHA],u[w.BLEND_MODES.DIFFERENCE]=[g.ONE,g.ONE_MINUS_SRC_ALPHA],u[w.BLEND_MODES.EXCLUSION]=[g.ONE,g.ONE_MINUS_SRC_ALPHA],u[w.BLEND_MODES.HUE]=[g.ONE,g.ONE_MINUS_SRC_ALPHA],u[w.BLEND_MODES.SATURATION]=[g.ONE,g.ONE_MINUS_SRC_ALPHA],u[w.BLEND_MODES.COLOR]=[g.ONE,g.ONE_MINUS_SRC_ALPHA],u[w.BLEND_MODES.LUMINOSITY]=[g.ONE,g.ONE_MINUS_SRC_ALPHA],u[w.BLEND_MODES.NORMAL_NPM]=[g.SRC_ALPHA,g.ONE_MINUS_SRC_ALPHA,g.ONE,g.ONE_MINUS_SRC_ALPHA],u[w.BLEND_MODES.ADD_NPM]=[g.SRC_ALPHA,g.DST_ALPHA,g.ONE,g.DST_ALPHA],u[w.BLEND_MODES.SCREEN_NPM]=[g.SRC_ALPHA,g.ONE_MINUS_SRC_COLOR,g.ONE,g.ONE_MINUS_SRC_COLOR],u}},{"../../../const":46}],99:[function(_,O,p){p.__esModule=!0,p.default=x;var w=_("../../../const");function x(g){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return u[w.DRAW_MODES.POINTS]=g.POINTS,u[w.DRAW_MODES.LINES]=g.LINES,u[w.DRAW_MODES.LINE_LOOP]=g.LINE_LOOP,u[w.DRAW_MODES.LINE_STRIP]=g.LINE_STRIP,u[w.DRAW_MODES.TRIANGLES]=g.TRIANGLES,u[w.DRAW_MODES.TRIANGLE_STRIP]=g.TRIANGLE_STRIP,u[w.DRAW_MODES.TRIANGLE_FAN]=g.TRIANGLE_FAN,u}},{"../../../const":46}],100:[function(_,O,p){p.__esModule=!0,p.default=w;function w(x){var g=x.getContextAttributes();g.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")}},{}],101:[function(_,O,p){p.__esModule=!0;var w=_("./utils/maxRecommendedTextures"),x=v(w),g=_("./utils/canUploadSameBuffer"),u=v(g);function v(h){return h&&h.__esModule?h:{default:h}}p.default={TARGET_FPMS:.06,MIPMAP_TEXTURES:!0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(0,x.default)(32),SPRITE_BATCH_SIZE:4096,RETINA_PREFIX:/@([0-9\.]+)x/,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1,width:800,height:600,legacy:!1},TRANSFORM_MODE:0,GC_MODE:0,GC_MAX_IDLE:60*60,GC_MAX_CHECK_COUNT:60*10,WRAP_MODE:0,SCALE_MODE:0,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:"mediump",CAN_UPLOAD_SAME_BUFFER:(0,u.default)(),MESH_CANVAS_PADDING:0}},{"./utils/canUploadSameBuffer":122,"./utils/maxRecommendedTextures":127}],102:[function(_,O,p){p.__esModule=!0;var w=function(){function f(l,d){for(var m=0;m<d.length;m++){var c=d[m];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(l,c.key,c)}}return function(l,d,m){return d&&f(l.prototype,d),m&&f(l,m),l}}(),x=_("../math"),g=_("../utils"),u=_("../const"),v=_("../textures/Texture"),h=r(v),s=_("../display/Container"),a=r(s);function r(f){return f&&f.__esModule?f:{default:f}}function t(f,l){if(!(f instanceof l))throw new TypeError("Cannot call a class as a function")}function e(f,l){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:f}function o(f,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);f.prototype=Object.create(l&&l.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(f,l):f.__proto__=l)}var n=new x.Point,i=function(f){o(l,f);function l(d){t(this,l);var m=e(this,f.call(this));return m._anchor=new x.ObservablePoint(m._onAnchorUpdate,m,d?d.defaultAnchor.x:0,d?d.defaultAnchor.y:0),m._texture=null,m._width=0,m._height=0,m._tint=null,m._tintRGB=null,m.tint=16777215,m.blendMode=u.BLEND_MODES.NORMAL,m.shader=null,m.cachedTint=16777215,m.texture=d||h.default.EMPTY,m.vertexData=new Float32Array(8),m.vertexTrimmedData=null,m._transformID=-1,m._textureID=-1,m._transformTrimmedID=-1,m._textureTrimmedID=-1,m.pluginName="sprite",m}return l.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this.cachedTint=16777215,this._width&&(this.scale.x=(0,g.sign)(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=(0,g.sign)(this.scale.y)*this._height/this._texture.orig.height)},l.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},l.prototype.calculateVertices=function(){if(!(this._transformID===this.transform._worldID&&this._textureID===this._texture._updateID)){this._transformID=this.transform._worldID,this._textureID=this._texture._updateID;var m=this._texture,c=this.transform.worldTransform,b=c.a,y=c.b,T=c.c,E=c.d,R=c.tx,S=c.ty,C=this.vertexData,A=m.trim,k=m.orig,F=this._anchor,M=0,D=0,L=0,I=0;A?(D=A.x-F._x*k.width,M=D+A.width,I=A.y-F._y*k.height,L=I+A.height):(D=-F._x*k.width,M=D+k.width,I=-F._y*k.height,L=I+k.height),C[0]=b*D+T*I+R,C[1]=E*I+y*D+S,C[2]=b*M+T*I+R,C[3]=E*I+y*M+S,C[4]=b*M+T*L+R,C[5]=E*L+y*M+S,C[6]=b*D+T*L+R,C[7]=E*L+y*D+S}},l.prototype.calculateTrimmedVertices=function(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var m=this._texture,c=this.vertexTrimmedData,b=m.orig,y=this._anchor,T=this.transform.worldTransform,E=T.a,R=T.b,S=T.c,C=T.d,A=T.tx,k=T.ty,F=-y._x*b.width,M=F+b.width,D=-y._y*b.height,L=D+b.height;c[0]=E*F+S*D+A,c[1]=C*D+R*F+k,c[2]=E*M+S*D+A,c[3]=C*D+R*M+k,c[4]=E*M+S*L+A,c[5]=C*L+R*M+k,c[6]=E*F+S*L+A,c[7]=C*L+R*F+k},l.prototype._renderWebGL=function(m){this.calculateVertices(),m.setObjectRenderer(m.plugins[this.pluginName]),m.plugins[this.pluginName].render(this)},l.prototype._renderCanvas=function(m){m.plugins[this.pluginName].render(this)},l.prototype._calculateBounds=function(){var m=this._texture.trim,c=this._texture.orig;!m||m.width===c.width&&m.height===c.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},l.prototype.getLocalBounds=function(m){return this.children.length===0?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),m||(this._localBoundsRect||(this._localBoundsRect=new x.Rectangle),m=this._localBoundsRect),this._bounds.getRectangle(m)):f.prototype.getLocalBounds.call(this,m)},l.prototype.containsPoint=function(m){this.worldTransform.applyInverse(m,n);var c=this._texture.orig.width,b=this._texture.orig.height,y=-c*this.anchor.x,T=0;return n.x>=y&&n.x<y+c&&(T=-b*this.anchor.y,n.y>=T&&n.y<T+b)},l.prototype.destroy=function(m){f.prototype.destroy.call(this,m),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null;var c=typeof m=="boolean"?m:m&&m.texture;if(c){var b=typeof m=="boolean"?m:m&&m.baseTexture;this._texture.destroy(!!b)}this._texture=null,this.shader=null},l.from=function(m){return new l(h.default.from(m))},l.fromFrame=function(m){var c=g.TextureCache[m];if(!c)throw new Error('The frameId "'+m+'" does not exist in the texture cache');return new l(c)},l.fromImage=function(m,c,b){return new l(h.default.fromImage(m,c,b))},w(l,[{key:"width",get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(m){var c=(0,g.sign)(this.scale.x)||1;this.scale.x=c*m/this._texture.orig.width,this._width=m}},{key:"height",get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(m){var c=(0,g.sign)(this.scale.y)||1;this.scale.y=c*m/this._texture.orig.height,this._height=m}},{key:"anchor",get:function(){return this._anchor},set:function(m){this._anchor.copy(m)}},{key:"tint",get:function(){return this._tint},set:function(m){this._tint=m,this._tintRGB=(m>>16)+(m&65280)+((m&255)<<16)}},{key:"texture",get:function(){return this._texture},set:function(m){this._texture!==m&&(this._texture=m||h.default.EMPTY,this.cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,m&&(m.baseTexture.hasLoaded?this._onTextureUpdate():m.once("update",this._onTextureUpdate,this)))}}]),l}(a.default);p.default=i},{"../const":46,"../display/Container":48,"../math":70,"../textures/Texture":115,"../utils":125}],103:[function(_,O,p){p.__esModule=!0;var w=_("../../renderers/canvas/CanvasRenderer"),x=s(w),g=_("../../const"),u=_("../../math"),v=_("./CanvasTinter"),h=s(v);function s(e){return e&&e.__esModule?e:{default:e}}function a(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}var r=new u.Matrix,t=function(){function e(o){a(this,e),this.renderer=o}return e.prototype.render=function(n){var i=n._texture,f=this.renderer,l=i._frame.width,d=i._frame.height,m=n.transform.worldTransform,c=0,b=0;if(!(i.orig.width<=0||i.orig.height<=0||!i.baseTexture.source)&&(f.setBlendMode(n.blendMode),i.valid)){f.context.globalAlpha=n.worldAlpha;var y=i.baseTexture.scaleMode===g.SCALE_MODES.LINEAR;f.smoothProperty&&f.context[f.smoothProperty]!==y&&(f.context[f.smoothProperty]=y),i.trim?(c=i.trim.width/2+i.trim.x-n.anchor.x*i.orig.width,b=i.trim.height/2+i.trim.y-n.anchor.y*i.orig.height):(c=(.5-n.anchor.x)*i.orig.width,b=(.5-n.anchor.y)*i.orig.height),i.rotate&&(m.copy(r),m=r,u.GroupD8.matrixAppendRotationInv(m,i.rotate,c,b),c=0,b=0),c-=l/2,b-=d/2,f.roundPixels?(f.context.setTransform(m.a,m.b,m.c,m.d,m.tx*f.resolution|0,m.ty*f.resolution|0),c=c|0,b=b|0):f.context.setTransform(m.a,m.b,m.c,m.d,m.tx*f.resolution,m.ty*f.resolution);var T=i.baseTexture.resolution;n.tint!==16777215?((n.cachedTint!==n.tint||n.tintedTexture.tintId!==n._texture._updateID)&&(n.cachedTint=n.tint,n.tintedTexture=h.default.getTintedTexture(n,n.tint)),f.context.drawImage(n.tintedTexture,0,0,l*T,d*T,c*f.resolution,b*f.resolution,l*f.resolution,d*f.resolution)):f.context.drawImage(i.baseTexture.source,i._frame.x*T,i._frame.y*T,l*T,d*T,c*f.resolution,b*f.resolution,l*f.resolution,d*f.resolution)}},e.prototype.destroy=function(){this.renderer=null},e}();p.default=t,x.default.registerPlugin("sprite",t)},{"../../const":46,"../../math":70,"../../renderers/canvas/CanvasRenderer":77,"./CanvasTinter":104}],104:[function(_,O,p){p.__esModule=!0;var w=_("../../utils"),x=_("../../renderers/canvas/utils/canUseNewCanvasBlendModes"),g=u(x);function u(h){return h&&h.__esModule?h:{default:h}}var v={getTintedTexture:function(s,a){var r=s._texture;a=v.roundColor(a);var t="#"+("00000"+(a|0).toString(16)).substr(-6);r.tintCache=r.tintCache||{};var e=r.tintCache[t],o=void 0;if(e){if(e.tintId===r._updateID)return r.tintCache[t];o=r.tintCache[t]}else o=v.canvas||document.createElement("canvas");if(v.tintMethod(r,a,o),o.tintId=r._updateID,v.convertTintToImage){var n=new Image;n.src=o.toDataURL(),r.tintCache[t]=n}else r.tintCache[t]=o,v.canvas=null;return o},tintWithMultiply:function(s,a,r){var t=r.getContext("2d"),e=s._frame.clone(),o=s.baseTexture.resolution;e.x*=o,e.y*=o,e.width*=o,e.height*=o,r.width=Math.ceil(e.width),r.height=Math.ceil(e.height),t.save(),t.fillStyle="#"+("00000"+(a|0).toString(16)).substr(-6),t.fillRect(0,0,e.width,e.height),t.globalCompositeOperation="multiply",t.drawImage(s.baseTexture.source,e.x,e.y,e.width,e.height,0,0,e.width,e.height),t.globalCompositeOperation="destination-atop",t.drawImage(s.baseTexture.source,e.x,e.y,e.width,e.height,0,0,e.width,e.height),t.restore()},tintWithOverlay:function(s,a,r){var t=r.getContext("2d"),e=s._frame.clone(),o=s.baseTexture.resolution;e.x*=o,e.y*=o,e.width*=o,e.height*=o,r.width=Math.ceil(e.width),r.height=Math.ceil(e.height),t.save(),t.globalCompositeOperation="copy",t.fillStyle="#"+("00000"+(a|0).toString(16)).substr(-6),t.fillRect(0,0,e.width,e.height),t.globalCompositeOperation="destination-atop",t.drawImage(s.baseTexture.source,e.x,e.y,e.width,e.height,0,0,e.width,e.height),t.restore()},tintWithPerPixel:function(s,a,r){var t=r.getContext("2d"),e=s._frame.clone(),o=s.baseTexture.resolution;e.x*=o,e.y*=o,e.width*=o,e.height*=o,r.width=Math.ceil(e.width),r.height=Math.ceil(e.height),t.save(),t.globalCompositeOperation="copy",t.drawImage(s.baseTexture.source,e.x,e.y,e.width,e.height,0,0,e.width,e.height),t.restore();for(var n=(0,w.hex2rgb)(a),i=n[0],f=n[1],l=n[2],d=t.getImageData(0,0,e.width,e.height),m=d.data,c=0;c<m.length;c+=4)m[c+0]*=i,m[c+1]*=f,m[c+2]*=l;t.putImageData(d,0,0)},roundColor:function(s){var a=v.cacheStepsPerColorChannel,r=(0,w.hex2rgb)(s);return r[0]=Math.min(255,r[0]/a*a),r[1]=Math.min(255,r[1]/a*a),r[2]=Math.min(255,r[2]/a*a),(0,w.rgb2hex)(r)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:(0,g.default)(),tintMethod:0};v.tintMethod=v.canUseMultiply?v.tintWithMultiply:v.tintWithPerPixel,p.default=v},{"../../renderers/canvas/utils/canUseNewCanvasBlendModes":80,"../../utils":125}],105:[function(_,O,p){p.__esModule=!0;function w(g,u){if(!(g instanceof u))throw new TypeError("Cannot call a class as a function")}var x=function(){function g(u){w(this,g),this.vertices=new ArrayBuffer(u),this.float32View=new Float32Array(this.vertices),this.uint32View=new Uint32Array(this.vertices)}return g.prototype.destroy=function(){this.vertices=null,this.positions=null,this.uvs=null,this.colors=null},g}();p.default=x},{}],106:[function(_,O,p){p.__esModule=!0;var w=_("../../renderers/webgl/utils/ObjectRenderer"),x=b(w),g=_("../../renderers/webgl/WebGLRenderer"),u=b(g),v=_("../../utils/createIndicesForQuads"),h=b(v),s=_("./generateMultiTextureShader"),a=b(s),r=_("../../renderers/webgl/utils/checkMaxIfStatmentsInShader"),t=b(r),e=_("./BatchBuffer"),o=b(e),n=_("../../settings"),i=b(n),f=_("../../utils"),l=_("pixi-gl-core"),d=b(l),m=_("bit-twiddle"),c=b(m);function b(A){return A&&A.__esModule?A:{default:A}}function y(A,k){if(!(A instanceof k))throw new TypeError("Cannot call a class as a function")}function T(A,k){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:A}function E(A,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);A.prototype=Object.create(k&&k.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(A,k):A.__proto__=k)}var R=0,S=0,C=function(A){E(k,A);function k(F){y(this,k);var M=T(this,A.call(this,F));M.vertSize=5,M.vertByteSize=M.vertSize*4,M.size=i.default.SPRITE_BATCH_SIZE,M.buffers=[];for(var D=1;D<=c.default.nextPow2(M.size);D*=2)M.buffers.push(new o.default(D*4*M.vertByteSize));M.indices=(0,h.default)(M.size),M.shader=null,M.currentIndex=0,M.groups=[];for(var L=0;L<M.size;L++)M.groups[L]={textures:[],textureCount:0,ids:[],size:0,start:0,blend:0};return M.sprites=[],M.vertexBuffers=[],M.vaos=[],M.vaoMax=2,M.vertexCount=0,M.renderer.on("prerender",M.onPrerender,M),M}return k.prototype.onContextChange=function(){var M=this.renderer.gl;this.renderer.legacy?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(M.getParameter(M.MAX_TEXTURE_IMAGE_UNITS),i.default.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=(0,t.default)(this.MAX_TEXTURES,M)),this.shader=(0,a.default)(M,this.MAX_TEXTURES),this.indexBuffer=d.default.GLBuffer.createIndexBuffer(M,this.indices,M.STATIC_DRAW),this.renderer.bindVao(null);for(var D=this.shader.attributes,L=0;L<this.vaoMax;L++){var I=this.vertexBuffers[L]=d.default.GLBuffer.createVertexBuffer(M,null,M.STREAM_DRAW),N=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(I,D.aVertexPosition,M.FLOAT,!1,this.vertByteSize,0).addAttribute(I,D.aTextureCoord,M.UNSIGNED_SHORT,!0,this.vertByteSize,2*4).addAttribute(I,D.aColor,M.UNSIGNED_BYTE,!0,this.vertByteSize,3*4);D.aTextureId&&N.addAttribute(I,D.aTextureId,M.FLOAT,!1,this.vertByteSize,4*4),this.vaos[L]=N}this.vao=this.vaos[0],this.currentBlendMode=99999,this.boundTextures=new Array(this.MAX_TEXTURES)},k.prototype.onPrerender=function(){this.vertexCount=0},k.prototype.render=function(M){this.currentIndex>=this.size&&this.flush(),M._texture._uvs&&(this.sprites[this.currentIndex++]=M)},k.prototype.flush=function(){if(this.currentIndex!==0){var M=this.renderer.gl,D=this.MAX_TEXTURES,L=c.default.nextPow2(this.currentIndex),I=c.default.log2(L),N=this.buffers[I],U=this.sprites,B=this.groups,X=N.float32View,W=N.uint32View,Z=this.boundTextures,K=this.renderer.boundTextures,Q=this.renderer.textureGC.count,J=0,H=void 0,q=void 0,$=1,ie=0,ne=B[0],ae=void 0,se=void 0,re=f.premultiplyBlendMode[U[0]._texture.baseTexture.premultipliedAlpha?1:0][U[0].blendMode];ne.textureCount=0,ne.start=0,ne.blend=re,R++;var ee=void 0;for(ee=0;ee<D;++ee){var ue=K[ee];if(ue._enabled===R){Z[ee]=this.renderer.emptyTextures[ee];continue}Z[ee]=ue,ue._virtalBoundId=ee,ue._enabled=R}for(R++,ee=0;ee<this.currentIndex;++ee){var he=U[ee];U[ee]=null,H=he._texture.baseTexture;var de=f.premultiplyBlendMode[Number(H.premultipliedAlpha)][he.blendMode];if(re!==de&&(re=de,q=null,ie=D,R++),q!==H&&(q=H,H._enabled!==R)){if(ie===D&&(R++,ne.size=ee-ne.start,ie=0,ne=B[$++],ne.blend=re,ne.textureCount=0,ne.start=ee),H.touched=Q,H._virtalBoundId===-1)for(var ce=0;ce<D;++ce){var ve=(ce+S)%D,Fe=Z[ve];if(Fe._enabled!==R){S++,Fe._virtalBoundId=-1,H._virtalBoundId=ve,Z[ve]=H;break}}H._enabled=R,ne.textureCount++,ne.ids[ie]=H._virtalBoundId,ne.textures[ie++]=H}if(ae=he.vertexData,se=he._texture._uvs.uvsUint32,this.renderer.roundPixels){var pe=this.renderer.resolution;X[J]=(ae[0]*pe|0)/pe,X[J+1]=(ae[1]*pe|0)/pe,X[J+5]=(ae[2]*pe|0)/pe,X[J+6]=(ae[3]*pe|0)/pe,X[J+10]=(ae[4]*pe|0)/pe,X[J+11]=(ae[5]*pe|0)/pe,X[J+15]=(ae[6]*pe|0)/pe,X[J+16]=(ae[7]*pe|0)/pe}else X[J]=ae[0],X[J+1]=ae[1],X[J+5]=ae[2],X[J+6]=ae[3],X[J+10]=ae[4],X[J+11]=ae[5],X[J+15]=ae[6],X[J+16]=ae[7];W[J+2]=se[0],W[J+7]=se[1],W[J+12]=se[2],W[J+17]=se[3];var Oe=Math.min(he.worldAlpha,1),ze=Oe<1&&H.premultipliedAlpha?(0,f.premultiplyTint)(he._tintRGB,Oe):he._tintRGB+(Oe*255<<24);W[J+3]=W[J+8]=W[J+13]=W[J+18]=ze,X[J+4]=X[J+9]=X[J+14]=X[J+19]=H._virtalBoundId,J+=20}if(ne.size=ee-ne.start,i.default.CAN_UPLOAD_SAME_BUFFER)this.vertexBuffers[this.vertexCount].upload(N.vertices,0,!0);else{if(this.vaoMax<=this.vertexCount){this.vaoMax++;var Ae=this.shader.attributes,Le=this.vertexBuffers[this.vertexCount]=d.default.GLBuffer.createVertexBuffer(M,null,M.STREAM_DRAW),Ke=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(Le,Ae.aVertexPosition,M.FLOAT,!1,this.vertByteSize,0).addAttribute(Le,Ae.aTextureCoord,M.UNSIGNED_SHORT,!0,this.vertByteSize,2*4).addAttribute(Le,Ae.aColor,M.UNSIGNED_BYTE,!0,this.vertByteSize,3*4);Ae.aTextureId&&Ke.addAttribute(Le,Ae.aTextureId,M.FLOAT,!1,this.vertByteSize,4*4),this.vaos[this.vertexCount]=Ke}this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].upload(N.vertices,0,!1),this.vertexCount++}for(ee=0;ee<D;++ee)K[ee]._virtalBoundId=-1;for(ee=0;ee<$;++ee){for(var we=B[ee],$e=we.textureCount,De=0;De<$e;De++)q=we.textures[De],K[we.ids[De]]!==q&&this.renderer.bindTexture(q,we.ids[De],!0),q._virtalBoundId=-1;this.renderer.state.setBlendMode(we.blend),M.drawElements(M.TRIANGLES,we.size*6,M.UNSIGNED_SHORT,we.start*6*2)}this.currentIndex=0}},k.prototype.start=function(){this.renderer.bindShader(this.shader),i.default.CAN_UPLOAD_SAME_BUFFER&&(this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].bind())},k.prototype.stop=function(){this.flush()},k.prototype.destroy=function(){for(var M=0;M<this.vaoMax;M++)this.vertexBuffers[M]&&this.vertexBuffers[M].destroy(),this.vaos[M]&&this.vaos[M].destroy();this.indexBuffer&&this.indexBuffer.destroy(),this.renderer.off("prerender",this.onPrerender,this),A.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.vertexBuffers=null,this.vaos=null,this.indexBuffer=null,this.indices=null,this.sprites=null;for(var D=0;D<this.buffers.length;++D)this.buffers[D].destroy()},k}(x.default);p.default=C,u.default.registerPlugin("sprite",C)},{"../../renderers/webgl/WebGLRenderer":84,"../../renderers/webgl/utils/ObjectRenderer":94,"../../renderers/webgl/utils/checkMaxIfStatmentsInShader":97,"../../settings":101,"../../utils":125,"../../utils/createIndicesForQuads":123,"./BatchBuffer":105,"./generateMultiTextureShader":107,"bit-twiddle":1,"pixi-gl-core":15}],107:[function(_,O,p){p.__esModule=!0,p.default=v;var w=_("../../Shader"),x=g(w);_("path");function g(s){return s&&s.__esModule?s:{default:s}}var u=["varying vec2 vTextureCoord;","varying vec4 vColor;","varying float vTextureId;","uniform sampler2D uSamplers[%count%];","void main(void){","vec4 color;","float textureId = floor(vTextureId+0.5);","%forloop%","gl_FragColor = color * vColor;","}"].join(`
`);function v(s,a){var r=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor;
}
`,t=u;t=t.replace(/%count%/gi,a),t=t.replace(/%forloop%/gi,h(a));for(var e=new x.default(s,r,t),o=[],n=0;n<a;n++)o[n]=n;return e.bind(),e.uniforms.uSamplers=o,e}function h(s){var a="";a+=`
`,a+=`
`;for(var r=0;r<s;r++)r>0&&(a+=`
else `),r<s-1&&(a+="if(textureId == "+r+".0)"),a+=`
{`,a+=`
	color = texture2D(uSamplers[`+r+"], vTextureCoord);",a+=`
}`;return a+=`
`,a+=`
`,a}},{"../../Shader":44,path:8}],108:[function(_,O,p){p.__esModule=!0;var w=function(){function E(R,S){for(var C=0;C<S.length;C++){var A=S[C];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(R,A.key,A)}}return function(R,S,C){return S&&E(R.prototype,S),C&&E(R,C),R}}(),x=_("../sprites/Sprite"),g=d(x),u=_("../textures/Texture"),v=d(u),h=_("../math"),s=_("../utils"),a=_("../const"),r=_("../settings"),t=d(r),e=_("./TextStyle"),o=d(e),n=_("./TextMetrics"),i=d(n),f=_("../utils/trimCanvas"),l=d(f);function d(E){return E&&E.__esModule?E:{default:E}}function m(E,R){if(!(E instanceof R))throw new TypeError("Cannot call a class as a function")}function c(E,R){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R&&(typeof R=="object"||typeof R=="function")?R:E}function b(E,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof R);E.prototype=Object.create(R&&R.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(E,R):E.__proto__=R)}var y={texture:!0,children:!1,baseTexture:!0},T=function(E){b(R,E);function R(S,C,A){m(this,R),A=A||document.createElement("canvas"),A.width=3,A.height=3;var k=v.default.fromCanvas(A,t.default.SCALE_MODE,"text");k.orig=new h.Rectangle,k.trim=new h.Rectangle;var F=c(this,E.call(this,k));return v.default.addToCache(F._texture,F._texture.baseTexture.textureCacheIds[0]),F.canvas=A,F.context=F.canvas.getContext("2d"),F.resolution=t.default.RESOLUTION,F._text=null,F._style=null,F._styleListener=null,F._font="",F.text=S,F.style=C,F.localStyleID=-1,F}return R.prototype.updateText=function(C){var A=this._style;if(this.localStyleID!==A.styleID&&(this.dirty=!0,this.localStyleID=A.styleID),!(!this.dirty&&C)){this._font=this._style.toFontString();var k=this.context,F=i.default.measureText(this._text,this._style,this._style.wordWrap,this.canvas),M=F.width,D=F.height,L=F.lines,I=F.lineHeight,N=F.lineWidths,U=F.maxLineWidth,B=F.fontProperties;this.canvas.width=Math.ceil((Math.max(1,M)+A.padding*2)*this.resolution),this.canvas.height=Math.ceil((Math.max(1,D)+A.padding*2)*this.resolution),k.scale(this.resolution,this.resolution),k.clearRect(0,0,this.canvas.width,this.canvas.height),k.font=this._font,k.strokeStyle=A.stroke,k.lineWidth=A.strokeThickness,k.textBaseline=A.textBaseline,k.lineJoin=A.lineJoin,k.miterLimit=A.miterLimit;var X=void 0,W=void 0;if(A.dropShadow){k.fillStyle=A.dropShadowColor,k.globalAlpha=A.dropShadowAlpha,k.shadowBlur=A.dropShadowBlur,A.dropShadowBlur>0&&(k.shadowColor=A.dropShadowColor);for(var Z=Math.cos(A.dropShadowAngle)*A.dropShadowDistance,K=Math.sin(A.dropShadowAngle)*A.dropShadowDistance,Q=0;Q<L.length;Q++)X=A.strokeThickness/2,W=A.strokeThickness/2+Q*I+B.ascent,A.align==="right"?X+=U-N[Q]:A.align==="center"&&(X+=(U-N[Q])/2),A.fill&&(this.drawLetterSpacing(L[Q],X+Z+A.padding,W+K+A.padding),A.stroke&&A.strokeThickness&&(k.strokeStyle=A.dropShadowColor,this.drawLetterSpacing(L[Q],X+Z+A.padding,W+K+A.padding,!0),k.strokeStyle=A.stroke))}k.shadowBlur=0,k.globalAlpha=1,k.fillStyle=this._generateFillStyle(A,L);for(var J=0;J<L.length;J++)X=A.strokeThickness/2,W=A.strokeThickness/2+J*I+B.ascent,A.align==="right"?X+=U-N[J]:A.align==="center"&&(X+=(U-N[J])/2),A.stroke&&A.strokeThickness&&this.drawLetterSpacing(L[J],X+A.padding,W+A.padding,!0),A.fill&&this.drawLetterSpacing(L[J],X+A.padding,W+A.padding);this.updateTexture()}},R.prototype.drawLetterSpacing=function(C,A,k){var F=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,M=this._style,D=M.letterSpacing;if(D===0){F?this.context.strokeText(C,A,k):this.context.fillText(C,A,k);return}for(var L=String.prototype.split.call(C,""),I=A,N=0,U="";N<C.length;)U=L[N++],F?this.context.strokeText(U,I,k):this.context.fillText(U,I,k),I+=this.context.measureText(U).width+D},R.prototype.updateTexture=function(){var C=this.canvas;if(this._style.trim){var A=(0,l.default)(C);A.data&&(C.width=A.width,C.height=A.height,this.context.putImageData(A.data,0,0))}var k=this._texture,F=this._style,M=F.trim?0:F.padding,D=k.baseTexture;D.hasLoaded=!0,D.resolution=this.resolution,D.realWidth=C.width,D.realHeight=C.height,D.width=C.width/this.resolution,D.height=C.height/this.resolution,k.trim.width=k._frame.width=C.width/this.resolution,k.trim.height=k._frame.height=C.height/this.resolution,k.trim.x=-M,k.trim.y=-M,k.orig.width=k._frame.width-M*2,k.orig.height=k._frame.height-M*2,this._onTextureUpdate(),D.emit("update",D),this.dirty=!1},R.prototype.renderWebGL=function(C){this.resolution!==C.resolution&&(this.resolution=C.resolution,this.dirty=!0),this.updateText(!0),E.prototype.renderWebGL.call(this,C)},R.prototype._renderCanvas=function(C){this.resolution!==C.resolution&&(this.resolution=C.resolution,this.dirty=!0),this.updateText(!0),E.prototype._renderCanvas.call(this,C)},R.prototype.getLocalBounds=function(C){return this.updateText(!0),E.prototype.getLocalBounds.call(this,C)},R.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},R.prototype._onStyleChange=function(){this.dirty=!0},R.prototype._generateFillStyle=function(C,A){if(!Array.isArray(C.fill))return C.fill;if(navigator.isCocoonJS)return C.fill[0];var k=void 0,F=void 0,M=void 0,D=void 0,L=this.canvas.width/this.resolution,I=this.canvas.height/this.resolution,N=C.fill.slice(),U=C.fillGradientStops.slice();if(!U.length)for(var B=N.length+1,X=1;X<B;++X)U.push(X/B);if(N.unshift(C.fill[0]),U.unshift(0),N.push(C.fill[C.fill.length-1]),U.push(1),C.fillGradientType===a.TEXT_GRADIENT.LINEAR_VERTICAL){k=this.context.createLinearGradient(L/2,0,L/2,I),F=(N.length+1)*A.length,M=0;for(var W=0;W<A.length;W++){M+=1;for(var Z=0;Z<N.length;Z++)typeof U[Z]=="number"?D=U[Z]/A.length+W/A.length:D=M/F,k.addColorStop(D,N[Z]),M++}}else{k=this.context.createLinearGradient(0,I/2,L,I/2),F=N.length+1,M=1;for(var K=0;K<N.length;K++)typeof U[K]=="number"?D=U[K]:D=M/F,k.addColorStop(D,N[K]),M++}return k},R.prototype.destroy=function(C){typeof C=="boolean"&&(C={children:C}),C=Object.assign({},y,C),E.prototype.destroy.call(this,C),this.context=null,this.canvas=null,this._style=null},w(R,[{key:"width",get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(C){this.updateText(!0);var A=(0,s.sign)(this.scale.x)||1;this.scale.x=A*C/this._texture.orig.width,this._width=C}},{key:"height",get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(C){this.updateText(!0);var A=(0,s.sign)(this.scale.y)||1;this.scale.y=A*C/this._texture.orig.height,this._height=C}},{key:"style",get:function(){return this._style},set:function(C){C=C||{},C instanceof o.default?this._style=C:this._style=new o.default(C),this.localStyleID=-1,this.dirty=!0}},{key:"text",get:function(){return this._text},set:function(C){C=String(C===""||C===null||C===void 0?" ":C),this._text!==C&&(this._text=C,this.dirty=!0)}}]),R}(g.default);p.default=T},{"../const":46,"../math":70,"../settings":101,"../sprites/Sprite":102,"../textures/Texture":115,"../utils":125,"../utils/trimCanvas":130,"./TextMetrics":109,"./TextStyle":110}],109:[function(_,O,p){p.__esModule=!0;function w(u,v){if(!(u instanceof v))throw new TypeError("Cannot call a class as a function")}var x=function(){function u(v,h,s,a,r,t,e,o,n){w(this,u),this.text=v,this.style=h,this.width=s,this.height=a,this.lines=r,this.lineWidths=t,this.lineHeight=e,this.maxLineWidth=o,this.fontProperties=n}return u.measureText=function(h,s,a){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:u._canvas;a=a??s.wordWrap;var t=s.toFontString(),e=u.measureFont(t),o=r.getContext("2d");o.font=t;for(var n=a?u.wordWrap(h,s,r):h,i=n.split(/(?:\r\n|\r|\n)/),f=new Array(i.length),l=0,d=0;d<i.length;d++){var m=o.measureText(i[d]).width+(i[d].length-1)*s.letterSpacing;f[d]=m,l=Math.max(l,m)}var c=l+s.strokeThickness;s.dropShadow&&(c+=s.dropShadowDistance);var b=s.lineHeight||e.fontSize+s.strokeThickness,y=Math.max(b,e.fontSize+s.strokeThickness)+(i.length-1)*(b+s.leading);return s.dropShadow&&(y+=s.dropShadowDistance),new u(h,s,c,y,i,f,b+s.leading,l,e)},u.wordWrap=function(h,s){for(var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:u._canvas,r=a.getContext("2d"),t=0,e="",o="",n={},i=s.letterSpacing,f=s.whiteSpace,l=u.collapseSpaces(f),d=u.collapseNewlines(f),m=!l,c=s.wordWrapWidth+i,b=u.tokenize(h),y=0;y<b.length;y++){var T=b[y];if(u.isNewline(T)){if(!d){o+=u.addLine(e),m=!l,e="",t=0;continue}T=" "}if(l){var E=u.isBreakingSpace(T),R=u.isBreakingSpace(e[e.length-1]);if(E&&R)continue}var S=u.getFromCache(T,i,n,r);if(S>c)if(e!==""&&(o+=u.addLine(e),e="",t=0),u.canBreakWords(T,s.breakWords))for(var C=T.split(""),A=0;A<C.length;A++){for(var k=C[A],F=1;C[A+F];){var M=C[A+F],D=k[k.length-1];if(!u.canBreakChars(D,M,T,A,s.breakWords))k+=M;else break;F++}A+=k.length-1;var L=u.getFromCache(k,i,n,r);L+t>c&&(o+=u.addLine(e),m=!1,e="",t=0),e+=k,t+=L}else{e.length>0&&(o+=u.addLine(e),e="",t=0);var I=y===b.length-1;o+=u.addLine(T,!I),m=!1,e="",t=0}else S+t>c&&(m=!1,o+=u.addLine(e),e="",t=0),(e.length>0||!u.isBreakingSpace(T)||m)&&(e+=T,t+=S)}return o+=u.addLine(e,!1),o},u.addLine=function(h){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return h=u.trimRight(h),h=s?h+`
`:h,h},u.getFromCache=function(h,s,a,r){var t=a[h];if(t===void 0){var e=h.length*s;t=r.measureText(h).width+e,a[h]=t}return t},u.collapseSpaces=function(h){return h==="normal"||h==="pre-line"},u.collapseNewlines=function(h){return h==="normal"},u.trimRight=function(h){if(typeof h!="string")return"";for(var s=h.length-1;s>=0;s--){var a=h[s];if(!u.isBreakingSpace(a))break;h=h.slice(0,-1)}return h},u.isNewline=function(h){return typeof h!="string"?!1:u._newlines.indexOf(h.charCodeAt(0))>=0},u.isBreakingSpace=function(h){return typeof h!="string"?!1:u._breakingSpaces.indexOf(h.charCodeAt(0))>=0},u.tokenize=function(h){var s=[],a="";if(typeof h!="string")return s;for(var r=0;r<h.length;r++){var t=h[r];if(u.isBreakingSpace(t)||u.isNewline(t)){a!==""&&(s.push(a),a=""),s.push(t);continue}a+=t}return a!==""&&s.push(a),s},u.canBreakWords=function(h,s){return s},u.canBreakChars=function(h,s,a,r,t){return!0},u.measureFont=function(h){if(u._fonts[h])return u._fonts[h];var s={},a=u._canvas,r=u._context;r.font=h;var t=u.METRICS_STRING+u.BASELINE_SYMBOL,e=Math.ceil(r.measureText(t).width),o=Math.ceil(r.measureText(u.BASELINE_SYMBOL).width),n=2*o;o=o*u.BASELINE_MULTIPLIER|0,a.width=e,a.height=n,r.fillStyle="#f00",r.fillRect(0,0,e,n),r.font=h,r.textBaseline="alphabetic",r.fillStyle="#000",r.fillText(t,0,o);var i=r.getImageData(0,0,e,n).data,f=i.length,l=e*4,d=0,m=0,c=!1;for(d=0;d<o;++d){for(var b=0;b<l;b+=4)if(i[m+b]!==255){c=!0;break}if(!c)m+=l;else break}for(s.ascent=o-d,m=f-l,c=!1,d=n;d>o;--d){for(var y=0;y<l;y+=4)if(i[m+y]!==255){c=!0;break}if(!c)m-=l;else break}return s.descent=d-o,s.fontSize=s.ascent+s.descent,u._fonts[h]=s,s},u.clearMetrics=function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";h?delete u._fonts[h]:u._fonts={}},u}();p.default=x;var g=document.createElement("canvas");g.width=g.height=10,x._canvas=g,x._context=g.getContext("2d"),x._fonts={},x.METRICS_STRING="|Éq",x.BASELINE_SYMBOL="M",x.BASELINE_MULTIPLIER=1.4,x._newlines=[10,13],x._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]},{}],110:[function(_,O,p){p.__esModule=!0;var w=function(){function o(n,i){for(var f=0;f<i.length;f++){var l=i[f];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(n,l.key,l)}}return function(n,i,f){return i&&o(n.prototype,i),f&&o(n,f),n}}(),x=_("../const"),g=_("../utils");function u(o,n){if(!(o instanceof n))throw new TypeError("Cannot call a class as a function")}var v={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:x.TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},h=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],s=function(){function o(n){u(this,o),this.styleID=0,this.reset(),e(this,n,n)}return o.prototype.clone=function(){var i={};return e(i,this,v),new o(i)},o.prototype.reset=function(){e(this,v,v)},o.prototype.toFontString=function(){var i=typeof this.fontSize=="number"?this.fontSize+"px":this.fontSize,f=this.fontFamily;Array.isArray(this.fontFamily)||(f=this.fontFamily.split(","));for(var l=f.length-1;l>=0;l--){var d=f[l].trim();!/([\"\'])[^\'\"]+\1/.test(d)&&h.indexOf(d)<0&&(d='"'+d+'"'),f[l]=d}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+i+" "+f.join(",")},w(o,[{key:"align",get:function(){return this._align},set:function(i){this._align!==i&&(this._align=i,this.styleID++)}},{key:"breakWords",get:function(){return this._breakWords},set:function(i){this._breakWords!==i&&(this._breakWords=i,this.styleID++)}},{key:"dropShadow",get:function(){return this._dropShadow},set:function(i){this._dropShadow!==i&&(this._dropShadow=i,this.styleID++)}},{key:"dropShadowAlpha",get:function(){return this._dropShadowAlpha},set:function(i){this._dropShadowAlpha!==i&&(this._dropShadowAlpha=i,this.styleID++)}},{key:"dropShadowAngle",get:function(){return this._dropShadowAngle},set:function(i){this._dropShadowAngle!==i&&(this._dropShadowAngle=i,this.styleID++)}},{key:"dropShadowBlur",get:function(){return this._dropShadowBlur},set:function(i){this._dropShadowBlur!==i&&(this._dropShadowBlur=i,this.styleID++)}},{key:"dropShadowColor",get:function(){return this._dropShadowColor},set:function(i){var f=r(i);this._dropShadowColor!==f&&(this._dropShadowColor=f,this.styleID++)}},{key:"dropShadowDistance",get:function(){return this._dropShadowDistance},set:function(i){this._dropShadowDistance!==i&&(this._dropShadowDistance=i,this.styleID++)}},{key:"fill",get:function(){return this._fill},set:function(i){var f=r(i);this._fill!==f&&(this._fill=f,this.styleID++)}},{key:"fillGradientType",get:function(){return this._fillGradientType},set:function(i){this._fillGradientType!==i&&(this._fillGradientType=i,this.styleID++)}},{key:"fillGradientStops",get:function(){return this._fillGradientStops},set:function(i){t(this._fillGradientStops,i)||(this._fillGradientStops=i,this.styleID++)}},{key:"fontFamily",get:function(){return this._fontFamily},set:function(i){this.fontFamily!==i&&(this._fontFamily=i,this.styleID++)}},{key:"fontSize",get:function(){return this._fontSize},set:function(i){this._fontSize!==i&&(this._fontSize=i,this.styleID++)}},{key:"fontStyle",get:function(){return this._fontStyle},set:function(i){this._fontStyle!==i&&(this._fontStyle=i,this.styleID++)}},{key:"fontVariant",get:function(){return this._fontVariant},set:function(i){this._fontVariant!==i&&(this._fontVariant=i,this.styleID++)}},{key:"fontWeight",get:function(){return this._fontWeight},set:function(i){this._fontWeight!==i&&(this._fontWeight=i,this.styleID++)}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(i){this._letterSpacing!==i&&(this._letterSpacing=i,this.styleID++)}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(i){this._lineHeight!==i&&(this._lineHeight=i,this.styleID++)}},{key:"leading",get:function(){return this._leading},set:function(i){this._leading!==i&&(this._leading=i,this.styleID++)}},{key:"lineJoin",get:function(){return this._lineJoin},set:function(i){this._lineJoin!==i&&(this._lineJoin=i,this.styleID++)}},{key:"miterLimit",get:function(){return this._miterLimit},set:function(i){this._miterLimit!==i&&(this._miterLimit=i,this.styleID++)}},{key:"padding",get:function(){return this._padding},set:function(i){this._padding!==i&&(this._padding=i,this.styleID++)}},{key:"stroke",get:function(){return this._stroke},set:function(i){var f=r(i);this._stroke!==f&&(this._stroke=f,this.styleID++)}},{key:"strokeThickness",get:function(){return this._strokeThickness},set:function(i){this._strokeThickness!==i&&(this._strokeThickness=i,this.styleID++)}},{key:"textBaseline",get:function(){return this._textBaseline},set:function(i){this._textBaseline!==i&&(this._textBaseline=i,this.styleID++)}},{key:"trim",get:function(){return this._trim},set:function(i){this._trim!==i&&(this._trim=i,this.styleID++)}},{key:"whiteSpace",get:function(){return this._whiteSpace},set:function(i){this._whiteSpace!==i&&(this._whiteSpace=i,this.styleID++)}},{key:"wordWrap",get:function(){return this._wordWrap},set:function(i){this._wordWrap!==i&&(this._wordWrap=i,this.styleID++)}},{key:"wordWrapWidth",get:function(){return this._wordWrapWidth},set:function(i){this._wordWrapWidth!==i&&(this._wordWrapWidth=i,this.styleID++)}}]),o}();p.default=s;function a(o){return typeof o=="number"?(0,g.hex2string)(o):(typeof o=="string"&&o.indexOf("0x")===0&&(o=o.replace("0x","#")),o)}function r(o){if(Array.isArray(o)){for(var n=0;n<o.length;++n)o[n]=a(o[n]);return o}else return a(o)}function t(o,n){if(!Array.isArray(o)||!Array.isArray(n)||o.length!==n.length)return!1;for(var i=0;i<o.length;++i)if(o[i]!==n[i])return!1;return!0}function e(o,n,i){for(var f in i)Array.isArray(n[f])?o[f]=n[f].slice():o[f]=n[f]}},{"../const":46,"../utils":125}],111:[function(_,O,p){p.__esModule=!0;var w=_("./BaseTexture"),x=v(w),g=_("../settings"),u=v(g);function v(t){return t&&t.__esModule?t:{default:t}}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function a(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(t){a(e,t);function e(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100,i=arguments[2],f=arguments[3];h(this,e);var l=s(this,t.call(this,null,i));return l.resolution=f||u.default.RESOLUTION,l.width=Math.ceil(o),l.height=Math.ceil(n),l.realWidth=l.width*l.resolution,l.realHeight=l.height*l.resolution,l.scaleMode=i!==void 0?i:u.default.SCALE_MODE,l.hasLoaded=!0,l._glRenderTargets={},l._canvasRenderTarget=null,l.valid=!1,l}return e.prototype.resize=function(n,i){n=Math.ceil(n),i=Math.ceil(i),!(n===this.width&&i===this.height)&&(this.valid=n>0&&i>0,this.width=n,this.height=i,this.realWidth=this.width*this.resolution,this.realHeight=this.height*this.resolution,this.valid&&this.emit("update",this))},e.prototype.destroy=function(){t.prototype.destroy.call(this,!0),this.renderer=null},e}(x.default);p.default=r},{"../settings":101,"./BaseTexture":112}],112:[function(_,O,p){p.__esModule=!0;var w=_("../utils"),x=_("../settings"),g=t(x),u=_("eventemitter3"),v=t(u),h=_("../utils/determineCrossOrigin"),s=t(h),a=_("bit-twiddle"),r=t(a);function t(f){return f&&f.__esModule?f:{default:f}}function e(f,l){if(!(f instanceof l))throw new TypeError("Cannot call a class as a function")}function o(f,l){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:f}function n(f,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);f.prototype=Object.create(l&&l.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(f,l):f.__proto__=l)}var i=function(f){n(l,f);function l(d,m,c){e(this,l);var b=o(this,f.call(this));return b.uid=(0,w.uid)(),b.touched=0,b.resolution=c||g.default.RESOLUTION,b.width=100,b.height=100,b.realWidth=100,b.realHeight=100,b.scaleMode=m!==void 0?m:g.default.SCALE_MODE,b.hasLoaded=!1,b.isLoading=!1,b.source=null,b.origSource=null,b.imageType=null,b.sourceScale=1,b.premultipliedAlpha=!0,b.imageUrl=null,b.isPowerOfTwo=!1,b.mipmap=g.default.MIPMAP_TEXTURES,b.wrapMode=g.default.WRAP_MODE,b._glTextures={},b._enabled=0,b._virtalBoundId=-1,b._destroyed=!1,b.textureCacheIds=[],d&&b.loadSource(d),b}return l.prototype.update=function(){this.imageType!=="svg"&&(this.realWidth=this.source.naturalWidth||this.source.videoWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.videoHeight||this.source.height,this._updateDimensions()),this.emit("update",this)},l.prototype._updateDimensions=function(){this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=r.default.isPow2(this.realWidth)&&r.default.isPow2(this.realHeight)},l.prototype.loadSource=function(m){var c=this.isLoading;this.hasLoaded=!1,this.isLoading=!1,c&&this.source&&(this.source.onload=null,this.source.onerror=null);var b=!this.source;if(this.source=m,(m.src&&m.complete||m.getContext)&&m.width&&m.height)this._updateImageType(),this.imageType==="svg"?this._loadSvgSource():this._sourceLoaded(),b&&this.emit("loaded",this);else if(!m.getContext){this.isLoading=!0;var y=this;if(m.onload=function(){if(y._updateImageType(),m.onload=null,m.onerror=null,!!y.isLoading){if(y.isLoading=!1,y._sourceLoaded(),y.imageType==="svg"){y._loadSvgSource();return}y.emit("loaded",y)}},m.onerror=function(){m.onload=null,m.onerror=null,y.isLoading&&(y.isLoading=!1,y.emit("error",y))},m.complete&&m.src){if(m.onload=null,m.onerror=null,y.imageType==="svg"){y._loadSvgSource();return}this.isLoading=!1,m.width&&m.height?(this._sourceLoaded(),c&&this.emit("loaded",this)):c&&this.emit("error",this)}}},l.prototype._updateImageType=function(){if(this.imageUrl){var m=(0,w.decomposeDataUri)(this.imageUrl),c=void 0;if(m&&m.mediaType==="image"){var b=m.subType.split("+")[0];if(c=(0,w.getUrlFileExtension)("."+b),!c)throw new Error("Invalid image type in data URI.")}else c=(0,w.getUrlFileExtension)(this.imageUrl),c||(c="png");this.imageType=c}},l.prototype._loadSvgSource=function(){if(this.imageType==="svg"){var m=(0,w.decomposeDataUri)(this.imageUrl);m?this._loadSvgSourceUsingDataUri(m):this._loadSvgSourceUsingXhr()}},l.prototype._loadSvgSourceUsingDataUri=function(m){var c=void 0;if(m.encoding==="base64"){if(!atob)throw new Error("Your browser doesn't support base64 conversions.");c=atob(m.data)}else c=m.data;this._loadSvgSourceUsingString(c)},l.prototype._loadSvgSourceUsingXhr=function(){var m=this,c=new XMLHttpRequest;c.onload=function(){if(c.readyState!==c.DONE||c.status!==200)throw new Error("Failed to load SVG using XHR.");m._loadSvgSourceUsingString(c.response)},c.onerror=function(){return m.emit("error",m)},c.open("GET",this.imageUrl,!0),c.send()},l.prototype._loadSvgSourceUsingString=function(m){var c=(0,w.getSvgSize)(m),b=c.width,y=c.height;if(!b||!y)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");this.realWidth=Math.round(b*this.sourceScale),this.realHeight=Math.round(y*this.sourceScale),this._updateDimensions();var T=document.createElement("canvas");T.width=this.realWidth,T.height=this.realHeight,T._pixiId="canvas_"+(0,w.uid)(),T.getContext("2d").drawImage(this.source,0,0,b,y,0,0,this.realWidth,this.realHeight),this.origSource=this.source,this.source=T,l.addToCache(this,T._pixiId),this.isLoading=!1,this._sourceLoaded(),this.emit("loaded",this)},l.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},l.prototype.destroy=function(){this.imageUrl&&(delete w.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")),this.source=null,this.dispose(),l.removeFromCache(this),this.textureCacheIds=null,this._destroyed=!0},l.prototype.dispose=function(){this.emit("dispose",this)},l.prototype.updateSourceImage=function(m){this.source.src=m,this.loadSource(this.source)},l.fromImage=function(m,c,b,y){var T=w.BaseTextureCache[m];if(!T){var E=new Image;c===void 0&&m.indexOf("data:")!==0?E.crossOrigin=(0,s.default)(m):c&&(E.crossOrigin=typeof c=="string"?c:"anonymous"),T=new l(E,b),T.imageUrl=m,y&&(T.sourceScale=y),T.resolution=(0,w.getResolutionOfUrl)(m),E.src=m,l.addToCache(T,m)}return T},l.fromCanvas=function(m,c){var b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"canvas";m._pixiId||(m._pixiId=b+"_"+(0,w.uid)());var y=w.BaseTextureCache[m._pixiId];return y||(y=new l(m,c),l.addToCache(y,m._pixiId)),y},l.from=function(m,c,b){if(typeof m=="string")return l.fromImage(m,void 0,c,b);if(m instanceof HTMLImageElement){var y=m.src,T=w.BaseTextureCache[y];return T||(T=new l(m,c),T.imageUrl=y,b&&(T.sourceScale=b),T.resolution=(0,w.getResolutionOfUrl)(y),l.addToCache(T,y)),T}else if(m instanceof HTMLCanvasElement)return l.fromCanvas(m,c);return m},l.addToCache=function(m,c){c&&(m.textureCacheIds.indexOf(c)===-1&&m.textureCacheIds.push(c),w.BaseTextureCache[c]&&console.warn("BaseTexture added to the cache with an id ["+c+"] that already had an entry"),w.BaseTextureCache[c]=m)},l.removeFromCache=function(m){if(typeof m=="string"){var c=w.BaseTextureCache[m];if(c){var b=c.textureCacheIds.indexOf(m);return b>-1&&c.textureCacheIds.splice(b,1),delete w.BaseTextureCache[m],c}}else if(m&&m.textureCacheIds){for(var y=0;y<m.textureCacheIds.length;++y)delete w.BaseTextureCache[m.textureCacheIds[y]];return m.textureCacheIds.length=0,m}return null},l}(v.default);p.default=i},{"../settings":101,"../utils":125,"../utils/determineCrossOrigin":124,"bit-twiddle":1,eventemitter3:3}],113:[function(_,O,p){p.__esModule=!0;var w=_("./BaseRenderTexture"),x=v(w),g=_("./Texture"),u=v(g);function v(t){return t&&t.__esModule?t:{default:t}}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function a(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(t){a(e,t);function e(o,n){h(this,e);var i=null;if(!(o instanceof x.default)){var f=arguments[1],l=arguments[2],d=arguments[3],m=arguments[4];console.warn("Please use RenderTexture.create("+f+", "+l+") instead of the ctor directly."),i=arguments[0],n=null,o=new x.default(f,l,d,m)}var c=s(this,t.call(this,o,n));return c.legacyRenderer=i,c.valid=!0,c._updateUvs(),c}return e.prototype.resize=function(n,i,f){n=Math.ceil(n),i=Math.ceil(i),this.valid=n>0&&i>0,this._frame.width=this.orig.width=n,this._frame.height=this.orig.height=i,f||this.baseTexture.resize(n,i),this._updateUvs()},e.create=function(n,i,f,l){return new e(new x.default(n,i,f,l))},e}(u.default);p.default=r},{"./BaseRenderTexture":111,"./Texture":115}],114:[function(_,O,p){p.__esModule=!0;var w=function(){function h(s,a){for(var r=0;r<a.length;r++){var t=a[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(s,t.key,t)}}return function(s,a,r){return a&&h(s.prototype,a),r&&h(s,r),s}}(),x=_("../"),g=_("../utils");function u(h,s){if(!(h instanceof s))throw new TypeError("Cannot call a class as a function")}var v=function(){w(h,null,[{key:"BATCH_SIZE",get:function(){return 1e3}}]);function h(s,a){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;u(this,h),this.baseTexture=s,this.textures={},this.animations={},this.data=a,this.resolution=this._updateResolution(r||this.baseTexture.imageUrl),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return h.prototype._updateResolution=function(a){var r=this.data.meta.scale,t=(0,g.getResolutionOfUrl)(a,null);return t===null&&(t=r!==void 0?parseFloat(r):1),t!==1&&(this.baseTexture.resolution=t,this.baseTexture.update()),t},h.prototype.parse=function(a){this._batchIndex=0,this._callback=a,this._frameKeys.length<=h.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},h.prototype._processFrames=function(a){for(var r=a,t=h.BATCH_SIZE,e=this.baseTexture.sourceScale;r-a<t&&r<this._frameKeys.length;){var o=this._frameKeys[r],n=this._frames[o],i=n.frame;if(i){var f=null,l=null,d=n.trimmed!==!1&&n.sourceSize?n.sourceSize:n.frame,m=new x.Rectangle(0,0,Math.floor(d.w*e)/this.resolution,Math.floor(d.h*e)/this.resolution);n.rotated?f=new x.Rectangle(Math.floor(i.x*e)/this.resolution,Math.floor(i.y*e)/this.resolution,Math.floor(i.h*e)/this.resolution,Math.floor(i.w*e)/this.resolution):f=new x.Rectangle(Math.floor(i.x*e)/this.resolution,Math.floor(i.y*e)/this.resolution,Math.floor(i.w*e)/this.resolution,Math.floor(i.h*e)/this.resolution),n.trimmed!==!1&&n.spriteSourceSize&&(l=new x.Rectangle(Math.floor(n.spriteSourceSize.x*e)/this.resolution,Math.floor(n.spriteSourceSize.y*e)/this.resolution,Math.floor(i.w*e)/this.resolution,Math.floor(i.h*e)/this.resolution)),this.textures[o]=new x.Texture(this.baseTexture,f,m,l,n.rotated?2:0,n.anchor),x.Texture.addToCache(this.textures[o],o)}r++}},h.prototype._processAnimations=function(){var a=this.data.animations||{};for(var r in a){this.animations[r]=[];for(var o=a[r],t=Array.isArray(o),e=0,o=t?o:o[Symbol.iterator]();;){var n;if(t){if(e>=o.length)break;n=o[e++]}else{if(e=o.next(),e.done)break;n=e.value}var i=n;this.animations[r].push(this.textures[i])}}},h.prototype._parseComplete=function(){var a=this._callback;this._callback=null,this._batchIndex=0,a.call(this,this.textures)},h.prototype._nextBatch=function(){var a=this;this._processFrames(this._batchIndex*h.BATCH_SIZE),this._batchIndex++,setTimeout(function(){a._batchIndex*h.BATCH_SIZE<a._frameKeys.length?a._nextBatch():(a._processAnimations(),a._parseComplete())},0)},h.prototype.destroy=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;for(var r in this.textures)this.textures[r].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,a&&this.baseTexture.destroy(),this.baseTexture=null},h}();p.default=v},{"../":65,"../utils":125}],115:[function(_,O,p){p.__esModule=!0;var w=function(){function y(T,E){for(var R=0;R<E.length;R++){var S=E[R];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(T,S.key,S)}}return function(T,E,R){return E&&y(T.prototype,E),R&&y(T,R),T}}(),x=_("./BaseTexture"),g=i(x),u=_("./VideoBaseTexture"),v=i(u),h=_("./TextureUvs"),s=i(h),a=_("eventemitter3"),r=i(a),t=_("../math"),e=_("../utils"),o=_("../settings"),n=i(o);function i(y){return y&&y.__esModule?y:{default:y}}function f(y,T){if(!(y instanceof T))throw new TypeError("Cannot call a class as a function")}function l(y,T){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:y}function d(y,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);y.prototype=Object.create(T&&T.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(y,T):y.__proto__=T)}var m=function(y){d(T,y);function T(E,R,S,C,A,k){f(this,T);var F=l(this,y.call(this));if(F.noFrame=!1,R||(F.noFrame=!0,R=new t.Rectangle(0,0,1,1)),E instanceof T&&(E=E.baseTexture),F.baseTexture=E,F._frame=R,F.trim=C,F.valid=!1,F.requiresUpdate=!1,F._uvs=null,F.orig=S||R,F._rotate=Number(A||0),A===!0)F._rotate=2;else if(F._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return E.hasLoaded?(F.noFrame&&(R=new t.Rectangle(0,0,E.width,E.height),E.on("update",F.onBaseTextureUpdated,F)),F.frame=R):E.once("loaded",F.onBaseTextureLoaded,F),F.defaultAnchor=k?new t.Point(k.x,k.y):new t.Point(0,0),F._updateID=0,F.transform=null,F.textureCacheIds=[],F}return T.prototype.update=function(){this.baseTexture.update()},T.prototype.onBaseTextureLoaded=function(R){this._updateID++,this.noFrame?this.frame=new t.Rectangle(0,0,R.width,R.height):this.frame=this._frame,this.baseTexture.on("update",this.onBaseTextureUpdated,this),this.emit("update",this)},T.prototype.onBaseTextureUpdated=function(R){this._updateID++,this._frame.width=R.width,this._frame.height=R.height,this.emit("update",this)},T.prototype.destroy=function(R){this.baseTexture&&(R&&(e.TextureCache[this.baseTexture.imageUrl]&&T.removeFromCache(this.baseTexture.imageUrl),this.baseTexture.destroy()),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,T.removeFromCache(this),this.textureCacheIds=null},T.prototype.clone=function(){return new T(this.baseTexture,this.frame,this.orig,this.trim,this.rotate)},T.prototype._updateUvs=function(){this._uvs||(this._uvs=new s.default),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},T.fromImage=function(R,S,C,A){var k=e.TextureCache[R];return k||(k=new T(g.default.fromImage(R,S,C,A)),T.addToCache(k,R)),k},T.fromFrame=function(R){var S=e.TextureCache[R];if(!S)throw new Error('The frameId "'+R+'" does not exist in the texture cache');return S},T.fromCanvas=function(R,S){var C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"canvas";return new T(g.default.fromCanvas(R,S,C))},T.fromVideo=function(R,S){return typeof R=="string"?T.fromVideoUrl(R,S):new T(v.default.fromVideo(R,S))},T.fromVideoUrl=function(R,S){return new T(v.default.fromUrl(R,S))},T.from=function(R){if(typeof R=="string"){var S=e.TextureCache[R];if(!S){var C=R.match(/\.(mp4|webm|ogg|h264|avi|mov)$/)!==null;return C?T.fromVideoUrl(R):T.fromImage(R)}return S}else{if(R instanceof HTMLImageElement)return new T(g.default.from(R));if(R instanceof HTMLCanvasElement)return T.fromCanvas(R,n.default.SCALE_MODE,"HTMLCanvasElement");if(R instanceof HTMLVideoElement)return T.fromVideo(R);if(R instanceof g.default)return new T(R)}return R},T.fromLoader=function(R,S,C){var A=new g.default(R,void 0,(0,e.getResolutionOfUrl)(S)),k=new T(A);return A.imageUrl=S,C||(C=S),g.default.addToCache(k.baseTexture,C),T.addToCache(k,C),C!==S&&(g.default.addToCache(k.baseTexture,S),T.addToCache(k,S)),k},T.addToCache=function(R,S){S&&(R.textureCacheIds.indexOf(S)===-1&&R.textureCacheIds.push(S),e.TextureCache[S]&&console.warn("Texture added to the cache with an id ["+S+"] that already had an entry"),e.TextureCache[S]=R)},T.removeFromCache=function(R){if(typeof R=="string"){var S=e.TextureCache[R];if(S){var C=S.textureCacheIds.indexOf(R);return C>-1&&S.textureCacheIds.splice(C,1),delete e.TextureCache[R],S}}else if(R&&R.textureCacheIds){for(var A=0;A<R.textureCacheIds.length;++A)e.TextureCache[R.textureCacheIds[A]]===R&&delete e.TextureCache[R.textureCacheIds[A]];return R.textureCacheIds.length=0,R}return null},w(T,[{key:"frame",get:function(){return this._frame},set:function(R){this._frame=R,this.noFrame=!1;var S=R.x,C=R.y,A=R.width,k=R.height,F=S+A>this.baseTexture.width,M=C+k>this.baseTexture.height;if(F||M){var D=F&&M?"and":"or",L="X: "+S+" + "+A+" = "+(S+A)+" > "+this.baseTexture.width,I="Y: "+C+" + "+k+" = "+(C+k)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+(L+" "+D+" "+I))}this.valid=A&&k&&this.baseTexture.hasLoaded,!this.trim&&!this.rotate&&(this.orig=R),this.valid&&this._updateUvs()}},{key:"rotate",get:function(){return this._rotate},set:function(R){this._rotate=R,this.valid&&this._updateUvs()}},{key:"width",get:function(){return this.orig.width}},{key:"height",get:function(){return this.orig.height}}]),T}(r.default);p.default=m;function c(){var y=document.createElement("canvas");y.width=10,y.height=10;var T=y.getContext("2d");return T.fillStyle="white",T.fillRect(0,0,10,10),new m(new g.default(y))}function b(y){y.destroy=function(){},y.on=function(){},y.once=function(){},y.emit=function(){}}m.EMPTY=new m(new g.default),b(m.EMPTY),b(m.EMPTY.baseTexture),m.WHITE=c(),b(m.WHITE),b(m.WHITE.baseTexture)},{"../math":70,"../settings":101,"../utils":125,"./BaseTexture":112,"./TextureUvs":117,"./VideoBaseTexture":118,eventemitter3:3}],116:[function(_,O,p){p.__esModule=!0;var w=function(){function a(r,t){for(var e=0;e<t.length;e++){var o=t[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(r,o.key,o)}}return function(r,t,e){return t&&a(r.prototype,t),e&&a(r,e),r}}(),x=_("../math/Matrix"),g=u(x);function u(a){return a&&a.__esModule?a:{default:a}}function v(a,r){if(!(a instanceof r))throw new TypeError("Cannot call a class as a function")}var h=new g.default,s=function(){function a(r,t){v(this,a),this._texture=r,this.mapCoord=new g.default,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._lastTextureID=-1,this.clampOffset=0,this.clampMargin=typeof t>"u"?.5:t}return a.prototype.multiplyUvs=function(t,e){e===void 0&&(e=t);for(var o=this.mapCoord,n=0;n<t.length;n+=2){var i=t[n],f=t[n+1];e[n]=i*o.a+f*o.c+o.tx,e[n+1]=i*o.b+f*o.d+o.ty}return e},a.prototype.update=function(t){var e=this._texture;if(!e||!e.valid||!t&&this._lastTextureID===e._updateID)return!1;this._lastTextureID=e._updateID;var o=e._uvs;this.mapCoord.set(o.x1-o.x0,o.y1-o.y0,o.x3-o.x0,o.y3-o.y0,o.x0,o.y0);var n=e.orig,i=e.trim;i&&(h.set(n.width/i.width,0,0,n.height/i.height,-i.x/i.width,-i.y/i.height),this.mapCoord.append(h));var f=e.baseTexture,l=this.uClampFrame,d=this.clampMargin/f.resolution,m=this.clampOffset;return l[0]=(e._frame.x+d+m)/f.width,l[1]=(e._frame.y+d+m)/f.height,l[2]=(e._frame.x+e._frame.width-d+m)/f.width,l[3]=(e._frame.y+e._frame.height-d+m)/f.height,this.uClampOffset[0]=m/f.realWidth,this.uClampOffset[1]=m/f.realHeight,!0},w(a,[{key:"texture",get:function(){return this._texture},set:function(t){this._texture=t,this._lastTextureID=-1}}]),a}();p.default=s},{"../math/Matrix":67}],117:[function(_,O,p){p.__esModule=!0;var w=_("../math/GroupD8"),x=g(w);function g(h){return h&&h.__esModule?h:{default:h}}function u(h,s){if(!(h instanceof s))throw new TypeError("Cannot call a class as a function")}var v=function(){function h(){u(this,h),this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsUint32=new Uint32Array(4)}return h.prototype.set=function(a,r,t){var e=r.width,o=r.height;if(t){var n=a.width/2/e,i=a.height/2/o,f=a.x/e+n,l=a.y/o+i;t=x.default.add(t,x.default.NW),this.x0=f+n*x.default.uX(t),this.y0=l+i*x.default.uY(t),t=x.default.add(t,2),this.x1=f+n*x.default.uX(t),this.y1=l+i*x.default.uY(t),t=x.default.add(t,2),this.x2=f+n*x.default.uX(t),this.y2=l+i*x.default.uY(t),t=x.default.add(t,2),this.x3=f+n*x.default.uX(t),this.y3=l+i*x.default.uY(t)}else this.x0=a.x/e,this.y0=a.y/o,this.x1=(a.x+a.width)/e,this.y1=a.y/o,this.x2=(a.x+a.width)/e,this.y2=(a.y+a.height)/o,this.x3=a.x/e,this.y3=(a.y+a.height)/o;this.uvsUint32[0]=(this.y0*65535&65535)<<16|this.x0*65535&65535,this.uvsUint32[1]=(this.y1*65535&65535)<<16|this.x1*65535&65535,this.uvsUint32[2]=(this.y2*65535&65535)<<16|this.x2*65535&65535,this.uvsUint32[3]=(this.y3*65535&65535)<<16|this.x3*65535&65535},h}();p.default=v},{"../math/GroupD8":66}],118:[function(_,O,p){p.__esModule=!0;var w=function(){function f(l,d){for(var m=0;m<d.length;m++){var c=d[m];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(l,c.key,c)}}return function(l,d,m){return d&&f(l.prototype,d),m&&f(l,m),l}}(),x=_("./BaseTexture"),g=r(x),u=_("../utils"),v=_("../ticker"),h=_("../const"),s=_("../utils/determineCrossOrigin"),a=r(s);function r(f){return f&&f.__esModule?f:{default:f}}function t(f,l){if(!(f instanceof l))throw new TypeError("Cannot call a class as a function")}function e(f,l){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:f}function o(f,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);f.prototype=Object.create(l&&l.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(f,l):f.__proto__=l)}var n=function(f){o(l,f);function l(d,m){if(t(this,l),!d)throw new Error("No video source element specified.");(d.readyState===d.HAVE_ENOUGH_DATA||d.readyState===d.HAVE_FUTURE_DATA)&&d.width&&d.height&&(d.complete=!0);var c=e(this,f.call(this,d,m));return c.width=d.videoWidth,c.height=d.videoHeight,c._autoUpdate=!0,c._isAutoUpdating=!1,c.autoPlay=!0,c.update=c.update.bind(c),c._onCanPlay=c._onCanPlay.bind(c),d.addEventListener("play",c._onPlayStart.bind(c)),d.addEventListener("pause",c._onPlayStop.bind(c)),c.hasLoaded=!1,c.__loaded=!1,c._isSourceReady()?c._onCanPlay():(d.addEventListener("canplay",c._onCanPlay),d.addEventListener("canplaythrough",c._onCanPlay)),c}return l.prototype._isSourcePlaying=function(){var m=this.source;return m.currentTime>0&&m.paused===!1&&m.ended===!1&&m.readyState>2},l.prototype._isSourceReady=function(){return this.source.readyState===3||this.source.readyState===4},l.prototype._onPlayStart=function(){this.hasLoaded||this._onCanPlay(),!this._isAutoUpdating&&this.autoUpdate&&(v.shared.add(this.update,this,h.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0)},l.prototype._onPlayStop=function(){this._isAutoUpdating&&(v.shared.remove(this.update,this),this._isAutoUpdating=!1)},l.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.emit("loaded",this)),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.source.play())},l.prototype.destroy=function(){this._isAutoUpdating&&v.shared.remove(this.update,this),this.source&&this.source._pixiId&&(g.default.removeFromCache(this.source._pixiId),delete this.source._pixiId,this.source.pause(),this.source.src="",this.source.load()),f.prototype.destroy.call(this)},l.fromVideo=function(m,c){m._pixiId||(m._pixiId="video_"+(0,u.uid)());var b=u.BaseTextureCache[m._pixiId];return b||(b=new l(m,c),g.default.addToCache(b,m._pixiId)),b},l.fromUrl=function(m,c,b){var y=document.createElement("video");y.setAttribute("webkit-playsinline",""),y.setAttribute("playsinline","");var T=Array.isArray(m)?m[0].src||m[0]:m.src||m;if(b===void 0&&T.indexOf("data:")!==0?y.crossOrigin=(0,a.default)(T):b&&(y.crossOrigin=typeof b=="string"?b:"anonymous"),Array.isArray(m))for(var E=0;E<m.length;++E)y.appendChild(i(m[E].src||m[E],m[E].mime));else y.appendChild(i(T,m.mime));return y.load(),l.fromVideo(y,c)},w(l,[{key:"autoUpdate",get:function(){return this._autoUpdate},set:function(m){m!==this._autoUpdate&&(this._autoUpdate=m,!this._autoUpdate&&this._isAutoUpdating?(v.shared.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(v.shared.add(this.update,this,h.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0))}}]),l}(g.default);p.default=n,n.fromUrls=n.fromUrl;function i(f,l){l||(f=f.split("?").shift().toLowerCase(),l="video/"+f.substr(f.lastIndexOf(".")+1));var d=document.createElement("source");return d.src=f,d.type=l,d}},{"../const":46,"../ticker":121,"../utils":125,"../utils/determineCrossOrigin":124,"./BaseTexture":112}],119:[function(_,O,p){p.__esModule=!0;var w=function(){function t(e,o){for(var n=0;n<o.length;n++){var i=o[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),x=_("../settings"),g=s(x),u=_("../const"),v=_("./TickerListener"),h=s(v);function s(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(){var e=this;a(this,t),this._head=new h.default(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/g.default.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._tick=function(o){e._requestId=null,e.started&&(e.update(o),e.started&&e._requestId===null&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}return t.prototype._requestIfNeeded=function(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},t.prototype._cancelIfNeeded=function(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)},t.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},t.prototype.add=function(o,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:u.UPDATE_PRIORITY.NORMAL;return this._addListener(new h.default(o,n,i))},t.prototype.addOnce=function(o,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:u.UPDATE_PRIORITY.NORMAL;return this._addListener(new h.default(o,n,i,!0))},t.prototype._addListener=function(o){var n=this._head.next,i=this._head;if(!n)o.connect(i);else{for(;n;){if(o.priority>n.priority){o.connect(i);break}i=n,n=n.next}o.previous||o.connect(i)}return this._startIfPossible(),this},t.prototype.remove=function(o,n){for(var i=this._head.next;i;)i.match(o,n)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this},t.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},t.prototype.destroy=function(){this.stop();for(var o=this._head.next;o;)o=o.destroy(!0);this._head.destroy(),this._head=null},t.prototype.update=function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:performance.now(),n=void 0;if(o>this.lastTime){n=this.elapsedMS=o-this.lastTime,n>this._maxElapsedMS&&(n=this._maxElapsedMS),this.deltaTime=n*g.default.TARGET_FPMS*this.speed;for(var i=this._head,f=i.next;f;)f=f.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.elapsedMS=0;this.lastTime=o},w(t,[{key:"FPS",get:function(){return 1e3/this.elapsedMS}},{key:"minFPS",get:function(){return 1e3/this._maxElapsedMS},set:function(o){var n=Math.min(Math.max(0,o)/1e3,g.default.TARGET_FPMS);this._maxElapsedMS=1/n}}]),t}();p.default=r},{"../const":46,"../settings":101,"./TickerListener":120}],120:[function(_,O,p){p.__esModule=!0;function w(g,u){if(!(g instanceof u))throw new TypeError("Cannot call a class as a function")}var x=function(){function g(u){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;w(this,g),this.fn=u,this.context=v,this.priority=h,this.once=s,this.next=null,this.previous=null,this._destroyed=!1}return g.prototype.match=function(v,h){return h=h||null,this.fn===v&&this.context===h},g.prototype.emit=function(v){this.fn&&(this.context?this.fn.call(this.context,v):this.fn(v));var h=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),h},g.prototype.connect=function(v){this.previous=v,v.next&&(v.next.previous=this),this.next=v.next,v.next=this},g.prototype.destroy=function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var h=this.next;return this.next=v?null:h,this.previous=null,h},g}();p.default=x},{}],121:[function(_,O,p){p.__esModule=!0,p.Ticker=p.shared=void 0;var w=_("./Ticker"),x=g(w);function g(v){return v&&v.__esModule?v:{default:v}}var u=new x.default;u.autoStart=!0,u.destroy=function(){},p.shared=u,p.Ticker=x.default},{"./Ticker":119}],122:[function(_,O,p){p.__esModule=!0,p.default=w;function w(){var x=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);return!x}},{}],123:[function(_,O,p){p.__esModule=!0,p.default=w;function w(x){for(var g=x*6,u=new Uint16Array(g),v=0,h=0;v<g;v+=6,h+=4)u[v+0]=h+0,u[v+1]=h+1,u[v+2]=h+2,u[v+3]=h+0,u[v+4]=h+2,u[v+5]=h+3;return u}},{}],124:[function(_,O,p){p.__esModule=!0,p.default=v;var w=_("url"),x=g(w);function g(h){return h&&h.__esModule?h:{default:h}}var u=void 0;function v(h){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:window.location;if(h.indexOf("data:")===0)return"";s=s||window.location,u||(u=document.createElement("a")),u.href=h,h=x.default.parse(u.href);var a=!h.port&&s.port===""||h.port===s.port;return h.hostname!==s.hostname||!a||h.protocol!==s.protocol?"anonymous":""}},{url:38}],125:[function(_,O,p){p.__esModule=!0,p.premultiplyBlendMode=p.BaseTextureCache=p.TextureCache=p.earcut=p.mixins=p.pluginTarget=p.EventEmitter=p.removeItems=p.isMobile=void 0,p.uid=T,p.hex2rgb=E,p.hex2string=R,p.rgb2hex=S,p.getResolutionOfUrl=C,p.decomposeDataUri=A,p.getUrlFileExtension=k,p.getSvgSize=F,p.skipHello=M,p.sayHello=D,p.isWebGLSupported=L,p.sign=I,p.destroyTextureCache=B,p.clearTextureCache=X,p.correctBlendMode=Z,p.premultiplyTint=K,p.premultiplyRgba=Q,p.premultiplyTintToRgba=J;var w=_("../const"),x=_("../settings"),g=c(x),u=_("eventemitter3"),v=c(u),h=_("./pluginTarget"),s=c(h),a=_("./mixin"),r=m(a),t=_("ismobilejs"),e=m(t),o=_("remove-array-items"),n=c(o),i=_("./mapPremultipliedBlendModes"),f=c(i),l=_("earcut"),d=c(l);function m(H){if(H&&H.__esModule)return H;var q={};if(H!=null)for(var $ in H)Object.prototype.hasOwnProperty.call(H,$)&&(q[$]=H[$]);return q.default=H,q}function c(H){return H&&H.__esModule?H:{default:H}}var b=0,y=!1;p.isMobile=e,p.removeItems=n.default,p.EventEmitter=v.default,p.pluginTarget=s.default,p.mixins=r,p.earcut=d.default;function T(){return++b}function E(H,q){return q=q||[],q[0]=(H>>16&255)/255,q[1]=(H>>8&255)/255,q[2]=(H&255)/255,q}function R(H){return H=H.toString(16),H="000000".substr(0,6-H.length)+H,"#"+H}function S(H){return(H[0]*255<<16)+(H[1]*255<<8)+(H[2]*255|0)}function C(H,q){var $=g.default.RETINA_PREFIX.exec(H);return $?parseFloat($[1]):q!==void 0?q:1}function A(H){var q=w.DATA_URI.exec(H);if(q)return{mediaType:q[1]?q[1].toLowerCase():void 0,subType:q[2]?q[2].toLowerCase():void 0,charset:q[3]?q[3].toLowerCase():void 0,encoding:q[4]?q[4].toLowerCase():void 0,data:q[5]}}function k(H){var q=w.URL_FILE_EXTENSION.exec(H);if(q)return q[1].toLowerCase()}function F(H){var q=w.SVG_SIZE.exec(H),$={};return q&&($[q[1]]=Math.round(parseFloat(q[3])),$[q[5]]=Math.round(parseFloat(q[7]))),$}function M(){y=!0}function D(H){if(!y){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var q=[`
 %c %c %c PixiJS `+w.VERSION+" - ✰ "+H+` ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ 

`,"background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,q)}else window.console&&window.console.log("PixiJS "+w.VERSION+" - "+H+" - http://www.pixijs.com/");y=!0}}function L(){var H={stencil:!0,failIfMajorPerformanceCaveat:!0};try{if(!window.WebGLRenderingContext)return!1;var q=document.createElement("canvas"),$=q.getContext("webgl",H)||q.getContext("experimental-webgl",H),ie=!!($&&$.getContextAttributes().stencil);if($){var ne=$.getExtension("WEBGL_lose_context");ne&&ne.loseContext()}return $=null,ie}catch{return!1}}function I(H){return H===0?0:H<0?-1:1}var N=p.TextureCache=Object.create(null),U=p.BaseTextureCache=Object.create(null);function B(){var H=void 0;for(H in N)N[H].destroy();for(H in U)U[H].destroy()}function X(){var H=void 0;for(H in N)delete N[H];for(H in U)delete U[H]}var W=p.premultiplyBlendMode=(0,f.default)();function Z(H,q){return W[q?1:0][H]}function K(H,q){if(q===1)return(q*255<<24)+H;if(q===0)return 0;var $=H>>16&255,ie=H>>8&255,ne=H&255;return $=$*q+.5|0,ie=ie*q+.5|0,ne=ne*q+.5|0,(q*255<<24)+($<<16)+(ie<<8)+ne}function Q(H,q,$,ie){return $=$||new Float32Array(4),ie||ie===void 0?($[0]=H[0]*q,$[1]=H[1]*q,$[2]=H[2]*q):($[0]=H[0],$[1]=H[1],$[2]=H[2]),$[3]=q,$}function J(H,q,$,ie){return $=$||new Float32Array(4),$[0]=(H>>16&255)/255,$[1]=(H>>8&255)/255,$[2]=(H&255)/255,(ie||ie===void 0)&&($[0]*=q,$[1]*=q,$[2]*=q),$[3]=q,$}},{"../const":46,"../settings":101,"./mapPremultipliedBlendModes":126,"./mixin":128,"./pluginTarget":129,earcut:2,eventemitter3:3,ismobilejs:4,"remove-array-items":31}],126:[function(_,O,p){p.__esModule=!0,p.default=x;var w=_("../const");function x(){for(var g=[],u=[],v=0;v<32;v++)g[v]=v,u[v]=v;g[w.BLEND_MODES.NORMAL_NPM]=w.BLEND_MODES.NORMAL,g[w.BLEND_MODES.ADD_NPM]=w.BLEND_MODES.ADD,g[w.BLEND_MODES.SCREEN_NPM]=w.BLEND_MODES.SCREEN,u[w.BLEND_MODES.NORMAL]=w.BLEND_MODES.NORMAL_NPM,u[w.BLEND_MODES.ADD]=w.BLEND_MODES.ADD_NPM,u[w.BLEND_MODES.SCREEN]=w.BLEND_MODES.SCREEN_NPM;var h=[];return h.push(u),h.push(g),h}},{"../const":46}],127:[function(_,O,p){p.__esModule=!0,p.default=u;var w=_("ismobilejs"),x=g(w);function g(v){return v&&v.__esModule?v:{default:v}}function u(v){return x.default.tablet||x.default.phone?4:v}},{ismobilejs:4}],128:[function(_,O,p){p.__esModule=!0,p.mixin=w,p.delayMixin=g,p.performMixins=u;function w(v,h){if(!(!v||!h))for(var s=Object.keys(h),a=0;a<s.length;++a){var r=s[a];Object.defineProperty(v,r,Object.getOwnPropertyDescriptor(h,r))}}var x=[];function g(v,h){x.push(v,h)}function u(){for(var v=0;v<x.length;v+=2)w(x[v],x[v+1]);x.length=0}},{}],129:[function(_,O,p){p.__esModule=!0;function w(x){x.__plugins={},x.registerPlugin=function(u,v){x.__plugins[u]=v},x.prototype.initPlugins=function(){this.plugins=this.plugins||{};for(var u in x.__plugins)this.plugins[u]=new x.__plugins[u](this)},x.prototype.destroyPlugins=function(){for(var u in this.plugins)this.plugins[u].destroy(),this.plugins[u]=null;this.plugins=null}}p.default={mixin:function(g){w(g)}}},{}],130:[function(_,O,p){p.__esModule=!0,p.default=w;function w(x){var g=x.width,u=x.height,v=x.getContext("2d"),h=v.getImageData(0,0,g,u),s=h.data,a=s.length,r={top:null,left:null,right:null,bottom:null},t=null,e=void 0,o=void 0,n=void 0;for(e=0;e<a;e+=4)s[e+3]!==0&&(o=e/4%g,n=~~(e/4/g),r.top===null&&(r.top=n),(r.left===null||o<r.left)&&(r.left=o),(r.right===null||r.right<o)&&(r.right=o+1),(r.bottom===null||r.bottom<n)&&(r.bottom=n));return r.top!==null&&(g=r.right-r.left,u=r.bottom-r.top+1,t=v.getImageData(r.left,r.top,g,u)),{height:u,width:g,data:t}}},{}],131:[function(_,O,p){p.__esModule=!0,p.default=g;var w={};function x(u){if(!w[u]){var v=new Error().stack;typeof v>"u"?console.warn("Deprecation Warning: ",u):(v=v.split(`
`).splice(3).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cDeprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",u),console.warn(v),console.groupEnd()):(console.warn("Deprecation Warning: ",u),console.warn(v))),w[u]=!0}}function g(u){var v=u.mesh,h=u.particles,s=u.extras,a=u.filters,r=u.prepare,t=u.loaders,e=u.interaction;Object.defineProperties(u,{SpriteBatch:{get:function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")}},AssetLoader:{get:function(){throw new ReferenceError("The loader system was overhauled in PixiJS v3, please see the new PIXI.loaders.Loader class.")}},Stage:{get:function(){return x("You do not need to use a PIXI Stage any more, you can simply render any container."),u.Container}},DisplayObjectContainer:{get:function(){return x("DisplayObjectContainer has been shortened to Container, please use Container from now on."),u.Container}},Strip:{get:function(){return x("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on."),v.Mesh}},Rope:{get:function(){return x("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on."),v.Rope}},ParticleContainer:{get:function(){return x("The ParticleContainer class has been moved to particles.ParticleContainer, please use particles.ParticleContainer from now on."),h.ParticleContainer}},MovieClip:{get:function(){return x("The MovieClip class has been moved to extras.AnimatedSprite, please use extras.AnimatedSprite."),s.AnimatedSprite}},TilingSprite:{get:function(){return x("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on."),s.TilingSprite}},BitmapText:{get:function(){return x("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on."),s.BitmapText}},blendModes:{get:function(){return x("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on."),u.BLEND_MODES}},scaleModes:{get:function(){return x("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on."),u.SCALE_MODES}},BaseTextureCache:{get:function(){return x("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on."),u.utils.BaseTextureCache}},TextureCache:{get:function(){return x("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on."),u.utils.TextureCache}},math:{get:function(){return x("The math namespace is deprecated, please access members already accessible on PIXI."),u}},AbstractFilter:{get:function(){return x("AstractFilter has been renamed to Filter, please use PIXI.Filter"),u.Filter}},TransformManual:{get:function(){return x("TransformManual has been renamed to TransformBase, please update your pixi-spine"),u.TransformBase}},TARGET_FPMS:{get:function(){return x("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),u.settings.TARGET_FPMS},set:function(c){x("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),u.settings.TARGET_FPMS=c}},FILTER_RESOLUTION:{get:function(){return x("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),u.settings.FILTER_RESOLUTION},set:function(c){x("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),u.settings.FILTER_RESOLUTION=c}},RESOLUTION:{get:function(){return x("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),u.settings.RESOLUTION},set:function(c){x("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),u.settings.RESOLUTION=c}},MIPMAP_TEXTURES:{get:function(){return x("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),u.settings.MIPMAP_TEXTURES},set:function(c){x("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),u.settings.MIPMAP_TEXTURES=c}},SPRITE_BATCH_SIZE:{get:function(){return x("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),u.settings.SPRITE_BATCH_SIZE},set:function(c){x("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),u.settings.SPRITE_BATCH_SIZE=c}},SPRITE_MAX_TEXTURES:{get:function(){return x("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),u.settings.SPRITE_MAX_TEXTURES},set:function(c){x("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),u.settings.SPRITE_MAX_TEXTURES=c}},RETINA_PREFIX:{get:function(){return x("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),u.settings.RETINA_PREFIX},set:function(c){x("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),u.settings.RETINA_PREFIX=c}},DEFAULT_RENDER_OPTIONS:{get:function(){return x("PIXI.DEFAULT_RENDER_OPTIONS has been deprecated, please use PIXI.settings.DEFAULT_RENDER_OPTIONS"),u.settings.RENDER_OPTIONS}}});for(var o=[{parent:"TRANSFORM_MODE",target:"TRANSFORM_MODE"},{parent:"GC_MODES",target:"GC_MODE"},{parent:"WRAP_MODES",target:"WRAP_MODE"},{parent:"SCALE_MODES",target:"SCALE_MODE"},{parent:"PRECISION",target:"PRECISION_FRAGMENT"}],n=function(c){var b=o[c];Object.defineProperty(u[b.parent],"DEFAULT",{get:function(){return x("PIXI."+b.parent+".DEFAULT has been deprecated, "+("please use PIXI.settings."+b.target)),u.settings[b.target]},set:function(T){x("PIXI."+b.parent+".DEFAULT has been deprecated, "+("please use PIXI.settings."+b.target)),u.settings[b.target]=T}})},i=0;i<o.length;i++)n(i);Object.defineProperties(u.settings,{PRECISION:{get:function(){return x("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),u.settings.PRECISION_FRAGMENT},set:function(c){x("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),u.settings.PRECISION_FRAGMENT=c}}}),s.AnimatedSprite&&Object.defineProperties(s,{MovieClip:{get:function(){return x("The MovieClip class has been renamed to AnimatedSprite, please use AnimatedSprite from now on."),s.AnimatedSprite}}}),s&&Object.defineProperties(s,{TextureTransform:{get:function(){return x("The TextureTransform class has been renamed to TextureMatrix, please use PIXI.TextureMatrix from now on."),u.TextureMatrix}}}),u.DisplayObject.prototype.generateTexture=function(c,b,y){return x("generateTexture has moved to the renderer, please use renderer.generateTexture(displayObject)"),c.generateTexture(this,b,y)},u.Graphics.prototype.generateTexture=function(c,b){return x("graphics generate texture has moved to the renderer. Or to render a graphics to a texture using canvas please use generateCanvasTexture"),this.generateCanvasTexture(c,b)},u.GroupD8.isSwapWidthHeight=function(c){return x("GroupD8.isSwapWidthHeight was renamed to GroupD8.isVertical"),u.GroupD8.isVertical(c)},u.RenderTexture.prototype.render=function(c,b,y,T){this.legacyRenderer.render(c,this,y,b,!T),x("RenderTexture.render is now deprecated, please use renderer.render(displayObject, renderTexture)")},u.RenderTexture.prototype.getImage=function(c){return x("RenderTexture.getImage is now deprecated, please use renderer.extract.image(target)"),this.legacyRenderer.extract.image(c)},u.RenderTexture.prototype.getBase64=function(c){return x("RenderTexture.getBase64 is now deprecated, please use renderer.extract.base64(target)"),this.legacyRenderer.extract.base64(c)},u.RenderTexture.prototype.getCanvas=function(c){return x("RenderTexture.getCanvas is now deprecated, please use renderer.extract.canvas(target)"),this.legacyRenderer.extract.canvas(c)},u.RenderTexture.prototype.getPixels=function(c){return x("RenderTexture.getPixels is now deprecated, please use renderer.extract.pixels(target)"),this.legacyRenderer.pixels(c)},u.Sprite.prototype.setTexture=function(c){this.texture=c,x("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")},s.BitmapText&&(s.BitmapText.prototype.setText=function(c){this.text=c,x("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")}),u.Text.prototype.setText=function(c){this.text=c,x("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")},u.Text.calculateFontProperties=function(c){return x("Text.calculateFontProperties is now deprecated, please use the TextMetrics.measureFont"),u.TextMetrics.measureFont(c)},Object.defineProperties(u.Text,{fontPropertiesCache:{get:function(){return x("Text.fontPropertiesCache is deprecated"),u.TextMetrics._fonts}},fontPropertiesCanvas:{get:function(){return x("Text.fontPropertiesCanvas is deprecated"),u.TextMetrics._canvas}},fontPropertiesContext:{get:function(){return x("Text.fontPropertiesContext is deprecated"),u.TextMetrics._context}}}),u.Text.prototype.setStyle=function(c){this.style=c,x("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")},u.Text.prototype.determineFontProperties=function(c){return x("determineFontProperties is now deprecated, please use TextMetrics.measureFont method"),u.TextMetrics.measureFont(c)},u.Text.getFontStyle=function(c){return x("getFontStyle is now deprecated, please use TextStyle.toFontString() instead"),c=c||{},c instanceof u.TextStyle||(c=new u.TextStyle(c)),c.toFontString()},Object.defineProperties(u.TextStyle.prototype,{font:{get:function(){x("text style property 'font' is now deprecated, please use the 'fontFamily', 'fontSize', 'fontStyle', 'fontVariant' and 'fontWeight' properties from now on");var c=typeof this._fontSize=="number"?this._fontSize+"px":this._fontSize;return this._fontStyle+" "+this._fontVariant+" "+this._fontWeight+" "+c+" "+this._fontFamily},set:function(c){x("text style property 'font' is now deprecated, please use the 'fontFamily','fontSize',fontStyle','fontVariant' and 'fontWeight' properties from now on"),c.indexOf("italic")>1?this._fontStyle="italic":c.indexOf("oblique")>-1?this._fontStyle="oblique":this._fontStyle="normal",c.indexOf("small-caps")>-1?this._fontVariant="small-caps":this._fontVariant="normal";var b=c.split(" "),y=-1;this._fontSize=26;for(var T=0;T<b.length;++T)if(b[T].match(/(px|pt|em|%)/)){y=T,this._fontSize=b[T];break}this._fontWeight="normal";for(var E=0;E<y;++E)if(b[E].match(/(bold|bolder|lighter|100|200|300|400|500|600|700|800|900)/)){this._fontWeight=b[E];break}if(y>-1&&y<b.length-1){this._fontFamily="";for(var R=y+1;R<b.length;++R)this._fontFamily+=b[R]+" ";this._fontFamily=this._fontFamily.slice(0,-1)}else this._fontFamily="Arial";this.styleID++}}}),u.Texture.prototype.setFrame=function(c){this.frame=c,x("setFrame is now deprecated, please use the frame property, e.g: myTexture.frame = frame;")},u.Texture.addTextureToCache=function(c,b){u.Texture.addToCache(c,b),x("Texture.addTextureToCache is deprecated, please use Texture.addToCache from now on.")},u.Texture.removeTextureFromCache=function(c){return x("Texture.removeTextureFromCache is deprecated, please use Texture.removeFromCache from now on. Be aware that Texture.removeFromCache does not automatically its BaseTexture from the BaseTextureCache. For that, use BaseTexture.removeFromCache"),u.BaseTexture.removeFromCache(c),u.Texture.removeFromCache(c)},Object.defineProperties(a,{AbstractFilter:{get:function(){return x("AstractFilter has been renamed to Filter, please use PIXI.Filter"),u.AbstractFilter}},SpriteMaskFilter:{get:function(){return x("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on."),u.SpriteMaskFilter}},VoidFilter:{get:function(){return x("VoidFilter has been renamed to AlphaFilter, please use PIXI.filters.AlphaFilter"),a.AlphaFilter}}}),u.utils.uuid=function(){return x("utils.uuid() is deprecated, please use utils.uid() from now on."),u.utils.uid()},u.utils.canUseNewCanvasBlendModes=function(){return x("utils.canUseNewCanvasBlendModes() is deprecated, please use CanvasTinter.canUseMultiply from now on"),u.CanvasTinter.canUseMultiply};var f=!0;if(Object.defineProperty(u.utils,"_saidHello",{set:function(c){c&&(x("PIXI.utils._saidHello is deprecated, please use PIXI.utils.skipHello()"),this.skipHello()),f=c},get:function(){return f}}),r.BasePrepare&&(r.BasePrepare.prototype.register=function(c,b){return x("renderer.plugins.prepare.register is now deprecated, please use renderer.plugins.prepare.registerFindHook & renderer.plugins.prepare.registerUploadHook"),c&&this.registerFindHook(c),b&&this.registerUploadHook(b),this}),r.canvas&&Object.defineProperty(r.canvas,"UPLOADS_PER_FRAME",{set:function(){x("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return x("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}}),r.webgl&&Object.defineProperty(r.webgl,"UPLOADS_PER_FRAME",{set:function(){x("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return x("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}}),t.Loader){var l=t.Resource,d=t.Loader;Object.defineProperties(l.prototype,{isJson:{get:function(){return x("The isJson property is deprecated, please use `resource.type === Resource.TYPE.JSON`."),this.type===l.TYPE.JSON}},isXml:{get:function(){return x("The isXml property is deprecated, please use `resource.type === Resource.TYPE.XML`."),this.type===l.TYPE.XML}},isImage:{get:function(){return x("The isImage property is deprecated, please use `resource.type === Resource.TYPE.IMAGE`."),this.type===l.TYPE.IMAGE}},isAudio:{get:function(){return x("The isAudio property is deprecated, please use `resource.type === Resource.TYPE.AUDIO`."),this.type===l.TYPE.AUDIO}},isVideo:{get:function(){return x("The isVideo property is deprecated, please use `resource.type === Resource.TYPE.VIDEO`."),this.type===l.TYPE.VIDEO}}}),Object.defineProperties(d.prototype,{before:{get:function(){return x("The before() method is deprecated, please use pre()."),this.pre}},after:{get:function(){return x("The after() method is deprecated, please use use()."),this.use}}})}e.interactiveTarget&&Object.defineProperty(e.interactiveTarget,"defaultCursor",{set:function(c){x("Property defaultCursor has been replaced with 'cursor'. "),this.cursor=c},get:function(){return x("Property defaultCursor has been replaced with 'cursor'. "),this.cursor}}),e.InteractionManager&&(Object.defineProperty(e.InteractionManager,"defaultCursorStyle",{set:function(c){x("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default=c},get:function(){return x("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default}}),Object.defineProperty(e.InteractionManager,"currentCursorStyle",{set:function(c){x("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode=c},get:function(){return x("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode}}))}},{}],132:[function(_,O,p){p.__esModule=!0;var w=_("../../core"),x=g(w);function g(s){if(s&&s.__esModule)return s;var a={};if(s!=null)for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(a[r]=s[r]);return a.default=s,a}function u(s,a){if(!(s instanceof a))throw new TypeError("Cannot call a class as a function")}var v=new x.Rectangle,h=function(){function s(a){u(this,s),this.renderer=a,a.extract=this}return s.prototype.image=function(r){var t=new Image;return t.src=this.base64(r),t},s.prototype.base64=function(r){return this.canvas(r).toDataURL()},s.prototype.canvas=function(r){var t=this.renderer,e=void 0,o=void 0,n=void 0,i=void 0;r&&(r instanceof x.RenderTexture?i=r:i=t.generateTexture(r)),i?(e=i.baseTexture._canvasRenderTarget.context,o=i.baseTexture._canvasRenderTarget.resolution,n=i.frame):(e=t.rootContext,n=v,n.width=this.renderer.width,n.height=this.renderer.height);var f=n.width*o,l=n.height*o,d=new x.CanvasRenderTarget(f,l,1),m=e.getImageData(n.x*o,n.y*o,f,l);return d.context.putImageData(m,0,0),d.canvas},s.prototype.pixels=function(r){var t=this.renderer,e=void 0,o=void 0,n=void 0,i=void 0;return r&&(r instanceof x.RenderTexture?i=r:i=t.generateTexture(r)),i?(e=i.baseTexture._canvasRenderTarget.context,o=i.baseTexture._canvasRenderTarget.resolution,n=i.frame):(e=t.rootContext,n=v,n.width=t.width,n.height=t.height),e.getImageData(0,0,n.width*o,n.height*o).data},s.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},s}();p.default=h,x.CanvasRenderer.registerPlugin("extract",h)},{"../../core":65}],133:[function(_,O,p){p.__esModule=!0;var w=_("./webgl/WebGLExtract");Object.defineProperty(p,"webgl",{enumerable:!0,get:function(){return g(w).default}});var x=_("./canvas/CanvasExtract");Object.defineProperty(p,"canvas",{enumerable:!0,get:function(){return g(x).default}});function g(u){return u&&u.__esModule?u:{default:u}}},{"./canvas/CanvasExtract":132,"./webgl/WebGLExtract":134}],134:[function(_,O,p){p.__esModule=!0;var w=_("../../core"),x=g(w);function g(a){if(a&&a.__esModule)return a;var r={};if(a!=null)for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(r[t]=a[t]);return r.default=a,r}function u(a,r){if(!(a instanceof r))throw new TypeError("Cannot call a class as a function")}var v=new x.Rectangle,h=4,s=function(){function a(r){u(this,a),this.renderer=r,r.extract=this}return a.prototype.image=function(t){var e=new Image;return e.src=this.base64(t),e},a.prototype.base64=function(t){return this.canvas(t).toDataURL()},a.prototype.canvas=function(t){var e=this.renderer,o=void 0,n=void 0,i=void 0,f=!1,l=void 0,d=!1;t&&(t instanceof x.RenderTexture?l=t:(l=this.renderer.generateTexture(t),d=!0)),l?(o=l.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],n=o.resolution,i=l.frame,f=!1):(o=this.renderer.rootRenderTarget,n=o.resolution,f=!0,i=v,i.width=o.size.width,i.height=o.size.height);var m=i.width*n,c=i.height*n,b=new x.CanvasRenderTarget(m,c,1);if(o){e.bindRenderTarget(o);var y=new Uint8Array(h*m*c),T=e.gl;T.readPixels(i.x*n,i.y*n,m,c,T.RGBA,T.UNSIGNED_BYTE,y);var E=b.context.getImageData(0,0,m,c);E.data.set(y),b.context.putImageData(E,0,0),f&&(b.context.scale(1,-1),b.context.drawImage(b.canvas,0,-c))}return d&&l.destroy(!0),b.canvas},a.prototype.pixels=function(t){var e=this.renderer,o=void 0,n=void 0,i=void 0,f=void 0,l=!1;t&&(t instanceof x.RenderTexture?f=t:(f=this.renderer.generateTexture(t),l=!0)),f?(o=f.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],n=o.resolution,i=f.frame):(o=this.renderer.rootRenderTarget,n=o.resolution,i=v,i.width=o.size.width,i.height=o.size.height);var d=i.width*n,m=i.height*n,c=new Uint8Array(h*d*m);if(o){e.bindRenderTarget(o);var b=e.gl;b.readPixels(i.x*n,i.y*n,d,m,b.RGBA,b.UNSIGNED_BYTE,c)}return l&&f.destroy(!0),c},a.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},a}();p.default=s,x.WebGLRenderer.registerPlugin("extract",s)},{"../../core":65}],135:[function(_,O,p){p.__esModule=!0;var w=function(){function r(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,o){return e&&r(t.prototype,e),o&&r(t,o),t}}(),x=_("../core"),g=u(x);function u(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e]);return t.default=r,t}function v(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function h(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:r}function s(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}var a=function(r){s(t,r);function t(e,o){v(this,t);var n=h(this,r.call(this,e[0]instanceof g.Texture?e[0]:e[0].texture));return n._textures=null,n._durations=null,n.textures=e,n._autoUpdate=o!==!1,n.animationSpeed=1,n.loop=!0,n.onComplete=null,n.onFrameChange=null,n.onLoop=null,n._currentTime=0,n.playing=!1,n}return t.prototype.stop=function(){this.playing&&(this.playing=!1,this._autoUpdate&&g.ticker.shared.remove(this.update,this))},t.prototype.play=function(){this.playing||(this.playing=!0,this._autoUpdate&&g.ticker.shared.add(this.update,this,g.UPDATE_PRIORITY.HIGH))},t.prototype.gotoAndStop=function(o){this.stop();var n=this.currentFrame;this._currentTime=o,n!==this.currentFrame&&this.updateTexture()},t.prototype.gotoAndPlay=function(o){var n=this.currentFrame;this._currentTime=o,n!==this.currentFrame&&this.updateTexture(),this.play()},t.prototype.update=function(o){var n=this.animationSpeed*o,i=this.currentFrame;if(this._durations!==null){var f=this._currentTime%1*this._durations[this.currentFrame];for(f+=n/60*1e3;f<0;)this._currentTime--,f+=this._durations[this.currentFrame];var l=Math.sign(this.animationSpeed*o);for(this._currentTime=Math.floor(this._currentTime);f>=this._durations[this.currentFrame];)f-=this._durations[this.currentFrame]*l,this._currentTime+=l;this._currentTime+=f/this._durations[this.currentFrame]}else this._currentTime+=n;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):i!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<i?this.onLoop():this.animationSpeed<0&&this.currentFrame>i&&this.onLoop()),this.updateTexture())},t.prototype.updateTexture=function(){this._texture=this._textures[this.currentFrame],this._textureID=-1,this.cachedTint=16777215,this.onFrameChange&&this.onFrameChange(this.currentFrame)},t.prototype.destroy=function(o){this.stop(),r.prototype.destroy.call(this,o)},t.fromFrames=function(o){for(var n=[],i=0;i<o.length;++i)n.push(g.Texture.fromFrame(o[i]));return new t(n)},t.fromImages=function(o){for(var n=[],i=0;i<o.length;++i)n.push(g.Texture.fromImage(o[i]));return new t(n)},w(t,[{key:"totalFrames",get:function(){return this._textures.length}},{key:"textures",get:function(){return this._textures},set:function(o){if(o[0]instanceof g.Texture)this._textures=o,this._durations=null;else{this._textures=[],this._durations=[];for(var n=0;n<o.length;n++)this._textures.push(o[n].texture),this._durations.push(o[n].time)}this.gotoAndStop(0),this.updateTexture()}},{key:"currentFrame",get:function(){var o=Math.floor(this._currentTime)%this._textures.length;return o<0&&(o+=this._textures.length),o}}]),t}(g.Sprite);p.default=a},{"../core":65}],136:[function(_,O,p){p.__esModule=!0;var w=function(){function f(l,d){for(var m=0;m<d.length;m++){var c=d[m];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(l,c.key,c)}}return function(l,d,m){return d&&f(l.prototype,d),m&&f(l,m),l}}(),x=_("../core"),g=t(x),u=_("../core/math/ObservablePoint"),v=r(u),h=_("../core/utils"),s=_("../core/settings"),a=r(s);function r(f){return f&&f.__esModule?f:{default:f}}function t(f){if(f&&f.__esModule)return f;var l={};if(f!=null)for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(l[d]=f[d]);return l.default=f,l}function e(f,l){if(!(f instanceof l))throw new TypeError("Cannot call a class as a function")}function o(f,l){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:f}function n(f,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);f.prototype=Object.create(l&&l.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(f,l):f.__proto__=l)}var i=function(f){n(l,f);function l(d){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e(this,l);var c=o(this,f.call(this));return c._textWidth=0,c._textHeight=0,c._glyphs=[],c._font={tint:m.tint!==void 0?m.tint:16777215,align:m.align||"left",name:null,size:0},c.font=m.font,c._text=d,c._maxWidth=0,c._maxLineHeight=0,c._letterSpacing=0,c._anchor=new v.default(function(){c.dirty=!0},c,0,0),c.dirty=!1,c.updateText(),c}return l.prototype.updateText=function(){for(var m=l.fonts[this._font.name],c=this._font.size/m.size,b=new g.Point,y=[],T=[],E=this.text.replace(/(?:\r\n|\r)/g,`
`),R=E.length,S=this._maxWidth*m.size/this._font.size,C=null,A=0,k=0,F=0,M=-1,D=0,L=0,I=0,N=0;N<R;N++){var U=E.charCodeAt(N),B=E.charAt(N);if(/(?:\s)/.test(B)&&(M=N,D=A),B==="\r"||B===`
`){T.push(A),k=Math.max(k,A),++F,++L,b.x=0,b.y+=m.lineHeight,C=null;continue}var X=m.chars[U];X&&(C&&X.kerning[C]&&(b.x+=X.kerning[C]),y.push({texture:X.texture,line:F,charCode:U,position:new g.Point(b.x+X.xOffset+this._letterSpacing/2,b.y+X.yOffset)}),b.x+=X.xAdvance+this._letterSpacing,A=b.x,I=Math.max(I,X.yOffset+X.texture.height),C=U,M!==-1&&S>0&&b.x>S&&(++L,g.utils.removeItems(y,1+M-L,1+N-M),N=M,M=-1,T.push(D),k=Math.max(k,D),F++,b.x=0,b.y+=m.lineHeight,C=null))}var W=E.charAt(E.length-1);W!=="\r"&&W!==`
`&&(/(?:\s)/.test(W)&&(A=D),T.push(A),k=Math.max(k,A));for(var Z=[],K=0;K<=F;K++){var Q=0;this._font.align==="right"?Q=k-T[K]:this._font.align==="center"&&(Q=(k-T[K])/2),Z.push(Q)}for(var J=y.length,H=this.tint,q=0;q<J;q++){var $=this._glyphs[q];$?$.texture=y[q].texture:($=new g.Sprite(y[q].texture),this._glyphs.push($)),$.position.x=(y[q].position.x+Z[y[q].line])*c,$.position.y=y[q].position.y*c,$.scale.x=$.scale.y=c,$.tint=H,$.parent||this.addChild($)}for(var ie=J;ie<this._glyphs.length;++ie)this.removeChild(this._glyphs[ie]);if(this._textWidth=k*c,this._textHeight=(b.y+m.lineHeight)*c,this.anchor.x!==0||this.anchor.y!==0)for(var ne=0;ne<J;ne++)this._glyphs[ne].x-=this._textWidth*this.anchor.x,this._glyphs[ne].y-=this._textHeight*this.anchor.y;this._maxLineHeight=I*c},l.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},l.prototype.getLocalBounds=function(){return this.validate(),f.prototype.getLocalBounds.call(this)},l.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},l.registerFont=function(m,c){var b={},y=m.getElementsByTagName("info")[0],T=m.getElementsByTagName("common")[0],E=m.getElementsByTagName("page"),R=(0,h.getResolutionOfUrl)(E[0].getAttribute("file"),a.default.RESOLUTION),S={};b.font=y.getAttribute("face"),b.size=parseInt(y.getAttribute("size"),10),b.lineHeight=parseInt(T.getAttribute("lineHeight"),10)/R,b.chars={},c instanceof g.Texture&&(c=[c]);for(var C=0;C<E.length;C++){var A=E[C].getAttribute("id"),k=E[C].getAttribute("file");S[A]=c instanceof Array?c[C]:c[k]}for(var F=m.getElementsByTagName("char"),M=0;M<F.length;M++){var D=F[M],L=parseInt(D.getAttribute("id"),10),I=D.getAttribute("page")||0,N=new g.Rectangle(parseInt(D.getAttribute("x"),10)/R+S[I].frame.x/R,parseInt(D.getAttribute("y"),10)/R+S[I].frame.y/R,parseInt(D.getAttribute("width"),10)/R,parseInt(D.getAttribute("height"),10)/R);b.chars[L]={xOffset:parseInt(D.getAttribute("xoffset"),10)/R,yOffset:parseInt(D.getAttribute("yoffset"),10)/R,xAdvance:parseInt(D.getAttribute("xadvance"),10)/R,kerning:{},texture:new g.Texture(S[I].baseTexture,N),page:I}}for(var U=m.getElementsByTagName("kerning"),B=0;B<U.length;B++){var X=U[B],W=parseInt(X.getAttribute("first"),10)/R,Z=parseInt(X.getAttribute("second"),10)/R,K=parseInt(X.getAttribute("amount"),10)/R;b.chars[Z]&&(b.chars[Z].kerning[W]=K)}return l.fonts[b.font]=b,b},w(l,[{key:"tint",get:function(){return this._font.tint},set:function(m){this._font.tint=typeof m=="number"&&m>=0?m:16777215,this.dirty=!0}},{key:"align",get:function(){return this._font.align},set:function(m){this._font.align=m||"left",this.dirty=!0}},{key:"anchor",get:function(){return this._anchor},set:function(m){typeof m=="number"?this._anchor.set(m):this._anchor.copy(m)}},{key:"font",get:function(){return this._font},set:function(m){m&&(typeof m=="string"?(m=m.split(" "),this._font.name=m.length===1?m[0]:m.slice(1).join(" "),this._font.size=m.length>=2?parseInt(m[0],10):l.fonts[this._font.name].size):(this._font.name=m.name,this._font.size=typeof m.size=="number"?m.size:parseInt(m.size,10)),this.dirty=!0)}},{key:"text",get:function(){return this._text},set:function(m){m=m.toString()||" ",this._text!==m&&(this._text=m,this.dirty=!0)}},{key:"maxWidth",get:function(){return this._maxWidth},set:function(m){this._maxWidth!==m&&(this._maxWidth=m,this.dirty=!0)}},{key:"maxLineHeight",get:function(){return this.validate(),this._maxLineHeight}},{key:"textWidth",get:function(){return this.validate(),this._textWidth}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(m){this._letterSpacing!==m&&(this._letterSpacing=m,this.dirty=!0)}},{key:"textHeight",get:function(){return this.validate(),this._textHeight}}]),l}(g.Container);p.default=i,i.fonts={}},{"../core":65,"../core/math/ObservablePoint":68,"../core/settings":101,"../core/utils":125}],137:[function(_,O,p){p.__esModule=!0;var w=function(){function n(i,f){for(var l=0;l<f.length;l++){var d=f[l];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(i,d.key,d)}}return function(i,f,l){return f&&n(i.prototype,f),l&&n(i,l),i}}(),x=_("../core"),g=s(x),u=_("../core/sprites/canvas/CanvasTinter"),v=h(u);function h(n){return n&&n.__esModule?n:{default:n}}function s(n){if(n&&n.__esModule)return n;var i={};if(n!=null)for(var f in n)Object.prototype.hasOwnProperty.call(n,f)&&(i[f]=n[f]);return i.default=n,i}function a(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}function r(n,i){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i&&(typeof i=="object"||typeof i=="function")?i:n}function t(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);n.prototype=Object.create(i&&i.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(n,i):n.__proto__=i)}var e=new g.Point,o=function(n){t(i,n);function i(f){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100,d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:100;a(this,i);var m=r(this,n.call(this,f));return m.tileTransform=new g.TransformStatic,m._width=l,m._height=d,m._canvasPattern=null,m.uvTransform=f.transform||new g.TextureMatrix(f),m.pluginName="tilingSprite",m.uvRespectAnchor=!1,m}return i.prototype._onTextureUpdate=function(){this.uvTransform&&(this.uvTransform.texture=this._texture),this.cachedTint=16777215},i.prototype._renderWebGL=function(l){var d=this._texture;!d||!d.valid||(this.tileTransform.updateLocalTransform(),this.uvTransform.update(),l.setObjectRenderer(l.plugins[this.pluginName]),l.plugins[this.pluginName].render(this))},i.prototype._renderCanvas=function(l){var d=this._texture;if(d.baseTexture.hasLoaded){var m=l.context,c=this.worldTransform,b=l.resolution,y=d.baseTexture,T=y.resolution,E=this.tilePosition.x/this.tileScale.x%d._frame.width*T,R=this.tilePosition.y/this.tileScale.y%d._frame.height*T;if(this._textureID!==this._texture._updateID||this.cachedTint!==this.tint){this._textureID=this._texture._updateID;var S=new g.CanvasRenderTarget(d._frame.width,d._frame.height,T);this.tint!==16777215?(this.tintedTexture=v.default.getTintedTexture(this,this.tint),S.context.drawImage(this.tintedTexture,0,0)):S.context.drawImage(y.source,-d._frame.x*T,-d._frame.y*T),this.cachedTint=this.tint,this._canvasPattern=S.context.createPattern(S.canvas,"repeat")}m.globalAlpha=this.worldAlpha,m.setTransform(c.a*b,c.b*b,c.c*b,c.d*b,c.tx*b,c.ty*b),l.setBlendMode(this.blendMode),m.fillStyle=this._canvasPattern,m.scale(this.tileScale.x/T,this.tileScale.y/T);var C=this.anchor.x*-this._width,A=this.anchor.y*-this._height;this.uvRespectAnchor?(m.translate(E,R),m.fillRect(-E+C,-R+A,this._width/this.tileScale.x*T,this._height/this.tileScale.y*T)):(m.translate(E+C,R+A),m.fillRect(-E,-R,this._width/this.tileScale.x*T,this._height/this.tileScale.y*T))}},i.prototype._calculateBounds=function(){var l=this._width*-this._anchor._x,d=this._height*-this._anchor._y,m=this._width*(1-this._anchor._x),c=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,l,d,m,c)},i.prototype.getLocalBounds=function(l){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),l||(this._localBoundsRect||(this._localBoundsRect=new g.Rectangle),l=this._localBoundsRect),this._bounds.getRectangle(l)):n.prototype.getLocalBounds.call(this,l)},i.prototype.containsPoint=function(l){this.worldTransform.applyInverse(l,e);var d=this._width,m=this._height,c=-d*this.anchor._x;if(e.x>=c&&e.x<c+d){var b=-m*this.anchor._y;if(e.y>=b&&e.y<b+m)return!0}return!1},i.prototype.destroy=function(l){n.prototype.destroy.call(this,l),this.tileTransform=null,this.uvTransform=null},i.from=function(l,d,m){return new i(g.Texture.from(l),d,m)},i.fromFrame=function(l,d,m){var c=g.utils.TextureCache[l];if(!c)throw new Error('The frameId "'+l+'" does not exist in the texture cache '+this);return new i(c,d,m)},i.fromImage=function(l,d,m,c,b){return new i(g.Texture.fromImage(l,c,b),d,m)},w(i,[{key:"clampMargin",get:function(){return this.uvTransform.clampMargin},set:function(l){this.uvTransform.clampMargin=l,this.uvTransform.update(!0)}},{key:"tileScale",get:function(){return this.tileTransform.scale},set:function(l){this.tileTransform.scale.copy(l)}},{key:"tilePosition",get:function(){return this.tileTransform.position},set:function(l){this.tileTransform.position.copy(l)}},{key:"width",get:function(){return this._width},set:function(l){this._width=l}},{key:"height",get:function(){return this._height},set:function(l){this._height=l}}]),i}(g.Sprite);p.default=o},{"../core":65,"../core/sprites/canvas/CanvasTinter":104}],138:[function(_,O,p){var w=_("../core"),x=r(w),g=_("../core/textures/Texture"),u=a(g),v=_("../core/textures/BaseTexture"),h=a(v),s=_("../core/utils");function a(i){return i&&i.__esModule?i:{default:i}}function r(i){if(i&&i.__esModule)return i;var f={};if(i!=null)for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(f[l]=i[l]);return f.default=i,f}function t(i,f){if(!(i instanceof f))throw new TypeError("Cannot call a class as a function")}var e=x.DisplayObject,o=new x.Matrix;e.prototype._cacheAsBitmap=!1,e.prototype._cacheData=!1;var n=function i(){t(this,i),this.textureCacheId=null,this.originalRenderWebGL=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalHitTest=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.sprite=null};Object.defineProperties(e.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(f){if(this._cacheAsBitmap!==f){this._cacheAsBitmap=f;var l=void 0;f?(this._cacheData||(this._cacheData=new n),l=this._cacheData,l.originalRenderWebGL=this.renderWebGL,l.originalRenderCanvas=this.renderCanvas,l.originalUpdateTransform=this.updateTransform,l.originalCalculateBounds=this._calculateBounds,l.originalGetLocalBounds=this.getLocalBounds,l.originalDestroy=this.destroy,l.originalContainsPoint=this.containsPoint,l.originalMask=this._mask,l.originalFilterArea=this.filterArea,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(l=this._cacheData,l.sprite&&this._destroyCachedDisplayObject(),this.renderWebGL=l.originalRenderWebGL,this.renderCanvas=l.originalRenderCanvas,this._calculateBounds=l.originalCalculateBounds,this.getLocalBounds=l.originalGetLocalBounds,this.destroy=l.originalDestroy,this.updateTransform=l.originalUpdateTransform,this.containsPoint=l.originalContainsPoint,this._mask=l.originalMask,this.filterArea=l.originalFilterArea)}}}}),e.prototype._renderCachedWebGL=function(f){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(f),this._cacheData.sprite._transformID=-1,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderWebGL(f))},e.prototype._initCachedDisplayObject=function(f){if(!(this._cacheData&&this._cacheData.sprite)){var l=this.alpha;this.alpha=1,f.currentRenderer.flush();var d=this.getLocalBounds().clone();if(this._filters){var m=this._filters[0].padding;d.pad(m)}var c=f._activeRenderTarget,b=f.filterManager.filterStack,y=x.RenderTexture.create(d.width|0,d.height|0),T="cacheAsBitmap_"+(0,s.uid)();this._cacheData.textureCacheId=T,h.default.addToCache(y.baseTexture,T),u.default.addToCache(y,T);var E=o;E.tx=-d.x,E.ty=-d.y,this.transform.worldTransform.identity(),this.renderWebGL=this._cacheData.originalRenderWebGL,f.render(this,y,!0,E,!0),f.bindRenderTarget(c),f.filterManager.filterStack=b,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this._mask=null,this.filterArea=null;var R=new x.Sprite(y);R.transform.worldTransform=this.transform.worldTransform,R.anchor.x=-(d.x/d.width),R.anchor.y=-(d.y/d.height),R.alpha=l,R._bounds=this._bounds,this._calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._cacheData.sprite=R,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=f._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=R.containsPoint.bind(R)}},e.prototype._renderCachedCanvas=function(f){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(f),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite.renderCanvas(f))},e.prototype._initCachedDisplayObjectCanvas=function(f){if(!(this._cacheData&&this._cacheData.sprite)){var l=this.getLocalBounds(),d=this.alpha;this.alpha=1;var m=f.context,c=x.RenderTexture.create(l.width|0,l.height|0),b="cacheAsBitmap_"+(0,s.uid)();this._cacheData.textureCacheId=b,h.default.addToCache(c.baseTexture,b),u.default.addToCache(c,b);var y=o;this.transform.localTransform.copy(y),y.invert(),y.tx-=l.x,y.ty-=l.y,this.renderCanvas=this._cacheData.originalRenderCanvas,f.render(this,c,!0,y,!1),f.context=m,this.renderCanvas=this._renderCachedCanvas,this._calculateBounds=this._calculateCachedBounds,this._mask=null,this.filterArea=null;var T=new x.Sprite(c);T.transform.worldTransform=this.transform.worldTransform,T.anchor.x=-(l.x/l.width),T.anchor.y=-(l.y/l.height),T._bounds=this._bounds,T.alpha=d,this.parent?this.updateTransform():(this.parent=f._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.updateTransform=this.displayObjectUpdateTransform,this._cacheData.sprite=T,this.containsPoint=T.containsPoint.bind(T)}},e.prototype._calculateCachedBounds=function(){this._cacheData.sprite._calculateBounds()},e.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds()},e.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,h.default.removeFromCache(this._cacheData.textureCacheId),u.default.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},e.prototype._cacheAsBitmapDestroy=function(f){this.cacheAsBitmap=!1,this.destroy(f)}},{"../core":65,"../core/textures/BaseTexture":112,"../core/textures/Texture":115,"../core/utils":125}],139:[function(_,O,p){var w=_("../core"),x=g(w);function g(u){if(u&&u.__esModule)return u;var v={};if(u!=null)for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(v[h]=u[h]);return v.default=u,v}x.DisplayObject.prototype.name=null,x.Container.prototype.getChildByName=function(v){for(var h=0;h<this.children.length;h++)if(this.children[h].name===v)return this.children[h];return null}},{"../core":65}],140:[function(_,O,p){var w=_("../core"),x=g(w);function g(u){if(u&&u.__esModule)return u;var v={};if(u!=null)for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(v[h]=u[h]);return v.default=u,v}x.DisplayObject.prototype.getGlobalPosition=function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new x.Point,h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this.parent?this.parent.toGlobal(this.position,v,h):(v.x=this.position.x,v.y=this.position.y),v}},{"../core":65}],141:[function(_,O,p){p.__esModule=!0,p.BitmapText=p.TilingSpriteRenderer=p.TilingSprite=p.AnimatedSprite=void 0;var w=_("./AnimatedSprite");Object.defineProperty(p,"AnimatedSprite",{enumerable:!0,get:function(){return v(w).default}});var x=_("./TilingSprite");Object.defineProperty(p,"TilingSprite",{enumerable:!0,get:function(){return v(x).default}});var g=_("./webgl/TilingSpriteRenderer");Object.defineProperty(p,"TilingSpriteRenderer",{enumerable:!0,get:function(){return v(g).default}});var u=_("./BitmapText");Object.defineProperty(p,"BitmapText",{enumerable:!0,get:function(){return v(u).default}}),_("./cacheAsBitmap"),_("./getChildByName"),_("./getGlobalPosition");function v(h){return h&&h.__esModule?h:{default:h}}},{"./AnimatedSprite":135,"./BitmapText":136,"./TilingSprite":137,"./cacheAsBitmap":138,"./getChildByName":139,"./getGlobalPosition":140,"./webgl/TilingSpriteRenderer":142}],142:[function(_,O,p){p.__esModule=!0;var w=_("../../core"),x=u(w),g=_("../../core/const");_("path");function u(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e.default=t,e}function v(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function s(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=new x.Matrix,r=function(t){s(e,t);function e(o){v(this,e);var n=h(this,t.call(this,o));return n.shader=null,n.simpleShader=null,n.quad=null,n}return e.prototype.onContextChange=function(){var n=this.renderer.gl;this.shader=new x.Shader(n,`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = mod(vTextureCoord - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 sample = texture2D(uSampler, coord);
    gl_FragColor = sample * uColor;
}
`),this.simpleShader=new x.Shader(n,`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 sample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = sample * uColor;
}
`),this.renderer.bindVao(null),this.quad=new x.Quad(n,this.renderer.state.attribState),this.quad.initVao(this.shader)},e.prototype.render=function(n){var i=this.renderer,f=this.quad;i.bindVao(f.vao);var l=f.vertices;l[0]=l[6]=n._width*-n.anchor.x,l[1]=l[3]=n._height*-n.anchor.y,l[2]=l[4]=n._width*(1-n.anchor.x),l[5]=l[7]=n._height*(1-n.anchor.y),n.uvRespectAnchor&&(l=f.uvs,l[0]=l[6]=-n.anchor.x,l[1]=l[3]=-n.anchor.y,l[2]=l[4]=1-n.anchor.x,l[5]=l[7]=1-n.anchor.y),f.upload();var d=n._texture,m=d.baseTexture,c=n.tileTransform.localTransform,b=n.uvTransform,y=m.isPowerOfTwo&&d.frame.width===m.width&&d.frame.height===m.height;y&&(m._glTextures[i.CONTEXT_UID]?y=m.wrapMode!==g.WRAP_MODES.CLAMP:m.wrapMode===g.WRAP_MODES.CLAMP&&(m.wrapMode=g.WRAP_MODES.REPEAT));var T=y?this.simpleShader:this.shader;i.bindShader(T);var E=d.width,R=d.height,S=n._width,C=n._height;a.set(c.a*E/S,c.b*E/C,c.c*R/S,c.d*R/C,c.tx/S,c.ty/C),a.invert(),y?a.prepend(b.mapCoord):(T.uniforms.uMapCoord=b.mapCoord.toArray(!0),T.uniforms.uClampFrame=b.uClampFrame,T.uniforms.uClampOffset=b.uClampOffset),T.uniforms.uTransform=a.toArray(!0),T.uniforms.uColor=x.utils.premultiplyTintToRgba(n.tint,n.worldAlpha,T.uniforms.uColor,m.premultipliedAlpha),T.uniforms.translationMatrix=n.transform.worldTransform.toArray(!0),T.uniforms.uSampler=i.bindTexture(d),i.setBlendMode(x.utils.correctBlendMode(n.blendMode,m.premultipliedAlpha)),f.vao.draw(this.renderer.gl.TRIANGLES,6,0)},e}(x.ObjectRenderer);p.default=r,x.WebGLRenderer.registerPlugin("tilingSprite",r)},{"../../core":65,"../../core/const":46,path:8}],143:[function(_,O,p){p.__esModule=!0;var w=function(){function r(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,o){return e&&r(t.prototype,e),o&&r(t,o),t}}(),x=_("../../core"),g=u(x);_("path");function u(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e]);return t.default=r,t}function v(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function h(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:r}function s(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}var a=function(r){s(t,r);function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;v(this,t);var o=h(this,r.call(this,`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`));return o.alpha=e,o.glShaderKey="alpha",o}return w(t,[{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(o){this.uniforms.uAlpha=o}}]),t}(g.Filter);p.default=a},{"../../core":65,path:8}],144:[function(_,O,p){p.__esModule=!0;var w=function(){function i(f,l){for(var d=0;d<l.length;d++){var m=l[d];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(f,m.key,m)}}return function(f,l,d){return l&&i(f.prototype,l),d&&i(f,d),f}}(),x=_("../../core"),g=r(x),u=_("./BlurXFilter"),v=a(u),h=_("./BlurYFilter"),s=a(h);function a(i){return i&&i.__esModule?i:{default:i}}function r(i){if(i&&i.__esModule)return i;var f={};if(i!=null)for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(f[l]=i[l]);return f.default=i,f}function t(i,f){if(!(i instanceof f))throw new TypeError("Cannot call a class as a function")}function e(i,f){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:i}function o(i,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);i.prototype=Object.create(f&&f.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(i,f):i.__proto__=f)}var n=function(i){o(f,i);function f(l,d,m,c){t(this,f);var b=e(this,i.call(this));return b.blurXFilter=new v.default(l,d,m,c),b.blurYFilter=new s.default(l,d,m,c),b.padding=0,b.resolution=m||g.settings.RESOLUTION,b.quality=d||4,b.blur=l||8,b}return f.prototype.apply=function(d,m,c){var b=d.getRenderTarget(!0);this.blurXFilter.apply(d,m,b,!0),this.blurYFilter.apply(d,b,c,!1),d.returnRenderTarget(b)},w(f,[{key:"blur",get:function(){return this.blurXFilter.blur},set:function(d){this.blurXFilter.blur=this.blurYFilter.blur=d,this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}},{key:"quality",get:function(){return this.blurXFilter.quality},set:function(d){this.blurXFilter.quality=this.blurYFilter.quality=d}},{key:"blurX",get:function(){return this.blurXFilter.blur},set:function(d){this.blurXFilter.blur=d,this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}},{key:"blurY",get:function(){return this.blurYFilter.blur},set:function(d){this.blurYFilter.blur=d,this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}},{key:"blendMode",get:function(){return this.blurYFilter._blendMode},set:function(d){this.blurYFilter._blendMode=d}}]),f}(g.Filter);p.default=n},{"../../core":65,"./BlurXFilter":145,"./BlurYFilter":146}],145:[function(_,O,p){p.__esModule=!0;var w=function(){function l(d,m){for(var c=0;c<m.length;c++){var b=m[c];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(d,b.key,b)}}return function(d,m,c){return m&&l(d.prototype,m),c&&l(d,c),d}}(),x=_("../../core"),g=e(x),u=_("./generateBlurVertSource"),v=t(u),h=_("./generateBlurFragSource"),s=t(h),a=_("./getMaxBlurKernelSize"),r=t(a);function t(l){return l&&l.__esModule?l:{default:l}}function e(l){if(l&&l.__esModule)return l;var d={};if(l!=null)for(var m in l)Object.prototype.hasOwnProperty.call(l,m)&&(d[m]=l[m]);return d.default=l,d}function o(l,d){if(!(l instanceof d))throw new TypeError("Cannot call a class as a function")}function n(l,d){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:l}function i(l,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);l.prototype=Object.create(d&&d.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(l,d):l.__proto__=d)}var f=function(l){i(d,l);function d(m,c,b,y){o(this,d),y=y||5;var T=(0,v.default)(y,!0),E=(0,s.default)(y),R=n(this,l.call(this,T,E));return R.resolution=b||g.settings.RESOLUTION,R._quality=0,R.quality=c||4,R.strength=m||8,R.firstRun=!0,R}return d.prototype.apply=function(c,b,y,T){if(this.firstRun){var E=c.renderer.gl,R=(0,r.default)(E);this.vertexSrc=(0,v.default)(R,!0),this.fragmentSrc=(0,s.default)(R),this.firstRun=!1}if(this.uniforms.strength=1/y.size.width*(y.size.width/b.size.width),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)c.applyFilter(this,b,y,T);else{for(var S=c.getRenderTarget(!0),C=b,A=S,k=0;k<this.passes-1;k++){c.applyFilter(this,C,A,!0);var F=A;A=C,C=F}c.applyFilter(this,C,y,T),c.returnRenderTarget(S)}},w(d,[{key:"blur",get:function(){return this.strength},set:function(c){this.padding=Math.abs(c)*2,this.strength=c}},{key:"quality",get:function(){return this._quality},set:function(c){this._quality=c,this.passes=c}}]),d}(g.Filter);p.default=f},{"../../core":65,"./generateBlurFragSource":147,"./generateBlurVertSource":148,"./getMaxBlurKernelSize":149}],146:[function(_,O,p){p.__esModule=!0;var w=function(){function l(d,m){for(var c=0;c<m.length;c++){var b=m[c];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(d,b.key,b)}}return function(d,m,c){return m&&l(d.prototype,m),c&&l(d,c),d}}(),x=_("../../core"),g=e(x),u=_("./generateBlurVertSource"),v=t(u),h=_("./generateBlurFragSource"),s=t(h),a=_("./getMaxBlurKernelSize"),r=t(a);function t(l){return l&&l.__esModule?l:{default:l}}function e(l){if(l&&l.__esModule)return l;var d={};if(l!=null)for(var m in l)Object.prototype.hasOwnProperty.call(l,m)&&(d[m]=l[m]);return d.default=l,d}function o(l,d){if(!(l instanceof d))throw new TypeError("Cannot call a class as a function")}function n(l,d){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:l}function i(l,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);l.prototype=Object.create(d&&d.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(l,d):l.__proto__=d)}var f=function(l){i(d,l);function d(m,c,b,y){o(this,d),y=y||5;var T=(0,v.default)(y,!1),E=(0,s.default)(y),R=n(this,l.call(this,T,E));return R.resolution=b||g.settings.RESOLUTION,R._quality=0,R.quality=c||4,R.strength=m||8,R.firstRun=!0,R}return d.prototype.apply=function(c,b,y,T){if(this.firstRun){var E=c.renderer.gl,R=(0,r.default)(E);this.vertexSrc=(0,v.default)(R,!1),this.fragmentSrc=(0,s.default)(R),this.firstRun=!1}if(this.uniforms.strength=1/y.size.height*(y.size.height/b.size.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)c.applyFilter(this,b,y,T);else{for(var S=c.getRenderTarget(!0),C=b,A=S,k=0;k<this.passes-1;k++){c.applyFilter(this,C,A,!0);var F=A;A=C,C=F}c.applyFilter(this,C,y,T),c.returnRenderTarget(S)}},w(d,[{key:"blur",get:function(){return this.strength},set:function(c){this.padding=Math.abs(c)*2,this.strength=c}},{key:"quality",get:function(){return this._quality},set:function(c){this._quality=c,this.passes=c}}]),d}(g.Filter);p.default=f},{"../../core":65,"./generateBlurFragSource":147,"./generateBlurVertSource":148,"./getMaxBlurKernelSize":149}],147:[function(_,O,p){p.__esModule=!0,p.default=g;var w={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},x=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function g(u){for(var v=w[u],h=v.length,s=x,a="",r="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;",t=void 0,e=0;e<u;e++){var o=r.replace("%index%",e);t=e,e>=h&&(t=u-e-1),o=o.replace("%value%",v[t]),a+=o,a+=`
`}return s=s.replace("%blur%",a),s=s.replace("%size%",u),s}},{}],148:[function(_,O,p){p.__esModule=!0,p.default=x;var w=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform float strength;","uniform mat3 projectionMatrix;","varying vec2 vBlurTexCoords[%size%];","void main(void)","{","gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);","%blur%","}"].join(`
`);function x(g,u){var v=Math.ceil(g/2),h=w,s="",a=void 0;u?a="vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);":a="vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);";for(var r=0;r<g;r++){var t=a.replace("%index%",r);t=t.replace("%sampleIndex%",r-(v-1)+".0"),s+=t,s+=`
`}return h=h.replace("%blur%",s),h=h.replace("%size%",g),h}},{}],149:[function(_,O,p){p.__esModule=!0,p.default=w;function w(x){for(var g=x.getParameter(x.MAX_VARYING_VECTORS),u=15;u>g;)u-=2;return u}},{}],150:[function(_,O,p){p.__esModule=!0;var w=function(){function r(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,o){return e&&r(t.prototype,e),o&&r(t,o),t}}(),x=_("../../core"),g=u(x);_("path");function u(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e]);return t.default=r,t}function v(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function h(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:r}function s(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}var a=function(r){s(t,r);function t(){v(this,t);var e=h(this,r.call(this,`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`));return e.uniforms.m=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],e.alpha=1,e}return t.prototype._loadMatrix=function(o){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=o;n&&(this._multiply(i,this.uniforms.m,o),i=this._colorMatrix(i)),this.uniforms.m=i},t.prototype._multiply=function(o,n,i){return o[0]=n[0]*i[0]+n[1]*i[5]+n[2]*i[10]+n[3]*i[15],o[1]=n[0]*i[1]+n[1]*i[6]+n[2]*i[11]+n[3]*i[16],o[2]=n[0]*i[2]+n[1]*i[7]+n[2]*i[12]+n[3]*i[17],o[3]=n[0]*i[3]+n[1]*i[8]+n[2]*i[13]+n[3]*i[18],o[4]=n[0]*i[4]+n[1]*i[9]+n[2]*i[14]+n[3]*i[19]+n[4],o[5]=n[5]*i[0]+n[6]*i[5]+n[7]*i[10]+n[8]*i[15],o[6]=n[5]*i[1]+n[6]*i[6]+n[7]*i[11]+n[8]*i[16],o[7]=n[5]*i[2]+n[6]*i[7]+n[7]*i[12]+n[8]*i[17],o[8]=n[5]*i[3]+n[6]*i[8]+n[7]*i[13]+n[8]*i[18],o[9]=n[5]*i[4]+n[6]*i[9]+n[7]*i[14]+n[8]*i[19]+n[9],o[10]=n[10]*i[0]+n[11]*i[5]+n[12]*i[10]+n[13]*i[15],o[11]=n[10]*i[1]+n[11]*i[6]+n[12]*i[11]+n[13]*i[16],o[12]=n[10]*i[2]+n[11]*i[7]+n[12]*i[12]+n[13]*i[17],o[13]=n[10]*i[3]+n[11]*i[8]+n[12]*i[13]+n[13]*i[18],o[14]=n[10]*i[4]+n[11]*i[9]+n[12]*i[14]+n[13]*i[19]+n[14],o[15]=n[15]*i[0]+n[16]*i[5]+n[17]*i[10]+n[18]*i[15],o[16]=n[15]*i[1]+n[16]*i[6]+n[17]*i[11]+n[18]*i[16],o[17]=n[15]*i[2]+n[16]*i[7]+n[17]*i[12]+n[18]*i[17],o[18]=n[15]*i[3]+n[16]*i[8]+n[17]*i[13]+n[18]*i[18],o[19]=n[15]*i[4]+n[16]*i[9]+n[17]*i[14]+n[18]*i[19]+n[19],o},t.prototype._colorMatrix=function(o){var n=new Float32Array(o);return n[4]/=255,n[9]/=255,n[14]/=255,n[19]/=255,n},t.prototype.brightness=function(o,n){var i=[o,0,0,0,0,0,o,0,0,0,0,0,o,0,0,0,0,0,1,0];this._loadMatrix(i,n)},t.prototype.greyscale=function(o,n){var i=[o,o,o,0,0,o,o,o,0,0,o,o,o,0,0,0,0,0,1,0];this._loadMatrix(i,n)},t.prototype.blackAndWhite=function(o){var n=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(n,o)},t.prototype.hue=function(o,n){o=(o||0)/180*Math.PI;var i=Math.cos(o),f=Math.sin(o),l=Math.sqrt,d=1/3,m=l(d),c=i+(1-i)*d,b=d*(1-i)-m*f,y=d*(1-i)+m*f,T=d*(1-i)+m*f,E=i+d*(1-i),R=d*(1-i)-m*f,S=d*(1-i)-m*f,C=d*(1-i)+m*f,A=i+d*(1-i),k=[c,b,y,0,0,T,E,R,0,0,S,C,A,0,0,0,0,0,1,0];this._loadMatrix(k,n)},t.prototype.contrast=function(o,n){var i=(o||0)+1,f=-.5*(i-1),l=[i,0,0,0,f,0,i,0,0,f,0,0,i,0,f,0,0,0,1,0];this._loadMatrix(l,n)},t.prototype.saturate=function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments[1],i=o*2/3+1,f=(i-1)*-.5,l=[i,f,f,0,0,f,i,f,0,0,f,f,i,0,0,0,0,0,1,0];this._loadMatrix(l,n)},t.prototype.desaturate=function(){this.saturate(-1)},t.prototype.negative=function(o){var n=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(n,o)},t.prototype.sepia=function(o){var n=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(n,o)},t.prototype.technicolor=function(o){var n=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(n,o)},t.prototype.polaroid=function(o){var n=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(n,o)},t.prototype.toBGR=function(o){var n=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(n,o)},t.prototype.kodachrome=function(o){var n=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(n,o)},t.prototype.browni=function(o){var n=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(n,o)},t.prototype.vintage=function(o){var n=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(n,o)},t.prototype.colorTone=function(o,n,i,f,l){o=o||.2,n=n||.15,i=i||16770432,f=f||3375104;var d=(i>>16&255)/255,m=(i>>8&255)/255,c=(i&255)/255,b=(f>>16&255)/255,y=(f>>8&255)/255,T=(f&255)/255,E=[.3,.59,.11,0,0,d,m,c,o,0,b,y,T,n,0,d-b,m-y,c-T,0,0];this._loadMatrix(E,l)},t.prototype.night=function(o,n){o=o||.1;var i=[o*-2,-o,0,0,0,-o,0,o,0,0,0,o,o*2,0,0,0,0,0,1,0];this._loadMatrix(i,n)},t.prototype.predator=function(o,n){var i=[11.224130630493164*o,-4.794486999511719*o,-2.8746118545532227*o,0*o,.40342438220977783*o,-3.6330697536468506*o,9.193157196044922*o,-2.951810836791992*o,0*o,-1.316135048866272*o,-3.2184197902679443*o,-4.2375030517578125*o,7.476448059082031*o,0*o,.8044459223747253*o,0,0,0,1,0];this._loadMatrix(i,n)},t.prototype.lsd=function(o){var n=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(n,o)},t.prototype.reset=function(){var o=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(o,!1)},w(t,[{key:"matrix",get:function(){return this.uniforms.m},set:function(o){this.uniforms.m=o}},{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(o){this.uniforms.uAlpha=o}}]),t}(g.Filter);p.default=a,a.prototype.grayscale=a.prototype.greyscale},{"../../core":65,path:8}],151:[function(_,O,p){p.__esModule=!0;var w=function(){function r(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,o){return e&&r(t.prototype,e),o&&r(t,o),t}}(),x=_("../../core"),g=u(x);_("path");function u(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e]);return t.default=r,t}function v(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function h(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:r}function s(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}var a=function(r){s(t,r);function t(e,o){v(this,t);var n=new g.Matrix;e.renderable=!1;var i=h(this,r.call(this,`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

void main(void)
{
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;
   vTextureCoord = aTextureCoord;
}`,`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;

uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform vec4 filterArea;
uniform vec4 filterClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy *= scale / filterArea.xy;

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), filterClamp.xy, filterClamp.zw));
}
`));return i.maskSprite=e,i.maskMatrix=n,i.uniforms.mapSampler=e._texture,i.uniforms.filterMatrix=n,i.uniforms.scale={x:1,y:1},o==null&&(o=20),i.scale=new g.Point(o,o),i}return t.prototype.apply=function(o,n,i){this.uniforms.filterMatrix=o.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y,o.applyFilter(this,n,i)},w(t,[{key:"map",get:function(){return this.uniforms.mapSampler},set:function(o){this.uniforms.mapSampler=o}}]),t}(g.Filter);p.default=a},{"../../core":65,path:8}],152:[function(_,O,p){p.__esModule=!0;var w=_("../../core"),x=g(w);_("path");function g(a){if(a&&a.__esModule)return a;var r={};if(a!=null)for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(r[t]=a[t]);return r.default=a,r}function u(a,r){if(!(a instanceof r))throw new TypeError("Cannot call a class as a function")}function v(a,r){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&(typeof r=="object"||typeof r=="function")?r:a}function h(a,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof r);a.prototype=Object.create(r&&r.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(a,r):a.__proto__=r)}var s=function(a){h(r,a);function r(){return u(this,r),v(this,a.call(this,`
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

uniform vec4 filterArea;

varying vec2 vTextureCoord;

vec2 mapCoord( vec2 coord )
{
    coord *= filterArea.xy;
    coord += filterArea.zw;

    return coord;
}

vec2 unmapCoord( vec2 coord )
{
    coord -= filterArea.zw;
    coord /= filterArea.xy;

    return coord;
}

void texcoords(vec2 fragCoord, vec2 resolution,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    vec2 inverseVP = 1.0 / resolution.xy;
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

   vTextureCoord = aTextureCoord;

   vec2 fragCoord = vTextureCoord * filterArea.xy;

   texcoords(fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}`,`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;

/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.
 
 --
 
 From:
 https://github.com/mitsuhiko/webgl-meincraft
 
 Copyright (c) 2011 by Armin Ronacher.
 
 Some rights reserved.
 
 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:
 
 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.
 
 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.
 
 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.
 
 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));
    
    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));
    
    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);
    
    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;
    
    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);
    
    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec2 fragCoord = vTextureCoord * filterArea.xy;

      vec4 color;

    color = fxaa(uSampler, fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`))}return r}(x.Filter);p.default=s},{"../../core":65,path:8}],153:[function(_,O,p){p.__esModule=!0;var w=_("./fxaa/FXAAFilter");Object.defineProperty(p,"FXAAFilter",{enumerable:!0,get:function(){return r(w).default}});var x=_("./noise/NoiseFilter");Object.defineProperty(p,"NoiseFilter",{enumerable:!0,get:function(){return r(x).default}});var g=_("./displacement/DisplacementFilter");Object.defineProperty(p,"DisplacementFilter",{enumerable:!0,get:function(){return r(g).default}});var u=_("./blur/BlurFilter");Object.defineProperty(p,"BlurFilter",{enumerable:!0,get:function(){return r(u).default}});var v=_("./blur/BlurXFilter");Object.defineProperty(p,"BlurXFilter",{enumerable:!0,get:function(){return r(v).default}});var h=_("./blur/BlurYFilter");Object.defineProperty(p,"BlurYFilter",{enumerable:!0,get:function(){return r(h).default}});var s=_("./colormatrix/ColorMatrixFilter");Object.defineProperty(p,"ColorMatrixFilter",{enumerable:!0,get:function(){return r(s).default}});var a=_("./alpha/AlphaFilter");Object.defineProperty(p,"AlphaFilter",{enumerable:!0,get:function(){return r(a).default}});function r(t){return t&&t.__esModule?t:{default:t}}},{"./alpha/AlphaFilter":143,"./blur/BlurFilter":144,"./blur/BlurXFilter":145,"./blur/BlurYFilter":146,"./colormatrix/ColorMatrixFilter":150,"./displacement/DisplacementFilter":151,"./fxaa/FXAAFilter":152,"./noise/NoiseFilter":154}],154:[function(_,O,p){p.__esModule=!0;var w=function(){function r(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,o){return e&&r(t.prototype,e),o&&r(t,o),t}}(),x=_("../../core"),g=u(x);_("path");function u(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e]);return t.default=r,t}function v(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function h(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:r}function s(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}var a=function(r){s(t,r);function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:.5,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Math.random();v(this,t);var n=h(this,r.call(this,`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`));return n.noise=e,n.seed=o,n}return w(t,[{key:"noise",get:function(){return this.uniforms.uNoise},set:function(o){this.uniforms.uNoise=o}},{key:"seed",get:function(){return this.uniforms.uSeed},set:function(o){this.uniforms.uSeed=o}}]),t}(g.Filter);p.default=a},{"../../core":65,path:8}],155:[function(_,O,p){p.__esModule=!0;var w=function(){function s(a,r){for(var t=0;t<r.length;t++){var e=r[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(a,e.key,e)}}return function(a,r,t){return r&&s(a.prototype,r),t&&s(a,t),a}}(),x=_("../core"),g=u(x);function u(s){if(s&&s.__esModule)return s;var a={};if(s!=null)for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(a[r]=s[r]);return a.default=s,a}function v(s,a){if(!(s instanceof a))throw new TypeError("Cannot call a class as a function")}var h=function(){function s(){v(this,s),this.global=new g.Point,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return s.prototype.getLocalPosition=function(r,t,e){return r.worldTransform.applyInverse(e||this.global,t)},s.prototype.copyEvent=function(r){r.isPrimary&&(this.isPrimary=!0),this.button=r.button,this.buttons=Number.isInteger(r.buttons)?r.buttons:r.which,this.width=r.width,this.height=r.height,this.tiltX=r.tiltX,this.tiltY=r.tiltY,this.pointerType=r.pointerType,this.pressure=r.pressure,this.rotationAngle=r.rotationAngle,this.twist=r.twist||0,this.tangentialPressure=r.tangentialPressure||0},s.prototype.reset=function(){this.isPrimary=!1},w(s,[{key:"pointerId",get:function(){return this.identifier}}]),s}();p.default=h},{"../core":65}],156:[function(_,O,p){p.__esModule=!0;function w(g,u){if(!(g instanceof u))throw new TypeError("Cannot call a class as a function")}var x=function(){function g(){w(this,g),this.stopped=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return g.prototype.stopPropagation=function(){this.stopped=!0},g.prototype.reset=function(){this.stopped=!1,this.currentTarget=null,this.target=null},g}();p.default=x},{}],157:[function(_,O,p){p.__esModule=!0;var w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},x=_("../core"),g=f(x),u=_("./InteractionData"),v=i(u),h=_("./InteractionEvent"),s=i(h),a=_("./InteractionTrackingData"),r=i(a),t=_("eventemitter3"),e=i(t),o=_("./interactiveTarget"),n=i(o);function i(T){return T&&T.__esModule?T:{default:T}}function f(T){if(T&&T.__esModule)return T;var E={};if(T!=null)for(var R in T)Object.prototype.hasOwnProperty.call(T,R)&&(E[R]=T[R]);return E.default=T,E}function l(T,E){if(!(T instanceof E))throw new TypeError("Cannot call a class as a function")}function d(T,E){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:T}function m(T,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);T.prototype=Object.create(E&&E.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(T,E):T.__proto__=E)}g.utils.mixins.delayMixin(g.DisplayObject.prototype,n.default);var c=1,b={target:null,data:{global:null}},y=function(T){m(E,T);function E(R,S){l(this,E);var C=d(this,T.call(this));return S=S||{},C.renderer=R,C.autoPreventDefault=S.autoPreventDefault!==void 0?S.autoPreventDefault:!0,C.interactionFrequency=S.interactionFrequency||10,C.mouse=new v.default,C.mouse.identifier=c,C.mouse.global.set(-999999),C.activeInteractionData={},C.activeInteractionData[c]=C.mouse,C.interactionDataPool=[],C.eventData=new s.default,C.interactionDOMElement=null,C.moveWhenInside=!1,C.eventsAdded=!1,C.mouseOverRenderer=!1,C.supportsTouchEvents="ontouchstart"in window,C.supportsPointerEvents=!!window.PointerEvent,C.onPointerUp=C.onPointerUp.bind(C),C.processPointerUp=C.processPointerUp.bind(C),C.onPointerCancel=C.onPointerCancel.bind(C),C.processPointerCancel=C.processPointerCancel.bind(C),C.onPointerDown=C.onPointerDown.bind(C),C.processPointerDown=C.processPointerDown.bind(C),C.onPointerMove=C.onPointerMove.bind(C),C.processPointerMove=C.processPointerMove.bind(C),C.onPointerOut=C.onPointerOut.bind(C),C.processPointerOverOut=C.processPointerOverOut.bind(C),C.onPointerOver=C.onPointerOver.bind(C),C.cursorStyles={default:"inherit",pointer:"pointer"},C.currentCursorMode=null,C.cursor=null,C._tempPoint=new g.Point,C.resolution=1,C.setTargetElement(C.renderer.view,C.renderer.resolution),C}return E.prototype.hitTest=function(S,C){return b.target=null,b.data.global=S,C||(C=this.renderer._lastObjectRendered),this.processInteractive(b,C,null,!0),b.target},E.prototype.setTargetElement=function(S){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;this.removeEvents(),this.interactionDOMElement=S,this.resolution=C,this.addEvents()},E.prototype.addEvents=function(){this.interactionDOMElement&&(g.ticker.shared.add(this.update,this,g.UPDATE_PRIORITY.INTERACTION),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0)},E.prototype.removeEvents=function(){this.interactionDOMElement&&(g.ticker.shared.remove(this.update,this),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1)},E.prototype.update=function(S){if(this._deltaTime+=S,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,!!this.interactionDOMElement)){if(this.didMove){this.didMove=!1;return}this.cursor=null;for(var C in this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(C)){var A=this.activeInteractionData[C];if(A.originalEvent&&A.pointerType!=="touch"){var k=this.configureInteractionEventForDOMEvent(this.eventData,A.originalEvent,A);this.processInteractive(k,this.renderer._lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},E.prototype.setCursorMode=function(S){if(S=S||"default",this.currentCursorMode!==S){this.currentCursorMode=S;var C=this.cursorStyles[S];if(C)switch(typeof C>"u"?"undefined":w(C)){case"string":this.interactionDOMElement.style.cursor=C;break;case"function":C(S);break;case"object":Object.assign(this.interactionDOMElement.style,C);break}else typeof S=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,S)&&(this.interactionDOMElement.style.cursor=S)}},E.prototype.dispatchEvent=function(S,C,A){A.stopped||(A.currentTarget=S,A.type=C,S.emit(C,A),S[C]&&S[C](A))},E.prototype.mapPositionToPoint=function(S,C,A){var k=void 0;this.interactionDOMElement.parentElement?k=this.interactionDOMElement.getBoundingClientRect():k={x:0,y:0,width:0,height:0};var F=navigator.isCocoonJS?this.resolution:1/this.resolution;S.x=(C-k.left)*(this.interactionDOMElement.width/k.width)*F,S.y=(A-k.top)*(this.interactionDOMElement.height/k.height)*F},E.prototype.processInteractive=function(S,C,A,k,F){if(!C||!C.visible)return!1;var M=S.data.global;F=C.interactive||F;var D=!1,L=F,I=!0;if(C.hitArea?(k&&(C.worldTransform.applyInverse(M,this._tempPoint),C.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?D=!0:(k=!1,I=!1)),L=!1):C._mask&&k&&(C._mask.containsPoint(M)||(k=!1,I=!1)),I&&C.interactiveChildren&&C.children)for(var N=C.children,U=N.length-1;U>=0;U--){var B=N[U],X=this.processInteractive(S,B,A,k,L);if(X){if(!B.parent)continue;L=!1,X&&(S.target&&(k=!1),D=!0)}}return F&&(k&&!S.target&&!C.hitArea&&C.containsPoint&&C.containsPoint(M)&&(D=!0),C.interactive&&(D&&!S.target&&(S.target=C),A&&A(S,C,!!D))),D},E.prototype.onPointerDown=function(S){if(!(this.supportsTouchEvents&&S.pointerType==="touch")){var C=this.normalizeToPointerData(S);this.autoPreventDefault&&C[0].isNormalized&&S.preventDefault();for(var A=C.length,k=0;k<A;k++){var F=C[k],M=this.getInteractionDataForPointerId(F),D=this.configureInteractionEventForDOMEvent(this.eventData,F,M);if(D.data.originalEvent=S,this.processInteractive(D,this.renderer._lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",D),F.pointerType==="touch")this.emit("touchstart",D);else if(F.pointerType==="mouse"||F.pointerType==="pen"){var L=F.button===2;this.emit(L?"rightdown":"mousedown",this.eventData)}}}},E.prototype.processPointerDown=function(S,C,A){var k=S.data,F=S.data.identifier;if(A){if(C.trackedPointers[F]||(C.trackedPointers[F]=new r.default(F)),this.dispatchEvent(C,"pointerdown",S),k.pointerType==="touch")this.dispatchEvent(C,"touchstart",S);else if(k.pointerType==="mouse"||k.pointerType==="pen"){var M=k.button===2;M?C.trackedPointers[F].rightDown=!0:C.trackedPointers[F].leftDown=!0,this.dispatchEvent(C,M?"rightdown":"mousedown",S)}}},E.prototype.onPointerComplete=function(S,C,A){for(var k=this.normalizeToPointerData(S),F=k.length,M=S.target!==this.interactionDOMElement?"outside":"",D=0;D<F;D++){var L=k[D],I=this.getInteractionDataForPointerId(L),N=this.configureInteractionEventForDOMEvent(this.eventData,L,I);if(N.data.originalEvent=S,this.processInteractive(N,this.renderer._lastObjectRendered,A,C||!M),this.emit(C?"pointercancel":"pointerup"+M,N),L.pointerType==="mouse"||L.pointerType==="pen"){var U=L.button===2;this.emit(U?"rightup"+M:"mouseup"+M,N)}else L.pointerType==="touch"&&(this.emit(C?"touchcancel":"touchend"+M,N),this.releaseInteractionDataForPointerId(L.pointerId,I))}},E.prototype.onPointerCancel=function(S){this.supportsTouchEvents&&S.pointerType==="touch"||this.onPointerComplete(S,!0,this.processPointerCancel)},E.prototype.processPointerCancel=function(S,C){var A=S.data,k=S.data.identifier;C.trackedPointers[k]!==void 0&&(delete C.trackedPointers[k],this.dispatchEvent(C,"pointercancel",S),A.pointerType==="touch"&&this.dispatchEvent(C,"touchcancel",S))},E.prototype.onPointerUp=function(S){this.supportsTouchEvents&&S.pointerType==="touch"||this.onPointerComplete(S,!1,this.processPointerUp)},E.prototype.processPointerUp=function(S,C,A){var k=S.data,F=S.data.identifier,M=C.trackedPointers[F],D=k.pointerType==="touch",L=k.pointerType==="mouse"||k.pointerType==="pen",I=!1;if(L){var N=k.button===2,U=r.default.FLAGS,B=N?U.RIGHT_DOWN:U.LEFT_DOWN,X=M!==void 0&&M.flags&B;A?(this.dispatchEvent(C,N?"rightup":"mouseup",S),X&&(this.dispatchEvent(C,N?"rightclick":"click",S),I=!0)):X&&this.dispatchEvent(C,N?"rightupoutside":"mouseupoutside",S),M&&(N?M.rightDown=!1:M.leftDown=!1)}A?(this.dispatchEvent(C,"pointerup",S),D&&this.dispatchEvent(C,"touchend",S),M&&((!L||I)&&this.dispatchEvent(C,"pointertap",S),D&&(this.dispatchEvent(C,"tap",S),M.over=!1))):M&&(this.dispatchEvent(C,"pointerupoutside",S),D&&this.dispatchEvent(C,"touchendoutside",S)),M&&M.none&&delete C.trackedPointers[F]},E.prototype.onPointerMove=function(S){if(!(this.supportsTouchEvents&&S.pointerType==="touch")){var C=this.normalizeToPointerData(S);(C[0].pointerType==="mouse"||C[0].pointerType==="pen")&&(this.didMove=!0,this.cursor=null);for(var A=C.length,k=0;k<A;k++){var F=C[k],M=this.getInteractionDataForPointerId(F),D=this.configureInteractionEventForDOMEvent(this.eventData,F,M);D.data.originalEvent=S;var L=F.pointerType==="touch"?this.moveWhenInside:!0;this.processInteractive(D,this.renderer._lastObjectRendered,this.processPointerMove,L),this.emit("pointermove",D),F.pointerType==="touch"&&this.emit("touchmove",D),(F.pointerType==="mouse"||F.pointerType==="pen")&&this.emit("mousemove",D)}C[0].pointerType==="mouse"&&this.setCursorMode(this.cursor)}},E.prototype.processPointerMove=function(S,C,A){var k=S.data,F=k.pointerType==="touch",M=k.pointerType==="mouse"||k.pointerType==="pen";M&&this.processPointerOverOut(S,C,A),(!this.moveWhenInside||A)&&(this.dispatchEvent(C,"pointermove",S),F&&this.dispatchEvent(C,"touchmove",S),M&&this.dispatchEvent(C,"mousemove",S))},E.prototype.onPointerOut=function(S){if(!(this.supportsTouchEvents&&S.pointerType==="touch")){var C=this.normalizeToPointerData(S),A=C[0];A.pointerType==="mouse"&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var k=this.getInteractionDataForPointerId(A),F=this.configureInteractionEventForDOMEvent(this.eventData,A,k);F.data.originalEvent=A,this.processInteractive(F,this.renderer._lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",F),A.pointerType==="mouse"||A.pointerType==="pen"?this.emit("mouseout",F):this.releaseInteractionDataForPointerId(k.identifier)}},E.prototype.processPointerOverOut=function(S,C,A){var k=S.data,F=S.data.identifier,M=k.pointerType==="mouse"||k.pointerType==="pen",D=C.trackedPointers[F];A&&!D&&(D=C.trackedPointers[F]=new r.default(F)),D!==void 0&&(A&&this.mouseOverRenderer?(D.over||(D.over=!0,this.dispatchEvent(C,"pointerover",S),M&&this.dispatchEvent(C,"mouseover",S)),M&&this.cursor===null&&(this.cursor=C.cursor)):D.over&&(D.over=!1,this.dispatchEvent(C,"pointerout",this.eventData),M&&this.dispatchEvent(C,"mouseout",S),D.none&&delete C.trackedPointers[F]))},E.prototype.onPointerOver=function(S){var C=this.normalizeToPointerData(S),A=C[0],k=this.getInteractionDataForPointerId(A),F=this.configureInteractionEventForDOMEvent(this.eventData,A,k);F.data.originalEvent=A,A.pointerType==="mouse"&&(this.mouseOverRenderer=!0),this.emit("pointerover",F),(A.pointerType==="mouse"||A.pointerType==="pen")&&this.emit("mouseover",F)},E.prototype.getInteractionDataForPointerId=function(S){var C=S.pointerId,A=void 0;return C===c||S.pointerType==="mouse"?A=this.mouse:this.activeInteractionData[C]?A=this.activeInteractionData[C]:(A=this.interactionDataPool.pop()||new v.default,A.identifier=C,this.activeInteractionData[C]=A),A.copyEvent(S),A},E.prototype.releaseInteractionDataForPointerId=function(S){var C=this.activeInteractionData[S];C&&(delete this.activeInteractionData[S],C.reset(),this.interactionDataPool.push(C))},E.prototype.configureInteractionEventForDOMEvent=function(S,C,A){return S.data=A,this.mapPositionToPoint(A.global,C.clientX,C.clientY),navigator.isCocoonJS&&C.pointerType==="touch"&&(A.global.x=A.global.x/this.resolution,A.global.y=A.global.y/this.resolution),C.pointerType==="touch"&&(C.globalX=A.global.x,C.globalY=A.global.y),A.originalEvent=C,S.reset(),S},E.prototype.normalizeToPointerData=function(S){var C=[];if(this.supportsTouchEvents&&S instanceof TouchEvent)for(var A=0,k=S.changedTouches.length;A<k;A++){var F=S.changedTouches[A];typeof F.button>"u"&&(F.button=S.touches.length?1:0),typeof F.buttons>"u"&&(F.buttons=S.touches.length?1:0),typeof F.isPrimary>"u"&&(F.isPrimary=S.touches.length===1&&S.type==="touchstart"),typeof F.width>"u"&&(F.width=F.radiusX||1),typeof F.height>"u"&&(F.height=F.radiusY||1),typeof F.tiltX>"u"&&(F.tiltX=0),typeof F.tiltY>"u"&&(F.tiltY=0),typeof F.pointerType>"u"&&(F.pointerType="touch"),typeof F.pointerId>"u"&&(F.pointerId=F.identifier||0),typeof F.pressure>"u"&&(F.pressure=F.force||.5),F.twist=0,F.tangentialPressure=0,typeof F.layerX>"u"&&(F.layerX=F.offsetX=F.clientX),typeof F.layerY>"u"&&(F.layerY=F.offsetY=F.clientY),F.isNormalized=!0,C.push(F)}else S instanceof MouseEvent&&(!this.supportsPointerEvents||!(S instanceof window.PointerEvent))&&(typeof S.isPrimary>"u"&&(S.isPrimary=!0),typeof S.width>"u"&&(S.width=1),typeof S.height>"u"&&(S.height=1),typeof S.tiltX>"u"&&(S.tiltX=0),typeof S.tiltY>"u"&&(S.tiltY=0),typeof S.pointerType>"u"&&(S.pointerType="mouse"),typeof S.pointerId>"u"&&(S.pointerId=c),typeof S.pressure>"u"&&(S.pressure=.5),S.twist=0,S.tangentialPressure=0,S.isNormalized=!0),C.push(S);return C},E.prototype.destroy=function(){this.removeEvents(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this._tempPoint=null},E}(e.default);p.default=y,g.WebGLRenderer.registerPlugin("interaction",y),g.CanvasRenderer.registerPlugin("interaction",y)},{"../core":65,"./InteractionData":155,"./InteractionEvent":156,"./InteractionTrackingData":158,"./interactiveTarget":160,eventemitter3:3}],158:[function(_,O,p){p.__esModule=!0;var w=function(){function u(v,h){for(var s=0;s<h.length;s++){var a=h[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(v,a.key,a)}}return function(v,h,s){return h&&u(v.prototype,h),s&&u(v,s),v}}();function x(u,v){if(!(u instanceof v))throw new TypeError("Cannot call a class as a function")}var g=function(){function u(v){x(this,u),this._pointerId=v,this._flags=u.FLAGS.NONE}return u.prototype._doSet=function(h,s){s?this._flags=this._flags|h:this._flags=this._flags&~h},w(u,[{key:"pointerId",get:function(){return this._pointerId}},{key:"flags",get:function(){return this._flags},set:function(h){this._flags=h}},{key:"none",get:function(){return this._flags===this.constructor.FLAGS.NONE}},{key:"over",get:function(){return(this._flags&this.constructor.FLAGS.OVER)!==0},set:function(h){this._doSet(this.constructor.FLAGS.OVER,h)}},{key:"rightDown",get:function(){return(this._flags&this.constructor.FLAGS.RIGHT_DOWN)!==0},set:function(h){this._doSet(this.constructor.FLAGS.RIGHT_DOWN,h)}},{key:"leftDown",get:function(){return(this._flags&this.constructor.FLAGS.LEFT_DOWN)!==0},set:function(h){this._doSet(this.constructor.FLAGS.LEFT_DOWN,h)}}]),u}();p.default=g,g.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4})},{}],159:[function(_,O,p){p.__esModule=!0;var w=_("./InteractionData");Object.defineProperty(p,"InteractionData",{enumerable:!0,get:function(){return h(w).default}});var x=_("./InteractionManager");Object.defineProperty(p,"InteractionManager",{enumerable:!0,get:function(){return h(x).default}});var g=_("./interactiveTarget");Object.defineProperty(p,"interactiveTarget",{enumerable:!0,get:function(){return h(g).default}});var u=_("./InteractionTrackingData");Object.defineProperty(p,"InteractionTrackingData",{enumerable:!0,get:function(){return h(u).default}});var v=_("./InteractionEvent");Object.defineProperty(p,"InteractionEvent",{enumerable:!0,get:function(){return h(v).default}});function h(s){return s&&s.__esModule?s:{default:s}}},{"./InteractionData":155,"./InteractionEvent":156,"./InteractionManager":157,"./InteractionTrackingData":158,"./interactiveTarget":160}],160:[function(_,O,p){p.__esModule=!0,p.default={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return this.cursor==="pointer"},set buttonMode(w){w?this.cursor="pointer":this.cursor==="pointer"&&(this.cursor=null)},cursor:null,get trackedPointers(){return this._trackedPointers===void 0&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0}},{}],161:[function(_,O,p){p.__esModule=!0,p.parse=h,p.default=function(){return function(a,r){if(!a.data||a.type!==g.Resource.TYPE.XML){r();return}if(a.data.getElementsByTagName("page").length===0||a.data.getElementsByTagName("info").length===0||a.data.getElementsByTagName("info")[0].getAttribute("face")===null){r();return}var t=a.isDataUrl?"":x.dirname(a.url);a.isDataUrl&&(t==="."&&(t=""),this.baseUrl&&t&&this.baseUrl.charAt(this.baseUrl.length-1)==="/"&&(t+="/")),t=t.replace(this.baseUrl,""),t&&t.charAt(t.length-1)!=="/"&&(t+="/");for(var e=a.data.getElementsByTagName("page"),o={},n=function(T){o[T.metadata.pageFile]=T.texture,Object.keys(o).length===e.length&&(h(a,o),r())},i=0;i<e.length;++i){var f=e[i].getAttribute("file"),l=t+f,d=!1;for(var m in this.resources){var c=this.resources[m];if(c.url===l){c.metadata.pageFile=f,c.texture?n(c):c.onAfterMiddleware.add(n),d=!0;break}}if(!d){var b={crossOrigin:a.crossOrigin,loadType:g.Resource.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:f},a.metadata.imageMetadata),parentResource:a};this.add(l,b,n)}}}};var w=_("path"),x=v(w),g=_("resource-loader"),u=_("../extras");function v(s){if(s&&s.__esModule)return s;var a={};if(s!=null)for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(a[r]=s[r]);return a.default=s,a}function h(s,a){s.bitmapFont=u.BitmapText.registerFont(s.data,a)}},{"../extras":141,path:8,"resource-loader":36}],162:[function(_,O,p){p.__esModule=!0,p.shared=p.Resource=p.textureParser=p.getResourcePath=p.spritesheetParser=p.parseBitmapFontData=p.bitmapFontParser=p.Loader=void 0;var w=_("./bitmapFontParser");Object.defineProperty(p,"bitmapFontParser",{enumerable:!0,get:function(){return r(w).default}}),Object.defineProperty(p,"parseBitmapFontData",{enumerable:!0,get:function(){return w.parse}});var x=_("./spritesheetParser");Object.defineProperty(p,"spritesheetParser",{enumerable:!0,get:function(){return r(x).default}}),Object.defineProperty(p,"getResourcePath",{enumerable:!0,get:function(){return x.getResourcePath}});var g=_("./textureParser");Object.defineProperty(p,"textureParser",{enumerable:!0,get:function(){return r(g).default}});var u=_("resource-loader");Object.defineProperty(p,"Resource",{enumerable:!0,get:function(){return u.Resource}});var v=_("../core/Application"),h=r(v),s=_("./loader"),a=r(s);function r(o){return o&&o.__esModule?o:{default:o}}p.Loader=a.default;var t=new a.default;t.destroy=function(){},p.shared=t;var e=h.default.prototype;e._loader=null,Object.defineProperty(e,"loader",{get:function(){if(!this._loader){var n=this._options.sharedLoader;this._loader=n?t:new a.default}return this._loader}}),e._parentDestroy=e.destroy,e.destroy=function(n,i){this._loader&&(this._loader.destroy(),this._loader=null),this._parentDestroy(n,i)}},{"../core/Application":43,"./bitmapFontParser":161,"./loader":163,"./spritesheetParser":164,"./textureParser":165,"resource-loader":36}],163:[function(_,O,p){p.__esModule=!0;var w=_("resource-loader"),x=o(w),g=_("resource-loader/lib/middlewares/parsing/blob"),u=_("eventemitter3"),v=o(u),h=_("./textureParser"),s=o(h),a=_("./spritesheetParser"),r=o(a),t=_("./bitmapFontParser"),e=o(t);function o(c){return c&&c.__esModule?c:{default:c}}function n(c,b){if(!(c instanceof b))throw new TypeError("Cannot call a class as a function")}function i(c,b){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:c}function f(c,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);c.prototype=Object.create(b&&b.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(c,b):c.__proto__=b)}var l=function(c){f(b,c);function b(y,T){n(this,b);var E=i(this,c.call(this,y,T));v.default.call(E);for(var R=0;R<b._pixiMiddleware.length;++R)E.use(b._pixiMiddleware[R]());return E.onStart.add(function(S){return E.emit("start",S)}),E.onProgress.add(function(S,C){return E.emit("progress",S,C)}),E.onError.add(function(S,C,A){return E.emit("error",S,C,A)}),E.onLoad.add(function(S,C){return E.emit("load",S,C)}),E.onComplete.add(function(S,C){return E.emit("complete",S,C)}),E}return b.addPixiMiddleware=function(T){b._pixiMiddleware.push(T)},b.prototype.destroy=function(){this.removeAllListeners(),this.reset()},b}(x.default);p.default=l;for(var d in v.default.prototype)l.prototype[d]=v.default.prototype[d];l._pixiMiddleware=[g.blobMiddlewareFactory,s.default,r.default,e.default];var m=x.default.Resource;m.setExtensionXhrType("fnt",m.XHR_RESPONSE_TYPE.DOCUMENT)},{"./bitmapFontParser":161,"./spritesheetParser":164,"./textureParser":165,eventemitter3:3,"resource-loader":36,"resource-loader/lib/middlewares/parsing/blob":37}],164:[function(_,O,p){p.__esModule=!0,p.default=function(){return function(a,r){var t=a.name+"_image";if(!a.data||a.type!==w.Resource.TYPE.JSON||!a.data.frames||this.resources[t]){r();return}var e={crossOrigin:a.crossOrigin,metadata:a.metadata.imageMetadata,parentResource:a},o=h(a,this.baseUrl);this.add(t,o,e,function(i){if(i.error){r(i.error);return}var f=new u.Spritesheet(i.texture.baseTexture,a.data,a.url);f.parse(function(){a.spritesheet=f,a.textures=f.textures,r()})})}},p.getResourcePath=h;var w=_("resource-loader"),x=_("url"),g=v(x),u=_("../core");function v(s){return s&&s.__esModule?s:{default:s}}function h(s,a){return s.isDataUrl?s.data.meta.image:g.default.resolve(s.url.replace(a,""),s.data.meta.image)}},{"../core":65,"resource-loader":36,url:38}],165:[function(_,O,p){p.__esModule=!0,p.default=function(){return function(h,s){h.data&&h.type===w.Resource.TYPE.IMAGE&&(h.texture=g.default.fromLoader(h.data,h.url,h.name)),s()}};var w=_("resource-loader"),x=_("../core/textures/Texture"),g=u(x);function u(v){return v&&v.__esModule?v:{default:v}}},{"../core/textures/Texture":115,"resource-loader":36}],166:[function(_,O,p){p.__esModule=!0;var w=function(){function i(f,l){for(var d=0;d<l.length;d++){var m=l[d];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(f,m.key,m)}}return function(f,l,d){return l&&i(f.prototype,l),d&&i(f,d),f}}(),x=_("../core"),g=s(x),u=_("../core/textures/Texture"),v=h(u);function h(i){return i&&i.__esModule?i:{default:i}}function s(i){if(i&&i.__esModule)return i;var f={};if(i!=null)for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(f[l]=i[l]);return f.default=i,f}function a(i,f){if(!(i instanceof f))throw new TypeError("Cannot call a class as a function")}function r(i,f){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:i}function t(i,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);i.prototype=Object.create(f&&f.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(i,f):i.__proto__=f)}var e=new g.Point,o=new g.Polygon,n=function(i){t(f,i);function f(l,d,m,c,b){a(this,f);var y=r(this,i.call(this));return y._texture=l||v.default.EMPTY,y.uvs=m||new Float32Array([0,0,1,0,1,1,0,1]),y.vertices=d||new Float32Array([0,0,100,0,100,100,0,100]),y.indices=c||new Uint16Array([0,1,3,2]),y.dirty=0,y.indexDirty=0,y.vertexDirty=0,y.autoUpdate=!0,y.blendMode=g.BLEND_MODES.NORMAL,y.canvasPadding=g.settings.MESH_CANVAS_PADDING,y.drawMode=b||f.DRAW_MODES.TRIANGLE_MESH,y.shader=null,y.tintRgb=new Float32Array([1,1,1]),y._glDatas={},y._uvTransform=new g.TextureMatrix(y._texture),y.uploadUvTransform=!1,y.pluginName="mesh",y}return f.prototype._renderWebGL=function(d){this.refresh(),d.setObjectRenderer(d.plugins[this.pluginName]),d.plugins[this.pluginName].render(this)},f.prototype._renderCanvas=function(d){this.refresh(),d.plugins[this.pluginName].render(this)},f.prototype._onTextureUpdate=function(){this._uvTransform.texture=this._texture,this.refresh()},f.prototype.multiplyUvs=function(){this.uploadUvTransform||this._uvTransform.multiplyUvs(this.uvs)},f.prototype.refresh=function(d){this.autoUpdate&&this.vertexDirty++,this._uvTransform.update(d)&&this._refresh()},f.prototype._refresh=function(){},f.prototype._calculateBounds=function(){this._bounds.addVertices(this.transform,this.vertices,0,this.vertices.length)},f.prototype.containsPoint=function(d){if(!this.getBounds().contains(d.x,d.y))return!1;this.worldTransform.applyInverse(d,e);for(var m=this.vertices,c=o.points,b=this.indices,y=this.indices.length,T=this.drawMode===f.DRAW_MODES.TRIANGLES?3:1,E=0;E+2<y;E+=T){var R=b[E]*2,S=b[E+1]*2,C=b[E+2]*2;if(c[0]=m[R],c[1]=m[R+1],c[2]=m[S],c[3]=m[S+1],c[4]=m[C],c[5]=m[C+1],o.contains(e.x,e.y))return!0}return!1},f.prototype.destroy=function(d){for(var m in this._glDatas){var c=this._glDatas[m];c.destroy?c.destroy():(c.vertexBuffer&&(c.vertexBuffer.destroy(),c.vertexBuffer=null),c.indexBuffer&&(c.indexBuffer.destroy(),c.indexBuffer=null),c.uvBuffer&&(c.uvBuffer.destroy(),c.uvBuffer=null),c.vao&&(c.vao.destroy(),c.vao=null))}this._glDatas=null,i.prototype.destroy.call(this,d)},w(f,[{key:"texture",get:function(){return this._texture},set:function(d){this._texture!==d&&(this._texture=d,d&&(d.baseTexture.hasLoaded?this._onTextureUpdate():d.once("update",this._onTextureUpdate,this)))}},{key:"tint",get:function(){return g.utils.rgb2hex(this.tintRgb)},set:function(d){this.tintRgb=g.utils.hex2rgb(d,this.tintRgb)}}]),f}(g.Container);p.default=n,n.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},{"../core":65,"../core/textures/Texture":115}],167:[function(_,O,p){p.__esModule=!0;var w=function(){function t(e,o){for(var n=0;n<o.length;n++){var i=o[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),x=_("./Plane"),g=u(x);function u(t){return t&&t.__esModule?t:{default:t}}function v(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function s(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=10,r=function(t){s(e,t);function e(o,n,i,f,l){v(this,e);var d=h(this,t.call(this,o,4,4));return d._origWidth=o.orig.width,d._origHeight=o.orig.height,d._width=d._origWidth,d._height=d._origHeight,d._leftWidth=typeof n<"u"?n:a,d._rightWidth=typeof f<"u"?f:a,d._topHeight=typeof i<"u"?i:a,d._bottomHeight=typeof l<"u"?l:a,d.refresh(!0),d}return e.prototype.updateHorizontalVertices=function(){var n=this.vertices,i=this._topHeight+this._bottomHeight,f=this._height>i?1:this._height/i;n[9]=n[11]=n[13]=n[15]=this._topHeight*f,n[17]=n[19]=n[21]=n[23]=this._height-this._bottomHeight*f,n[25]=n[27]=n[29]=n[31]=this._height},e.prototype.updateVerticalVertices=function(){var n=this.vertices,i=this._leftWidth+this._rightWidth,f=this._width>i?1:this._width/i;n[2]=n[10]=n[18]=n[26]=this._leftWidth*f,n[4]=n[12]=n[20]=n[28]=this._width-this._rightWidth*f,n[6]=n[14]=n[22]=n[30]=this._width},e.prototype._renderCanvas=function(n){var i=n.context;i.globalAlpha=this.worldAlpha,n.setBlendMode(this.blendMode);var f=this.worldTransform,l=n.resolution;n.roundPixels?i.setTransform(f.a*l,f.b*l,f.c*l,f.d*l,f.tx*l|0,f.ty*l|0):i.setTransform(f.a*l,f.b*l,f.c*l,f.d*l,f.tx*l,f.ty*l);var d=this._texture.baseTexture,m=d.source,c=d.width*d.resolution,b=d.height*d.resolution;this.drawSegment(i,m,c,b,0,1,10,11),this.drawSegment(i,m,c,b,2,3,12,13),this.drawSegment(i,m,c,b,4,5,14,15),this.drawSegment(i,m,c,b,8,9,18,19),this.drawSegment(i,m,c,b,10,11,20,21),this.drawSegment(i,m,c,b,12,13,22,23),this.drawSegment(i,m,c,b,16,17,26,27),this.drawSegment(i,m,c,b,18,19,28,29),this.drawSegment(i,m,c,b,20,21,30,31)},e.prototype.drawSegment=function(n,i,f,l,d,m,c,b){var y=this.uvs,T=this.vertices,E=(y[c]-y[d])*f,R=(y[b]-y[m])*l,S=T[c]-T[d],C=T[b]-T[m];E<1&&(E=1),R<1&&(R=1),S<1&&(S=1),C<1&&(C=1),n.drawImage(i,y[d]*f,y[m]*l,E,R,T[d],T[m],S,C)},e.prototype._refresh=function(){t.prototype._refresh.call(this);var n=this.uvs,i=this._texture;this._origWidth=i.orig.width,this._origHeight=i.orig.height;var f=1/this._origWidth,l=1/this._origHeight;n[0]=n[8]=n[16]=n[24]=0,n[1]=n[3]=n[5]=n[7]=0,n[6]=n[14]=n[22]=n[30]=1,n[25]=n[27]=n[29]=n[31]=1,n[2]=n[10]=n[18]=n[26]=f*this._leftWidth,n[4]=n[12]=n[20]=n[28]=1-f*this._rightWidth,n[9]=n[11]=n[13]=n[15]=l*this._topHeight,n[17]=n[19]=n[21]=n[23]=1-l*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.dirty++,this.multiplyUvs()},w(e,[{key:"width",get:function(){return this._width},set:function(n){this._width=n,this._refresh()}},{key:"height",get:function(){return this._height},set:function(n){this._height=n,this._refresh()}},{key:"leftWidth",get:function(){return this._leftWidth},set:function(n){this._leftWidth=n,this._refresh()}},{key:"rightWidth",get:function(){return this._rightWidth},set:function(n){this._rightWidth=n,this._refresh()}},{key:"topHeight",get:function(){return this._topHeight},set:function(n){this._topHeight=n,this._refresh()}},{key:"bottomHeight",get:function(){return this._bottomHeight},set:function(n){this._bottomHeight=n,this._refresh()}}]),e}(g.default);p.default=r},{"./Plane":168}],168:[function(_,O,p){p.__esModule=!0;var w=_("./Mesh"),x=g(w);function g(a){return a&&a.__esModule?a:{default:a}}function u(a,r){if(!(a instanceof r))throw new TypeError("Cannot call a class as a function")}function v(a,r){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&(typeof r=="object"||typeof r=="function")?r:a}function h(a,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof r);a.prototype=Object.create(r&&r.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(a,r):a.__proto__=r)}var s=function(a){h(r,a);function r(t,e,o){u(this,r);var n=v(this,a.call(this,t));return n._ready=!0,n.verticesX=e||10,n.verticesY=o||10,n.drawMode=x.default.DRAW_MODES.TRIANGLES,n.refresh(),n}return r.prototype._refresh=function(){for(var e=this._texture,o=this.verticesX*this.verticesY,n=[],i=[],f=[],l=[],d=this.verticesX-1,m=this.verticesY-1,c=e.width/d,b=e.height/m,y=0;y<o;y++){var T=y%this.verticesX,E=y/this.verticesX|0;n.push(T*c,E*b),f.push(T/d,E/m)}for(var R=d*m,S=0;S<R;S++){var C=S%d,A=S/d|0,k=A*this.verticesX+C,F=A*this.verticesX+C+1,M=(A+1)*this.verticesX+C,D=(A+1)*this.verticesX+C+1;l.push(k,F,M),l.push(F,D,M)}this.vertices=new Float32Array(n),this.uvs=new Float32Array(f),this.colors=new Float32Array(i),this.indices=new Uint16Array(l),this.dirty++,this.indexDirty++,this.multiplyUvs()},r.prototype._onTextureUpdate=function(){x.default.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},r}(x.default);p.default=s},{"./Mesh":166}],169:[function(_,O,p){p.__esModule=!0;var w=_("./Mesh"),x=g(w);function g(a){return a&&a.__esModule?a:{default:a}}function u(a,r){if(!(a instanceof r))throw new TypeError("Cannot call a class as a function")}function v(a,r){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&(typeof r=="object"||typeof r=="function")?r:a}function h(a,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof r);a.prototype=Object.create(r&&r.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(a,r):a.__proto__=r)}var s=function(a){h(r,a);function r(t,e){u(this,r);var o=v(this,a.call(this,t));return o.points=e,o.vertices=new Float32Array(e.length*4),o.uvs=new Float32Array(e.length*4),o.colors=new Float32Array(e.length*2),o.indices=new Uint16Array(e.length*2),o.autoUpdate=!0,o.refresh(),o}return r.prototype._refresh=function(){var e=this.points;if(!(e.length<1||!this._texture._uvs)){this.vertices.length/4!==e.length&&(this.vertices=new Float32Array(e.length*4),this.uvs=new Float32Array(e.length*4),this.colors=new Float32Array(e.length*2),this.indices=new Uint16Array(e.length*2));var o=this.uvs,n=this.indices,i=this.colors;o[0]=0,o[1]=0,o[2]=0,o[3]=1,i[0]=1,i[1]=1,n[0]=0,n[1]=1;for(var f=e.length,l=1;l<f;l++){var d=l*4,m=l/(f-1);o[d]=m,o[d+1]=0,o[d+2]=m,o[d+3]=1,d=l*2,i[d]=1,i[d+1]=1,d=l*2,n[d]=d,n[d+1]=d+1}this.dirty++,this.indexDirty++,this.multiplyUvs(),this.refreshVertices()}},r.prototype.refreshVertices=function(){var e=this.points;if(!(e.length<1))for(var o=e[0],n=void 0,i=0,f=0,l=this.vertices,d=e.length,m=0;m<d;m++){var c=e[m],b=m*4;m<e.length-1?n=e[m+1]:n=c,f=-(n.x-o.x),i=n.y-o.y;var y=Math.sqrt(i*i+f*f),T=this._texture.height/2;i/=y,f/=y,i*=T,f*=T,l[b]=c.x+i,l[b+1]=c.y+f,l[b+2]=c.x-i,l[b+3]=c.y-f,o=c}},r.prototype.updateTransform=function(){this.autoUpdate&&this.refreshVertices(),this.containerUpdateTransform()},r}(x.default);p.default=s},{"./Mesh":166}],170:[function(_,O,p){p.__esModule=!0;var w=_("../../core"),x=h(w),g=_("../Mesh"),u=v(g);function v(r){return r&&r.__esModule?r:{default:r}}function h(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e]);return t.default=r,t}function s(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function r(t){s(this,r),this.renderer=t}return r.prototype.render=function(e){var o=this.renderer,n=o.context,i=e.worldTransform,f=o.resolution;o.roundPixels?n.setTransform(i.a*f,i.b*f,i.c*f,i.d*f,i.tx*f|0,i.ty*f|0):n.setTransform(i.a*f,i.b*f,i.c*f,i.d*f,i.tx*f,i.ty*f),o.context.globalAlpha=e.worldAlpha,o.setBlendMode(e.blendMode),e.drawMode===u.default.DRAW_MODES.TRIANGLE_MESH?this._renderTriangleMesh(e):this._renderTriangles(e)},r.prototype._renderTriangleMesh=function(e){for(var o=e.vertices.length/2,n=0;n<o-2;n++){var i=n*2;this._renderDrawTriangle(e,i,i+2,i+4)}},r.prototype._renderTriangles=function(e){for(var o=e.indices,n=o.length,i=0;i<n;i+=3){var f=o[i]*2,l=o[i+1]*2,d=o[i+2]*2;this._renderDrawTriangle(e,f,l,d)}},r.prototype._renderDrawTriangle=function(e,o,n,i){var f=this.renderer.context,l=e.uvs,d=e.vertices,m=e._texture;if(m.valid){var c=m.baseTexture,b=c.source,y=c.width,T=c.height,E=void 0,R=void 0,S=void 0,C=void 0,A=void 0,k=void 0;if(e.uploadUvTransform){var F=e._uvTransform.mapCoord;E=(l[o]*F.a+l[o+1]*F.c+F.tx)*c.width,R=(l[n]*F.a+l[n+1]*F.c+F.tx)*c.width,S=(l[i]*F.a+l[i+1]*F.c+F.tx)*c.width,C=(l[o]*F.b+l[o+1]*F.d+F.ty)*c.height,A=(l[n]*F.b+l[n+1]*F.d+F.ty)*c.height,k=(l[i]*F.b+l[i+1]*F.d+F.ty)*c.height}else E=l[o]*c.width,R=l[n]*c.width,S=l[i]*c.width,C=l[o+1]*c.height,A=l[n+1]*c.height,k=l[i+1]*c.height;var M=d[o],D=d[n],L=d[i],I=d[o+1],N=d[n+1],U=d[i+1],B=e.canvasPadding/this.renderer.resolution;if(B>0){var X=B/Math.abs(e.worldTransform.a),W=B/Math.abs(e.worldTransform.d),Z=(M+D+L)/3,K=(I+N+U)/3,Q=M-Z,J=I-K,H=Math.sqrt(Q*Q+J*J);M=Z+Q/H*(H+X),I=K+J/H*(H+W),Q=D-Z,J=N-K,H=Math.sqrt(Q*Q+J*J),D=Z+Q/H*(H+X),N=K+J/H*(H+W),Q=L-Z,J=U-K,H=Math.sqrt(Q*Q+J*J),L=Z+Q/H*(H+X),U=K+J/H*(H+W)}f.save(),f.beginPath(),f.moveTo(M,I),f.lineTo(D,N),f.lineTo(L,U),f.closePath(),f.clip();var q=E*A+C*S+R*k-A*S-C*R-E*k,$=M*A+C*L+D*k-A*L-C*D-M*k,ie=E*D+M*S+R*L-D*S-M*R-E*L,ne=E*A*L+C*D*S+M*R*k-M*A*S-C*R*L-E*D*k,ae=I*A+C*U+N*k-A*U-C*N-I*k,se=E*N+I*S+R*U-N*S-I*R-E*U,re=E*A*U+C*N*S+I*R*k-I*A*S-C*R*U-E*N*k;f.transform($/q,ae/q,ie/q,se/q,ne/q,re/q),f.drawImage(b,0,0,y*c.resolution,T*c.resolution,0,0,y,T),f.restore(),this.renderer.invalidateBlendMode()}},r.prototype.renderMeshFlat=function(e){var o=this.renderer.context,n=e.vertices,i=n.length/2;o.beginPath();for(var f=1;f<i-2;++f){var l=f*2,d=n[l],m=n[l+1],c=n[l+2],b=n[l+3],y=n[l+4],T=n[l+5];o.moveTo(d,m),o.lineTo(c,b),o.lineTo(y,T)}o.fillStyle="#FF0000",o.fill(),o.closePath()},r.prototype.destroy=function(){this.renderer=null},r}();p.default=a,x.CanvasRenderer.registerPlugin("mesh",a)},{"../../core":65,"../Mesh":166}],171:[function(_,O,p){p.__esModule=!0;var w=_("./Mesh");Object.defineProperty(p,"Mesh",{enumerable:!0,get:function(){return s(w).default}});var x=_("./webgl/MeshRenderer");Object.defineProperty(p,"MeshRenderer",{enumerable:!0,get:function(){return s(x).default}});var g=_("./canvas/CanvasMeshRenderer");Object.defineProperty(p,"CanvasMeshRenderer",{enumerable:!0,get:function(){return s(g).default}});var u=_("./Plane");Object.defineProperty(p,"Plane",{enumerable:!0,get:function(){return s(u).default}});var v=_("./NineSlicePlane");Object.defineProperty(p,"NineSlicePlane",{enumerable:!0,get:function(){return s(v).default}});var h=_("./Rope");Object.defineProperty(p,"Rope",{enumerable:!0,get:function(){return s(h).default}});function s(a){return a&&a.__esModule?a:{default:a}}},{"./Mesh":166,"./NineSlicePlane":167,"./Plane":168,"./Rope":169,"./canvas/CanvasMeshRenderer":170,"./webgl/MeshRenderer":172}],172:[function(_,O,p){p.__esModule=!0;var w=_("../../core"),x=a(w),g=_("pixi-gl-core"),u=s(g),v=_("../Mesh"),h=s(v);_("path");function s(i){return i&&i.__esModule?i:{default:i}}function a(i){if(i&&i.__esModule)return i;var f={};if(i!=null)for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(f[l]=i[l]);return f.default=i,f}function r(i,f){if(!(i instanceof f))throw new TypeError("Cannot call a class as a function")}function t(i,f){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:i}function e(i,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);i.prototype=Object.create(f&&f.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(i,f):i.__proto__=f)}var o=x.Matrix.IDENTITY,n=function(i){e(f,i);function f(l){r(this,f);var d=t(this,i.call(this,l));return d.shader=null,d}return f.prototype.onContextChange=function(){var d=this.renderer.gl;this.shader=new x.Shader(d,`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`)},f.prototype.render=function(d){var m=this.renderer,c=m.gl,b=d._texture;if(b.valid){var y=d._glDatas[m.CONTEXT_UID];y||(m.bindVao(null),y={shader:this.shader,vertexBuffer:u.default.GLBuffer.createVertexBuffer(c,d.vertices,c.STREAM_DRAW),uvBuffer:u.default.GLBuffer.createVertexBuffer(c,d.uvs,c.STREAM_DRAW),indexBuffer:u.default.GLBuffer.createIndexBuffer(c,d.indices,c.STATIC_DRAW),vao:null,dirty:d.dirty,indexDirty:d.indexDirty,vertexDirty:d.vertexDirty},y.vao=new u.default.VertexArrayObject(c).addIndex(y.indexBuffer).addAttribute(y.vertexBuffer,y.shader.attributes.aVertexPosition,c.FLOAT,!1,2*4,0).addAttribute(y.uvBuffer,y.shader.attributes.aTextureCoord,c.FLOAT,!1,2*4,0),d._glDatas[m.CONTEXT_UID]=y),m.bindVao(y.vao),d.dirty!==y.dirty&&(y.dirty=d.dirty,y.uvBuffer.upload(d.uvs)),d.indexDirty!==y.indexDirty&&(y.indexDirty=d.indexDirty,y.indexBuffer.upload(d.indices)),d.vertexDirty!==y.vertexDirty&&(y.vertexDirty=d.vertexDirty,y.vertexBuffer.upload(d.vertices)),m.bindShader(y.shader),y.shader.uniforms.uSampler=m.bindTexture(b),m.state.setBlendMode(x.utils.correctBlendMode(d.blendMode,b.baseTexture.premultipliedAlpha)),y.shader.uniforms.uTransform&&(d.uploadUvTransform?y.shader.uniforms.uTransform=d._uvTransform.mapCoord.toArray(!0):y.shader.uniforms.uTransform=o.toArray(!0)),y.shader.uniforms.translationMatrix=d.worldTransform.toArray(!0),y.shader.uniforms.uColor=x.utils.premultiplyRgba(d.tintRgb,d.worldAlpha,y.shader.uniforms.uColor,b.baseTexture.premultipliedAlpha);var T=d.drawMode===h.default.DRAW_MODES.TRIANGLE_MESH?c.TRIANGLE_STRIP:c.TRIANGLES;y.vao.draw(T,d.indices.length,0)}},f}(x.ObjectRenderer);p.default=n,x.WebGLRenderer.registerPlugin("mesh",n)},{"../../core":65,"../Mesh":166,path:8,"pixi-gl-core":15}],173:[function(_,O,p){p.__esModule=!0;var w=function(){function t(e,o){for(var n=0;n<o.length;n++){var i=o[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),x=_("../core"),g=v(x),u=_("../core/utils");function v(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e.default=t,e}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function a(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(t){a(e,t);function e(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1500,n=arguments[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:16384,f=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;h(this,e);var l=s(this,t.call(this)),d=16384;return i>d&&(i=d),i>o&&(i=o),l._properties=[!1,!0,!1,!1,!1],l._maxSize=o,l._batchSize=i,l._glBuffers={},l._bufferUpdateIDs=[],l._updateID=0,l.interactiveChildren=!1,l.blendMode=g.BLEND_MODES.NORMAL,l.autoResize=f,l.roundPixels=!0,l.baseTexture=null,l.setProperties(n),l._tint=0,l.tintRgb=new Float32Array(4),l.tint=16777215,l}return e.prototype.setProperties=function(n){n&&(this._properties[0]="vertices"in n||"scale"in n?!!n.vertices||!!n.scale:this._properties[0],this._properties[1]="position"in n?!!n.position:this._properties[1],this._properties[2]="rotation"in n?!!n.rotation:this._properties[2],this._properties[3]="uvs"in n?!!n.uvs:this._properties[3],this._properties[4]="tint"in n||"alpha"in n?!!n.tint||!!n.alpha:this._properties[4])},e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},e.prototype.renderWebGL=function(n){var i=this;!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.hasLoaded||this.baseTexture.once("update",function(){return i.onChildrenChange(0)})),n.setObjectRenderer(n.plugins.particle),n.plugins.particle.render(this))},e.prototype.onChildrenChange=function(n){for(var i=Math.floor(n/this._batchSize);this._bufferUpdateIDs.length<i;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[i]=++this._updateID},e.prototype.renderCanvas=function(n){if(!(!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable)){var i=n.context,f=this.worldTransform,l=!0,d=0,m=0,c=0,b=0;n.setBlendMode(this.blendMode),i.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var y=0;y<this.children.length;++y){var T=this.children[y];if(T.visible){var E=T._texture.frame;if(i.globalAlpha=this.worldAlpha*T.alpha,T.rotation%(Math.PI*2)===0)l&&(i.setTransform(f.a,f.b,f.c,f.d,f.tx*n.resolution,f.ty*n.resolution),l=!1),d=T.anchor.x*(-E.width*T.scale.x)+T.position.x+.5,m=T.anchor.y*(-E.height*T.scale.y)+T.position.y+.5,c=E.width*T.scale.x,b=E.height*T.scale.y;else{l||(l=!0),T.displayObjectUpdateTransform();var R=T.worldTransform;n.roundPixels?i.setTransform(R.a,R.b,R.c,R.d,R.tx*n.resolution|0,R.ty*n.resolution|0):i.setTransform(R.a,R.b,R.c,R.d,R.tx*n.resolution,R.ty*n.resolution),d=T.anchor.x*-E.width+.5,m=T.anchor.y*-E.height+.5,c=E.width,b=E.height}var S=T._texture.baseTexture.resolution;i.drawImage(T._texture.baseTexture.source,E.x*S,E.y*S,E.width*S,E.height*S,d*n.resolution,m*n.resolution,c*n.resolution,b*n.resolution)}}}},e.prototype.destroy=function(n){if(t.prototype.destroy.call(this,n),this._buffers)for(var i=0;i<this._buffers.length;++i)this._buffers[i].destroy();this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},w(e,[{key:"tint",get:function(){return this._tint},set:function(n){this._tint=n,(0,u.hex2rgb)(n,this.tintRgb)}}]),e}(g.Container);p.default=r},{"../core":65,"../core/utils":125}],174:[function(_,O,p){p.__esModule=!0;var w=_("./ParticleContainer");Object.defineProperty(p,"ParticleContainer",{enumerable:!0,get:function(){return g(w).default}});var x=_("./webgl/ParticleRenderer");Object.defineProperty(p,"ParticleRenderer",{enumerable:!0,get:function(){return g(x).default}});function g(u){return u&&u.__esModule?u:{default:u}}},{"./ParticleContainer":173,"./webgl/ParticleRenderer":176}],175:[function(_,O,p){p.__esModule=!0;var w=_("pixi-gl-core"),x=v(w),g=_("../../core/utils/createIndicesForQuads"),u=v(g);function v(a){return a&&a.__esModule?a:{default:a}}function h(a,r){if(!(a instanceof r))throw new TypeError("Cannot call a class as a function")}var s=function(){function a(r,t,e,o){h(this,a),this.gl=r,this.size=o,this.dynamicProperties=[],this.staticProperties=[];for(var n=0;n<t.length;++n){var i=t[n];i={attribute:i.attribute,size:i.size,uploadFunction:i.uploadFunction,unsignedByte:i.unsignedByte,offset:i.offset},e[n]?this.dynamicProperties.push(i):this.staticProperties.push(i)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return a.prototype.initBuffers=function(){var t=this.gl,e=0;this.indices=(0,u.default)(this.size),this.indexBuffer=x.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.dynamicStride=0;for(var o=0;o<this.dynamicProperties.length;++o){var n=this.dynamicProperties[o];n.offset=e,e+=n.size,this.dynamicStride+=n.size}var i=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(i),this.dynamicDataUint32=new Uint32Array(i),this.dynamicBuffer=x.default.GLBuffer.createVertexBuffer(t,i,t.STREAM_DRAW);var f=0;this.staticStride=0;for(var l=0;l<this.staticProperties.length;++l){var d=this.staticProperties[l];d.offset=f,f+=d.size,this.staticStride+=d.size}var m=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(m),this.staticDataUint32=new Uint32Array(m),this.staticBuffer=x.default.GLBuffer.createVertexBuffer(t,m,t.STATIC_DRAW),this.vao=new x.default.VertexArrayObject(t).addIndex(this.indexBuffer);for(var c=0;c<this.dynamicProperties.length;++c){var b=this.dynamicProperties[c];b.unsignedByte?this.vao.addAttribute(this.dynamicBuffer,b.attribute,t.UNSIGNED_BYTE,!0,this.dynamicStride*4,b.offset*4):this.vao.addAttribute(this.dynamicBuffer,b.attribute,t.FLOAT,!1,this.dynamicStride*4,b.offset*4)}for(var y=0;y<this.staticProperties.length;++y){var T=this.staticProperties[y];T.unsignedByte?this.vao.addAttribute(this.staticBuffer,T.attribute,t.UNSIGNED_BYTE,!0,this.staticStride*4,T.offset*4):this.vao.addAttribute(this.staticBuffer,T.attribute,t.FLOAT,!1,this.staticStride*4,T.offset*4)}},a.prototype.uploadDynamic=function(t,e,o){for(var n=0;n<this.dynamicProperties.length;n++){var i=this.dynamicProperties[n];i.uploadFunction(t,e,o,i.unsignedByte?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,i.offset)}this.dynamicBuffer.upload()},a.prototype.uploadStatic=function(t,e,o){for(var n=0;n<this.staticProperties.length;n++){var i=this.staticProperties[n];i.uploadFunction(t,e,o,i.unsignedByte?this.staticDataUint32:this.staticData,this.staticStride,i.offset)}this.staticBuffer.upload()},a.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicBuffer.destroy(),this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer.destroy(),this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null},a}();p.default=s},{"../../core/utils/createIndicesForQuads":123,"pixi-gl-core":15}],176:[function(_,O,p){p.__esModule=!0;var w=_("../../core"),x=r(w),g=_("./ParticleShader"),u=a(g),v=_("./ParticleBuffer"),h=a(v),s=_("../../core/utils");function a(i){return i&&i.__esModule?i:{default:i}}function r(i){if(i&&i.__esModule)return i;var f={};if(i!=null)for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(f[l]=i[l]);return f.default=i,f}function t(i,f){if(!(i instanceof f))throw new TypeError("Cannot call a class as a function")}function e(i,f){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:i}function o(i,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);i.prototype=Object.create(f&&f.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(i,f):i.__proto__=f)}var n=function(i){o(f,i);function f(l){t(this,f);var d=e(this,i.call(this,l));return d.shader=null,d.indexBuffer=null,d.properties=null,d.tempMatrix=new x.Matrix,d.CONTEXT_UID=0,d}return f.prototype.onContextChange=function(){var d=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.shader=new u.default(d),this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,unsignedByte:!0,uploadFunction:this.uploadTint,offset:0}]},f.prototype.start=function(){this.renderer.bindShader(this.shader)},f.prototype.render=function(d){var m=d.children,c=d._maxSize,b=d._batchSize,y=this.renderer,T=m.length;if(T!==0){T>c&&(T=c);var E=d._glBuffers[y.CONTEXT_UID];E||(E=d._glBuffers[y.CONTEXT_UID]=this.generateBuffers(d));var R=m[0]._texture.baseTexture;this.renderer.setBlendMode(x.utils.correctBlendMode(d.blendMode,R.premultipliedAlpha));var S=y.gl,C=d.worldTransform.copy(this.tempMatrix);C.prepend(y._activeRenderTarget.projectionMatrix),this.shader.uniforms.projectionMatrix=C.toArray(!0),this.shader.uniforms.uColor=x.utils.premultiplyRgba(d.tintRgb,d.worldAlpha,this.shader.uniforms.uColor,R.premultipliedAlpha),this.shader.uniforms.uSampler=y.bindTexture(R);for(var A=!1,k=0,F=0;k<T;k+=b,F+=1){var M=T-k;if(M>b&&(M=b),F>=E.length){if(!d.autoResize)break;E.push(this._generateOneMoreBuffer(d))}var D=E[F];D.uploadDynamic(m,k,M);var L=d._bufferUpdateIDs[F]||0;A=A||D._updateID<L,A&&(D._updateID=d._updateID,D.uploadStatic(m,k,M)),y.bindVao(D.vao),D.vao.draw(S.TRIANGLES,M*6)}}},f.prototype.generateBuffers=function(d){for(var m=this.renderer.gl,c=[],b=d._maxSize,y=d._batchSize,T=d._properties,E=0;E<b;E+=y)c.push(new h.default(m,this.properties,T,y));return c},f.prototype._generateOneMoreBuffer=function(d){var m=this.renderer.gl,c=d._batchSize,b=d._properties;return new h.default(m,this.properties,b,c)},f.prototype.uploadVertices=function(d,m,c,b,y,T){for(var E=0,R=0,S=0,C=0,A=0;A<c;++A){var k=d[m+A],F=k._texture,M=k.scale.x,D=k.scale.y,L=F.trim,I=F.orig;L?(R=L.x-k.anchor.x*I.width,E=R+L.width,C=L.y-k.anchor.y*I.height,S=C+L.height):(E=I.width*(1-k.anchor.x),R=I.width*-k.anchor.x,S=I.height*(1-k.anchor.y),C=I.height*-k.anchor.y),b[T]=R*M,b[T+1]=C*D,b[T+y]=E*M,b[T+y+1]=C*D,b[T+y*2]=E*M,b[T+y*2+1]=S*D,b[T+y*3]=R*M,b[T+y*3+1]=S*D,T+=y*4}},f.prototype.uploadPosition=function(d,m,c,b,y,T){for(var E=0;E<c;E++){var R=d[m+E].position;b[T]=R.x,b[T+1]=R.y,b[T+y]=R.x,b[T+y+1]=R.y,b[T+y*2]=R.x,b[T+y*2+1]=R.y,b[T+y*3]=R.x,b[T+y*3+1]=R.y,T+=y*4}},f.prototype.uploadRotation=function(d,m,c,b,y,T){for(var E=0;E<c;E++){var R=d[m+E].rotation;b[T]=R,b[T+y]=R,b[T+y*2]=R,b[T+y*3]=R,T+=y*4}},f.prototype.uploadUvs=function(d,m,c,b,y,T){for(var E=0;E<c;++E){var R=d[m+E]._texture._uvs;R?(b[T]=R.x0,b[T+1]=R.y0,b[T+y]=R.x1,b[T+y+1]=R.y1,b[T+y*2]=R.x2,b[T+y*2+1]=R.y2,b[T+y*3]=R.x3,b[T+y*3+1]=R.y3,T+=y*4):(b[T]=0,b[T+1]=0,b[T+y]=0,b[T+y+1]=0,b[T+y*2]=0,b[T+y*2+1]=0,b[T+y*3]=0,b[T+y*3+1]=0,T+=y*4)}},f.prototype.uploadTint=function(d,m,c,b,y,T){for(var E=0;E<c;++E){var R=d[m+E],S=R._texture.baseTexture.premultipliedAlpha,C=R.alpha,A=C<1&&S?(0,s.premultiplyTint)(R._tintRGB,C):R._tintRGB+(C*255<<24);b[T]=A,b[T+y]=A,b[T+y*2]=A,b[T+y*3]=A,T+=y*4}},f.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),i.prototype.destroy.call(this),this.shader.destroy(),this.indices=null,this.tempMatrix=null},f}(x.ObjectRenderer);p.default=n,x.WebGLRenderer.registerPlugin("particle",n)},{"../../core":65,"../../core/utils":125,"./ParticleBuffer":175,"./ParticleShader":177}],177:[function(_,O,p){p.__esModule=!0;var w=_("../../core/Shader"),x=g(w);function g(a){return a&&a.__esModule?a:{default:a}}function u(a,r){if(!(a instanceof r))throw new TypeError("Cannot call a class as a function")}function v(a,r){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&(typeof r=="object"||typeof r=="function")?r:a}function h(a,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof r);a.prototype=Object.create(r&&r.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(a,r):a.__proto__=r)}var s=function(a){h(r,a);function r(t){return u(this,r),v(this,a.call(this,t,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","attribute vec2 aPositionCoord;","attribute float aRotation;","uniform mat3 projectionMatrix;","uniform vec4 uColor;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   vec2 v = vec2(x, y);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor * uColor;","}"].join(`
`),["varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void){","  vec4 color = texture2D(uSampler, vTextureCoord) * vColor;","  gl_FragColor = color;","}"].join(`
`)))}return r}(x.default);p.default=s},{"../../core/Shader":44}],178:[function(_,O,p){Math.sign||(Math.sign=function(x){return x=Number(x),x===0||isNaN(x)?x:x>0?1:-1})},{}],179:[function(_,O,p){Number.isInteger||(Number.isInteger=function(x){return typeof x=="number"&&isFinite(x)&&Math.floor(x)===x})},{}],180:[function(_,O,p){var w=_("object-assign"),x=g(w);function g(u){return u&&u.__esModule?u:{default:u}}Object.assign||(Object.assign=x.default)},{"object-assign":6}],181:[function(_,O,p){_("./Object.assign"),_("./requestAnimationFrame"),_("./Math.sign"),_("./Number.isInteger"),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array)},{"./Math.sign":178,"./Number.isInteger":179,"./Object.assign":180,"./requestAnimationFrame":182}],182:[function(_,O,p){(function(w){var x=16;if(Date.now&&Date.prototype.getTime||(Date.now=function(){return new Date().getTime()}),!(w.performance&&w.performance.now)){var g=Date.now();w.performance||(w.performance={}),w.performance.now=function(){return Date.now()-g}}for(var u=Date.now(),v=["ms","moz","webkit","o"],h=0;h<v.length&&!w.requestAnimationFrame;++h){var s=v[h];w.requestAnimationFrame=w[s+"RequestAnimationFrame"],w.cancelAnimationFrame=w[s+"CancelAnimationFrame"]||w[s+"CancelRequestAnimationFrame"]}w.requestAnimationFrame||(w.requestAnimationFrame=function(a){if(typeof a!="function")throw new TypeError(a+"is not a function");var r=Date.now(),t=x+u-r;return t<0&&(t=0),u=r,setTimeout(function(){u=Date.now(),a(performance.now())},t)}),w.cancelAnimationFrame||(w.cancelAnimationFrame=function(a){return clearTimeout(a)})}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],183:[function(_,O,p){p.__esModule=!0;var w=_("../core"),x=h(w),g=_("./limiters/CountLimiter"),u=v(g);function v(d){return d&&d.__esModule?d:{default:d}}function h(d){if(d&&d.__esModule)return d;var m={};if(d!=null)for(var c in d)Object.prototype.hasOwnProperty.call(d,c)&&(m[c]=d[c]);return m.default=d,m}function s(d,m){if(!(d instanceof m))throw new TypeError("Cannot call a class as a function")}var a=x.ticker.shared;x.settings.UPLOADS_PER_FRAME=4;var r=function(){function d(m){var c=this;s(this,d),this.limiter=new u.default(x.settings.UPLOADS_PER_FRAME),this.renderer=m,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){c.queue&&c.prepareItems()},this.registerFindHook(f),this.registerFindHook(l),this.registerFindHook(t),this.registerFindHook(e),this.registerFindHook(o),this.registerUploadHook(n),this.registerUploadHook(i)}return d.prototype.upload=function(c,b){typeof c=="function"&&(b=c,c=null),c&&this.add(c),this.queue.length?(b&&this.completes.push(b),this.ticking||(this.ticking=!0,a.addOnce(this.tick,this,x.UPDATE_PRIORITY.UTILITY))):b&&b()},d.prototype.tick=function(){setTimeout(this.delayedTick,0)},d.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var c=this.queue[0],b=!1;if(c&&!c._destroyed){for(var y=0,T=this.uploadHooks.length;y<T;y++)if(this.uploadHooks[y](this.uploadHookHelper,c)){this.queue.shift(),b=!0;break}}b||this.queue.shift()}if(this.queue.length)a.addOnce(this.tick,this,x.UPDATE_PRIORITY.UTILITY);else{this.ticking=!1;var E=this.completes.slice(0);this.completes.length=0;for(var R=0,S=E.length;R<S;R++)E[R]()}},d.prototype.registerFindHook=function(c){return c&&this.addHooks.push(c),this},d.prototype.registerUploadHook=function(c){return c&&this.uploadHooks.push(c),this},d.prototype.add=function(c){for(var b=0,y=this.addHooks.length;b<y&&!this.addHooks[b](c,this.queue);b++);if(c instanceof x.Container)for(var T=c.children.length-1;T>=0;T--)this.add(c.children[T]);return this},d.prototype.destroy=function(){this.ticking&&a.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},d}();p.default=r;function t(d,m){var c=!1;if(d&&d._textures&&d._textures.length){for(var b=0;b<d._textures.length;b++)if(d._textures[b]instanceof x.Texture){var y=d._textures[b].baseTexture;m.indexOf(y)===-1&&(m.push(y),c=!0)}}return c}function e(d,m){return d instanceof x.BaseTexture?(m.indexOf(d)===-1&&m.push(d),!0):!1}function o(d,m){if(d._texture&&d._texture instanceof x.Texture){var c=d._texture.baseTexture;return m.indexOf(c)===-1&&m.push(c),!0}return!1}function n(d,m){return m instanceof x.Text?(m.updateText(!0),!0):!1}function i(d,m){if(m instanceof x.TextStyle){var c=m.toFontString();return x.TextMetrics.measureFont(c),!0}return!1}function f(d,m){if(d instanceof x.Text){m.indexOf(d.style)===-1&&m.push(d.style),m.indexOf(d)===-1&&m.push(d);var c=d._texture.baseTexture;return m.indexOf(c)===-1&&m.push(c),!0}return!1}function l(d,m){return d instanceof x.TextStyle?(m.indexOf(d)===-1&&m.push(d),!0):!1}},{"../core":65,"./limiters/CountLimiter":186}],184:[function(_,O,p){p.__esModule=!0;var w=_("../../core"),x=h(w),g=_("../BasePrepare"),u=v(g);function v(n){return n&&n.__esModule?n:{default:n}}function h(n){if(n&&n.__esModule)return n;var i={};if(n!=null)for(var f in n)Object.prototype.hasOwnProperty.call(n,f)&&(i[f]=n[f]);return i.default=n,i}function s(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}function a(n,i){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i&&(typeof i=="object"||typeof i=="function")?i:n}function r(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);n.prototype=Object.create(i&&i.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(n,i):n.__proto__=i)}var t=16,e=function(n){r(i,n);function i(f){s(this,i);var l=a(this,n.call(this,f));return l.uploadHookHelper=l,l.canvas=document.createElement("canvas"),l.canvas.width=t,l.canvas.height=t,l.ctx=l.canvas.getContext("2d"),l.registerUploadHook(o),l}return i.prototype.destroy=function(){n.prototype.destroy.call(this),this.ctx=null,this.canvas=null},i}(u.default);p.default=e;function o(n,i){if(i instanceof x.BaseTexture){var f=i.source,l=f.width===0?n.canvas.width:Math.min(n.canvas.width,f.width),d=f.height===0?n.canvas.height:Math.min(n.canvas.height,f.height);return n.ctx.drawImage(f,0,0,l,d,0,0,n.canvas.width,n.canvas.height),!0}return!1}x.CanvasRenderer.registerPlugin("prepare",e)},{"../../core":65,"../BasePrepare":183}],185:[function(_,O,p){p.__esModule=!0;var w=_("./webgl/WebGLPrepare");Object.defineProperty(p,"webgl",{enumerable:!0,get:function(){return h(w).default}});var x=_("./canvas/CanvasPrepare");Object.defineProperty(p,"canvas",{enumerable:!0,get:function(){return h(x).default}});var g=_("./BasePrepare");Object.defineProperty(p,"BasePrepare",{enumerable:!0,get:function(){return h(g).default}});var u=_("./limiters/CountLimiter");Object.defineProperty(p,"CountLimiter",{enumerable:!0,get:function(){return h(u).default}});var v=_("./limiters/TimeLimiter");Object.defineProperty(p,"TimeLimiter",{enumerable:!0,get:function(){return h(v).default}});function h(s){return s&&s.__esModule?s:{default:s}}},{"./BasePrepare":183,"./canvas/CanvasPrepare":184,"./limiters/CountLimiter":186,"./limiters/TimeLimiter":187,"./webgl/WebGLPrepare":188}],186:[function(_,O,p){p.__esModule=!0;function w(g,u){if(!(g instanceof u))throw new TypeError("Cannot call a class as a function")}var x=function(){function g(u){w(this,g),this.maxItemsPerFrame=u,this.itemsLeft=0}return g.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},g.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},g}();p.default=x},{}],187:[function(_,O,p){p.__esModule=!0;function w(g,u){if(!(g instanceof u))throw new TypeError("Cannot call a class as a function")}var x=function(){function g(u){w(this,g),this.maxMilliseconds=u,this.frameStart=0}return g.prototype.beginFrame=function(){this.frameStart=Date.now()},g.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},g}();p.default=x},{}],188:[function(_,O,p){p.__esModule=!0;var w=_("../../core"),x=h(w),g=_("../BasePrepare"),u=v(g);function v(i){return i&&i.__esModule?i:{default:i}}function h(i){if(i&&i.__esModule)return i;var f={};if(i!=null)for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(f[l]=i[l]);return f.default=i,f}function s(i,f){if(!(i instanceof f))throw new TypeError("Cannot call a class as a function")}function a(i,f){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:i}function r(i,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);i.prototype=Object.create(f&&f.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(i,f):i.__proto__=f)}var t=function(i){r(f,i);function f(l){s(this,f);var d=a(this,i.call(this,l));return d.uploadHookHelper=d.renderer,d.registerFindHook(n),d.registerUploadHook(e),d.registerUploadHook(o),d}return f}(u.default);p.default=t;function e(i,f){return f instanceof x.BaseTexture?(f._glTextures[i.CONTEXT_UID]||i.textureManager.updateTexture(f),!0):!1}function o(i,f){return f instanceof x.Graphics?((f.dirty||f.clearDirty||!f._webGL[i.plugins.graphics.CONTEXT_UID])&&i.plugins.graphics.updateGraphics(f),!0):!1}function n(i,f){return i instanceof x.Graphics?(f.push(i),!0):!1}x.WebGLRenderer.registerPlugin("prepare",t)},{"../../core":65,"../BasePrepare":183}],189:[function(_,O,p){(function(w){p.__esModule=!0,p.loader=p.prepare=p.particles=p.mesh=p.loaders=p.interaction=p.filters=p.extras=p.extract=p.accessibility=void 0;var x=_("./polyfill");Object.keys(x).forEach(function(A){A==="default"||A==="__esModule"||Object.defineProperty(p,A,{enumerable:!0,get:function(){return x[A]}})});var g=_("./core");Object.keys(g).forEach(function(A){A==="default"||A==="__esModule"||Object.defineProperty(p,A,{enumerable:!0,get:function(){return g[A]}})});var u=_("./deprecation"),v=S(u),h=_("./accessibility"),s=R(h),a=_("./extract"),r=R(a),t=_("./extras"),e=R(t),o=_("./filters"),n=R(o),i=_("./interaction"),f=R(i),l=_("./loaders"),d=R(l),m=_("./mesh"),c=R(m),b=_("./particles"),y=R(b),T=_("./prepare"),E=R(T);function R(A){if(A&&A.__esModule)return A;var k={};if(A!=null)for(var F in A)Object.prototype.hasOwnProperty.call(A,F)&&(k[F]=A[F]);return k.default=A,k}function S(A){return A&&A.__esModule?A:{default:A}}g.utils.mixins.performMixins();var C=d.shared||null;p.accessibility=s,p.extract=r,p.extras=e,p.filters=n,p.interaction=f,p.loaders=d,p.mesh=c,p.particles=y,p.prepare=E,p.loader=C,typeof v.default=="function"&&(0,v.default)(p),w.PIXI=p}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./accessibility":42,"./core":65,"./deprecation":131,"./extract":133,"./extras":141,"./filters":153,"./interaction":159,"./loaders":162,"./mesh":171,"./particles":174,"./polyfill":181,"./prepare":185}]},{},[189])(189)});/*!
 * pixi-filters - v2.6.1
 * Compiled Thu, 03 May 2018 14:20:43 UTC
 *
 * pixi-filters is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Ut=function(_,O){var p=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,w=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform float gamma;
uniform float contrast;
uniform float saturation;
uniform float brightness;
uniform float red;
uniform float green;
uniform float blue;
uniform float alpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (c.a > 0.0) {
        c.rgb /= c.a;

        vec3 rgb = pow(c.rgb, vec3(1. / gamma));
        rgb = mix(vec3(.5), mix(vec3(dot(vec3(.2125, .7154, .0721), rgb)), rgb, saturation), contrast);
        rgb.r *= red;
        rgb.g *= green;
        rgb.b *= blue;
        c.rgb = rgb * brightness;

        c.rgb *= c.a;
    }

    gl_FragColor = c * alpha;
}
`,x=function(Y){function z(G){Y.call(this,p,w),Object.assign(this,{gamma:1,saturation:1,contrast:1,brightness:1,red:1,green:1,blue:1,alpha:1},G)}return Y&&(z.__proto__=Y),z.prototype=Object.create(Y&&Y.prototype),z.prototype.constructor=z,z.prototype.apply=function(G,P,V,j){this.uniforms.gamma=Math.max(this.gamma,1e-4),this.uniforms.saturation=this.saturation,this.uniforms.contrast=this.contrast,this.uniforms.brightness=this.brightness,this.uniforms.red=this.red,this.uniforms.green=this.green,this.uniforms.blue=this.blue,this.uniforms.alpha=this.alpha,G.applyFilter(this,P,V,j)},z}(O.Filter),g=p,u=`
varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec2 uOffset;

void main(void)
{
    vec4 color = vec4(0.0);

    // Sample top left pixel
    color += texture2D(uSampler, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y));

    // Sample top right pixel
    color += texture2D(uSampler, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y));

    // Sample bottom right pixel
    color += texture2D(uSampler, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y));

    // Sample bottom left pixel
    color += texture2D(uSampler, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y));

    // Average
    color *= 0.25;

    gl_FragColor = color;
}`,v=`
varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec2 uOffset;
uniform vec4 filterClamp;

void main(void)
{
    vec4 color = vec4(0.0);

    // Sample top left pixel
    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));

    // Sample top right pixel
    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));

    // Sample bottom right pixel
    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));

    // Sample bottom left pixel
    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));

    // Average
    color *= 0.25;

    gl_FragColor = color;
}
`,h=function(Y){function z(P,V,j){P===void 0&&(P=4),V===void 0&&(V=3),j===void 0&&(j=!1),Y.call(this,g,j?v:u),this.uniforms.uOffset=new Float32Array(2),this._pixelSize=new O.Point,this.pixelSize=1,this._clamp=j,this._kernels=null,Array.isArray(P)?this.kernels=P:(this._blur=P,this.quality=V)}Y&&(z.__proto__=Y),z.prototype=Object.create(Y&&Y.prototype),z.prototype.constructor=z;var G={kernels:{configurable:!0},clamp:{configurable:!0},pixelSize:{configurable:!0},quality:{configurable:!0},blur:{configurable:!0}};return z.prototype.apply=function(P,V,j,te){var oe,le=this.pixelSize.x/V.size.width,fe=this.pixelSize.y/V.size.height;if(this._quality===1||this._blur===0)oe=this._kernels[0]+.5,this.uniforms.uOffset[0]=oe*le,this.uniforms.uOffset[1]=oe*fe,P.applyFilter(this,V,j,te);else{for(var ge,Ee=P.getRenderTarget(!0),xe=V,Ie=Ee,Be=this._quality-1,ke=0;ke<Be;ke++)oe=this._kernels[ke]+.5,this.uniforms.uOffset[0]=oe*le,this.uniforms.uOffset[1]=oe*fe,P.applyFilter(this,xe,Ie,!0),ge=xe,xe=Ie,Ie=ge;oe=this._kernels[Be]+.5,this.uniforms.uOffset[0]=oe*le,this.uniforms.uOffset[1]=oe*fe,P.applyFilter(this,xe,j,te),P.returnRenderTarget(Ee)}},z.prototype._generateKernels=function(){var P=this._blur,V=this._quality,j=[P];if(P>0)for(var te=P,oe=P/V,le=1;le<V;le++)te-=oe,j.push(te);this._kernels=j},G.kernels.get=function(){return this._kernels},G.kernels.set=function(P){Array.isArray(P)&&P.length>0?(this._kernels=P,this._quality=P.length,this._blur=Math.max.apply(Math,P)):(this._kernels=[0],this._quality=1)},G.clamp.get=function(){return this._clamp},G.pixelSize.set=function(P){typeof P=="number"?(this._pixelSize.x=P,this._pixelSize.y=P):Array.isArray(P)?(this._pixelSize.x=P[0],this._pixelSize.y=P[1]):P instanceof O.Point?(this._pixelSize.x=P.x,this._pixelSize.y=P.y):(this._pixelSize.x=1,this._pixelSize.y=1)},G.pixelSize.get=function(){return this._pixelSize},G.quality.get=function(){return this._quality},G.quality.set=function(P){this._quality=Math.max(1,Math.round(P)),this._generateKernels()},G.blur.get=function(){return this._blur},G.blur.set=function(P){this._blur=P,this._generateKernels()},Object.defineProperties(z.prototype,G),z}(O.Filter),s=p,a=`
uniform sampler2D uSampler;
varying vec2 vTextureCoord;

uniform float threshold;

void main() {
    vec4 color = texture2D(uSampler, vTextureCoord);

    // A simple & fast algorithm for getting brightness.
    // It's inaccuracy , but good enought for this feature.
    float _max = max(max(color.r, color.g), color.b);
    float _min = min(min(color.r, color.g), color.b);
    float brightness = (_max + _min) * 0.5;

    if(brightness > threshold) {
        gl_FragColor = color;
    } else {
        gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
    }
}
`,r=function(Y){function z(P){P===void 0&&(P=.5),Y.call(this,s,a),this.threshold=P}Y&&(z.__proto__=Y),z.prototype=Object.create(Y&&Y.prototype),z.prototype.constructor=z;var G={threshold:{configurable:!0}};return G.threshold.get=function(){return this.uniforms.threshold},G.threshold.set=function(P){this.uniforms.threshold=P},Object.defineProperties(z.prototype,G),z}(O.Filter),t=`uniform sampler2D uSampler;
varying vec2 vTextureCoord;

uniform sampler2D bloomTexture;
uniform float bloomScale;
uniform float brightness;

void main() {
    vec4 color = texture2D(uSampler, vTextureCoord);
    color.rgb *= brightness;
    vec4 bloomColor = vec4(texture2D(bloomTexture, vTextureCoord).rgb, 0.0);
    bloomColor.rgb *= bloomScale;
    gl_FragColor = color + bloomColor;
}
`,e=function(Y){function z(P){Y.call(this,s,t),typeof P=="number"&&(P={threshold:P}),P=Object.assign({threshold:.5,bloomScale:1,brightness:1,kernels:null,blur:8,quality:4,pixelSize:1,resolution:O.settings.RESOLUTION},P),this.bloomScale=P.bloomScale,this.brightness=P.brightness;var V=P.kernels,j=P.blur,te=P.quality,oe=P.pixelSize,le=P.resolution;this._extractFilter=new r(P.threshold),this._extractFilter.resolution=le,this._blurFilter=V?new h(V):new h(j,te),this.pixelSize=oe,this.resolution=le}Y&&(z.__proto__=Y),z.prototype=Object.create(Y&&Y.prototype),z.prototype.constructor=z;var G={resolution:{configurable:!0},threshold:{configurable:!0},kernels:{configurable:!0},blur:{configurable:!0},quality:{configurable:!0},pixelSize:{configurable:!0}};return z.prototype.apply=function(P,V,j,te,oe){var le=P.getRenderTarget(!0);this._extractFilter.apply(P,V,le,!0,oe);var fe=P.getRenderTarget(!0);this._blurFilter.apply(P,le,fe,!0,oe),this.uniforms.bloomScale=this.bloomScale,this.uniforms.brightness=this.brightness,this.uniforms.bloomTexture=fe,P.applyFilter(this,V,j,te),P.returnRenderTarget(fe),P.returnRenderTarget(le)},G.resolution.get=function(){return this._resolution},G.resolution.set=function(P){this._resolution=P,this._extractFilter&&(this._extractFilter.resolution=P),this._blurFilter&&(this._blurFilter.resolution=P)},G.threshold.get=function(){return this._extractFilter.threshold},G.threshold.set=function(P){this._extractFilter.threshold=P},G.kernels.get=function(){return this._blurFilter.kernels},G.kernels.set=function(P){this._blurFilter.kernels=P},G.blur.get=function(){return this._blurFilter.blur},G.blur.set=function(P){this._blurFilter.blur=P},G.quality.get=function(){return this._blurFilter.quality},G.quality.set=function(P){this._blurFilter.quality=P},G.pixelSize.get=function(){return this._blurFilter.pixelSize},G.pixelSize.set=function(P){this._blurFilter.pixelSize=P},Object.defineProperties(z.prototype,G),z}(O.Filter),o=p,n=`varying vec2 vTextureCoord;

uniform vec4 filterArea;
uniform float pixelSize;
uniform sampler2D uSampler;

vec2 mapCoord( vec2 coord )
{
    coord *= filterArea.xy;
    coord += filterArea.zw;

    return coord;
}

vec2 unmapCoord( vec2 coord )
{
    coord -= filterArea.zw;
    coord /= filterArea.xy;

    return coord;
}

vec2 pixelate(vec2 coord, vec2 size)
{
    return floor( coord / size ) * size;
}

vec2 getMod(vec2 coord, vec2 size)
{
    return mod( coord , size) / size;
}

float character(float n, vec2 p)
{
    p = floor(p*vec2(4.0, -4.0) + 2.5);
    if (clamp(p.x, 0.0, 4.0) == p.x && clamp(p.y, 0.0, 4.0) == p.y)
    {
        if (int(mod(n/exp2(p.x + 5.0*p.y), 2.0)) == 1) return 1.0;
    }
    return 0.0;
}

void main()
{
    vec2 coord = mapCoord(vTextureCoord);

    // get the rounded color..
    vec2 pixCoord = pixelate(coord, vec2(pixelSize));
    pixCoord = unmapCoord(pixCoord);

    vec4 color = texture2D(uSampler, pixCoord);

    // determine the character to use
    float gray = (color.r + color.g + color.b) / 3.0;

    float n =  65536.0;             // .
    if (gray > 0.2) n = 65600.0;    // :
    if (gray > 0.3) n = 332772.0;   // *
    if (gray > 0.4) n = 15255086.0; // o
    if (gray > 0.5) n = 23385164.0; // &
    if (gray > 0.6) n = 15252014.0; // 8
    if (gray > 0.7) n = 13199452.0; // @
    if (gray > 0.8) n = 11512810.0; // #

    // get the mod..
    vec2 modd = getMod(coord, vec2(pixelSize));

    gl_FragColor = color * character( n, vec2(-1.0) + modd * 2.0);

}`,i=function(Y){function z(P){P===void 0&&(P=8),Y.call(this,o,n),this.size=P}Y&&(z.__proto__=Y),z.prototype=Object.create(Y&&Y.prototype),z.prototype.constructor=z;var G={size:{configurable:!0}};return G.size.get=function(){return this.uniforms.pixelSize},G.size.set=function(P){this.uniforms.pixelSize=P},Object.defineProperties(z.prototype,G),z}(O.Filter),f=p,l=`precision mediump float;

varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;

uniform float transformX;
uniform float transformY;
uniform vec3 lightColor;
uniform float lightAlpha;
uniform vec3 shadowColor;
uniform float shadowAlpha;

void main(void) {
    vec2 transform = vec2(1.0 / filterArea) * vec2(transformX, transformY);
    vec4 color = texture2D(uSampler, vTextureCoord);
    float light = texture2D(uSampler, vTextureCoord - transform).a;
    float shadow = texture2D(uSampler, vTextureCoord + transform).a;

    color.rgb = mix(color.rgb, lightColor, clamp((color.a - light) * lightAlpha, 0.0, 1.0));
    color.rgb = mix(color.rgb, shadowColor, clamp((color.a - shadow) * shadowAlpha, 0.0, 1.0));
    gl_FragColor = vec4(color.rgb * color.a, color.a);
}
`,d=function(Y){function z(P){P===void 0&&(P={}),Y.call(this,f,l),this.uniforms.lightColor=new Float32Array(3),this.uniforms.shadowColor=new Float32Array(3),P=Object.assign({rotation:45,thickness:2,lightColor:16777215,lightAlpha:.7,shadowColor:0,shadowAlpha:.7},P),this.rotation=P.rotation,this.thickness=P.thickness,this.lightColor=P.lightColor,this.lightAlpha=P.lightAlpha,this.shadowColor=P.shadowColor,this.shadowAlpha=P.shadowAlpha}Y&&(z.__proto__=Y),z.prototype=Object.create(Y&&Y.prototype),z.prototype.constructor=z;var G={rotation:{configurable:!0},thickness:{configurable:!0},lightColor:{configurable:!0},lightAlpha:{configurable:!0},shadowColor:{configurable:!0},shadowAlpha:{configurable:!0}};return z.prototype._updateTransform=function(){this.uniforms.transformX=this._thickness*Math.cos(this._angle),this.uniforms.transformY=this._thickness*Math.sin(this._angle)},G.rotation.get=function(){return this._angle/O.DEG_TO_RAD},G.rotation.set=function(P){this._angle=P*O.DEG_TO_RAD,this._updateTransform()},G.thickness.get=function(){return this._thickness},G.thickness.set=function(P){this._thickness=P,this._updateTransform()},G.lightColor.get=function(){return O.utils.rgb2hex(this.uniforms.lightColor)},G.lightColor.set=function(P){O.utils.hex2rgb(P,this.uniforms.lightColor)},G.lightAlpha.get=function(){return this.uniforms.lightAlpha},G.lightAlpha.set=function(P){this.uniforms.lightAlpha=P},G.shadowColor.get=function(){return O.utils.rgb2hex(this.uniforms.shadowColor)},G.shadowColor.set=function(P){O.utils.hex2rgb(P,this.uniforms.shadowColor)},G.shadowAlpha.get=function(){return this.uniforms.shadowAlpha},G.shadowAlpha.set=function(P){this.uniforms.shadowAlpha=P},Object.defineProperties(z.prototype,G),z}(O.Filter),m=O.filters,c=m.BlurXFilter,b=m.BlurYFilter,y=m.AlphaFilter,T=function(Y){function z(P,V,j,te){var oe,le;P===void 0&&(P=2),V===void 0&&(V=4),j===void 0&&(j=O.settings.RESOLUTION),te===void 0&&(te=5),Y.call(this),typeof P=="number"?(oe=P,le=P):P instanceof O.Point?(oe=P.x,le=P.y):Array.isArray(P)&&(oe=P[0],le=P[1]),this.blurXFilter=new c(oe,V,j,te),this.blurYFilter=new b(le,V,j,te),this.blurYFilter.blendMode=O.BLEND_MODES.SCREEN,this.defaultFilter=new y}Y&&(z.__proto__=Y),z.prototype=Object.create(Y&&Y.prototype),z.prototype.constructor=z;var G={blur:{configurable:!0},blurX:{configurable:!0},blurY:{configurable:!0}};return z.prototype.apply=function(P,V,j){var te=P.getRenderTarget(!0);this.defaultFilter.apply(P,V,j),this.blurXFilter.apply(P,V,te),this.blurYFilter.apply(P,te,j),P.returnRenderTarget(te)},G.blur.get=function(){return this.blurXFilter.blur},G.blur.set=function(P){this.blurXFilter.blur=this.blurYFilter.blur=P},G.blurX.get=function(){return this.blurXFilter.blur},G.blurX.set=function(P){this.blurXFilter.blur=P},G.blurY.get=function(){return this.blurYFilter.blur},G.blurY.set=function(P){this.blurYFilter.blur=P},Object.defineProperties(z.prototype,G),z}(O.Filter),E=p,R=`uniform float radius;
uniform float strength;
uniform vec2 center;
uniform sampler2D uSampler;
varying vec2 vTextureCoord;

uniform vec4 filterArea;
uniform vec4 filterClamp;
uniform vec2 dimensions;

void main()
{
    vec2 coord = vTextureCoord * filterArea.xy;
    coord -= center * dimensions.xy;
    float distance = length(coord);
    if (distance < radius) {
        float percent = distance / radius;
        if (strength > 0.0) {
            coord *= mix(1.0, smoothstep(0.0, radius / distance, percent), strength * 0.75);
        } else {
            coord *= mix(1.0, pow(percent, 1.0 + strength * 0.75) * radius / distance, 1.0 - percent);
        }
    }
    coord += center * dimensions.xy;
    coord /= filterArea.xy;
    vec2 clampedCoord = clamp(coord, filterClamp.xy, filterClamp.zw);
    vec4 color = texture2D(uSampler, clampedCoord);
    if (coord != clampedCoord) {
        color *= max(0.0, 1.0 - length(coord - clampedCoord));
    }

    gl_FragColor = color;
}
`,S=function(Y){function z(P,V,j){Y.call(this,E,R),this.uniforms.dimensions=new Float32Array(2),this.center=P||[.5,.5],this.radius=V||100,this.strength=j||1}Y&&(z.__proto__=Y),z.prototype=Object.create(Y&&Y.prototype),z.prototype.constructor=z;var G={radius:{configurable:!0},strength:{configurable:!0},center:{configurable:!0}};return z.prototype.apply=function(P,V,j,te){this.uniforms.dimensions[0]=V.sourceFrame.width,this.uniforms.dimensions[1]=V.sourceFrame.height,P.applyFilter(this,V,j,te)},G.radius.get=function(){return this.uniforms.radius},G.radius.set=function(P){this.uniforms.radius=P},G.strength.get=function(){return this.uniforms.strength},G.strength.set=function(P){this.uniforms.strength=P},G.center.get=function(){return this.uniforms.center},G.center.set=function(P){this.uniforms.center=P},Object.defineProperties(z.prototype,G),z}(O.Filter),C=p,A=`
varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform sampler2D colorMap;

uniform float _mix;
uniform float _size;
uniform float _sliceSize;
uniform float _slicePixelSize;
uniform float _sliceInnerSize;

void main() {
    vec4 color = texture2D(uSampler, vTextureCoord.xy);

    float sliceIndex = color.b * (_size - 1.0);
    float zSlice0 = floor(sliceIndex);
    float zSlice1 = ceil(sliceIndex);

    float xOffset = _slicePixelSize * 0.5 + color.r * _sliceInnerSize;
    float s0 = xOffset + zSlice0 * _sliceSize;
    float s1 = xOffset + zSlice1 * _sliceSize;
    vec4 slice0Color = texture2D(colorMap, vec2(s0, color.g));
    vec4 slice1Color = texture2D(colorMap, vec2(s1, color.g));
    vec4 adjusted = mix(slice0Color, slice1Color, fract(sliceIndex));

    gl_FragColor = mix(color, adjusted, _mix);
}
`,k=function(Y){function z(P,V,j){V===void 0&&(V=!1),j===void 0&&(j=1),Y.call(this,C,A),this._size=0,this._sliceSize=0,this._slicePixelSize=0,this._sliceInnerSize=0,this._scaleMode=null,this._nearest=!1,this.nearest=V,this.mix=j,this.colorMap=P}Y&&(z.__proto__=Y),z.prototype=Object.create(Y&&Y.prototype),z.prototype.constructor=z;var G={colorSize:{configurable:!0},colorMap:{configurable:!0},nearest:{configurable:!0}};return z.prototype.apply=function(P,V,j,te){this.uniforms._mix=this.mix,P.applyFilter(this,V,j,te)},G.colorSize.get=function(){return this._size},G.colorMap.get=function(){return this._colorMap},G.colorMap.set=function(P){P instanceof O.Texture||(P=O.Texture.from(P)),P&&P.baseTexture&&(P.baseTexture.scaleMode=this._scaleMode,P.baseTexture.mipmap=!1,this._size=P.height,this._sliceSize=1/this._size,this._slicePixelSize=this._sliceSize/this._size,this._sliceInnerSize=this._slicePixelSize*(this._size-1),this.uniforms._size=this._size,this.uniforms._sliceSize=this._sliceSize,this.uniforms._slicePixelSize=this._slicePixelSize,this.uniforms._sliceInnerSize=this._sliceInnerSize,this.uniforms.colorMap=P),this._colorMap=P},G.nearest.get=function(){return this._nearest},G.nearest.set=function(P){this._nearest=P,this._scaleMode=P?O.SCALE_MODES.NEAREST:O.SCALE_MODES.LINEAR;var V=this._colorMap;V&&V.baseTexture&&(V.baseTexture._glTextures={},V.baseTexture.scaleMode=this._scaleMode,V.baseTexture.mipmap=!1,V._updateID++,V.baseTexture.emit("update",V.baseTexture))},z.prototype.updateColorMap=function(){var P=this._colorMap;P&&P.baseTexture&&(P._updateID++,P.baseTexture.emit("update",P.baseTexture),this.colorMap=P)},z.prototype.destroy=function(P){this._colorMap&&this._colorMap.destroy(P),Y.prototype.destroy.call(this)},Object.defineProperties(z.prototype,G),z}(O.Filter),F=p,M=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec3 originalColor;
uniform vec3 newColor;
uniform float epsilon;
void main(void) {
    vec4 currentColor = texture2D(uSampler, vTextureCoord);
    vec3 colorDiff = originalColor - (currentColor.rgb / max(currentColor.a, 0.0000000001));
    float colorDistance = length(colorDiff);
    float doReplace = step(colorDistance, epsilon);
    gl_FragColor = vec4(mix(currentColor.rgb, (newColor + colorDiff) * currentColor.a, doReplace), currentColor.a);
}
`,D=function(Y){function z(P,V,j){P===void 0&&(P=16711680),V===void 0&&(V=0),j===void 0&&(j=.4),Y.call(this,F,M),this.uniforms.originalColor=new Float32Array(3),this.uniforms.newColor=new Float32Array(3),this.originalColor=P,this.newColor=V,this.epsilon=j}Y&&(z.__proto__=Y),z.prototype=Object.create(Y&&Y.prototype),z.prototype.constructor=z;var G={originalColor:{configurable:!0},newColor:{configurable:!0},epsilon:{configurable:!0}};return G.originalColor.set=function(P){var V=this.uniforms.originalColor;typeof P=="number"?(O.utils.hex2rgb(P,V),this._originalColor=P):(V[0]=P[0],V[1]=P[1],V[2]=P[2],this._originalColor=O.utils.rgb2hex(V))},G.originalColor.get=function(){return this._originalColor},G.newColor.set=function(P){var V=this.uniforms.newColor;typeof P=="number"?(O.utils.hex2rgb(P,V),this._newColor=P):(V[0]=P[0],V[1]=P[1],V[2]=P[2],this._newColor=O.utils.rgb2hex(V))},G.newColor.get=function(){return this._newColor},G.epsilon.set=function(P){this.uniforms.epsilon=P},G.epsilon.get=function(){return this.uniforms.epsilon},Object.defineProperties(z.prototype,G),z}(O.Filter),L=p,I=`precision mediump float;

varying mediump vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec2 texelSize;
uniform float matrix[9];

void main(void)
{
   vec4 c11 = texture2D(uSampler, vTextureCoord - texelSize); // top left
   vec4 c12 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - texelSize.y)); // top center
   vec4 c13 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y - texelSize.y)); // top right

   vec4 c21 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y)); // mid left
   vec4 c22 = texture2D(uSampler, vTextureCoord); // mid center
   vec4 c23 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y)); // mid right

   vec4 c31 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y + texelSize.y)); // bottom left
   vec4 c32 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + texelSize.y)); // bottom center
   vec4 c33 = texture2D(uSampler, vTextureCoord + texelSize); // bottom right

   gl_FragColor =
       c11 * matrix[0] + c12 * matrix[1] + c13 * matrix[2] +
       c21 * matrix[3] + c22 * matrix[4] + c23 * matrix[5] +
       c31 * matrix[6] + c32 * matrix[7] + c33 * matrix[8];

   gl_FragColor.a = c22.a;
}
`,N=function(Y){function z(P,V,j){Y.call(this,L,I),this.uniforms.texelSize=new Float32Array(9),this.matrix=P,this.width=V,this.height=j}Y&&(z.__proto__=Y),z.prototype=Object.create(Y&&Y.prototype),z.prototype.constructor=z;var G={matrix:{configurable:!0},width:{configurable:!0},height:{configurable:!0}};return G.matrix.get=function(){return this.uniforms.matrix},G.matrix.set=function(P){this.uniforms.matrix=new Float32Array(P)},G.width.get=function(){return 1/this.uniforms.texelSize[0]},G.width.set=function(P){this.uniforms.texelSize[0]=1/P},G.height.get=function(){return 1/this.uniforms.texelSize[1]},G.height.set=function(P){this.uniforms.texelSize[1]=1/P},Object.defineProperties(z.prototype,G),z}(O.Filter),U=p,B=`precision mediump float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void)
{
    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);

    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);

    if (lum < 1.00)
    {
        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0)
        {
            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
        }
    }

    if (lum < 0.75)
    {
        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0)
        {
            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
        }
    }

    if (lum < 0.50)
    {
        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0)
        {
            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
        }
    }

    if (lum < 0.3)
    {
        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0)
        {
            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
        }
    }
}
`,X=function(Y){function z(){Y.call(this,U,B)}return Y&&(z.__proto__=Y),z.prototype=Object.create(Y&&Y.prototype),z.prototype.constructor=z,z}(O.Filter),W=p,Z=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec4 filterArea;
uniform vec2 dimensions;

const float SQRT_2 = 1.414213;

const float light = 1.0;

uniform float curvature;
uniform float lineWidth;
uniform float lineContrast;
uniform bool verticalLine;
uniform float noise;
uniform float noiseSize;

uniform float vignetting;
uniform float vignettingAlpha;
uniform float vignettingBlur;

uniform float seed;
uniform float time;

float rand(vec2 co) {
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main(void)
{
    vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;
    vec2 coord = pixelCoord / dimensions;

    vec2 dir = vec2(coord - vec2(0.5, 0.5));

    float _c = curvature > 0. ? curvature : 1.;
    float k = curvature > 0. ?(length(dir * dir) * 0.25 * _c * _c + 0.935 * _c) : 1.;
    vec2 uv = dir * k;

    gl_FragColor = texture2D(uSampler, vTextureCoord);
    vec3 rgb = gl_FragColor.rgb;


    if (noise > 0.0 && noiseSize > 0.0)
    {
        pixelCoord.x = floor(pixelCoord.x / noiseSize);
        pixelCoord.y = floor(pixelCoord.y / noiseSize);
        float _noise = rand(pixelCoord * noiseSize * seed) - 0.5;
        rgb += _noise * noise;
    }

    if (lineWidth > 0.0) {
        float v = (verticalLine ? uv.x * dimensions.x : uv.y * dimensions.y) * min(1.0, 2.0 / lineWidth ) / _c;
        float j = 1. + cos(v * 1.2 - time) * 0.5 * lineContrast;
        rgb *= j;
        float segment = verticalLine ? mod((dir.x + .5) * dimensions.x, 4.) : mod((dir.y + .5) * dimensions.y, 4.);
        rgb *= 0.99 + ceil(segment) * 0.015;
    }

    if (vignetting > 0.0)
    {
        float outter = SQRT_2 - vignetting * SQRT_2;
        float darker = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + vignettingBlur * SQRT_2), 0.0, 1.0);
        rgb *= darker + (1.0 - darker) * (1.0 - vignettingAlpha);
    }

    gl_FragColor.rgb = rgb;
}
`,K=function(Y){function z(P){Y.call(this,W,Z),this.uniforms.dimensions=new Float32Array(2),this.time=0,this.seed=0,Object.assign(this,{curvature:1,lineWidth:1,lineContrast:.25,verticalLine:!1,noise:0,noiseSize:1,seed:0,vignetting:.3,vignettingAlpha:1,vignettingBlur:.3,time:0},P)}Y&&(z.__proto__=Y),z.prototype=Object.create(Y&&Y.prototype),z.prototype.constructor=z;var G={curvature:{configurable:!0},lineWidth:{configurable:!0},lineContrast:{configurable:!0},verticalLine:{configurable:!0},noise:{configurable:!0},noiseSize:{configurable:!0},vignetting:{configurable:!0},vignettingAlpha:{configurable:!0},vignettingBlur:{configurable:!0}};return z.prototype.apply=function(P,V,j,te){this.uniforms.dimensions[0]=V.sourceFrame.width,this.uniforms.dimensions[1]=V.sourceFrame.height,this.uniforms.seed=this.seed,this.uniforms.time=this.time,P.applyFilter(this,V,j,te)},G.curvature.set=function(P){this.uniforms.curvature=P},G.curvature.get=function(){return this.uniforms.curvature},G.lineWidth.set=function(P){this.uniforms.lineWidth=P},G.lineWidth.get=function(){return this.uniforms.lineWidth},G.lineContrast.set=function(P){this.uniforms.lineContrast=P},G.lineContrast.get=function(){return this.uniforms.lineContrast},G.verticalLine.set=function(P){this.uniforms.verticalLine=P},G.verticalLine.get=function(){return this.uniforms.verticalLine},G.noise.set=function(P){this.uniforms.noise=P},G.noise.get=function(){return this.uniforms.noise},G.noiseSize.set=function(P){this.uniforms.noiseSize=P},G.noiseSize.get=function(){return this.uniforms.noiseSize},G.vignetting.set=function(P){this.uniforms.vignetting=P},G.vignetting.get=function(){return this.uniforms.vignetting},G.vignettingAlpha.set=function(P){this.uniforms.vignettingAlpha=P},G.vignettingAlpha.get=function(){return this.uniforms.vignettingAlpha},G.vignettingBlur.set=function(P){this.uniforms.vignettingBlur=P},G.vignettingBlur.get=function(){return this.uniforms.vignettingBlur},Object.defineProperties(z.prototype,G),z}(O.Filter),Q=p,J=`precision mediump float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform vec4 filterArea;
uniform sampler2D uSampler;

uniform float angle;
uniform float scale;

float pattern()
{
   float s = sin(angle), c = cos(angle);
   vec2 tex = vTextureCoord * filterArea.xy;
   vec2 point = vec2(
       c * tex.x - s * tex.y,
       s * tex.x + c * tex.y
   ) * scale;
   return (sin(point.x) * sin(point.y)) * 4.0;
}

void main()
{
   vec4 color = texture2D(uSampler, vTextureCoord);
   float average = (color.r + color.g + color.b) / 3.0;
   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);
}
`,H=function(Y){function z(P,V){P===void 0&&(P=1),V===void 0&&(V=5),Y.call(this,Q,J),this.scale=P,this.angle=V}Y&&(z.__proto__=Y),z.prototype=Object.create(Y&&Y.prototype),z.prototype.constructor=z;var G={scale:{configurable:!0},angle:{configurable:!0}};return G.scale.get=function(){return this.uniforms.scale},G.scale.set=function(P){this.uniforms.scale=P},G.angle.get=function(){return this.uniforms.angle},G.angle.set=function(P){this.uniforms.angle=P},Object.defineProperties(z.prototype,G),z}(O.Filter),q=p,$=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float alpha;
uniform vec3 color;
void main(void){
    vec4 sample = texture2D(uSampler, vTextureCoord);

    // Un-premultiply alpha before applying the color
    if (sample.a > 0.0) {
        sample.rgb /= sample.a;
    }

    // Premultiply alpha again
    sample.rgb = color.rgb * sample.a;

    // alpha user alpha
    sample *= alpha;

    gl_FragColor = sample;
}`,ie=function(Y){function z(P){P&&P.constructor!==Object&&(console.warn("DropShadowFilter now uses options instead of (rotation, distance, blur, color, alpha)"),P={rotation:P},arguments[1]!==void 0&&(P.distance=arguments[1]),arguments[2]!==void 0&&(P.blur=arguments[2]),arguments[3]!==void 0&&(P.color=arguments[3]),arguments[4]!==void 0&&(P.alpha=arguments[4])),P=Object.assign({rotation:45,distance:5,color:0,alpha:.5,shadowOnly:!1,kernels:null,blur:2,quality:3,pixelSize:1,resolution:O.settings.RESOLUTION},P),Y.call(this);var V=P.kernels,j=P.blur,te=P.quality,oe=P.pixelSize,le=P.resolution;this._tintFilter=new O.Filter(q,$),this._tintFilter.uniforms.color=new Float32Array(4),this._tintFilter.resolution=le,this._blurFilter=V?new h(V):new h(j,te),this.pixelSize=oe,this.resolution=le,this.targetTransform=new O.Matrix;var fe=P.shadowOnly,ge=P.rotation,Ee=P.distance,xe=P.alpha,Ie=P.color;this.shadowOnly=fe,this.rotation=ge,this.distance=Ee,this.alpha=xe,this.color=Ie,this._updatePadding()}Y&&(z.__proto__=Y),z.prototype=Object.create(Y&&Y.prototype),z.prototype.constructor=z;var G={resolution:{configurable:!0},distance:{configurable:!0},rotation:{configurable:!0},alpha:{configurable:!0},color:{configurable:!0},kernels:{configurable:!0},blur:{configurable:!0},quality:{configurable:!0},pixelSize:{configurable:!0}};return z.prototype.apply=function(P,V,j,te){var oe=P.getRenderTarget();oe.transform=this.targetTransform,this._tintFilter.apply(P,V,oe,!0),oe.transform=null,this._blurFilter.apply(P,oe,j),this.shadowOnly!==!0&&P.applyFilter(this,V,j,te),P.returnRenderTarget(oe)},z.prototype._updatePadding=function(){this.padding=this.distance+2*this.blur},z.prototype._updateTargetTransform=function(){this.targetTransform.tx=this.distance*Math.cos(this.angle),this.targetTransform.ty=this.distance*Math.sin(this.angle)},G.resolution.get=function(){return this._resolution},G.resolution.set=function(P){this._resolution=P,this._tintFilter&&(this._tintFilter.resolution=P),this._blurFilter&&(this._blurFilter.resolution=P)},G.distance.get=function(){return this._distance},G.distance.set=function(P){this._distance=P,this._updatePadding(),this._updateTargetTransform()},G.rotation.get=function(){return this.angle/O.DEG_TO_RAD},G.rotation.set=function(P){this.angle=P*O.DEG_TO_RAD,this._updateTargetTransform()},G.alpha.get=function(){return this._tintFilter.uniforms.alpha},G.alpha.set=function(P){this._tintFilter.uniforms.alpha=P},G.color.get=function(){return O.utils.rgb2hex(this._tintFilter.uniforms.color)},G.color.set=function(P){O.utils.hex2rgb(P,this._tintFilter.uniforms.color)},G.kernels.get=function(){return this._blurFilter.kernels},G.kernels.set=function(P){this._blurFilter.kernels=P},G.blur.get=function(){return this._blurFilter.blur},G.blur.set=function(P){this._blurFilter.blur=P,this._updatePadding()},G.quality.get=function(){return this._blurFilter.quality},G.quality.set=function(P){this._blurFilter.quality=P},G.pixelSize.get=function(){return this._blurFilter.pixelSize},G.pixelSize.set=function(P){this._blurFilter.pixelSize=P},Object.defineProperties(z.prototype,G),z}(O.Filter),ne=p,ae=`precision mediump float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float strength;
uniform vec4 filterArea;


void main(void)
{
	vec2 onePixel = vec2(1.0 / filterArea);

	vec4 color;

	color.rgb = vec3(0.5);

	color -= texture2D(uSampler, vTextureCoord - onePixel) * strength;
	color += texture2D(uSampler, vTextureCoord + onePixel) * strength;

	color.rgb = vec3((color.r + color.g + color.b) / 3.0);

	float alpha = texture2D(uSampler, vTextureCoord).a;

	gl_FragColor = vec4(color.rgb * alpha, alpha);
}
`,se=function(Y){function z(P){P===void 0&&(P=5),Y.call(this,ne,ae),this.strength=P}Y&&(z.__proto__=Y),z.prototype=Object.create(Y&&Y.prototype),z.prototype.constructor=z;var G={strength:{configurable:!0}};return G.strength.get=function(){return this.uniforms.strength},G.strength.set=function(P){this.uniforms.strength=P},Object.defineProperties(z.prototype,G),z}(O.Filter),re=p,ee=`// precision highp float;

varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec4 filterArea;
uniform vec4 filterClamp;
uniform vec2 dimensions;
uniform float aspect;

uniform sampler2D displacementMap;
uniform float offset;
uniform float sinDir;
uniform float cosDir;
uniform int fillMode;

uniform float seed;
uniform vec2 red;
uniform vec2 green;
uniform vec2 blue;

const int TRANSPARENT = 0;
const int ORIGINAL = 1;
const int LOOP = 2;
const int CLAMP = 3;
const int MIRROR = 4;

void main(void)
{
    vec2 coord = (vTextureCoord * filterArea.xy) / dimensions;

    if (coord.x > 1.0 || coord.y > 1.0) {
        return;
    }

    float cx = coord.x - 0.5;
    float cy = (coord.y - 0.5) * aspect;
    float ny = (-sinDir * cx + cosDir * cy) / aspect + 0.5;

    // displacementMap: repeat
    // ny = ny > 1.0 ? ny - 1.0 : (ny < 0.0 ? 1.0 + ny : ny);

    // displacementMap: mirror
    ny = ny > 1.0 ? 2.0 - ny : (ny < 0.0 ? -ny : ny);

    vec4 dc = texture2D(displacementMap, vec2(0.5, ny));

    float displacement = (dc.r - dc.g) * (offset / filterArea.x);

    coord = vTextureCoord + vec2(cosDir * displacement, sinDir * displacement * aspect);

    if (fillMode == CLAMP) {
        coord = clamp(coord, filterClamp.xy, filterClamp.zw);
    } else {
        if( coord.x > filterClamp.z ) {
            if (fillMode == ORIGINAL) {
                gl_FragColor = texture2D(uSampler, vTextureCoord);
                return;
            } else if (fillMode == LOOP) {
                coord.x -= filterClamp.z;
            } else if (fillMode == MIRROR) {
                coord.x = filterClamp.z * 2.0 - coord.x;
            } else {
                gl_FragColor = vec4(0., 0., 0., 0.);
                return;
            }
        } else if( coord.x < filterClamp.x ) {
            if (fillMode == ORIGINAL) {
                gl_FragColor = texture2D(uSampler, vTextureCoord);
                return;
            } else if (fillMode == LOOP) {
                coord.x += filterClamp.z;
            } else if (fillMode == MIRROR) {
                coord.x *= -filterClamp.z;
            } else {
                gl_FragColor = vec4(0., 0., 0., 0.);
                return;
            }
        }

        if( coord.y > filterClamp.w ) {
            if (fillMode == ORIGINAL) {
                gl_FragColor = texture2D(uSampler, vTextureCoord);
                return;
            } else if (fillMode == LOOP) {
                coord.y -= filterClamp.w;
            } else if (fillMode == MIRROR) {
                coord.y = filterClamp.w * 2.0 - coord.y;
            } else {
                gl_FragColor = vec4(0., 0., 0., 0.);
                return;
            }
        } else if( coord.y < filterClamp.y ) {
            if (fillMode == ORIGINAL) {
                gl_FragColor = texture2D(uSampler, vTextureCoord);
                return;
            } else if (fillMode == LOOP) {
                coord.y += filterClamp.w;
            } else if (fillMode == MIRROR) {
                coord.y *= -filterClamp.w;
            } else {
                gl_FragColor = vec4(0., 0., 0., 0.);
                return;
            }
        }
    }

    gl_FragColor.r = texture2D(uSampler, coord + red * (1.0 - seed * 0.4) / filterArea.xy).r;
    gl_FragColor.g = texture2D(uSampler, coord + green * (1.0 - seed * 0.3) / filterArea.xy).g;
    gl_FragColor.b = texture2D(uSampler, coord + blue * (1.0 - seed * 0.2) / filterArea.xy).b;
    gl_FragColor.a = texture2D(uSampler, coord).a;
}
`,ue=function(Y){function z(P){P===void 0&&(P={}),Y.call(this,re,ee),this.uniforms.dimensions=new Float32Array(2),P=Object.assign({slices:5,offset:100,direction:0,fillMode:0,average:!1,seed:0,red:[0,0],green:[0,0],blue:[0,0],minSize:8,sampleSize:512},P),this.direction=P.direction,this.red=P.red,this.green=P.green,this.blue=P.blue,this.offset=P.offset,this.fillMode=P.fillMode,this.average=P.average,this.seed=P.seed,this.minSize=P.minSize,this.sampleSize=P.sampleSize,this._canvas=document.createElement("canvas"),this._canvas.width=4,this._canvas.height=this.sampleSize,this.texture=O.Texture.fromCanvas(this._canvas,O.SCALE_MODES.NEAREST),this._slices=0,this.slices=P.slices}Y&&(z.__proto__=Y),z.prototype=Object.create(Y&&Y.prototype),z.prototype.constructor=z;var G={sizes:{configurable:!0},offsets:{configurable:!0},slices:{configurable:!0},direction:{configurable:!0},red:{configurable:!0},green:{configurable:!0},blue:{configurable:!0}};return z.prototype.apply=function(P,V,j,te){var oe=V.sourceFrame.width,le=V.sourceFrame.height;this.uniforms.dimensions[0]=oe,this.uniforms.dimensions[1]=le,this.uniforms.aspect=le/oe,this.uniforms.seed=this.seed,this.uniforms.offset=this.offset,this.uniforms.fillMode=this.fillMode,P.applyFilter(this,V,j,te)},z.prototype._randomizeSizes=function(){var P=this._sizes,V=this._slices-1,j=this.sampleSize,te=Math.min(this.minSize/j,.9/this._slices);if(this.average){for(var oe=this._slices,le=1,fe=0;fe<V;fe++){var ge=le/(oe-fe),Ee=Math.max(ge*(1-.6*Math.random()),te);P[fe]=Ee,le-=Ee}P[V]=le}else{for(var xe=1,Ie=Math.sqrt(1/this._slices),Be=0;Be<V;Be++){var ke=Math.max(Ie*xe*Math.random(),te);P[Be]=ke,xe-=ke}P[V]=xe}this.shuffle()},z.prototype.shuffle=function(){for(var P=this._sizes,V=this._slices-1;V>0;V--){var j=Math.random()*V>>0,te=P[V];P[V]=P[j],P[j]=te}},z.prototype._randomizeOffsets=function(){for(var P=0;P<this._slices;P++)this._offsets[P]=Math.random()*(Math.random()<.5?-1:1)},z.prototype.refresh=function(){this._randomizeSizes(),this._randomizeOffsets(),this.redraw()},z.prototype.redraw=function(){var P,V=this.sampleSize,j=this.texture,te=this._canvas.getContext("2d");te.clearRect(0,0,8,V);for(var oe=0,le=0;le<this._slices;le++){P=Math.floor(256*this._offsets[le]);var fe=this._sizes[le]*V,ge=P>0?P:0,Ee=P<0?-P:0;te.fillStyle="rgba("+ge+", "+Ee+", 0, 1)",te.fillRect(0,oe>>0,V,fe+1>>0),oe+=fe}j.baseTexture.emit("update",j.baseTexture),this.uniforms.displacementMap=j},G.sizes.set=function(P){for(var V=Math.min(this._slices,P.length),j=0;j<V;j++)this._sizes[j]=P[j]},G.sizes.get=function(){return this._sizes},G.offsets.set=function(P){for(var V=Math.min(this._slices,P.length),j=0;j<V;j++)this._offsets[j]=P[j]},G.offsets.get=function(){return this._offsets},G.slices.get=function(){return this._slices},G.slices.set=function(P){this._slices!==P&&(this._slices=P,this.uniforms.slices=P,this._sizes=this.uniforms.slicesWidth=new Float32Array(P),this._offsets=this.uniforms.slicesOffset=new Float32Array(P),this.refresh())},G.direction.get=function(){return this._direction},G.direction.set=function(P){if(this._direction!==P){this._direction=P;var V=P*O.DEG_TO_RAD;this.uniforms.sinDir=Math.sin(V),this.uniforms.cosDir=Math.cos(V)}},G.red.get=function(){return this.uniforms.red},G.red.set=function(P){this.uniforms.red=P},G.green.get=function(){return this.uniforms.green},G.green.set=function(P){this.uniforms.green=P},G.blue.get=function(){return this.uniforms.blue},G.blue.set=function(P){this.uniforms.blue=P},z.prototype.destroy=function(){this.texture.destroy(!0),this.texture=null,this._canvas=null,this.red=null,this.green=null,this.blue=null,this._sizes=null,this._offsets=null},Object.defineProperties(z.prototype,G),z}(O.Filter);ue.TRANSPARENT=0,ue.ORIGINAL=1,ue.LOOP=2,ue.CLAMP=3,ue.MIRROR=4;var he=p,de=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

uniform float distance;
uniform float outerStrength;
uniform float innerStrength;
uniform vec4 glowColor;
uniform vec4 filterArea;
uniform vec4 filterClamp;
const float PI = 3.14159265358979323846264;

void main(void) {
    vec2 px = vec2(1.0 / filterArea.x, 1.0 / filterArea.y);
    vec4 ownColor = texture2D(uSampler, vTextureCoord);
    vec4 curColor;
    float totalAlpha = 0.0;
    float maxTotalAlpha = 0.0;
    float cosAngle;
    float sinAngle;
    vec2 displaced;
    for (float angle = 0.0; angle <= PI * 2.0; angle += %QUALITY_DIST%) {
       cosAngle = cos(angle);
       sinAngle = sin(angle);
       for (float curDistance = 1.0; curDistance <= %DIST%; curDistance++) {
           displaced.x = vTextureCoord.x + cosAngle * curDistance * px.x;
           displaced.y = vTextureCoord.y + sinAngle * curDistance * px.y;
           curColor = texture2D(uSampler, clamp(displaced, filterClamp.xy, filterClamp.zw));
           totalAlpha += (distance - curDistance) * curColor.a;
           maxTotalAlpha += (distance - curDistance);
       }
    }
    maxTotalAlpha = max(maxTotalAlpha, 0.0001);

    ownColor.a = max(ownColor.a, 0.0001);
    ownColor.rgb = ownColor.rgb / ownColor.a;
    float outerGlowAlpha = (totalAlpha / maxTotalAlpha)  * outerStrength * (1. - ownColor.a);
    float innerGlowAlpha = ((maxTotalAlpha - totalAlpha) / maxTotalAlpha) * innerStrength * ownColor.a;
    float resultAlpha = (ownColor.a + outerGlowAlpha);
    gl_FragColor = vec4(mix(mix(ownColor.rgb, glowColor.rgb, innerGlowAlpha / ownColor.a), glowColor.rgb, outerGlowAlpha / resultAlpha) * resultAlpha, resultAlpha);
}
`,ce=function(Y){function z(P,V,j,te,oe){P===void 0&&(P=10),V===void 0&&(V=4),j===void 0&&(j=0),te===void 0&&(te=16777215),oe===void 0&&(oe=.1),Y.call(this,he,de.replace(/%QUALITY_DIST%/gi,""+(1/oe/P).toFixed(7)).replace(/%DIST%/gi,""+P.toFixed(7))),this.uniforms.glowColor=new Float32Array([0,0,0,1]),this.distance=P,this.color=te,this.outerStrength=V,this.innerStrength=j}Y&&(z.__proto__=Y),z.prototype=Object.create(Y&&Y.prototype),z.prototype.constructor=z;var G={color:{configurable:!0},distance:{configurable:!0},outerStrength:{configurable:!0},innerStrength:{configurable:!0}};return G.color.get=function(){return O.utils.rgb2hex(this.uniforms.glowColor)},G.color.set=function(P){O.utils.hex2rgb(P,this.uniforms.glowColor)},G.distance.get=function(){return this.uniforms.distance},G.distance.set=function(P){this.uniforms.distance=P},G.outerStrength.get=function(){return this.uniforms.outerStrength},G.outerStrength.set=function(P){this.uniforms.outerStrength=P},G.innerStrength.get=function(){return this.uniforms.innerStrength},G.innerStrength.set=function(P){this.uniforms.innerStrength=P},Object.defineProperties(z.prototype,G),z}(O.Filter),ve=p,Fe=`vec3 mod289(vec3 x)
{
    return x - floor(x * (1.0 / 289.0)) * 289.0;
}
vec4 mod289(vec4 x)
{
    return x - floor(x * (1.0 / 289.0)) * 289.0;
}
vec4 permute(vec4 x)
{
    return mod289(((x * 34.0) + 1.0) * x);
}
vec4 taylorInvSqrt(vec4 r)
{
    return 1.79284291400159 - 0.85373472095314 * r;
}
vec3 fade(vec3 t)
{
    return t * t * t * (t * (t * 6.0 - 15.0) + 10.0);
}
// Classic Perlin noise, periodic variant
float pnoise(vec3 P, vec3 rep)
{
    vec3 Pi0 = mod(floor(P), rep); // Integer part, modulo period
    vec3 Pi1 = mod(Pi0 + vec3(1.0), rep); // Integer part + 1, mod period
    Pi0 = mod289(Pi0);
    Pi1 = mod289(Pi1);
    vec3 Pf0 = fract(P); // Fractional part for interpolation
    vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0
    vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
    vec4 iy = vec4(Pi0.yy, Pi1.yy);
    vec4 iz0 = Pi0.zzzz;
    vec4 iz1 = Pi1.zzzz;
    vec4 ixy = permute(permute(ix) + iy);
    vec4 ixy0 = permute(ixy + iz0);
    vec4 ixy1 = permute(ixy + iz1);
    vec4 gx0 = ixy0 * (1.0 / 7.0);
    vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;
    gx0 = fract(gx0);
    vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
    vec4 sz0 = step(gz0, vec4(0.0));
    gx0 -= sz0 * (step(0.0, gx0) - 0.5);
    gy0 -= sz0 * (step(0.0, gy0) - 0.5);
    vec4 gx1 = ixy1 * (1.0 / 7.0);
    vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;
    gx1 = fract(gx1);
    vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
    vec4 sz1 = step(gz1, vec4(0.0));
    gx1 -= sz1 * (step(0.0, gx1) - 0.5);
    gy1 -= sz1 * (step(0.0, gy1) - 0.5);
    vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);
    vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);
    vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);
    vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);
    vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);
    vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);
    vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);
    vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);
    vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
    g000 *= norm0.x;
    g010 *= norm0.y;
    g100 *= norm0.z;
    g110 *= norm0.w;
    vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
    g001 *= norm1.x;
    g011 *= norm1.y;
    g101 *= norm1.z;
    g111 *= norm1.w;
    float n000 = dot(g000, Pf0);
    float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
    float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
    float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
    float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
    float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
    float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
    float n111 = dot(g111, Pf1);
    vec3 fade_xyz = fade(Pf0);
    vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
    vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
    float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);
    return 2.2 * n_xyz;
}
float turb(vec3 P, vec3 rep, float lacunarity, float gain)
{
    float sum = 0.0;
    float sc = 1.0;
    float totalgain = 1.0;
    for (float i = 0.0; i < 6.0; i++)
    {
        sum += totalgain * pnoise(P * sc, rep);
        sc *= lacunarity;
        totalgain *= gain;
    }
    return abs(sum);
}
`,pe=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;
uniform vec2 dimensions;

uniform vec2 light;
uniform bool parallel;
uniform float aspect;

uniform float gain;
uniform float lacunarity;
uniform float time;

\${perlin}

void main(void) {
    vec2 coord = vTextureCoord * filterArea.xy / dimensions.xy;

    float d;

    if (parallel) {
        float _cos = light.x;
        float _sin = light.y;
        d = (_cos * coord.x) + (_sin * coord.y * aspect);
    } else {
        float dx = coord.x - light.x / dimensions.x;
        float dy = (coord.y - light.y / dimensions.y) * aspect;
        float dis = sqrt(dx * dx + dy * dy) + 0.00001;
        d = dy / dis;
    }

    vec3 dir = vec3(d, d, 0.0);

    float noise = turb(dir + vec3(time, 0.0, 62.1 + time) * 0.05, vec3(480.0, 320.0, 480.0), lacunarity, gain);
    noise = mix(noise, 0.0, 0.3);
    //fade vertically.
    vec4 mist = vec4(noise, noise, noise, 1.0) * (1.0 - coord.y);
    mist.a = 1.0;

    gl_FragColor = texture2D(uSampler, vTextureCoord) + mist;
}
`,Oe=function(Y){function z(P){Y.call(this,ve,pe.replace("${perlin}",Fe)),this.uniforms.dimensions=new Float32Array(2),typeof P=="number"&&(console.warn("GodrayFilter now uses options instead of (angle, gain, lacunarity, time)"),P={angle:P},arguments[1]!==void 0&&(P.gain=arguments[1]),arguments[2]!==void 0&&(P.lacunarity=arguments[2]),arguments[3]!==void 0&&(P.time=arguments[3])),P=Object.assign({angle:30,gain:.5,lacunarity:2.5,time:0,parallel:!0,center:[0,0]},P),this._angleLight=new O.Point,this.angle=P.angle,this.gain=P.gain,this.lacunarity=P.lacunarity,this.parallel=P.parallel,this.center=P.center,this.time=P.time}Y&&(z.__proto__=Y),z.prototype=Object.create(Y&&Y.prototype),z.prototype.constructor=z;var G={angle:{configurable:!0},gain:{configurable:!0},lacunarity:{configurable:!0}};return z.prototype.apply=function(P,V,j,te){var oe=V.sourceFrame,le=oe.width,fe=oe.height;this.uniforms.light=this.parallel?this._angleLight:this.center,this.uniforms.parallel=this.parallel,this.uniforms.dimensions[0]=le,this.uniforms.dimensions[1]=fe,this.uniforms.aspect=fe/le,this.uniforms.time=this.time,P.applyFilter(this,V,j,te)},G.angle.get=function(){return this._angle},G.angle.set=function(P){this._angle=P;var V=P*O.DEG_TO_RAD;this._angleLight.x=Math.cos(V),this._angleLight.y=Math.sin(V)},G.gain.get=function(){return this.uniforms.gain},G.gain.set=function(P){this.uniforms.gain=P},G.lacunarity.get=function(){return this.uniforms.lacunarity},G.lacunarity.set=function(P){this.uniforms.lacunarity=P},Object.defineProperties(z.prototype,G),z}(O.Filter),ze=p,Ae=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;

uniform vec2 uVelocity;
uniform int uKernelSize;
uniform float uOffset;

const int MAX_KERNEL_SIZE = 2048;

// Notice:
// the perfect way:
//    int kernelSize = min(uKernelSize, MAX_KERNELSIZE);
// BUT in real use-case , uKernelSize < MAX_KERNELSIZE almost always.
// So use uKernelSize directly.

void main(void)
{
    vec4 color = texture2D(uSampler, vTextureCoord);

    if (uKernelSize == 0)
    {
        gl_FragColor = color;
        return;
    }

    vec2 velocity = uVelocity / filterArea.xy;
    float offset = -uOffset / length(uVelocity) - 0.5;
    int k = uKernelSize - 1;

    for(int i = 0; i < MAX_KERNEL_SIZE - 1; i++) {
        if (i == k) {
            break;
        }
        vec2 bias = velocity * (float(i) / float(k) + offset);
        color += texture2D(uSampler, vTextureCoord + bias);
    }
    gl_FragColor = color / float(uKernelSize);
}
`,Le=function(Y){function z(P,V,j){P===void 0&&(P=[0,0]),V===void 0&&(V=5),j===void 0&&(j=0),Y.call(this,ze,Ae),this.uniforms.uVelocity=new Float32Array(2),this._velocity=new O.ObservablePoint(this.velocityChanged,this),this.velocity=P,this.kernelSize=V,this.offset=j}Y&&(z.__proto__=Y),z.prototype=Object.create(Y&&Y.prototype),z.prototype.constructor=z;var G={velocity:{configurable:!0},offset:{configurable:!0}};return z.prototype.apply=function(P,V,j,te){var oe=this.velocity,le=oe.x,fe=oe.y;this.uniforms.uKernelSize=le!==0||fe!==0?this.kernelSize:0,P.applyFilter(this,V,j,te)},G.velocity.set=function(P){Array.isArray(P)?this._velocity.set(P[0],P[1]):(P instanceof O.Point||P instanceof O.ObservablePoint)&&this._velocity.copy(P)},G.velocity.get=function(){return this._velocity},z.prototype.velocityChanged=function(){this.uniforms.uVelocity[0]=this._velocity.x,this.uniforms.uVelocity[1]=this._velocity.y},G.offset.set=function(P){this.uniforms.uOffset=P},G.offset.get=function(){return this.uniforms.uOffset},Object.defineProperties(z.prototype,G),z}(O.Filter),Ke=p,we=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform float epsilon;

const int MAX_COLORS = %maxColors%;

uniform vec3 originalColors[MAX_COLORS];
uniform vec3 targetColors[MAX_COLORS];

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord);

    float alpha = gl_FragColor.a;
    if (alpha < 0.0001)
    {
      return;
    }

    vec3 color = gl_FragColor.rgb / alpha;

    for(int i = 0; i < MAX_COLORS; i++)
    {
      vec3 origColor = originalColors[i];
      if (origColor.r < 0.0)
      {
        break;
      }
      vec3 colorDiff = origColor - color;
      if (length(colorDiff) < epsilon)
      {
        vec3 targetColor = targetColors[i];
        gl_FragColor = vec4((targetColor + colorDiff) * alpha, alpha);
        return;
      }
    }
}
`,$e=function(Y){function z(P,V,j){V===void 0&&(V=.05),j===void 0&&(j=null),j=j||P.length,Y.call(this,Ke,we.replace(/%maxColors%/g,j)),this.epsilon=V,this._maxColors=j,this._replacements=null,this.uniforms.originalColors=new Float32Array(3*j),this.uniforms.targetColors=new Float32Array(3*j),this.replacements=P}Y&&(z.__proto__=Y),z.prototype=Object.create(Y&&Y.prototype),z.prototype.constructor=z;var G={replacements:{configurable:!0},maxColors:{configurable:!0},epsilon:{configurable:!0}};return G.replacements.set=function(P){var V=this.uniforms.originalColors,j=this.uniforms.targetColors,te=P.length;if(te>this._maxColors)throw"Length of replacements ("+te+") exceeds the maximum colors length ("+this._maxColors+")";V[3*te]=-1;for(var oe=0;oe<te;oe++){var le=P[oe],fe=le[0];typeof fe=="number"?fe=O.utils.hex2rgb(fe):le[0]=O.utils.rgb2hex(fe),V[3*oe]=fe[0],V[3*oe+1]=fe[1],V[3*oe+2]=fe[2];var ge=le[1];typeof ge=="number"?ge=O.utils.hex2rgb(ge):le[1]=O.utils.rgb2hex(ge),j[3*oe]=ge[0],j[3*oe+1]=ge[1],j[3*oe+2]=ge[2]}this._replacements=P},G.replacements.get=function(){return this._replacements},z.prototype.refresh=function(){this.replacements=this._replacements},G.maxColors.get=function(){return this._maxColors},G.epsilon.set=function(P){this.uniforms.epsilon=P},G.epsilon.get=function(){return this.uniforms.epsilon},Object.defineProperties(z.prototype,G),z}(O.Filter),De=p,st=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;
uniform vec2 dimensions;

uniform float sepia;
uniform float noise;
uniform float noiseSize;
uniform float scratch;
uniform float scratchDensity;
uniform float scratchWidth;
uniform float vignetting;
uniform float vignettingAlpha;
uniform float vignettingBlur;
uniform float seed;

const float SQRT_2 = 1.414213;
const vec3 SEPIA_RGB = vec3(112.0 / 255.0, 66.0 / 255.0, 20.0 / 255.0);

float rand(vec2 co) {
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

vec3 Overlay(vec3 src, vec3 dst)
{
    // if (dst <= 0.5) then: 2 * src * dst
    // if (dst > 0.5) then: 1 - 2 * (1 - dst) * (1 - src)
    return vec3((dst.x <= 0.5) ? (2.0 * src.x * dst.x) : (1.0 - 2.0 * (1.0 - dst.x) * (1.0 - src.x)),
                (dst.y <= 0.5) ? (2.0 * src.y * dst.y) : (1.0 - 2.0 * (1.0 - dst.y) * (1.0 - src.y)),
                (dst.z <= 0.5) ? (2.0 * src.z * dst.z) : (1.0 - 2.0 * (1.0 - dst.z) * (1.0 - src.z)));
}


void main()
{
    gl_FragColor = texture2D(uSampler, vTextureCoord);
    vec3 color = gl_FragColor.rgb;

    if (sepia > 0.0)
    {
        float gray = (color.x + color.y + color.z) / 3.0;
        vec3 grayscale = vec3(gray);

        color = Overlay(SEPIA_RGB, grayscale);

        color = grayscale + sepia * (color - grayscale);
    }

    vec2 coord = vTextureCoord * filterArea.xy / dimensions.xy;

    if (vignetting > 0.0)
    {
        float outter = SQRT_2 - vignetting * SQRT_2;
        vec2 dir = vec2(vec2(0.5, 0.5) - coord);
        dir.y *= dimensions.y / dimensions.x;
        float darker = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + vignettingBlur * SQRT_2), 0.0, 1.0);
        color.rgb *= darker + (1.0 - darker) * (1.0 - vignettingAlpha);
    }

    if (scratchDensity > seed && scratch != 0.0)
    {
        float phase = seed * 256.0;
        float s = mod(floor(phase), 2.0);
        float dist = 1.0 / scratchDensity;
        float d = distance(coord, vec2(seed * dist, abs(s - seed * dist)));
        if (d < seed * 0.6 + 0.4)
        {
            highp float period = scratchDensity * 10.0;

            float xx = coord.x * period + phase;
            float aa = abs(mod(xx, 0.5) * 4.0);
            float bb = mod(floor(xx / 0.5), 2.0);
            float yy = (1.0 - bb) * aa + bb * (2.0 - aa);

            float kk = 2.0 * period;
            float dw = scratchWidth / dimensions.x * (0.75 + seed);
            float dh = dw * kk;

            float tine = (yy - (2.0 - dh));

            if (tine > 0.0) {
                float _sign = sign(scratch);

                tine = s * tine / period + scratch + 0.1;
                tine = clamp(tine + 1.0, 0.5 + _sign * 0.5, 1.5 + _sign * 0.5);

                color.rgb *= tine;
            }
        }
    }

    if (noise > 0.0 && noiseSize > 0.0)
    {
        vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;
        pixelCoord.x = floor(pixelCoord.x / noiseSize);
        pixelCoord.y = floor(pixelCoord.y / noiseSize);
        // vec2 d = pixelCoord * noiseSize * vec2(1024.0 + seed * 512.0, 1024.0 - seed * 512.0);
        // float _noise = snoise(d) * 0.5;
        float _noise = rand(pixelCoord * noiseSize * seed) - 0.5;
        color += _noise * noise;
    }

    gl_FragColor.rgb = color;
}
`,ut=function(Y){function z(P,V){V===void 0&&(V=0),Y.call(this,De,st),this.uniforms.dimensions=new Float32Array(2),typeof P=="number"?(this.seed=P,P=null):this.seed=V,Object.assign(this,{sepia:.3,noise:.3,noiseSize:1,scratch:.5,scratchDensity:.3,scratchWidth:1,vignetting:.3,vignettingAlpha:1,vignettingBlur:.3},P)}Y&&(z.__proto__=Y),z.prototype=Object.create(Y&&Y.prototype),z.prototype.constructor=z;var G={sepia:{configurable:!0},noise:{configurable:!0},noiseSize:{configurable:!0},scratch:{configurable:!0},scratchDensity:{configurable:!0},scratchWidth:{configurable:!0},vignetting:{configurable:!0},vignettingAlpha:{configurable:!0},vignettingBlur:{configurable:!0}};return z.prototype.apply=function(P,V,j,te){this.uniforms.dimensions[0]=V.sourceFrame.width,this.uniforms.dimensions[1]=V.sourceFrame.height,this.uniforms.seed=this.seed,P.applyFilter(this,V,j,te)},G.sepia.set=function(P){this.uniforms.sepia=P},G.sepia.get=function(){return this.uniforms.sepia},G.noise.set=function(P){this.uniforms.noise=P},G.noise.get=function(){return this.uniforms.noise},G.noiseSize.set=function(P){this.uniforms.noiseSize=P},G.noiseSize.get=function(){return this.uniforms.noiseSize},G.scratch.set=function(P){this.uniforms.scratch=P},G.scratch.get=function(){return this.uniforms.scratch},G.scratchDensity.set=function(P){this.uniforms.scratchDensity=P},G.scratchDensity.get=function(){return this.uniforms.scratchDensity},G.scratchWidth.set=function(P){this.uniforms.scratchWidth=P},G.scratchWidth.get=function(){return this.uniforms.scratchWidth},G.vignetting.set=function(P){this.uniforms.vignetting=P},G.vignetting.get=function(){return this.uniforms.vignetting},G.vignettingAlpha.set=function(P){this.uniforms.vignettingAlpha=P},G.vignettingAlpha.get=function(){return this.uniforms.vignettingAlpha},G.vignettingBlur.set=function(P){this.uniforms.vignettingBlur=P},G.vignettingBlur.get=function(){return this.uniforms.vignettingBlur},Object.defineProperties(z.prototype,G),z}(O.Filter),lt=p,ht=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec2 thickness;
uniform vec4 outlineColor;
uniform vec4 filterClamp;

const float DOUBLE_PI = 3.14159265358979323846264 * 2.;

void main(void) {
    vec4 ownColor = texture2D(uSampler, vTextureCoord);
    vec4 curColor;
    float maxAlpha = 0.;
    vec2 displaced;
    for (float angle = 0.; angle <= DOUBLE_PI; angle += \${angleStep}) {
        displaced.x = vTextureCoord.x + thickness.x * cos(angle);
        displaced.y = vTextureCoord.y + thickness.y * sin(angle);
        curColor = texture2D(uSampler, clamp(displaced, filterClamp.xy, filterClamp.zw));
        maxAlpha = max(maxAlpha, curColor.a);
    }
    float resultAlpha = max(maxAlpha, ownColor.a);
    gl_FragColor = vec4((ownColor.rgb + outlineColor.rgb * (1. - ownColor.a)) * resultAlpha, resultAlpha);
}
`,et=function(Y){function z(P,V,j){P===void 0&&(P=1),V===void 0&&(V=0),j===void 0&&(j=.1);var te=Math.max(j*z.MAX_SAMPLES,z.MIN_SAMPLES),oe=(2*Math.PI/te).toFixed(7);Y.call(this,lt,ht.replace(/\$\{angleStep\}/,oe)),this.uniforms.thickness=new Float32Array([0,0]),this.thickness=P,this.uniforms.outlineColor=new Float32Array([0,0,0,1]),this.color=V,this.quality=j}Y&&(z.__proto__=Y),z.prototype=Object.create(Y&&Y.prototype),z.prototype.constructor=z;var G={color:{configurable:!0}};return z.prototype.apply=function(P,V,j,te){this.uniforms.thickness[0]=this.thickness/V.size.width,this.uniforms.thickness[1]=this.thickness/V.size.height,P.applyFilter(this,V,j,te)},G.color.get=function(){return O.utils.rgb2hex(this.uniforms.outlineColor)},G.color.set=function(P){O.utils.hex2rgb(P,this.uniforms.outlineColor)},Object.defineProperties(z.prototype,G),z}(O.Filter);et.MIN_SAMPLES=1,et.MAX_SAMPLES=100;var ft=p,ct=`precision mediump float;

varying vec2 vTextureCoord;

uniform vec2 size;
uniform sampler2D uSampler;

uniform vec4 filterArea;

vec2 mapCoord( vec2 coord )
{
    coord *= filterArea.xy;
    coord += filterArea.zw;

    return coord;
}

vec2 unmapCoord( vec2 coord )
{
    coord -= filterArea.zw;
    coord /= filterArea.xy;

    return coord;
}

vec2 pixelate(vec2 coord, vec2 size)
{
	return floor( coord / size ) * size;
}

void main(void)
{
    vec2 coord = mapCoord(vTextureCoord);

    coord = pixelate(coord, size);

    coord = unmapCoord(coord);

    gl_FragColor = texture2D(uSampler, coord);
}
`,dt=function(Y){function z(P){P===void 0&&(P=10),Y.call(this,ft,ct),this.size=P}Y&&(z.__proto__=Y),z.prototype=Object.create(Y&&Y.prototype),z.prototype.constructor=z;var G={size:{configurable:!0}};return G.size.get=function(){return this.uniforms.size},G.size.set=function(P){typeof P=="number"&&(P=[P,P]),this.uniforms.size=P},Object.defineProperties(z.prototype,G),z}(O.Filter),pt=p,vt=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;

uniform float uRadian;
uniform vec2 uCenter;
uniform float uRadius;
uniform int uKernelSize;

const int MAX_KERNEL_SIZE = 2048;

void main(void)
{
    vec4 color = texture2D(uSampler, vTextureCoord);

    if (uKernelSize == 0)
    {
        gl_FragColor = color;
        return;
    }

    float aspect = filterArea.y / filterArea.x;
    vec2 center = uCenter.xy / filterArea.xy;
    float gradient = uRadius / filterArea.x * 0.3;
    float radius = uRadius / filterArea.x - gradient * 0.5;
    int k = uKernelSize - 1;

    vec2 coord = vTextureCoord;
    vec2 dir = vec2(center - coord);
    float dist = length(vec2(dir.x, dir.y * aspect));

    float radianStep = uRadian;
    if (radius >= 0.0 && dist > radius) {
        float delta = dist - radius;
        float gap = gradient;
        float scale = 1.0 - abs(delta / gap);
        if (scale <= 0.0) {
            gl_FragColor = color;
            return;
        }
        radianStep *= scale;
    }
    radianStep /= float(k);

    float s = sin(radianStep);
    float c = cos(radianStep);
    mat2 rotationMatrix = mat2(vec2(c, -s), vec2(s, c));

    for(int i = 0; i < MAX_KERNEL_SIZE - 1; i++) {
        if (i == k) {
            break;
        }

        coord -= center;
        coord.y *= aspect;
        coord = rotationMatrix * coord;
        coord.y /= aspect;
        coord += center;

        vec4 sample = texture2D(uSampler, coord);

        // switch to pre-multiplied alpha to correctly blur transparent images
        // sample.rgb *= sample.a;

        color += sample;
    }

    gl_FragColor = color / float(uKernelSize);
}
`,gt=function(Y){function z(P,V,j,te){P===void 0&&(P=0),V===void 0&&(V=[0,0]),j===void 0&&(j=5),te===void 0&&(te=-1),Y.call(this,pt,vt),this._angle=0,this.angle=P,this.center=V,this.kernelSize=j,this.radius=te}Y&&(z.__proto__=Y),z.prototype=Object.create(Y&&Y.prototype),z.prototype.constructor=z;var G={angle:{configurable:!0},center:{configurable:!0},radius:{configurable:!0}};return z.prototype.apply=function(P,V,j,te){this.uniforms.uKernelSize=this._angle!==0?this.kernelSize:0,P.applyFilter(this,V,j,te)},G.angle.set=function(P){this._angle=P,this.uniforms.uRadian=P*Math.PI/180},G.angle.get=function(){return this._angle},G.center.get=function(){return this.uniforms.uCenter},G.center.set=function(P){this.uniforms.uCenter=P},G.radius.get=function(){return this.uniforms.uRadius},G.radius.set=function(P){(P<0||P===1/0)&&(P=-1),this.uniforms.uRadius=P},Object.defineProperties(z.prototype,G),z}(O.Filter),mt=p,_t=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec4 filterArea;
uniform vec4 filterClamp;
uniform vec2 dimensions;

uniform bool mirror;
uniform float boundary;
uniform vec2 amplitude;
uniform vec2 waveLength;
uniform vec2 alpha;
uniform float time;

float rand(vec2 co) {
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main(void)
{
    vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;
    vec2 coord = pixelCoord / dimensions;

    if (coord.y < boundary) {
        gl_FragColor = texture2D(uSampler, vTextureCoord);
        return;
    }

    float k = (coord.y - boundary) / (1. - boundary + 0.0001);
    float areaY = boundary * dimensions.y / filterArea.y;
    float v = areaY + areaY - vTextureCoord.y;
    float y = mirror ? v : vTextureCoord.y;

    float _amplitude = ((amplitude.y - amplitude.x) * k + amplitude.x ) / filterArea.x;
    float _waveLength = ((waveLength.y - waveLength.x) * k + waveLength.x) / filterArea.y;
    float _alpha = (alpha.y - alpha.x) * k + alpha.x;

    float x = vTextureCoord.x + cos(v * 6.28 / _waveLength - time) * _amplitude;
    x = clamp(x, filterClamp.x, filterClamp.z);

    vec4 color = texture2D(uSampler, vec2(x, y));

    gl_FragColor = color * _alpha;
}
`,yt=function(Y){function z(P){Y.call(this,mt,_t),this.uniforms.amplitude=new Float32Array(2),this.uniforms.waveLength=new Float32Array(2),this.uniforms.alpha=new Float32Array(2),this.uniforms.dimensions=new Float32Array(2),Object.assign(this,{mirror:!0,boundary:.5,amplitude:[0,20],waveLength:[30,100],alpha:[1,1],time:0},P)}Y&&(z.__proto__=Y),z.prototype=Object.create(Y&&Y.prototype),z.prototype.constructor=z;var G={mirror:{configurable:!0},boundary:{configurable:!0},amplitude:{configurable:!0},waveLength:{configurable:!0},alpha:{configurable:!0}};return z.prototype.apply=function(P,V,j,te){this.uniforms.dimensions[0]=V.sourceFrame.width,this.uniforms.dimensions[1]=V.sourceFrame.height,this.uniforms.time=this.time,P.applyFilter(this,V,j,te)},G.mirror.set=function(P){this.uniforms.mirror=P},G.mirror.get=function(){return this.uniforms.mirror},G.boundary.set=function(P){this.uniforms.boundary=P},G.boundary.get=function(){return this.uniforms.boundary},G.amplitude.set=function(P){this.uniforms.amplitude[0]=P[0],this.uniforms.amplitude[1]=P[1]},G.amplitude.get=function(){return this.uniforms.amplitude},G.waveLength.set=function(P){this.uniforms.waveLength[0]=P[0],this.uniforms.waveLength[1]=P[1]},G.waveLength.get=function(){return this.uniforms.waveLength},G.alpha.set=function(P){this.uniforms.alpha[0]=P[0],this.uniforms.alpha[1]=P[1]},G.alpha.get=function(){return this.uniforms.alpha},Object.defineProperties(z.prototype,G),z}(O.Filter),xt=p,Tt=`precision mediump float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 filterArea;
uniform vec2 red;
uniform vec2 green;
uniform vec2 blue;

void main(void)
{
   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/filterArea.xy).r;
   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/filterArea.xy).g;
   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/filterArea.xy).b;
   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;
}
`,bt=function(Y){function z(P,V,j){P===void 0&&(P=[-10,0]),V===void 0&&(V=[0,10]),j===void 0&&(j=[0,0]),Y.call(this,xt,Tt),this.red=P,this.green=V,this.blue=j}Y&&(z.__proto__=Y),z.prototype=Object.create(Y&&Y.prototype),z.prototype.constructor=z;var G={red:{configurable:!0},green:{configurable:!0},blue:{configurable:!0}};return G.red.get=function(){return this.uniforms.red},G.red.set=function(P){this.uniforms.red=P},G.green.get=function(){return this.uniforms.green},G.green.set=function(P){this.uniforms.green=P},G.blue.get=function(){return this.uniforms.blue},G.blue.set=function(P){this.uniforms.blue=P},Object.defineProperties(z.prototype,G),z}(O.Filter),St=p,wt=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;
uniform vec4 filterClamp;

uniform vec2 center;

uniform float amplitude;
uniform float wavelength;
// uniform float power;
uniform float brightness;
uniform float speed;
uniform float radius;

uniform float time;

const float PI = 3.14159;

void main()
{
    float halfWavelength = wavelength * 0.5 / filterArea.x;
    float maxRadius = radius / filterArea.x;
    float currentRadius = time * speed / filterArea.x;

    float fade = 1.0;

    if (maxRadius > 0.0) {
        if (currentRadius > maxRadius) {
            gl_FragColor = texture2D(uSampler, vTextureCoord);
            return;
        }
        fade = 1.0 - pow(currentRadius / maxRadius, 2.0);
    }

    vec2 dir = vec2(vTextureCoord - center / filterArea.xy);
    dir.y *= filterArea.y / filterArea.x;
    float dist = length(dir);

    if (dist <= 0.0 || dist < currentRadius - halfWavelength || dist > currentRadius + halfWavelength) {
        gl_FragColor = texture2D(uSampler, vTextureCoord);
        return;
    }

    vec2 diffUV = normalize(dir);

    float diff = (dist - currentRadius) / halfWavelength;

    float p = 1.0 - pow(abs(diff), 2.0);

    // float powDiff = diff * pow(p, 2.0) * ( amplitude * fade );
    float powDiff = 1.25 * sin(diff * PI) * p * ( amplitude * fade );

    vec2 offset = diffUV * powDiff / filterArea.xy;

    // Do clamp :
    vec2 coord = vTextureCoord + offset;
    vec2 clampedCoord = clamp(coord, filterClamp.xy, filterClamp.zw);
    vec4 color = texture2D(uSampler, clampedCoord);
    if (coord != clampedCoord) {
        color *= max(0.0, 1.0 - length(coord - clampedCoord));
    }

    // No clamp :
    // gl_FragColor = texture2D(uSampler, vTextureCoord + offset);

    color.rgb *= 1.0 + (brightness - 1.0) * p * fade;

    gl_FragColor = color;
}
`,Et=function(Y){function z(P,V,j){P===void 0&&(P=[0,0]),V===void 0&&(V={}),j===void 0&&(j=0),Y.call(this,St,wt),this.center=P,Array.isArray(V)&&(console.warn("Deprecated Warning: ShockwaveFilter params Array has been changed to options Object."),V={}),V=Object.assign({amplitude:30,wavelength:160,brightness:1,speed:500,radius:-1},V),this.amplitude=V.amplitude,this.wavelength=V.wavelength,this.brightness=V.brightness,this.speed=V.speed,this.radius=V.radius,this.time=j}Y&&(z.__proto__=Y),z.prototype=Object.create(Y&&Y.prototype),z.prototype.constructor=z;var G={center:{configurable:!0},amplitude:{configurable:!0},wavelength:{configurable:!0},brightness:{configurable:!0},speed:{configurable:!0},radius:{configurable:!0}};return z.prototype.apply=function(P,V,j,te){this.uniforms.time=this.time,P.applyFilter(this,V,j,te)},G.center.get=function(){return this.uniforms.center},G.center.set=function(P){this.uniforms.center=P},G.amplitude.get=function(){return this.uniforms.amplitude},G.amplitude.set=function(P){this.uniforms.amplitude=P},G.wavelength.get=function(){return this.uniforms.wavelength},G.wavelength.set=function(P){this.uniforms.wavelength=P},G.brightness.get=function(){return this.uniforms.brightness},G.brightness.set=function(P){this.uniforms.brightness=P},G.speed.get=function(){return this.uniforms.speed},G.speed.set=function(P){this.uniforms.speed=P},G.radius.get=function(){return this.uniforms.radius},G.radius.set=function(P){this.uniforms.radius=P},Object.defineProperties(z.prototype,G),z}(O.Filter),Pt=p,Ct=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform sampler2D uLightmap;
uniform vec4 filterArea;
uniform vec2 dimensions;
uniform vec4 ambientColor;
void main() {
    vec4 diffuseColor = texture2D(uSampler, vTextureCoord);
    vec2 lightCoord = (vTextureCoord * filterArea.xy) / dimensions;
    vec4 light = texture2D(uLightmap, lightCoord);
    vec3 ambient = ambientColor.rgb * ambientColor.a;
    vec3 intensity = ambient + light.rgb;
    vec3 finalColor = diffuseColor.rgb * intensity;
    gl_FragColor = vec4(finalColor, diffuseColor.a);
}
`,Mt=function(Y){function z(P,V,j){V===void 0&&(V=0),j===void 0&&(j=1),Y.call(this,Pt,Ct),this.uniforms.dimensions=new Float32Array(2),this.uniforms.ambientColor=new Float32Array([0,0,0,j]),this.texture=P,this.color=V}Y&&(z.__proto__=Y),z.prototype=Object.create(Y&&Y.prototype),z.prototype.constructor=z;var G={texture:{configurable:!0},color:{configurable:!0},alpha:{configurable:!0}};return z.prototype.apply=function(P,V,j,te){this.uniforms.dimensions[0]=V.sourceFrame.width,this.uniforms.dimensions[1]=V.sourceFrame.height,P.applyFilter(this,V,j,te)},G.texture.get=function(){return this.uniforms.uLightmap},G.texture.set=function(P){this.uniforms.uLightmap=P},G.color.set=function(P){var V=this.uniforms.ambientColor;typeof P=="number"?(O.utils.hex2rgb(P,V),this._color=P):(V[0]=P[0],V[1]=P[1],V[2]=P[2],V[3]=P[3],this._color=O.utils.rgb2hex(V))},G.color.get=function(){return this._color},G.alpha.get=function(){return this.uniforms.ambientColor[3]},G.alpha.set=function(P){this.uniforms.ambientColor[3]=P},Object.defineProperties(z.prototype,G),z}(O.Filter),Rt=p,Ot=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float blur;
uniform float gradientBlur;
uniform vec2 start;
uniform vec2 end;
uniform vec2 delta;
uniform vec2 texSize;

float random(vec3 scale, float seed)
{
    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);
}

void main(void)
{
    vec4 color = vec4(0.0);
    float total = 0.0;

    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);
    vec2 normal = normalize(vec2(start.y - end.y, end.x - start.x));
    float radius = smoothstep(0.0, 1.0, abs(dot(vTextureCoord * texSize - start, normal)) / gradientBlur) * blur;

    for (float t = -30.0; t <= 30.0; t++)
    {
        float percent = (t + offset - 0.5) / 30.0;
        float weight = 1.0 - abs(percent);
        vec4 sample = texture2D(uSampler, vTextureCoord + delta / texSize * percent * radius);
        sample.rgb *= sample.a;
        color += sample * weight;
        total += weight;
    }

    color /= total;
    color.rgb /= color.a + 0.00001;

    gl_FragColor = color;
}
`,tt=function(Y){function z(P,V,j,te){P===void 0&&(P=100),V===void 0&&(V=600),j===void 0&&(j=null),te===void 0&&(te=null),Y.call(this,Rt,Ot),this.uniforms.blur=P,this.uniforms.gradientBlur=V,this.uniforms.start=j||new O.Point(0,window.innerHeight/2),this.uniforms.end=te||new O.Point(600,window.innerHeight/2),this.uniforms.delta=new O.Point(30,30),this.uniforms.texSize=new O.Point(window.innerWidth,window.innerHeight),this.updateDelta()}Y&&(z.__proto__=Y),z.prototype=Object.create(Y&&Y.prototype),z.prototype.constructor=z;var G={blur:{configurable:!0},gradientBlur:{configurable:!0},start:{configurable:!0},end:{configurable:!0}};return z.prototype.updateDelta=function(){this.uniforms.delta.x=0,this.uniforms.delta.y=0},G.blur.get=function(){return this.uniforms.blur},G.blur.set=function(P){this.uniforms.blur=P},G.gradientBlur.get=function(){return this.uniforms.gradientBlur},G.gradientBlur.set=function(P){this.uniforms.gradientBlur=P},G.start.get=function(){return this.uniforms.start},G.start.set=function(P){this.uniforms.start=P,this.updateDelta()},G.end.get=function(){return this.uniforms.end},G.end.set=function(P){this.uniforms.end=P,this.updateDelta()},Object.defineProperties(z.prototype,G),z}(O.Filter),nt=function(Y){function z(){Y.apply(this,arguments)}return Y&&(z.__proto__=Y),z.prototype=Object.create(Y&&Y.prototype),z.prototype.constructor=z,z.prototype.updateDelta=function(){var G=this.uniforms.end.x-this.uniforms.start.x,P=this.uniforms.end.y-this.uniforms.start.y,V=Math.sqrt(G*G+P*P);this.uniforms.delta.x=G/V,this.uniforms.delta.y=P/V},z}(tt),it=function(Y){function z(){Y.apply(this,arguments)}return Y&&(z.__proto__=Y),z.prototype=Object.create(Y&&Y.prototype),z.prototype.constructor=z,z.prototype.updateDelta=function(){var G=this.uniforms.end.x-this.uniforms.start.x,P=this.uniforms.end.y-this.uniforms.start.y,V=Math.sqrt(G*G+P*P);this.uniforms.delta.x=-P/V,this.uniforms.delta.y=G/V},z}(tt),At=function(Y){function z(P,V,j,te){P===void 0&&(P=100),V===void 0&&(V=600),j===void 0&&(j=null),te===void 0&&(te=null),Y.call(this),this.tiltShiftXFilter=new nt(P,V,j,te),this.tiltShiftYFilter=new it(P,V,j,te)}Y&&(z.__proto__=Y),z.prototype=Object.create(Y&&Y.prototype),z.prototype.constructor=z;var G={blur:{configurable:!0},gradientBlur:{configurable:!0},start:{configurable:!0},end:{configurable:!0}};return z.prototype.apply=function(P,V,j){var te=P.getRenderTarget(!0);this.tiltShiftXFilter.apply(P,V,te),this.tiltShiftYFilter.apply(P,te,j),P.returnRenderTarget(te)},G.blur.get=function(){return this.tiltShiftXFilter.blur},G.blur.set=function(P){this.tiltShiftXFilter.blur=this.tiltShiftYFilter.blur=P},G.gradientBlur.get=function(){return this.tiltShiftXFilter.gradientBlur},G.gradientBlur.set=function(P){this.tiltShiftXFilter.gradientBlur=this.tiltShiftYFilter.gradientBlur=P},G.start.get=function(){return this.tiltShiftXFilter.start},G.start.set=function(P){this.tiltShiftXFilter.start=this.tiltShiftYFilter.start=P},G.end.get=function(){return this.tiltShiftXFilter.end},G.end.set=function(P){this.tiltShiftXFilter.end=this.tiltShiftYFilter.end=P},Object.defineProperties(z.prototype,G),z}(O.Filter),Dt=p,It=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float radius;
uniform float angle;
uniform vec2 offset;
uniform vec4 filterArea;

vec2 mapCoord( vec2 coord )
{
    coord *= filterArea.xy;
    coord += filterArea.zw;

    return coord;
}

vec2 unmapCoord( vec2 coord )
{
    coord -= filterArea.zw;
    coord /= filterArea.xy;

    return coord;
}

vec2 twist(vec2 coord)
{
    coord -= offset;

    float dist = length(coord);

    if (dist < radius)
    {
        float ratioDist = (radius - dist) / radius;
        float angleMod = ratioDist * ratioDist * angle;
        float s = sin(angleMod);
        float c = cos(angleMod);
        coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);
    }

    coord += offset;

    return coord;
}

void main(void)
{

    vec2 coord = mapCoord(vTextureCoord);

    coord = twist(coord);

    coord = unmapCoord(coord);

    gl_FragColor = texture2D(uSampler, coord );

}
`,Ft=function(Y){function z(P,V,j){P===void 0&&(P=200),V===void 0&&(V=4),j===void 0&&(j=20),Y.call(this,Dt,It),this.radius=P,this.angle=V,this.padding=j}Y&&(z.__proto__=Y),z.prototype=Object.create(Y&&Y.prototype),z.prototype.constructor=z;var G={offset:{configurable:!0},radius:{configurable:!0},angle:{configurable:!0}};return G.offset.get=function(){return this.uniforms.offset},G.offset.set=function(P){this.uniforms.offset=P},G.radius.get=function(){return this.uniforms.radius},G.radius.set=function(P){this.uniforms.radius=P},G.angle.get=function(){return this.uniforms.angle},G.angle.set=function(P){this.uniforms.angle=P},Object.defineProperties(z.prototype,G),z}(O.Filter),Lt=p,Bt=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;

uniform vec2 uCenter;
uniform float uStrength;
uniform float uInnerRadius;
uniform float uRadius;

const float MAX_KERNEL_SIZE = 32.0;

float random(vec3 scale, float seed) {
    // use the fragment position for a different seed per-pixel
    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);
}

void main() {

    float minGradient = uInnerRadius * 0.3;
    float innerRadius = (uInnerRadius + minGradient * 0.5) / filterArea.x;

    float gradient = uRadius * 0.3;
    float radius = (uRadius - gradient * 0.5) / filterArea.x;

    float countLimit = MAX_KERNEL_SIZE;

    vec2 dir = vec2(uCenter.xy / filterArea.xy - vTextureCoord);
    float dist = length(vec2(dir.x, dir.y * filterArea.y / filterArea.x));

    float strength = uStrength;

    float delta = 0.0;
    float gap;
    if (dist < innerRadius) {
        delta = innerRadius - dist;
        gap = minGradient;
    } else if (radius >= 0.0 && dist > radius) { // radius < 0 means it's infinity
        delta = dist - radius;
        gap = gradient;
    }

    if (delta > 0.0) {
        float normalCount = gap / filterArea.x;
        delta = (normalCount - delta) / normalCount;
        countLimit *= delta;
        strength *= delta;
        if (countLimit < 1.0)
        {
            gl_FragColor = texture2D(uSampler, vTextureCoord);
            return;
        }
    }

    // randomize the lookup values to hide the fixed number of samples
    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);

    float total = 0.0;
    vec4 color = vec4(0.0);

    dir *= strength;

    for (float t = 0.0; t < MAX_KERNEL_SIZE; t++) {
        float percent = (t + offset) / MAX_KERNEL_SIZE;
        float weight = 4.0 * (percent - percent * percent);
        vec2 p = vTextureCoord + dir * percent;
        vec4 sample = texture2D(uSampler, p);

        // switch to pre-multiplied alpha to correctly blur transparent images
        // sample.rgb *= sample.a;

        color += sample * weight;
        total += weight;

        if (t > countLimit){
            break;
        }
    }

    color /= total;
    // switch back from pre-multiplied alpha
    color.rgb /= color.a + 0.00001;

    gl_FragColor = color;
}
`,kt=function(Y){function z(P,V,j,te){P===void 0&&(P=.1),V===void 0&&(V=[0,0]),j===void 0&&(j=0),te===void 0&&(te=-1),Y.call(this,Lt,Bt),this.center=V,this.strength=P,this.innerRadius=j,this.radius=te}Y&&(z.__proto__=Y),z.prototype=Object.create(Y&&Y.prototype),z.prototype.constructor=z;var G={center:{configurable:!0},strength:{configurable:!0},innerRadius:{configurable:!0},radius:{configurable:!0}};return G.center.get=function(){return this.uniforms.uCenter},G.center.set=function(P){this.uniforms.uCenter=P},G.strength.get=function(){return this.uniforms.uStrength},G.strength.set=function(P){this.uniforms.uStrength=P},G.innerRadius.get=function(){return this.uniforms.uInnerRadius},G.innerRadius.set=function(P){this.uniforms.uInnerRadius=P},G.radius.get=function(){return this.uniforms.uRadius},G.radius.set=function(P){(P<0||P===1/0)&&(P=-1),this.uniforms.uRadius=P},Object.defineProperties(z.prototype,G),z}(O.Filter);return _.AdjustmentFilter=x,_.AdvancedBloomFilter=e,_.AsciiFilter=i,_.BevelFilter=d,_.BloomFilter=T,_.BulgePinchFilter=S,_.ColorMapFilter=k,_.ColorReplaceFilter=D,_.ConvolutionFilter=N,_.CrossHatchFilter=X,_.CRTFilter=K,_.DotFilter=H,_.DropShadowFilter=ie,_.EmbossFilter=se,_.GlitchFilter=ue,_.GlowFilter=ce,_.GodrayFilter=Oe,_.KawaseBlurFilter=h,_.MotionBlurFilter=Le,_.MultiColorReplaceFilter=$e,_.OldFilmFilter=ut,_.OutlineFilter=et,_.PixelateFilter=dt,_.RadialBlurFilter=gt,_.ReflectionFilter=yt,_.RGBSplitFilter=bt,_.ShockwaveFilter=Et,_.SimpleLightmapFilter=Mt,_.TiltShiftFilter=At,_.TiltShiftAxisFilter=tt,_.TiltShiftXFilter=nt,_.TiltShiftYFilter=it,_.TwistFilter=Ft,_.ZoomBlurFilter=kt,_}({},PIXI);Object.assign(PIXI.filters,globalThis?globalThis.__filters:Ut);/*!
 * pixi-particles - v3.0.0
 * Compiled Mon, 12 Feb 2018 04:21:37 UTC
 *
 * pixi-particles is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */(function(_){if(typeof rt=="object"&&typeof Ye<"u")Ye.exports=_();else if(typeof define=="function"&&define.amd)define([],_);else{var O;typeof window<"u"?O=window:typeof global<"u"?O=global:typeof self<"u"?O=self:O=this,O.pixiParticles=_()}})(function(){return function(){function _(O,p,w){function x(v,h){if(!p[v]){if(!O[v]){var s=typeof require=="function"&&require;if(!h&&s)return s(v,!0);if(g)return g(v,!0);var a=new Error("Cannot find module '"+v+"'");throw a.code="MODULE_NOT_FOUND",a}var r=p[v]={exports:{}};O[v][0].call(r.exports,function(t){var e=O[v][1][t];return x(e||t)},r,r.exports,_,O,p,w)}return p[v].exports}for(var g=typeof require=="function"&&require,u=0;u<w.length;u++)x(w[u]);return x}return _}()({1:[function(_,O,p){var w=this&&this.__extends||function(){var v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,s){h.__proto__=s}||function(h,s){for(var a in s)s.hasOwnProperty(a)&&(h[a]=s[a])};return function(h,s){v(h,s);function a(){this.constructor=h}h.prototype=s===null?Object.create(s):(a.prototype=s.prototype,new a)}}();Object.defineProperty(p,"__esModule",{value:!0});var x=_("Particle"),g=PIXI.Texture,u=function(v){w(h,v);function h(s){var a=v.call(this,s)||this;return a.textures=null,a.duration=0,a.framerate=0,a.elapsed=0,a.loop=!1,a}return h.prototype.init=function(){this.Particle_init(),this.elapsed=0,this.framerate<0&&(this.duration=this.maxLife,this.framerate=this.textures.length/this.duration)},h.prototype.applyArt=function(s){this.textures=s.textures,this.framerate=s.framerate,this.duration=s.duration,this.loop=s.loop},h.prototype.update=function(s){var a=this.Particle_update(s);if(a>=0){this.elapsed+=s,this.elapsed>this.duration&&(this.loop?this.elapsed=this.elapsed%this.duration:this.elapsed=this.duration-1e-6);var r=this.elapsed*this.framerate+1e-7|0;this.texture=this.textures[r]||PIXI.Texture.EMPTY}return a},h.prototype.destroy=function(){this.Particle_destroy(),this.textures=null},h.parseArt=function(s){for(var a,r,t,e,o,n=[],i=0;i<s.length;++i){a=s[i],n[i]=r={},r.textures=o=[],t=a.textures;for(var f=0;f<t.length;++f)if(e=t[f],typeof e=="string")o.push(g.fromImage(e));else if(e instanceof g)o.push(e);else{var l=e.count||1;for(typeof e.texture=="string"?e=g.fromImage(e.texture):e=e.texture;l>0;--l)o.push(e)}a.framerate=="matchLife"?(r.framerate=-1,r.duration=0,r.loop=!1):(r.loop=!!a.loop,r.framerate=a.framerate>0?a.framerate:60,r.duration=o.length/r.framerate)}return n},h}(x.default);p.default=u},{Particle:3}],2:[function(_,O,p){Object.defineProperty(p,"__esModule",{value:!0});var w=_("ParticleUtils"),x=_("Particle"),g=_("PropertyNode"),u=PIXI.ticker.shared,v=new PIXI.Point,h=function(){function s(a,r,t){this._particleConstructor=x.default,this.particleImages=null,this.startAlpha=null,this.startSpeed=null,this.minimumSpeedMultiplier=1,this.acceleration=null,this.maxSpeed=NaN,this.startScale=null,this.minimumScaleMultiplier=1,this.startColor=null,this.minLifetime=0,this.maxLifetime=0,this.minStartRotation=0,this.maxStartRotation=0,this.noRotation=!1,this.minRotationSpeed=0,this.maxRotationSpeed=0,this.particleBlendMode=0,this.customEase=null,this.extraData=null,this._frequency=1,this.spawnChance=1,this.maxParticles=1e3,this.emitterLifetime=-1,this.spawnPos=null,this.spawnType=null,this._spawnFunc=null,this.spawnRect=null,this.spawnCircle=null,this.particlesPerWave=1,this.particleSpacing=0,this.angleStart=0,this.rotation=0,this.ownerPos=null,this._prevEmitterPos=null,this._prevPosIsValid=!1,this._posChanged=!1,this._parent=null,this.addAtBack=!1,this.particleCount=0,this._emit=!1,this._spawnTimer=0,this._emitterLife=-1,this._activeParticlesFirst=null,this._activeParticlesLast=null,this._poolFirst=null,this._origConfig=null,this._origArt=null,this._autoUpdate=!1,this._destroyWhenComplete=!1,this._completeCallback=null,this.parent=a,r&&t&&this.init(r,t),this.recycle=this.recycle,this.update=this.update,this.rotate=this.rotate,this.updateSpawnPos=this.updateSpawnPos,this.updateOwnerPos=this.updateOwnerPos}return Object.defineProperty(s.prototype,"frequency",{get:function(){return this._frequency},set:function(a){typeof a=="number"&&a>0?this._frequency=a:this._frequency=1},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"particleConstructor",{get:function(){return this._particleConstructor},set:function(a){if(a!=this._particleConstructor){this._particleConstructor=a,this.cleanup();for(var r=this._poolFirst;r;r=r.next)r.destroy();this._poolFirst=null,this._origConfig&&this._origArt&&this.init(this._origArt,this._origConfig)}},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"parent",{get:function(){return this._parent},set:function(a){this.cleanup(),this._parent=a},enumerable:!0,configurable:!0}),s.prototype.init=function(a,r){if(!(!a||!r)){this.cleanup(),this._origConfig=r,this._origArt=a,a=Array.isArray(a)?a.slice():[a];var t=this._particleConstructor;this.particleImages=t.parseArt?t.parseArt(a):a,r.alpha?this.startAlpha=g.default.createList(r.alpha):this.startAlpha=new g.default(1,0),r.speed?(this.startSpeed=g.default.createList(r.speed),this.minimumSpeedMultiplier=r.speed.minimumSpeedMultiplier||1):(this.minimumSpeedMultiplier=1,this.startSpeed=new g.default(0,0));var e=r.acceleration;e&&(e.x||e.y)?(this.startSpeed.next=null,this.acceleration=new PIXI.Point(e.x,e.y),this.maxSpeed=r.maxSpeed||NaN):this.acceleration=new PIXI.Point,r.scale?(this.startScale=g.default.createList(r.scale),this.minimumScaleMultiplier=r.scale.minimumScaleMultiplier||1):(this.startScale=new g.default(1,0),this.minimumScaleMultiplier=1),r.color?this.startColor=g.default.createList(r.color):this.startColor=new g.default({r:255,g:255,b:255},0),r.startRotation?(this.minStartRotation=r.startRotation.min,this.maxStartRotation=r.startRotation.max):this.minStartRotation=this.maxStartRotation=0,r.noRotation&&(this.minStartRotation||this.maxStartRotation)?this.noRotation=!!r.noRotation:this.noRotation=!1,r.rotationSpeed?(this.minRotationSpeed=r.rotationSpeed.min,this.maxRotationSpeed=r.rotationSpeed.max):this.minRotationSpeed=this.maxRotationSpeed=0,this.minLifetime=r.lifetime.min,this.maxLifetime=r.lifetime.max,this.particleBlendMode=w.default.getBlendMode(r.blendMode),r.ease?this.customEase=typeof r.ease=="function"?r.ease:w.default.generateEase(r.ease):this.customEase=null,t.parseData?this.extraData=t.parseData(r.extraData):this.extraData=r.extraData||null,this.spawnRect=this.spawnCircle=null,this.particlesPerWave=1,r.particlesPerWave&&r.particlesPerWave>1&&(this.particlesPerWave=r.particlesPerWave),this.particleSpacing=0,this.angleStart=0;var o;switch(r.spawnType){case"rect":this.spawnType="rect",this._spawnFunc=this._spawnRect;var n=r.spawnRect;this.spawnRect=new PIXI.Rectangle(n.x,n.y,n.w,n.h);break;case"circle":this.spawnType="circle",this._spawnFunc=this._spawnCircle,o=r.spawnCircle,this.spawnCircle=new PIXI.Circle(o.x,o.y,o.r);break;case"ring":this.spawnType="ring",this._spawnFunc=this._spawnRing,o=r.spawnCircle,this.spawnCircle=new PIXI.Circle(o.x,o.y,o.r),this.spawnCircle.minRadius=o.minR;break;case"burst":this.spawnType="burst",this._spawnFunc=this._spawnBurst,this.particleSpacing=r.particleSpacing,this.angleStart=r.angleStart?r.angleStart:0;break;case"point":this.spawnType="point",this._spawnFunc=this._spawnPoint;break;default:this.spawnType="point",this._spawnFunc=this._spawnPoint;break}this.frequency=r.frequency,this.spawnChance=typeof r.spawnChance=="number"&&r.spawnChance>0?r.spawnChance:1,this.emitterLifetime=r.emitterLifetime||-1,this.maxParticles=r.maxParticles>0?r.maxParticles:1e3,this.addAtBack=!!r.addAtBack,this.rotation=0,this.ownerPos=new PIXI.Point,this.spawnPos=new PIXI.Point(r.pos.x,r.pos.y),this._prevEmitterPos=this.spawnPos.clone(),this._prevPosIsValid=!1,this._spawnTimer=0,this.emit=r.emit===void 0?!0:!!r.emit,this.autoUpdate=r.autoUpdate===void 0?!1:!!r.autoUpdate}},s.prototype.recycle=function(a){a.next&&(a.next.prev=a.prev),a.prev&&(a.prev.next=a.next),a==this._activeParticlesLast&&(this._activeParticlesLast=a.prev),a==this._activeParticlesFirst&&(this._activeParticlesFirst=a.next),a.prev=null,a.next=this._poolFirst,this._poolFirst=a,a.parent&&a.parent.removeChild(a),--this.particleCount},s.prototype.rotate=function(a){if(this.rotation!=a){var r=a-this.rotation;this.rotation=a,w.default.rotatePoint(r,this.spawnPos),this._posChanged=!0}},s.prototype.updateSpawnPos=function(a,r){this._posChanged=!0,this.spawnPos.x=a,this.spawnPos.y=r},s.prototype.updateOwnerPos=function(a,r){this._posChanged=!0,this.ownerPos.x=a,this.ownerPos.y=r},s.prototype.resetPositionTracking=function(){this._prevPosIsValid=!1},Object.defineProperty(s.prototype,"emit",{get:function(){return this._emit},set:function(a){this._emit=!!a,this._emitterLife=this.emitterLifetime},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(a){this._autoUpdate&&!a?u.remove(this.update,this):!this._autoUpdate&&a&&u.add(this.update,this),this._autoUpdate=!!a},enumerable:!0,configurable:!0}),s.prototype.playOnceAndDestroy=function(a){this.autoUpdate=!0,this.emit=!0,this._destroyWhenComplete=!0,this._completeCallback=a},s.prototype.playOnce=function(a){this.emit=!0,this._completeCallback=a},s.prototype.update=function(a){if(this._autoUpdate&&(a=a/PIXI.settings.TARGET_FPMS/1e3),!!this._parent){var r,t,e;for(t=this._activeParticlesFirst;t;t=e)e=t.next,t.update(a);var o,n;this._prevPosIsValid&&(o=this._prevEmitterPos.x,n=this._prevEmitterPos.y);var i=this.ownerPos.x+this.spawnPos.x,f=this.ownerPos.y+this.spawnPos.y;if(this._emit)for(this._spawnTimer-=a;this._spawnTimer<=0;){if(this._emitterLife>0&&(this._emitterLife-=this._frequency,this._emitterLife<=0)){this._spawnTimer=0,this._emitterLife=0,this.emit=!1;break}if(this.particleCount>=this.maxParticles){this._spawnTimer+=this._frequency;continue}var l=void 0;if(this.minLifetime==this.maxLifetime?l=this.minLifetime:l=Math.random()*(this.maxLifetime-this.minLifetime)+this.minLifetime,-this._spawnTimer<l){var d=void 0,m=void 0;if(this._prevPosIsValid&&this._posChanged){var c=1+this._spawnTimer/a;d=(i-o)*c+o,m=(f-n)*c+n}else d=i,m=f;r=0;for(var b=Math.min(this.particlesPerWave,this.maxParticles-this.particleCount);r<b;++r)if(!(this.spawnChance<1&&Math.random()>=this.spawnChance)){var y=void 0;if(this._poolFirst?(y=this._poolFirst,this._poolFirst=this._poolFirst.next,y.next=null):y=new this.particleConstructor(this),this.particleImages.length>1?y.applyArt(this.particleImages[Math.floor(Math.random()*this.particleImages.length)]):y.applyArt(this.particleImages[0]),y.alphaList.reset(this.startAlpha),this.minimumSpeedMultiplier!=1&&(y.speedMultiplier=Math.random()*(1-this.minimumSpeedMultiplier)+this.minimumSpeedMultiplier),y.speedList.reset(this.startSpeed),y.acceleration.x=this.acceleration.x,y.acceleration.y=this.acceleration.y,y.maxSpeed=this.maxSpeed,this.minimumScaleMultiplier!=1&&(y.scaleMultiplier=Math.random()*(1-this.minimumScaleMultiplier)+this.minimumScaleMultiplier),y.scaleList.reset(this.startScale),y.colorList.reset(this.startColor),this.minRotationSpeed==this.maxRotationSpeed?y.rotationSpeed=this.minRotationSpeed:y.rotationSpeed=Math.random()*(this.maxRotationSpeed-this.minRotationSpeed)+this.minRotationSpeed,y.noRotation=this.noRotation,y.maxLife=l,y.blendMode=this.particleBlendMode,y.ease=this.customEase,y.extraData=this.extraData,this._spawnFunc(y,d,m,r),y.init(),y.update(-this._spawnTimer),!y.parent)this.addAtBack?this._parent.addChildAt(y,0):this._parent.addChild(y);else{var T=this._parent.children;if(T[0]==y)T.shift();else if(T[T.length-1]==y)T.pop();else{var E=T.indexOf(y);T.splice(E,1)}this.addAtBack?T.unshift(y):T.push(y)}this._activeParticlesLast?(this._activeParticlesLast.next=y,y.prev=this._activeParticlesLast,this._activeParticlesLast=y):this._activeParticlesLast=this._activeParticlesFirst=y,++this.particleCount}}this._spawnTimer+=this._frequency}this._posChanged&&(this._prevEmitterPos.x=i,this._prevEmitterPos.y=f,this._prevPosIsValid=!0,this._posChanged=!1),!this._emit&&!this._activeParticlesFirst&&(this._completeCallback&&this._completeCallback(),this._destroyWhenComplete&&this.destroy())}},s.prototype._spawnPoint=function(a,r,t){this.minStartRotation==this.maxStartRotation?a.rotation=this.minStartRotation+this.rotation:a.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,a.position.x=r,a.position.y=t},s.prototype._spawnRect=function(a,r,t){this.minStartRotation==this.maxStartRotation?a.rotation=this.minStartRotation+this.rotation:a.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,v.x=Math.random()*this.spawnRect.width+this.spawnRect.x,v.y=Math.random()*this.spawnRect.height+this.spawnRect.y,this.rotation!==0&&w.default.rotatePoint(this.rotation,v),a.position.x=r+v.x,a.position.y=t+v.y},s.prototype._spawnCircle=function(a,r,t){this.minStartRotation==this.maxStartRotation?a.rotation=this.minStartRotation+this.rotation:a.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,v.x=Math.random()*this.spawnCircle.radius,v.y=0,w.default.rotatePoint(Math.random()*360,v),v.x+=this.spawnCircle.x,v.y+=this.spawnCircle.y,this.rotation!==0&&w.default.rotatePoint(this.rotation,v),a.position.x=r+v.x,a.position.y=t+v.y},s.prototype._spawnRing=function(a,r,t){var e=this.spawnCircle;this.minStartRotation==this.maxStartRotation?a.rotation=this.minStartRotation+this.rotation:a.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,e.minRadius==e.radius?v.x=Math.random()*(e.radius-e.minRadius)+e.minRadius:v.x=e.radius,v.y=0;var o=Math.random()*360;a.rotation+=o,w.default.rotatePoint(o,v),v.x+=this.spawnCircle.x,v.y+=this.spawnCircle.y,this.rotation!==0&&w.default.rotatePoint(this.rotation,v),a.position.x=r+v.x,a.position.y=t+v.y},s.prototype._spawnBurst=function(a,r,t,e){this.particleSpacing===0?a.rotation=Math.random()*360:a.rotation=this.angleStart+this.particleSpacing*e+this.rotation,a.position.x=r,a.position.y=t},s.prototype.cleanup=function(){var a,r;for(a=this._activeParticlesFirst;a;a=r)r=a.next,this.recycle(a),a.parent&&a.parent.removeChild(a);this._activeParticlesFirst=this._activeParticlesLast=null,this.particleCount=0},s.prototype.destroy=function(){this.autoUpdate=!1,this.cleanup();for(var a,r=this._poolFirst;r;r=a)a=r.next,r.destroy();this._poolFirst=this._parent=this.particleImages=this.spawnPos=this.ownerPos=this.startColor=this.startScale=this.startAlpha=this.startSpeed=this.customEase=this._completeCallback=null},s}();p.default=h},{Particle:3,ParticleUtils:4,PropertyNode:7}],3:[function(_,O,p){var w=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var r in a)a.hasOwnProperty(r)&&(s[r]=a[r])};return function(s,a){h(s,a);function r(){this.constructor=s}s.prototype=a===null?Object.create(a):(r.prototype=a.prototype,new r)}}();Object.defineProperty(p,"__esModule",{value:!0});var x=_("ParticleUtils"),g=_("PropertyList"),u=PIXI.Sprite,v=function(h){w(s,h);function s(a){var r=h.call(this)||this;return r.emitter=a,r.anchor.x=r.anchor.y=.5,r.velocity=new PIXI.Point,r.maxLife=0,r.age=0,r.ease=null,r.extraData=null,r.alphaList=new g.default,r.speedList=new g.default,r.speedMultiplier=1,r.acceleration=new PIXI.Point,r.maxSpeed=NaN,r.scaleList=new g.default,r.scaleMultiplier=1,r.colorList=new g.default(!0),r._doAlpha=!1,r._doScale=!1,r._doSpeed=!1,r._doAcceleration=!1,r._doColor=!1,r._doNormalMovement=!1,r._oneOverLife=0,r.next=null,r.prev=null,r.init=r.init,r.Particle_init=s.prototype.init,r.update=r.update,r.Particle_update=s.prototype.update,r.Sprite_destroy=h.prototype.destroy,r.Particle_destroy=s.prototype.destroy,r.applyArt=r.applyArt,r.kill=r.kill,r}return s.prototype.init=function(){this.age=0,this.velocity.x=this.speedList.current.value*this.speedMultiplier,this.velocity.y=0,x.default.rotatePoint(this.rotation,this.velocity),this.noRotation?this.rotation=0:this.rotation*=x.default.DEG_TO_RADS,this.rotationSpeed*=x.default.DEG_TO_RADS,this.alpha=this.alphaList.current.value,this.scale.x=this.scale.y=this.scaleList.current.value,this._doAlpha=!!this.alphaList.current.next,this._doSpeed=!!this.speedList.current.next,this._doScale=!!this.scaleList.current.next,this._doColor=!!this.colorList.current.next,this._doAcceleration=this.acceleration.x!==0||this.acceleration.y!==0,this._doNormalMovement=this._doSpeed||this.speedList.current.value!==0||this._doAcceleration,this._oneOverLife=1/this.maxLife;var a=this.colorList.current.value;this.tint=x.default.combineRGBComponents(a.r,a.g,a.b),this.visible=!0},s.prototype.applyArt=function(a){this.texture=a||PIXI.Texture.EMPTY},s.prototype.update=function(a){if(this.age+=a,this.age>=this.maxLife)return this.kill(),-1;var r=this.age*this._oneOverLife;if(this.ease&&(this.ease.length==4?r=this.ease(r,0,1,1):r=this.ease(r)),this._doAlpha&&(this.alpha=this.alphaList.interpolate(r)),this._doScale){var t=this.scaleList.interpolate(r)*this.scaleMultiplier;this.scale.x=this.scale.y=t}if(this._doNormalMovement){if(this._doSpeed){var e=this.speedList.interpolate(r)*this.speedMultiplier;x.default.normalize(this.velocity),x.default.scaleBy(this.velocity,e)}else if(this._doAcceleration&&(this.velocity.x+=this.acceleration.x*a,this.velocity.y+=this.acceleration.y*a,this.maxSpeed)){var o=x.default.length(this.velocity);o>this.maxSpeed&&x.default.scaleBy(this.velocity,this.maxSpeed/o)}this.position.x+=this.velocity.x*a,this.position.y+=this.velocity.y*a}return this._doColor&&(this.tint=this.colorList.interpolate(r)),this.rotationSpeed!==0?this.rotation+=this.rotationSpeed*a:this.acceleration&&!this.noRotation&&(this.rotation=Math.atan2(this.velocity.y,this.velocity.x)),r},s.prototype.kill=function(){this.emitter.recycle(this)},s.prototype.destroy=function(){this.parent&&this.parent.removeChild(this),this.Sprite_destroy(),this.emitter=this.velocity=this.colorList=this.scaleList=this.alphaList=this.speedList=this.ease=this.next=this.prev=null},s.parseArt=function(a){var r;for(r=a.length;r>=0;--r)typeof a[r]=="string"&&(a[r]=PIXI.Texture.fromImage(a[r]));if(x.default.verbose){for(r=a.length-1;r>0;--r)if(a[r].baseTexture!=a[r-1].baseTexture){window.console&&console.warn("PixiParticles: using particle textures from different images may hinder performance in WebGL");break}}return a},s.parseData=function(a){return a},s}(u);p.default=v},{ParticleUtils:4,PropertyList:6}],4:[function(_,O,p){Object.defineProperty(p,"__esModule",{value:!0});var w=PIXI.BLEND_MODES,x=_("PropertyNode"),g={verbose:!1,DEG_TO_RADS:Math.PI/180,rotatePoint:function(u,v){if(u){u*=g.DEG_TO_RADS;var h=Math.sin(u),s=Math.cos(u),a=v.x*s-v.y*h,r=v.x*h+v.y*s;v.x=a,v.y=r}},combineRGBComponents:function(u,v,h){return u<<16|v<<8|h},normalize:function(u){var v=1/g.length(u);u.x*=v,u.y*=v},scaleBy:function(u,v){u.x*=v,u.y*=v},length:function(u){return Math.sqrt(u.x*u.x+u.y*u.y)},hexToRGB:function(u,v){v||(v={}),u.charAt(0)=="#"?u=u.substr(1):u.indexOf("0x")===0&&(u=u.substr(2));var h;return u.length==8&&(h=u.substr(0,2),u=u.substr(2)),v.r=parseInt(u.substr(0,2),16),v.g=parseInt(u.substr(2,2),16),v.b=parseInt(u.substr(4,2),16),h&&(v.a=parseInt(h,16)),v},generateEase:function(u){var v=u.length,h=1/v;return function(s){var a,r,t=v*s|0;return a=(s-t*h)*v,r=u[t]||u[v-1],r.s+a*(2*(1-a)*(r.cp-r.s)+a*(r.e-r.s))}},getBlendMode:function(u){if(!u)return w.NORMAL;for(u=u.toUpperCase();u.indexOf(" ")>=0;)u=u.replace(" ","_");return w[u]||w.NORMAL},createSteppedGradient:function(u,v){v===void 0&&(v=10),(typeof v!="number"||v<=0)&&(v=10);var h=new x.default(u[0].value,u[0].time);h.isStepped=!0;for(var s=h,a=u[0],r=1,t=u[r],e=1;e<v;++e){for(var o=e/v;o>t.time;)a=t,t=u[++r];o=(o-a.time)/(t.time-a.time);var n=g.hexToRGB(a.value),i=g.hexToRGB(t.value),f={};f.r=(i.r-n.r)*o+n.r,f.g=(i.g-n.g)*o+n.g,f.b=(i.b-n.b)*o+n.b,s.next=new x.default(f,e/v),s=s.next}return h}};p.default=g},{PropertyNode:7}],5:[function(_,O,p){var w=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(t,e){r(t,e);function o(){this.constructor=t}t.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}();Object.defineProperty(p,"__esModule",{value:!0});var x=_("ParticleUtils"),g=_("Particle"),u=new PIXI.Point,v=["pow","sqrt","abs","floor","round","ceil","E","PI","sin","cos","tan","asin","acos","atan","atan2","log"],h=new RegExp(["[01234567890\\.\\*\\-\\+\\/\\(\\)x ,]"].concat(v).join("|"),"g"),s=function(r){for(var t=r.match(h),e=t.length-1;e>=0;--e)v.indexOf(t[e])>=0&&(t[e]="Math."+t[e]);return r=t.join(""),new Function("x","return "+r+";")},a=function(r){w(t,r);function t(e){var o=r.call(this,e)||this;return o.path=null,o.initialRotation=0,o.initialPosition=new PIXI.Point,o.movement=0,o}return t.prototype.init=function(){this.initialRotation=this.rotation,this.Particle_init(),this.path=this.extraData.path,this._doNormalMovement=!this.path,this.movement=0,this.initialPosition.x=this.position.x,this.initialPosition.y=this.position.y},t.prototype.update=function(e){var o=this.Particle_update(e);if(o>=0&&this.path){var n=this.speedList.interpolate(o)*this.speedMultiplier;this.movement+=n*e,u.x=this.movement,u.y=this.path(this.movement),x.default.rotatePoint(this.initialRotation,u),this.position.x=this.initialPosition.x+u.x,this.position.y=this.initialPosition.y+u.y}return o},t.prototype.destroy=function(){this.Particle_destroy(),this.path=this.initialPosition=null},t.parseArt=function(e){return g.default.parseArt(e)},t.parseData=function(e){var o={};if(e&&e.path)try{o.path=s(e.path)}catch{x.default.verbose&&console.error("PathParticle: error in parsing path expression"),o.path=null}else x.default.verbose&&console.error("PathParticle requires a path string in extraData!"),o.path=null;return o},t}(g.default);p.default=a},{Particle:3,ParticleUtils:4}],6:[function(_,O,p){Object.defineProperty(p,"__esModule",{value:!0});var w=_("ParticleUtils"),x=function(){function r(t){t===void 0&&(t=!1),this.current=null,this.next=null,this.isColor=!!t,this.interpolate=null,this.ease=null}return r.prototype.reset=function(t){this.current=t,this.next=t.next;var e=this.next&&this.next.time>=1;e?this.interpolate=this.isColor?u:g:t.isStepped?this.interpolate=this.isColor?a:s:this.interpolate=this.isColor?h:v,this.ease=this.current.ease},r}();p.default=x;function g(r){return this.ease&&(r=this.ease(r)),(this.next.value-this.current.value)*r+this.current.value}function u(r){this.ease&&(r=this.ease(r));var t=this.current.value,e=this.next.value,o=(e.r-t.r)*r+t.r,n=(e.g-t.g)*r+t.g,i=(e.b-t.b)*r+t.b;return w.default.combineRGBComponents(o,n,i)}function v(r){for(this.ease&&(r=this.ease(r));r>this.next.time;)this.current=this.next,this.next=this.next.next;return r=(r-this.current.time)/(this.next.time-this.current.time),(this.next.value-this.current.value)*r+this.current.value}function h(r){for(this.ease&&(r=this.ease(r));r>this.next.time;)this.current=this.next,this.next=this.next.next;r=(r-this.current.time)/(this.next.time-this.current.time);var t=this.current.value,e=this.next.value,o=(e.r-t.r)*r+t.r,n=(e.g-t.g)*r+t.g,i=(e.b-t.b)*r+t.b;return w.default.combineRGBComponents(o,n,i)}function s(r){for(this.ease&&(r=this.ease(r));this.next&&r>this.next.time;)this.current=this.next,this.next=this.next.next;return this.current.value}function a(r){for(this.ease&&(r=this.ease(r));this.next&&r>this.next.time;)this.current=this.next,this.next=this.next.next;var t=this.current.value;return w.default.combineRGBComponents(t.r,t.g,t.b)}},{ParticleUtils:4}],7:[function(_,O,p){Object.defineProperty(p,"__esModule",{value:!0});var w=_("ParticleUtils"),x=function(){function g(u,v,h){this.value=typeof u=="string"?w.default.hexToRGB(u):u,this.time=v,this.next=null,this.isStepped=!1,h?this.ease=typeof h=="function"?h:w.default.generateEase(h):this.ease=null}return g.createList=function(u){if(Array.isArray(u.list)){var v=u.list,h=void 0,s=void 0;if(s=h=new g(v[0].value,v[0].time,u.ease),v.length>2||v.length===2&&v[1].value!==v[0].value)for(var a=1;a<v.length;++a)h.next=new g(v[a].value,v[a].time),h=h.next;return s.isStepped=!!u.isStepped,s}else{var r=new g(u.start,0);return u.end!==u.start&&(r.next=new g(u.end,1)),r}},g}();p.default=x},{ParticleUtils:4}],8:[function(_,O,p){Object.defineProperty(p,"__esModule",{value:!0});var w=_("ParticleUtils.js");p.ParticleUtils=w.default;var x=_("Particle.js");p.Particle=x.default;var g=_("Emitter.js");p.Emitter=g.default;var u=_("PathParticle.js");p.PathParticle=u.default;var v=_("AnimatedParticle.js");p.AnimatedParticle=v.default},{"AnimatedParticle.js":1,"Emitter.js":2,"Particle.js":3,"ParticleUtils.js":4,"PathParticle.js":5}],9:[function(_,O,p){if(Object.defineProperty(p,"__esModule",{value:!0}),typeof PIXI>"u")throw"pixi-particles requires pixi.js to be loaded first";PIXI.particles||(PIXI.particles={});var w=_("particles");for(var x in w)PIXI.particles[x]=w[x]},{particles:8}]},{},[9])(9)});var Gt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Xt(_){return _&&_.__esModule&&Object.prototype.hasOwnProperty.call(_,"default")?_.default:_}var at={exports:{}};(function(_,O){(function(p,w){_.exports=w()})(Gt,function(){var p=function(){function w(e){return u.appendChild(e.dom),e}function x(e){for(var o=0;o<u.children.length;o++)u.children[o].style.display=o===e?"block":"none";g=e}var g=0,u=document.createElement("div");u.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",u.addEventListener("click",function(e){e.preventDefault(),x(++g%u.children.length)},!1);var v=(performance||Date).now(),h=v,s=0,a=w(new p.Panel("FPS","#0ff","#002")),r=w(new p.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var t=w(new p.Panel("MB","#f08","#201"));return x(0),{REVISION:16,dom:u,addPanel:w,showPanel:x,begin:function(){v=(performance||Date).now()},end:function(){s++;var e=(performance||Date).now();if(r.update(e-v,200),e>h+1e3&&(a.update(1e3*s/(e-h),100),h=e,s=0,t)){var o=performance.memory;t.update(o.usedJSHeapSize/1048576,o.jsHeapSizeLimit/1048576)}return e},update:function(){v=this.end()},domElement:u,setMode:x}};return p.Panel=function(w,x,g){var u=1/0,v=0,h=Math.round,s=h(window.devicePixelRatio||1),a=80*s,r=48*s,t=3*s,e=2*s,o=3*s,n=15*s,i=74*s,f=30*s,l=document.createElement("canvas");l.width=a,l.height=r,l.style.cssText="width:80px;height:48px";var d=l.getContext("2d");return d.font="bold "+9*s+"px Helvetica,Arial,sans-serif",d.textBaseline="top",d.fillStyle=g,d.fillRect(0,0,a,r),d.fillStyle=x,d.fillText(w,t,e),d.fillRect(o,n,i,f),d.fillStyle=g,d.globalAlpha=.9,d.fillRect(o,n,i,f),{dom:l,update:function(m,c){u=Math.min(u,m),v=Math.max(v,m),d.fillStyle=g,d.globalAlpha=1,d.fillRect(0,0,a,n),d.fillStyle=x,d.fillText(h(m)+" "+w+" ("+h(u)+"-"+h(v)+")",t,e),d.drawImage(l,o+s,n,i-s,f,o,n,i-s,f),d.fillRect(o+i-s,n,s,f),d.fillStyle=g,d.globalAlpha=.9,d.fillRect(o+i-s,n,s,h((1-m/c)*f))}}},p})})(at);var zt=at.exports;const Wt=Xt(zt);class Ht{constructor(){const O=new Wt;document.body.appendChild(O.dom);function p(){O.begin(),O.end(),requestAnimationFrame(p)}p()}}var _e=(_=>(_.Menu="MainStage",_.FirstTask="FirstTask",_.SecondTask="SecondTaskStage",_.ThirdTask="ThirdTaskStage",_))(_e||{}),Ue=(_=>(_[_.Landscape=0]="Landscape",_[_.Portrait=1]="Portrait",_[_.None=2]="None",_))(Ue||{});class Ge{}Ge.DisplayResolution={width:1280,height:720};class He extends PIXI.utils.EventEmitter{constructor(O,p){super(),He.instance=this,this.initProperties(O,p),this.addResizeEvent()}initProperties(O,p){const w=new PIXI.Application({width:O,height:p,backgroundColor:0,resolution:window.devicePixelRatio||1,autoDensity:!0});w.renderer.view.id="videoslot",document.body.appendChild(w.view),this.rendererContainer=w.stage,this.renderer=w.renderer,this.width=O,this.height=p,this.scaleFactor=1,document.body.ontouchend=this.onFullscreenChange.bind(this),document.body.onclick=this.onFullscreenChange.bind(this),this.currentOrientation=Ue.None,this.onResize()}addResizeEvent(){window.addEventListener("resize",this.onResize.bind(this)),this.onResize()}onResize(){const O=window.innerWidth/this.width,p=window.innerHeight/this.height;this.scaleFactor=Math.min(O,p),this.renderer.resize(window.innerWidth,window.innerHeight),this.rendererContainer.scale.set(this.scaleFactor),this.emit("resize",{width:this.width*this.scaleFactor,height:this.height*this.scaleFactor}),this.setOrientationMode()}setOrientationMode(){const O=window.innerWidth,p=window.innerHeight;this.currentOrientation=p>=O?Ue.Portrait:Ue.Landscape}getCurrentOrientation(){return this.currentOrientation}setCurrentOrientation(O){this.currentOrientation=O,this.emit("orientationChanged",O)}onFullscreenChange(){const O=document.documentElement;O.requestFullscreen?O.requestFullscreen():O.mozRequestFullScreen?O.mozRequestFullScreen():O.webkitRequestFullscreen?O.webkitRequestFullscreen():O.msRequestFullscreen&&O.msRequestFullscreen()}getRenderer(){return this.renderer}getRendererContainer(){return this.rendererContainer}getWidth(){return this.width}getHeight(){return this.height}getScaleFactor(){return this.scaleFactor}}class Te extends PIXI.Container{constructor(O={}){super(),O.name&&(this.name=O.name),O.parent&&O.parent.addChild(this),O.x!==void 0&&(this.position.x=O.x),O.y!==void 0&&(this.position.y=O.y)}sortChildren(){this.children.sort(function(O,p){return O.zIndex=O.zIndex||0,p.zIndex=p.zIndex||0,O.zIndex-p.zIndex})}}class Qe extends PIXI.Sprite{constructor(O){super(),this._state="Out",this._callback=null,this._isEnabled=!0,this._zIndex=0,this.width=O.width,this.height=O.height,this.anchor.set(.5,.5),this.position.set(O.x,O.y),this.buttonMode=!0,this.interactive=!0,this.frames=O.config.frames,this._callback=O.callback||null,this.name=O.config.name||"button",O.parent&&O.parent.addChild(this),this.state="Out",this.initEvents()}initEvents(){this.on("pointerdown",this.onButtonDown,this),this.on("pointerup",this.onButtonUp,this),this.on("pointerover",this.onButtonOver,this),this.on("pointerout",this.onButtonOut,this),this.on("pointertap",this.onButtonOut,this)}onButtonDown(){this.state="Down"}onButtonUp(){this._callback&&this._callback.call(null,this)}onButtonOver(){this.state="Over"}onButtonOut(){this.state="Out"}set state(O){this._state=O,this.texture=PIXI.Texture.from(this.frames[O.toLowerCase()])}get state(){return this._state}set isEnabled(O){this._isEnabled=O,this.state=O?"Out":"Disabled",this.interactive=O}get isEnabled(){return this._isEnabled}get zIndex(){return this._zIndex}set zIndex(O){this._zIndex=O}}class Vt extends PIXI.Text{constructor(O){const{x:p,y:w,config:x,parent:g}=O;super(x.text,x.textStyle),x.name&&(this.name=x.name),this.position.set(p,w),this.anchor.set(.5,.5),g&&g.addChild(this)}setTextConfig(O){this.style=new PIXI.TextStyle(O.textStyle),this.text=O.text}}class qe extends Qe{constructor(O){super(O),this.text=new Vt({x:0,y:0,config:O.textConfig,parent:this}),O.config.name&&(this.name=O.config.name)}get textAsset(){return this.text}}class Je extends Te{constructor(O={}){super(O),this.game=O.game}initDisplayEvents(){this.game&&this.game.on("orientationChanged",this.onOrientationChanged.bind(this))}onOrientationChanged(O){switch(O){case Ue.Landscape:this.setVisualLandscape();break;case Ue.Portrait:this.setVisualPortrait();break}}}const Re=class{};Re.GeneralButton={frames:{out:"generalbutton_out",over:"generalbutton_over",down:"generalbutton_down",disabled:"generalbutton_disabled"},name:"generalButton"};Re.GeneralTextStyle={fontFamily:"Montserrat, sans-serif",fontSize:"14px",fontWeight:"bold",fill:"#d08f38",stroke:0,strokeThickness:3,align:"center"};Re.GenericText={text:"Generic Text",textStyle:Re.GeneralTextStyle,name:"Generic Text"};Re.MenuText={text:"Menu",textStyle:Re.GeneralTextStyle,name:"Menu Text"};Re.MenuButton={frames:{out:"home_out",over:"home_over",down:"home_down",disabled:"home_disabled"},name:"Menu Button"};let Pe=Re;const Se=class{};Se.FirstTaskText={text:"First Task",textStyle:Pe.GeneralTextStyle,name:"First Text"};Se.SecondTaskText={text:"Second Task",textStyle:Pe.GeneralTextStyle,name:"Second Text"};Se.ThirdTaskText={text:"Third Task",textStyle:Pe.GeneralTextStyle,name:"Third Text"};Se.FirstTaskButtonText={bConfig:Pe.GeneralButton,tConfig:Se.FirstTaskText,name:"First Task Button Text"};Se.SecondTaskButtonText={bConfig:Pe.GeneralButton,tConfig:Se.SecondTaskText,name:"First Task Button Text"};Se.ThirdTaskButtonText={bConfig:Pe.GeneralButton,tConfig:Se.ThirdTaskText,name:"Third Task Button Text"};let Ne=Se;class ot extends PIXI.Sprite{constructor(O){const{x:p,y:w,width:x,height:g,config:u,parent:v}=O;super(PIXI.utils.TextureCache[u.frame]),this.width=x,this.height=g,this.name=u.name?u.name:"sprite",this.anchor.set(.5,.5),this.position.set(p,w),v&&v.addChild(this)}}const ye=class{};ye.CardSprite={frame:"card",name:"card"};ye.CardStackGeneralTextStyle={fontFamily:"Montserrat, sans-serif",fontSize:"14px",fontWeight:"bold",fill:"#d08f38",stroke:0,strokeThickness:3,align:"center"};ye.CardStackGeneralButtonStyle={frames:{out:"generalbutton_out",over:"generalbutton_over",down:"generalbutton_down",disabled:"generalbutton_disabled"},name:"generalButton"};ye.RestartText={text:"Restart",textStyle:ye.CardStackGeneralTextStyle,name:"Restart Text"};ye.PlayText={text:"Play",textStyle:ye.CardStackGeneralTextStyle,name:"Play Text"};ye.RestartButton={bConfig:ye.CardStackGeneralButtonStyle,tConfig:ye.PlayText,name:"Restart Button Text"};let We=ye;class Xe{}Xe.CardCounter=144;Xe.CardAnimationDelay=1;Xe.CardAnimationDuration=2;class Yt extends Je{constructor(){super(...arguments),this.cards=[],this.displayWidth=He.instance.getWidth(),this.displayHeight=He.instance.getHeight(),this.animationTimeline=new TimelineMax({paused:!0}),this.restart=!1}init(){this.container=new Te({x:0,y:0,name:"CardStackStage"}),this.restartButton=new qe({x:640,y:654,width:200,height:100,config:We.RestartButton.bConfig,callback:this.cardButtonUp.bind(this),parent:this.container,textConfig:We.RestartButton.tConfig}),this.restartButton.isEnabled=!1;const O=be.instance.backMenuButtonUp;new Qe({x:1245,y:35,width:70,height:70,config:Pe.MenuButton,callback:O.bind(this,this.name),parent:this.container}),this.createCardAssets(Xe.CardCounter),this.initDisplayEvents()}cardButtonUp(){this.restart=!this.restart,this.restart?(this.restartButton.textAsset.setTextConfig(We.RestartText),this.animationTimeline.play()):(this.restartButton.textAsset.setTextConfig(We.PlayText),this.animationTimeline.restart(),this.animationTimeline.paused(!0))}playCardAnimations(){this.animationTimeline.clear();for(let O=0,p=this.cards.length;O<p;O++){const w=this.cards[p-1-O],x=O*1.5,g=(Math.random()-.5)*.2;this.animationTimeline.to(w,Xe.CardAnimationDuration,{x:5/6*this.displayWidth,y:this.displayHeight/3+x,rotation:g,onStart:()=>{this.container.addChild(w)}},O*Xe.CardAnimationDelay)}}createCardAssets(O){for(let p=0;p<O;p++){const w=this.displayWidth/6,x=this.displayHeight/3+p*1.5,g=(Math.random()-.5)*.1,u=new ot({x:w,y:x,width:196,height:281,config:We.CardSprite,parent:this.container});u.rotation=g,this.cards.push(u),this.container.addChild(u)}this.restartButton.isEnabled=!0,this.playCardAnimations()}dispose(){this.animationTimeline.kill(),this.cards.forEach(O=>O.destroy())}setVisualPortrait(){}setVisualLandscape(){}}class Ze extends PIXI.particles.Emitter{constructor(O,p,w){super(w,O,p);let x=Date.now();PIXI.ticker.shared.add(()=>{const g=Date.now(),u=(g-x)*8e-4;this.update(u),x=g})}start(){this.emit=!0}stop(){this.emit=!1}}const me=class{};me.MAX_PARTICLES=10;me.WoodSPrite={frame:"fire/wood",name:"wood"};me.DarkForestBackgroundSprite={frame:"fire/dark_forest_bg",name:"dark_forest_bg"};me.FireParticle={frame:"fire/particle",name:"particle"};me.FireSmallParticles=[{frame:"fire/fire01",name:"fire01"},{frame:"fire/fire02",name:"fire02"},{frame:"fire/fire03",name:"fire03"}];me.fireGeneralEmitter={alpha:{start:1,end:0},scale:{start:1.4,end:2.2,minimumScaleMultiplier:1},color:{start:"#d18726",end:"#333231"},speed:{start:100,end:100,minimumSpeedMultiplier:.5},acceleration:{x:0,y:0},maxSpeed:2,startRotation:{min:-110,max:-70},noRotation:!1,rotationSpeed:{min:0,max:0},lifetime:{min:.5,max:.5},blendMode:"normal",frequency:.05,emitterLifetime:-1,maxParticles:me.MAX_PARTICLES,pos:{x:0,y:-8},addAtBack:!0,spawnType:"circle",spawnCircle:{x:0,y:0,r:5}};me.fireSparkEmitter={alpha:{start:1,end:0},scale:{start:.1,end:.1,minimumScaleMultiplier:1},color:{start:"#47150b",end:"#333231"},speed:{start:100,end:100,minimumSpeedMultiplier:.5},acceleration:{x:0,y:0},maxSpeed:2,startRotation:{min:-110,max:-70},noRotation:!1,rotationSpeed:{min:0,max:0},lifetime:{min:1.5,max:2},blendMode:"normal",frequency:.05,emitterLifetime:-1,maxParticles:me.MAX_PARTICLES,pos:{x:0,y:-8},addAtBack:!0,spawnType:"circle",spawnCircle:{x:0,y:0,r:5}};me.fireGlowEmitter={alpha:{start:.25,end:0},scale:{start:1,end:1.4,minimumScaleMultiplier:1},color:{start:"0xa41e1e",end:"0xa41e1e"},speed:{start:100,end:100,minimumSpeedMultiplier:.5},acceleration:{x:0,y:0},maxSpeed:2,startRotation:{min:-110,max:-70},noRotation:!1,rotationSpeed:{min:0,max:0},lifetime:{min:1,max:1.5},blendMode:"normal",frequency:.05,emitterLifetime:-1,maxParticles:me.MAX_PARTICLES,pos:{x:0,y:-8},addAtBack:!0,spawnType:"circle",spawnCircle:{x:0,y:0,r:5}};let Ce=me;class Kt extends Je{init(){this.container=new Te({x:0,y:0,name:"FireParticleStage",parent:this});const O=new ot({x:722,y:613,width:200,height:75,config:Ce.WoodSPrite,parent:this.container});this.particleContainer=new Te({x:718,y:607,parent:this.container,name:"ParticleContainer"}),this.particleContainer.scale.set(2,2),this.particleFogContainer=new Te({x:0,y:-25,parent:this.particleContainer,name:"particleFogContainer"}),this.particleSparksContainer=new Te({x:0,y:-45,parent:this.particleContainer,name:"particleSparksContainer"}),this.particleSparksContainer.scale.set(2,1),this.particleGlowContainer=new Te({x:0,y:0,parent:this.particleContainer,name:"particleGlowContainer"}),this.particleAddContainer=new Te({x:0,y:0,parent:this.particleContainer,name:"particleAddContainer"});const p=be.instance.backMenuButtonUp;new Qe({x:1245,y:35,width:70,height:70,config:Pe.MenuButton,callback:p.bind(this,this.name),parent:this.container});const w=Ce.FireSmallParticles.map(v=>v.frame);this.fEmitter=new Ze(w,Ce.fireGeneralEmitter,this.particleFogContainer),this.gEmitter=new Ze(w,Ce.fireGlowEmitter,this.particleGlowContainer),this.aEmitter=new Ze(w,Ce.fireGeneralEmitter,this.particleAddContainer),this.aEmitter.particleBlendMode=PIXI.BLEND_MODES.ADD,this.sEmitter=new Ze(Ce.FireParticle.frame,Ce.fireSparkEmitter,this.particleAddContainer);const x=PIXI.Texture.fromFrame(Ce.FireParticle.name),g=new PIXI.filters.SimpleLightmapFilter(x,0),u=new PIXI.filters.SimpleLightmapFilter(x,13270592);O.filters=[u,g],this.initDisplayEvents(),this.initDisplayEvents()}setVisualPortrait(){}setVisualLandscape(){}dispose(){this.fEmitter.destroy(),this.gEmitter.destroy(),this.aEmitter.destroy(),this.sEmitter.destroy()}}class Zt extends PIXI.Container{constructor(O){super(),this._textStyle=O.textStyle||{},this._maxWidth=O.maxWidth,this._currentText=O.text,this.updateText(O.text)}updateText(O){this._currentText=O,this.removeChildren();const p=this.parseText(O);this.buildElements(p)}updateTextStyle(O){this._textStyle={...this._textStyle,...O},this.updateText(this._currentText)}parseText(O){const p=/(\[.*?\])|([^[\]\n]+)|(\n)/g,w=[];let x;for(;(x=p.exec(O))!==null;)w.push(x[0]);return w}buildElements(O){let p=new PIXI.Point(0,0),w=0,x=[];for(const g of O){const u=this.createElement(g);p.x+u.width>this._maxWidth&&x.length>0&&(this.positionElements(x,p.y),x=[],p.x=0,p.y+=w,w=0),u.position.set(p.x,p.y),p.x+=u.width,x.push(u),u.height>w&&(w=u.height)}x.length>0&&this.positionElements(x,p.y)}createElement(O){if(O.startsWith("[")){const p=O.substring(1,O.length-1);return new PIXI.Sprite(PIXI.Texture.from(p))}else return new PIXI.Text(O,this._textStyle)}positionElements(O,p){for(const w of O)this.addChild(w),w.position.y=p}getText(){return this._currentText}}class Me{}Me.RandomAssetCounter=3;Me.CreateAssetDuration=2;Me.RandomRichTextFontSize={min:10,max:50};Me.SpecialTextOptions=["Lorem","ipsum","dolor","sit","amet","game","images","fun","text","[fire/fire02]","[fire/fire01]","[fire/fire03]","[fire/fire04]","more text","random"];class Ve extends PIXI.ticker.Ticker{constructor(){super(),this.tickers={},Ve.instance=this}addTimeout(O,p,w,x){if(!this.tickers[O]){let g=new PIXI.ticker.Ticker;g.autoStart=!0,this.tickers[O]=g,this.gTime=new Date().getTime(),this.tickers[O].add(this.addLoop.bind(this,O,p,w,x))}}addLoop(O,p,w,x){var g=p*1e3,u=new Date().getTime(),v=u-this.gTime;v<g||(w.call("",this),x?this.gTime=new Date().getTime():this.tickers[O].remove(this.addLoop.bind(this)))}removeTicker(O){this.tickers[O].destroy(),delete this.tickers[O]}getTickers(){return this.tickers}}class qt extends Je{init(){this.container=new Te({x:0,y:0,name:"RandomRichTextStage",parent:this}),this.textStyle={fill:16777215,fontSize:this.generateRandomFontSize()};const O=this.generateRandomText();this.richText=new Zt({maxWidth:Ge.DisplayResolution.width-100,text:O,textStyle:this.textStyle}),this.container.addChild(this.richText);const p=be.instance.backMenuButtonUp;new Qe({x:1245,y:35,width:70,height:70,config:Pe.MenuButton,callback:p.bind(this,this.name),parent:this.container}),this.setCenterRandomRichTextPosition(),Ve.instance.addTimeout("RandomText",Me.CreateAssetDuration,this.updateRandomContent.bind(this),!0),this.initDisplayEvents()}generateRandomText(){const O=Me.SpecialTextOptions,p=Math.floor(Math.random()*10+5);let w="";for(let x=0;x<p;x++){const g=Math.floor(Math.random()*O.length);w+=O[g]+" "}return w.trim()}generateRandomFontSize(){return Math.floor(Math.random()*Me.RandomRichTextFontSize.max+Me.RandomRichTextFontSize.min)}setCenterRandomRichTextPosition(){this.richText.position.set((Ge.DisplayResolution.width-this.richText.width)/2,(Ge.DisplayResolution.height-this.richText.height)/2)}updateRandomContent(){const O=this.generateRandomText(),p=this.generateRandomFontSize();this.richText.updateText(O),this.richText.updateTextStyle({fill:this.textStyle.fill,fontSize:p}),this.setCenterRandomRichTextPosition()}setVisualPortrait(){}setVisualLandscape(){}dispose(){Ve.instance.removeTicker("RandomText")}}class je extends Je{constructor(){super(...arguments),this.stageMap={[_e.FirstTask]:Yt,[_e.SecondTask]:qt,[_e.ThirdTask]:Kt,[_e.Menu]:je}}init(){new qe({x:640,y:180,width:250,height:130,config:Ne.FirstTaskButtonText.bConfig,callback:this.changeStage.bind(this,_e.FirstTask),parent:this,textConfig:Ne.FirstTaskButtonText.tConfig}),new qe({x:640,y:360,width:250,height:130,config:Ne.SecondTaskButtonText.bConfig,callback:this.changeStage.bind(this,_e.SecondTask),parent:this,textConfig:Ne.SecondTaskButtonText.tConfig}),new qe({x:640,y:540,width:250,height:130,config:Ne.ThirdTaskButtonText.bConfig,callback:this.changeStage.bind(this,_e.ThirdTask),parent:this,textConfig:Ne.ThirdTaskButtonText.tConfig}),this.initDisplayEvents()}setVisualPortrait(){}setVisualLandscape(){}changeStage(O){be.instance.removeStage(_e.Menu),this.stageMap[O]?be.instance.startStage(this.stageMap[O],O):console.error("Invalid stage name provided:",O)}dispose(){}}class be{constructor(O,p,w){this.stages={},be.instance=this,this.stageContainer=new Te({x:O,y:p,parent:w,name:"StageContainer"})}createStage(O,p){this.stages[p]==null&&(this.stages[p]=new O,this.stages[p].name=p,this.stageContainer.addChild(this.stages[p]))}backMenuButtonUp(O){be.instance.removeStage(O),be.instance.startStage(je,_e.Menu)}startStage(O,p){this.createStage(O,p),this.stages[p].init()}getStage(O){return this.stages[O]}removeStage(O){this.stages[O].dispose(),this.stages[O].destroy({children:!0,baseTexture:!0}),delete this.stages[O]}getStageContainer(){return this.stageContainer}}class Qt{constructor(){new Ve,this.displayManager=new He(Ge.DisplayResolution.width,Ge.DisplayResolution.height),this.stageManager=new be(0,0,this.displayManager.getRendererContainer()),this.stageManager.startStage(je,_e.Menu),new Ht}}class Jt{constructor(){this.initProperties()}initProperties(){this.loader=new PIXI.loaders.Loader,this.loader.add("assets/sprites/ui.json"),this.loader.add("particle","assets/sprites/particle.png"),this.loader.load(),this.loader.onProgress.add(this.onProgress.bind(this)),this.loader.onError.add(this.onError.bind(this)),this.loader.onLoad.add(this.onLoad.bind(this)),this.loader.onComplete.add(this.onComplete.bind(this))}onError(){}onLoad(){}onComplete(){new Qt}onProgress(){}}window.onload=function(){new Jt}});export default jt();
