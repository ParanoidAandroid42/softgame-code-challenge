var Ra=(_,n)=>()=>(n||_((n={exports:{}}).exports,n),n.exports);var as=Ra((Dn,yr)=>{(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))l(u);new MutationObserver(u=>{for(const c of u)if(c.type==="childList")for(const s of c.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&l(s)}).observe(document,{childList:!0,subtree:!0});function e(u){const c={};return u.integrity&&(c.integrity=u.integrity),u.referrerPolicy&&(c.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?c.credentials="include":u.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function l(u){if(u.ep)return;u.ep=!0;const c=e(u);fetch(u.href,c)}})();/*!
 * pixi.js - v4.8.2
 * Compiled Mon, 03 Sep 2018 15:52:06 UTC
 *
 * pixi.js is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */(function(_){if(typeof Dn=="object"&&typeof yr<"u")yr.exports=_();else if(typeof define=="function"&&define.amd)define([],_);else{var n;typeof window<"u"?n=window:typeof global<"u"?n=global:typeof self<"u"?n=self:n=this,n.PIXI=_()}})(function(){return function(){function _(n,e,l){function u(p,v){if(!e[p]){if(!n[p]){var h=typeof require=="function"&&require;if(!v&&h)return h(p,!0);if(c)return c(p,!0);var o=new Error("Cannot find module '"+p+"'");throw o.code="MODULE_NOT_FOUND",o}var i=e[p]={exports:{}};n[p][0].call(i.exports,function(t){var r=n[p][1][t];return u(r||t)},i,i.exports,_,n,e,l)}return e[p].exports}for(var c=typeof require=="function"&&require,s=0;s<l.length;s++)u(l[s]);return u}return _}()({1:[function(_,n,e){"use restrict";var l=32;e.INT_BITS=l,e.INT_MAX=2147483647,e.INT_MIN=-1<<l-1,e.sign=function(s){return(s>0)-(s<0)},e.abs=function(s){var p=s>>l-1;return(s^p)-p},e.min=function(s,p){return p^(s^p)&-(s<p)},e.max=function(s,p){return s^(s^p)&-(s<p)},e.isPow2=function(s){return!(s&s-1)&&!!s},e.log2=function(s){var p,v;return p=(s>65535)<<4,s>>>=p,v=(s>255)<<3,s>>>=v,p|=v,v=(s>15)<<2,s>>>=v,p|=v,v=(s>3)<<1,s>>>=v,p|=v,p|s>>1},e.log10=function(s){return s>=1e9?9:s>=1e8?8:s>=1e7?7:s>=1e6?6:s>=1e5?5:s>=1e4?4:s>=1e3?3:s>=100?2:s>=10?1:0},e.popCount=function(s){return s=s-(s>>>1&1431655765),s=(s&858993459)+(s>>>2&858993459),(s+(s>>>4)&252645135)*16843009>>>24};function u(s){var p=32;return s&=-s,s&&p--,s&65535&&(p-=16),s&16711935&&(p-=8),s&252645135&&(p-=4),s&858993459&&(p-=2),s&1431655765&&(p-=1),p}e.countTrailingZeros=u,e.nextPow2=function(s){return s+=s===0,--s,s|=s>>>1,s|=s>>>2,s|=s>>>4,s|=s>>>8,s|=s>>>16,s+1},e.prevPow2=function(s){return s|=s>>>1,s|=s>>>2,s|=s>>>4,s|=s>>>8,s|=s>>>16,s-(s>>>1)},e.parity=function(s){return s^=s>>>16,s^=s>>>8,s^=s>>>4,s&=15,27030>>>s&1};var c=new Array(256);(function(s){for(var p=0;p<256;++p){var v=p,h=p,o=7;for(v>>>=1;v;v>>>=1)h<<=1,h|=v&1,--o;s[p]=h<<o&255}})(c),e.reverse=function(s){return c[s&255]<<24|c[s>>>8&255]<<16|c[s>>>16&255]<<8|c[s>>>24&255]},e.interleave2=function(s,p){return s&=65535,s=(s|s<<8)&16711935,s=(s|s<<4)&252645135,s=(s|s<<2)&858993459,s=(s|s<<1)&1431655765,p&=65535,p=(p|p<<8)&16711935,p=(p|p<<4)&252645135,p=(p|p<<2)&858993459,p=(p|p<<1)&1431655765,s|p<<1},e.deinterleave2=function(s,p){return s=s>>>p&1431655765,s=(s|s>>>1)&858993459,s=(s|s>>>2)&252645135,s=(s|s>>>4)&16711935,s=(s|s>>>16)&65535,s<<16>>16},e.interleave3=function(s,p,v){return s&=1023,s=(s|s<<16)&4278190335,s=(s|s<<8)&251719695,s=(s|s<<4)&3272356035,s=(s|s<<2)&1227133513,p&=1023,p=(p|p<<16)&4278190335,p=(p|p<<8)&251719695,p=(p|p<<4)&3272356035,p=(p|p<<2)&1227133513,s|=p<<1,v&=1023,v=(v|v<<16)&4278190335,v=(v|v<<8)&251719695,v=(v|v<<4)&3272356035,v=(v|v<<2)&1227133513,s|v<<2},e.deinterleave3=function(s,p){return s=s>>>p&1227133513,s=(s|s>>>2)&3272356035,s=(s|s>>>4)&251719695,s=(s|s>>>8)&4278190335,s=(s|s>>>16)&1023,s<<22>>22},e.nextCombination=function(s){var p=s|s-1;return p+1|(~p&-~p)-1>>>u(s)+1}},{}],2:[function(_,n,e){n.exports=l,n.exports.default=l;function l(R,D,L){L=L||2;var F=D&&D.length,N=F?D[0]*L:R.length,U=u(R,0,N,L,!0),k=[];if(!U)return k;var G,W,K,q,Q,J,V;if(F&&(U=i(R,D,U,L)),R.length>80*L){G=K=R[0],W=q=R[1];for(var Z=L;Z<N;Z+=L)Q=R[Z],J=R[Z+1],Q<G&&(G=Q),J<W&&(W=J),Q>K&&(K=Q),J>q&&(q=J);V=Math.max(K-G,q-W),V=V!==0?1/V:0}return s(U,k,L,G,W,V),k}function u(R,D,L,F,N){var U,k;if(N===I(R,D,L,F)>0)for(U=D;U<L;U+=F)k=M(U,R[U],R[U+1],k);else for(U=L-F;U>=D;U-=F)k=M(U,R[U],R[U+1],k);return k&&w(k,k.next)&&(A(k),k=k.next),k}function c(R,D){if(!R)return R;D||(D=R);var L=R,F;do if(F=!1,!L.steiner&&(w(L,L.next)||y(L.prev,L,L.next)===0)){if(A(L),L=D=L.prev,L===L.next)break;F=!0}else L=L.next;while(F||L!==D);return D}function s(R,D,L,F,N,U,k){if(R){!k&&U&&a(R,F,N,U);for(var G=R,W,K;R.prev!==R.next;){if(W=R.prev,K=R.next,U?v(R,F,N,U):p(R)){D.push(W.i/L),D.push(R.i/L),D.push(K.i/L),A(R),R=K.next,G=K.next;continue}if(R=K,R===G){k?k===1?(R=h(R,D,L),s(R,D,L,F,N,U,2)):k===2&&o(R,D,L,F,N,U):s(c(R),D,L,F,N,U,1);break}}}}function p(R){var D=R.prev,L=R,F=R.next;if(y(D,L,F)>=0)return!1;for(var N=R.next.next;N!==R.prev;){if(x(D.x,D.y,L.x,L.y,F.x,F.y,N.x,N.y)&&y(N.prev,N,N.next)>=0)return!1;N=N.next}return!0}function v(R,D,L,F){var N=R.prev,U=R,k=R.next;if(y(N,U,k)>=0)return!1;for(var G=N.x<U.x?N.x<k.x?N.x:k.x:U.x<k.x?U.x:k.x,W=N.y<U.y?N.y<k.y?N.y:k.y:U.y<k.y?U.y:k.y,K=N.x>U.x?N.x>k.x?N.x:k.x:U.x>k.x?U.x:k.x,q=N.y>U.y?N.y>k.y?N.y:k.y:U.y>k.y?U.y:k.y,Q=m(G,W,D,L,F),J=m(K,q,D,L,F),V=R.prevZ,Z=R.nextZ;V&&V.z>=Q&&Z&&Z.z<=J;){if(V!==R.prev&&V!==R.next&&x(N.x,N.y,U.x,U.y,k.x,k.y,V.x,V.y)&&y(V.prev,V,V.next)>=0||(V=V.prevZ,Z!==R.prev&&Z!==R.next&&x(N.x,N.y,U.x,U.y,k.x,k.y,Z.x,Z.y)&&y(Z.prev,Z,Z.next)>=0))return!1;Z=Z.nextZ}for(;V&&V.z>=Q;){if(V!==R.prev&&V!==R.next&&x(N.x,N.y,U.x,U.y,k.x,k.y,V.x,V.y)&&y(V.prev,V,V.next)>=0)return!1;V=V.prevZ}for(;Z&&Z.z<=J;){if(Z!==R.prev&&Z!==R.next&&x(N.x,N.y,U.x,U.y,k.x,k.y,Z.x,Z.y)&&y(Z.prev,Z,Z.next)>=0)return!1;Z=Z.nextZ}return!0}function h(R,D,L){var F=R;do{var N=F.prev,U=F.next.next;!w(N,U)&&b(N,F,F.next,U)&&E(N,U)&&E(U,N)&&(D.push(N.i/L),D.push(F.i/L),D.push(U.i/L),A(F),A(F.next),F=R=U),F=F.next}while(F!==R);return F}function o(R,D,L,F,N,U){var k=R;do{for(var G=k.next.next;G!==k.prev;){if(k.i!==G.i&&T(k,G)){var W=P(k,G);k=c(k,k.next),W=c(W,W.next),s(k,D,L,F,N,U),s(W,D,L,F,N,U);return}G=G.next}k=k.next}while(k!==R)}function i(R,D,L,F){var N=[],U,k,G,W,K;for(U=0,k=D.length;U<k;U++)G=D[U]*F,W=U<k-1?D[U+1]*F:R.length,K=u(R,G,W,F,!1),K===K.next&&(K.steiner=!0),N.push(g(K));for(N.sort(t),U=0;U<N.length;U++)r(N[U],L),L=c(L,L.next);return L}function t(R,D){return R.x-D.x}function r(R,D){if(D=d(R,D),D){var L=P(D,R);c(L,L.next)}}function d(R,D){var L=D,F=R.x,N=R.y,U=-1/0,k;do{if(N<=L.y&&N>=L.next.y&&L.next.y!==L.y){var G=L.x+(N-L.y)*(L.next.x-L.x)/(L.next.y-L.y);if(G<=F&&G>U){if(U=G,G===F){if(N===L.y)return L;if(N===L.next.y)return L.next}k=L.x<L.next.x?L:L.next}}L=L.next}while(L!==D);if(!k)return null;if(F===U)return k.prev;var W=k,K=k.x,q=k.y,Q=1/0,J;for(L=k.next;L!==W;)F>=L.x&&L.x>=K&&F!==L.x&&x(N<q?F:U,N,K,q,N<q?U:F,N,L.x,L.y)&&(J=Math.abs(N-L.y)/(F-L.x),(J<Q||J===Q&&L.x>k.x)&&E(L,R)&&(k=L,Q=J)),L=L.next;return k}function a(R,D,L,F){var N=R;do N.z===null&&(N.z=m(N.x,N.y,D,L,F)),N.prevZ=N.prev,N.nextZ=N.next,N=N.next;while(N!==R);N.prevZ.nextZ=null,N.prevZ=null,f(N)}function f(R){var D,L,F,N,U,k,G,W,K=1;do{for(L=R,R=null,U=null,k=0;L;){for(k++,F=L,G=0,D=0;D<K&&(G++,F=F.nextZ,!!F);D++);for(W=K;G>0||W>0&&F;)G!==0&&(W===0||!F||L.z<=F.z)?(N=L,L=L.nextZ,G--):(N=F,F=F.nextZ,W--),U?U.nextZ=N:R=N,N.prevZ=U,U=N;L=F}U.nextZ=null,K*=2}while(k>1);return R}function m(R,D,L,F,N){return R=32767*(R-L)*N,D=32767*(D-F)*N,R=(R|R<<8)&16711935,R=(R|R<<4)&252645135,R=(R|R<<2)&858993459,R=(R|R<<1)&1431655765,D=(D|D<<8)&16711935,D=(D|D<<4)&252645135,D=(D|D<<2)&858993459,D=(D|D<<1)&1431655765,R|D<<1}function g(R){var D=R,L=R;do D.x<L.x&&(L=D),D=D.next;while(D!==R);return L}function x(R,D,L,F,N,U,k,G){return(N-k)*(D-G)-(R-k)*(U-G)>=0&&(R-k)*(F-G)-(L-k)*(D-G)>=0&&(L-k)*(U-G)-(N-k)*(F-G)>=0}function T(R,D){return R.next.i!==D.i&&R.prev.i!==D.i&&!S(R,D)&&E(R,D)&&E(D,R)&&O(R,D)}function y(R,D,L){return(D.y-R.y)*(L.x-D.x)-(D.x-R.x)*(L.y-D.y)}function w(R,D){return R.x===D.x&&R.y===D.y}function b(R,D,L,F){return w(R,D)&&w(L,F)||w(R,F)&&w(L,D)?!0:y(R,D,L)>0!=y(R,D,F)>0&&y(L,F,R)>0!=y(L,F,D)>0}function S(R,D){var L=R;do{if(L.i!==R.i&&L.next.i!==R.i&&L.i!==D.i&&L.next.i!==D.i&&b(L,L.next,R,D))return!0;L=L.next}while(L!==R);return!1}function E(R,D){return y(R.prev,R,R.next)<0?y(R,D,R.next)>=0&&y(R,R.prev,D)>=0:y(R,D,R.prev)<0||y(R,R.next,D)<0}function O(R,D){var L=R,F=!1,N=(R.x+D.x)/2,U=(R.y+D.y)/2;do L.y>U!=L.next.y>U&&L.next.y!==L.y&&N<(L.next.x-L.x)*(U-L.y)/(L.next.y-L.y)+L.x&&(F=!F),L=L.next;while(L!==R);return F}function P(R,D){var L=new B(R.i,R.x,R.y),F=new B(D.i,D.x,D.y),N=R.next,U=D.prev;return R.next=D,D.prev=R,L.next=N,N.prev=L,F.next=L,L.prev=F,U.next=F,F.prev=U,F}function M(R,D,L,F){var N=new B(R,D,L);return F?(N.next=F.next,N.prev=F,F.next.prev=N,F.next=N):(N.prev=N,N.next=N),N}function A(R){R.next.prev=R.prev,R.prev.next=R.next,R.prevZ&&(R.prevZ.nextZ=R.nextZ),R.nextZ&&(R.nextZ.prevZ=R.prevZ)}function B(R,D,L){this.i=R,this.x=D,this.y=L,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}l.deviation=function(R,D,L,F){var N=D&&D.length,U=N?D[0]*L:R.length,k=Math.abs(I(R,0,U,L));if(N)for(var G=0,W=D.length;G<W;G++){var K=D[G]*L,q=G<W-1?D[G+1]*L:R.length;k-=Math.abs(I(R,K,q,L))}var Q=0;for(G=0;G<F.length;G+=3){var J=F[G]*L,V=F[G+1]*L,Z=F[G+2]*L;Q+=Math.abs((R[J]-R[Z])*(R[V+1]-R[J+1])-(R[J]-R[V])*(R[Z+1]-R[J+1]))}return k===0&&Q===0?0:Math.abs((Q-k)/k)};function I(R,D,L,F){for(var N=0,U=D,k=L-F;U<L;U+=F)N+=(R[k]-R[U])*(R[U+1]+R[k+1]),k=U;return N}l.flatten=function(R){for(var D=R[0][0].length,L={vertices:[],holes:[],dimensions:D},F=0,N=0;N<R.length;N++){for(var U=0;U<R[N].length;U++)for(var k=0;k<D;k++)L.vertices.push(R[N][U][k]);N>0&&(F+=R[N-1].length,L.holes.push(F))}return L}},{}],3:[function(_,n,e){var l=Object.prototype.hasOwnProperty,u="~";function c(){}Object.create&&(c.prototype=Object.create(null),new c().__proto__||(u=!1));function s(v,h,o){this.fn=v,this.context=h,this.once=o||!1}function p(){this._events=new c,this._eventsCount=0}p.prototype.eventNames=function(){var h=[],o,i;if(this._eventsCount===0)return h;for(i in o=this._events)l.call(o,i)&&h.push(u?i.slice(1):i);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(o)):h},p.prototype.listeners=function(h,o){var i=u?u+h:h,t=this._events[i];if(o)return!!t;if(!t)return[];if(t.fn)return[t.fn];for(var r=0,d=t.length,a=new Array(d);r<d;r++)a[r]=t[r].fn;return a},p.prototype.emit=function(h,o,i,t,r,d){var a=u?u+h:h;if(!this._events[a])return!1;var f=this._events[a],m=arguments.length,g,x;if(f.fn){switch(f.once&&this.removeListener(h,f.fn,void 0,!0),m){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,o),!0;case 3:return f.fn.call(f.context,o,i),!0;case 4:return f.fn.call(f.context,o,i,t),!0;case 5:return f.fn.call(f.context,o,i,t,r),!0;case 6:return f.fn.call(f.context,o,i,t,r,d),!0}for(x=1,g=new Array(m-1);x<m;x++)g[x-1]=arguments[x];f.fn.apply(f.context,g)}else{var T=f.length,y;for(x=0;x<T;x++)switch(f[x].once&&this.removeListener(h,f[x].fn,void 0,!0),m){case 1:f[x].fn.call(f[x].context);break;case 2:f[x].fn.call(f[x].context,o);break;case 3:f[x].fn.call(f[x].context,o,i);break;case 4:f[x].fn.call(f[x].context,o,i,t);break;default:if(!g)for(y=1,g=new Array(m-1);y<m;y++)g[y-1]=arguments[y];f[x].fn.apply(f[x].context,g)}}return!0},p.prototype.on=function(h,o,i){var t=new s(o,i||this),r=u?u+h:h;return this._events[r]?this._events[r].fn?this._events[r]=[this._events[r],t]:this._events[r].push(t):(this._events[r]=t,this._eventsCount++),this},p.prototype.once=function(h,o,i){var t=new s(o,i||this,!0),r=u?u+h:h;return this._events[r]?this._events[r].fn?this._events[r]=[this._events[r],t]:this._events[r].push(t):(this._events[r]=t,this._eventsCount++),this},p.prototype.removeListener=function(h,o,i,t){var r=u?u+h:h;if(!this._events[r])return this;if(!o)return--this._eventsCount===0?this._events=new c:delete this._events[r],this;var d=this._events[r];if(d.fn)d.fn===o&&(!t||d.once)&&(!i||d.context===i)&&(--this._eventsCount===0?this._events=new c:delete this._events[r]);else{for(var a=0,f=[],m=d.length;a<m;a++)(d[a].fn!==o||t&&!d[a].once||i&&d[a].context!==i)&&f.push(d[a]);f.length?this._events[r]=f.length===1?f[0]:f:--this._eventsCount===0?this._events=new c:delete this._events[r]}return this},p.prototype.removeAllListeners=function(h){var o;return h?(o=u?u+h:h,this._events[o]&&(--this._eventsCount===0?this._events=new c:delete this._events[o])):(this._events=new c,this._eventsCount=0),this},p.prototype.off=p.prototype.removeListener,p.prototype.addListener=p.prototype.on,p.prototype.setMaxListeners=function(){return this},p.prefixed=u,p.EventEmitter=p,typeof n<"u"&&(n.exports=p)},{}],4:[function(_,n,e){/**
 * isMobile.js v0.4.1
 *
 * A simple library to detect Apple phones and tablets,
 * Android phones and tablets, other mobile devices (like blackberry, mini-opera and windows phone),
 * and any kind of seven inch device, via user agent sniffing.
 *
 * @author: Kai Mallea (kmallea@gmail.com)
 *
 * @license: http://creativecommons.org/publicdomain/zero/1.0/
 */(function(l){var u=/iPhone/i,c=/iPod/i,s=/iPad/i,p=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,v=/Android/i,h=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,o=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,i=/Windows Phone/i,t=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,r=/BlackBerry/i,d=/BB10/i,a=/Opera Mini/i,f=/(CriOS|Chrome)(?=.*\bMobile\b)/i,m=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,g=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),x=function(w,b){return w.test(b)},T=function(w){var b=w||navigator.userAgent,S=b.split("[FBAN");if(typeof S[1]<"u"&&(b=S[0]),S=b.split("Twitter"),typeof S[1]<"u"&&(b=S[0]),this.apple={phone:x(u,b),ipod:x(c,b),tablet:!x(u,b)&&x(s,b),device:x(u,b)||x(c,b)||x(s,b)},this.amazon={phone:x(h,b),tablet:!x(h,b)&&x(o,b),device:x(h,b)||x(o,b)},this.android={phone:x(h,b)||x(p,b),tablet:!x(h,b)&&!x(p,b)&&(x(o,b)||x(v,b)),device:x(h,b)||x(o,b)||x(p,b)||x(v,b)},this.windows={phone:x(i,b),tablet:x(t,b),device:x(i,b)||x(t,b)},this.other={blackberry:x(r,b),blackberry10:x(d,b),opera:x(a,b),firefox:x(m,b),chrome:x(f,b),device:x(r,b)||x(d,b)||x(a,b)||x(m,b)||x(f,b)},this.seven_inch=x(g,b),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,typeof window>"u")return this},y=function(){var w=new T;return w.Class=T,w};typeof n<"u"&&n.exports&&typeof window>"u"?n.exports=T:typeof n<"u"&&n.exports&&typeof window<"u"?n.exports=y():l.isMobile=y()})(this)},{}],5:[function(_,n,e){Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function v(h,o){for(var i=0;i<o.length;i++){var t=o[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(h,t.key,t)}}return function(h,o,i){return o&&v(h.prototype,o),i&&v(h,i),h}}();function u(v,h){if(!(v instanceof h))throw new TypeError("Cannot call a class as a function")}var c=function(){function v(h,o,i){o===void 0&&(o=!1),u(this,v),this._fn=h,this._once=o,this._thisArg=i,this._next=this._prev=this._owner=null}return l(v,[{key:"detach",value:function(){return this._owner===null?!1:(this._owner.detach(this),!0)}}]),v}();function s(v,h){return v._head?(v._tail._next=h,h._prev=v._tail,v._tail=h):(v._head=h,v._tail=h),h._owner=v,h}var p=function(){function v(){u(this,v),this._head=this._tail=void 0}return l(v,[{key:"handlers",value:function(){var o=arguments.length<=0||arguments[0]===void 0?!1:arguments[0],i=this._head;if(o)return!!i;for(var t=[];i;)t.push(i),i=i._next;return t}},{key:"has",value:function(o){if(!(o instanceof c))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return o._owner===this}},{key:"dispatch",value:function(){var o=this._head;if(!o)return!1;for(;o;)o._once&&this.detach(o),o._fn.apply(o._thisArg,arguments),o=o._next;return!0}},{key:"add",value:function(o){var i=arguments.length<=1||arguments[1]===void 0?null:arguments[1];if(typeof o!="function")throw new Error("MiniSignal#add(): First arg must be a Function.");return s(this,new c(o,!1,i))}},{key:"once",value:function(o){var i=arguments.length<=1||arguments[1]===void 0?null:arguments[1];if(typeof o!="function")throw new Error("MiniSignal#once(): First arg must be a Function.");return s(this,new c(o,!0,i))}},{key:"detach",value:function(o){if(!(o instanceof c))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return o._owner!==this?this:(o._prev&&(o._prev._next=o._next),o._next&&(o._next._prev=o._prev),o===this._head?(this._head=o._next,o._next===null&&(this._tail=null)):o===this._tail&&(this._tail=o._prev,this._tail._next=null),o._owner=null,this)}},{key:"detachAll",value:function(){var o=this._head;if(!o)return this;for(this._head=this._tail=null;o;)o._owner=null,o=o._next;return this}}]),v}();p.MiniSignalBinding=c,e.default=p,n.exports=e.default},{}],6:[function(_,n,e){var l=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable;function s(v){if(v==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(v)}function p(){try{if(!Object.assign)return!1;var v=new String("abc");if(v[5]="de",Object.getOwnPropertyNames(v)[0]==="5")return!1;for(var h={},o=0;o<10;o++)h["_"+String.fromCharCode(o)]=o;var i=Object.getOwnPropertyNames(h).map(function(r){return h[r]});if(i.join("")!=="0123456789")return!1;var t={};return"abcdefghijklmnopqrst".split("").forEach(function(r){t[r]=r}),Object.keys(Object.assign({},t)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}n.exports=p()?Object.assign:function(v,h){for(var o,i=s(v),t,r=1;r<arguments.length;r++){o=Object(arguments[r]);for(var d in o)u.call(o,d)&&(i[d]=o[d]);if(l){t=l(o);for(var a=0;a<t.length;a++)c.call(o,t[a])&&(i[t[a]]=o[t[a]])}}return i}},{}],7:[function(_,n,e){n.exports=function(u,c){c=c||{};for(var s={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},p=s.parser[c.strictMode?"strict":"loose"].exec(u),v={},h=14;h--;)v[s.key[h]]=p[h]||"";return v[s.q.name]={},v[s.key[12]].replace(s.q.parser,function(o,i,t){i&&(v[s.q.name][i]=t)}),v}},{}],8:[function(_,n,e){(function(l){function u(h,o){for(var i=0,t=h.length-1;t>=0;t--){var r=h[t];r==="."?h.splice(t,1):r===".."?(h.splice(t,1),i++):i&&(h.splice(t,1),i--)}if(o)for(;i--;i)h.unshift("..");return h}var c=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,s=function(h){return c.exec(h).slice(1)};e.resolve=function(){for(var h="",o=!1,i=arguments.length-1;i>=-1&&!o;i--){var t=i>=0?arguments[i]:l.cwd();if(typeof t!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!t)continue;h=t+"/"+h,o=t.charAt(0)==="/"}return h=u(p(h.split("/"),function(r){return!!r}),!o).join("/"),(o?"/":"")+h||"."},e.normalize=function(h){var o=e.isAbsolute(h),i=v(h,-1)==="/";return h=u(p(h.split("/"),function(t){return!!t}),!o).join("/"),!h&&!o&&(h="."),h&&i&&(h+="/"),(o?"/":"")+h},e.isAbsolute=function(h){return h.charAt(0)==="/"},e.join=function(){var h=Array.prototype.slice.call(arguments,0);return e.normalize(p(h,function(o,i){if(typeof o!="string")throw new TypeError("Arguments to path.join must be strings");return o}).join("/"))},e.relative=function(h,o){h=e.resolve(h).substr(1),o=e.resolve(o).substr(1);function i(g){for(var x=0;x<g.length&&g[x]==="";x++);for(var T=g.length-1;T>=0&&g[T]==="";T--);return x>T?[]:g.slice(x,T-x+1)}for(var t=i(h.split("/")),r=i(o.split("/")),d=Math.min(t.length,r.length),a=d,f=0;f<d;f++)if(t[f]!==r[f]){a=f;break}for(var m=[],f=a;f<t.length;f++)m.push("..");return m=m.concat(r.slice(a)),m.join("/")},e.sep="/",e.delimiter=":",e.dirname=function(h){var o=s(h),i=o[0],t=o[1];return!i&&!t?".":(t&&(t=t.substr(0,t.length-1)),i+t)},e.basename=function(h,o){var i=s(h)[2];return o&&i.substr(-1*o.length)===o&&(i=i.substr(0,i.length-o.length)),i},e.extname=function(h){return s(h)[3]};function p(h,o){if(h.filter)return h.filter(o);for(var i=[],t=0;t<h.length;t++)o(h[t],t,h)&&i.push(h[t]);return i}var v="ab".substr(-1)==="b"?function(h,o,i){return h.substr(o,i)}:function(h,o,i){return o<0&&(o=h.length+o),h.substr(o,i)}}).call(this,_("_process"))},{_process:26}],9:[function(_,n,e){var l=new ArrayBuffer(0),u=function(c,s,p,v){this.gl=c,this.buffer=c.createBuffer(),this.type=s||c.ARRAY_BUFFER,this.drawType=v||c.STATIC_DRAW,this.data=l,p&&this.upload(p),this._updateID=0};u.prototype.upload=function(c,s,p){p||this.bind();var v=this.gl;c=c||this.data,s=s||0,this.data.byteLength>=c.byteLength?v.bufferSubData(this.type,s,c):v.bufferData(this.type,c,this.drawType),this.data=c},u.prototype.bind=function(){var c=this.gl;c.bindBuffer(this.type,this.buffer)},u.createVertexBuffer=function(c,s,p){return new u(c,c.ARRAY_BUFFER,s,p)},u.createIndexBuffer=function(c,s,p){return new u(c,c.ELEMENT_ARRAY_BUFFER,s,p)},u.create=function(c,s,p,v){return new u(c,s,p,v)},u.prototype.destroy=function(){this.gl.deleteBuffer(this.buffer)},n.exports=u},{}],10:[function(_,n,e){var l=_("./GLTexture"),u=function(c,s,p){this.gl=c,this.framebuffer=c.createFramebuffer(),this.stencil=null,this.texture=null,this.width=s||100,this.height=p||100};u.prototype.enableTexture=function(c){var s=this.gl;this.texture=c||new l(s),this.texture.bind(),this.bind(),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,this.texture.texture,0)},u.prototype.enableStencil=function(){if(!this.stencil){var c=this.gl;this.stencil=c.createRenderbuffer(),c.bindRenderbuffer(c.RENDERBUFFER,this.stencil),c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,this.stencil),c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_STENCIL,this.width,this.height)}},u.prototype.clear=function(c,s,p,v){this.bind();var h=this.gl;h.clearColor(c,s,p,v),h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT)},u.prototype.bind=function(){var c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,this.framebuffer)},u.prototype.unbind=function(){var c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,null)},u.prototype.resize=function(c,s){var p=this.gl;this.width=c,this.height=s,this.texture&&this.texture.uploadData(null,c,s),this.stencil&&(p.bindRenderbuffer(p.RENDERBUFFER,this.stencil),p.renderbufferStorage(p.RENDERBUFFER,p.DEPTH_STENCIL,c,s))},u.prototype.destroy=function(){var c=this.gl;this.texture&&this.texture.destroy(),c.deleteFramebuffer(this.framebuffer),this.gl=null,this.stencil=null,this.texture=null},u.createRGBA=function(c,s,p,v){var h=l.fromData(c,null,s,p);h.enableNearestScaling(),h.enableWrapClamp();var o=new u(c,s,p);return o.enableTexture(h),o.unbind(),o},u.createFloat32=function(c,s,p,v){var h=new l.fromData(c,v,s,p);h.enableNearestScaling(),h.enableWrapClamp();var o=new u(c,s,p);return o.enableTexture(h),o.unbind(),o},n.exports=u},{"./GLTexture":12}],11:[function(_,n,e){var l=_("./shader/compileProgram"),u=_("./shader/extractAttributes"),c=_("./shader/extractUniforms"),s=_("./shader/setPrecision"),p=_("./shader/generateUniformAccessObject"),v=function(h,o,i,t,r){this.gl=h,t&&(o=s(o,t),i=s(i,t)),this.program=l(h,o,i,r),this.attributes=u(h,this.program),this.uniformData=c(h,this.program),this.uniforms=p(h,this.uniformData)};v.prototype.bind=function(){return this.gl.useProgram(this.program),this},v.prototype.destroy=function(){this.attributes=null,this.uniformData=null,this.uniforms=null;var h=this.gl;h.deleteProgram(this.program)},n.exports=v},{"./shader/compileProgram":17,"./shader/extractAttributes":19,"./shader/extractUniforms":20,"./shader/generateUniformAccessObject":21,"./shader/setPrecision":25}],12:[function(_,n,e){var l=function(c,s,p,v,h){this.gl=c,this.texture=c.createTexture(),this.mipmap=!1,this.premultiplyAlpha=!1,this.width=s||-1,this.height=p||-1,this.format=v||c.RGBA,this.type=h||c.UNSIGNED_BYTE};l.prototype.upload=function(c){this.bind();var s=this.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);var p=c.videoWidth||c.width,v=c.videoHeight||c.height;v!==this.height||p!==this.width?s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,this.type,c):s.texSubImage2D(s.TEXTURE_2D,0,0,0,this.format,this.type,c),this.width=p,this.height=v};var u=!1;l.prototype.uploadData=function(c,s,p){this.bind();var v=this.gl;if(c instanceof Float32Array){if(!u){var h=v.getExtension("OES_texture_float");if(h)u=!0;else throw new Error("floating point textures not available")}this.type=v.FLOAT}else this.type=this.type||v.UNSIGNED_BYTE;v.pixelStorei(v.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),s!==this.width||p!==this.height?v.texImage2D(v.TEXTURE_2D,0,this.format,s,p,0,this.format,this.type,c||null):v.texSubImage2D(v.TEXTURE_2D,0,0,0,s,p,this.format,this.type,c||null),this.width=s,this.height=p},l.prototype.bind=function(c){var s=this.gl;c!==void 0&&s.activeTexture(s.TEXTURE0+c),s.bindTexture(s.TEXTURE_2D,this.texture)},l.prototype.unbind=function(){var c=this.gl;c.bindTexture(c.TEXTURE_2D,null)},l.prototype.minFilter=function(c){var s=this.gl;this.bind(),this.mipmap?s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,c?s.LINEAR_MIPMAP_LINEAR:s.NEAREST_MIPMAP_NEAREST):s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,c?s.LINEAR:s.NEAREST)},l.prototype.magFilter=function(c){var s=this.gl;this.bind(),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,c?s.LINEAR:s.NEAREST)},l.prototype.enableMipmap=function(){var c=this.gl;this.bind(),this.mipmap=!0,c.generateMipmap(c.TEXTURE_2D)},l.prototype.enableLinearScaling=function(){this.minFilter(!0),this.magFilter(!0)},l.prototype.enableNearestScaling=function(){this.minFilter(!1),this.magFilter(!1)},l.prototype.enableWrapClamp=function(){var c=this.gl;this.bind(),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE)},l.prototype.enableWrapRepeat=function(){var c=this.gl;this.bind(),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT)},l.prototype.enableWrapMirrorRepeat=function(){var c=this.gl;this.bind(),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.MIRRORED_REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.MIRRORED_REPEAT)},l.prototype.destroy=function(){var c=this.gl;c.deleteTexture(this.texture)},l.fromSource=function(c,s,p){var v=new l(c);return v.premultiplyAlpha=p||!1,v.upload(s),v},l.fromData=function(c,s,p,v){var h=new l(c);return h.uploadData(s,p,v),h},n.exports=l},{}],13:[function(_,n,e){var l=_("./setVertexAttribArrays");function u(c,s){if(this.nativeVaoExtension=null,u.FORCE_NATIVE||(this.nativeVaoExtension=c.getExtension("OES_vertex_array_object")||c.getExtension("MOZ_OES_vertex_array_object")||c.getExtension("WEBKIT_OES_vertex_array_object")),this.nativeState=s,this.nativeVaoExtension){this.nativeVao=this.nativeVaoExtension.createVertexArrayOES();var p=c.getParameter(c.MAX_VERTEX_ATTRIBS);this.nativeState={tempAttribState:new Array(p),attribState:new Array(p)}}this.gl=c,this.attributes=[],this.indexBuffer=null,this.dirty=!1}u.prototype.constructor=u,n.exports=u,u.FORCE_NATIVE=!1,u.prototype.bind=function(){if(this.nativeVao){if(this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.dirty)return this.dirty=!1,this.activate(),this;this.indexBuffer&&this.indexBuffer.bind()}else this.activate();return this},u.prototype.unbind=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(null),this},u.prototype.activate=function(){for(var c=this.gl,s=null,p=0;p<this.attributes.length;p++){var v=this.attributes[p];s!==v.buffer&&(v.buffer.bind(),s=v.buffer),c.vertexAttribPointer(v.attribute.location,v.attribute.size,v.type||c.FLOAT,v.normalized||!1,v.stride||0,v.start||0)}return l(c,this.attributes,this.nativeState),this.indexBuffer&&this.indexBuffer.bind(),this},u.prototype.addAttribute=function(c,s,p,v,h,o){return this.attributes.push({buffer:c,attribute:s,location:s.location,type:p||this.gl.FLOAT,normalized:v||!1,stride:h||0,start:o||0}),this.dirty=!0,this},u.prototype.addIndex=function(c){return this.indexBuffer=c,this.dirty=!0,this},u.prototype.clear=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.attributes.length=0,this.indexBuffer=null,this},u.prototype.draw=function(c,s,p){var v=this.gl;return this.indexBuffer?v.drawElements(c,s||this.indexBuffer.data.length,v.UNSIGNED_SHORT,(p||0)*2):v.drawArrays(c,p,s||this.getSize()),this},u.prototype.destroy=function(){this.gl=null,this.indexBuffer=null,this.attributes=null,this.nativeState=null,this.nativeVao&&this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao),this.nativeVaoExtension=null,this.nativeVao=null},u.prototype.getSize=function(){var c=this.attributes[0];return c.buffer.data.length/(c.stride/4||c.attribute.size)}},{"./setVertexAttribArrays":16}],14:[function(_,n,e){var l=function(u,c){var s=u.getContext("webgl",c)||u.getContext("experimental-webgl",c);if(!s)throw new Error("This browser does not support webGL. Try using the canvas renderer");return s};n.exports=l},{}],15:[function(_,n,e){var l={createContext:_("./createContext"),setVertexAttribArrays:_("./setVertexAttribArrays"),GLBuffer:_("./GLBuffer"),GLFramebuffer:_("./GLFramebuffer"),GLShader:_("./GLShader"),GLTexture:_("./GLTexture"),VertexArrayObject:_("./VertexArrayObject"),shader:_("./shader")};typeof n<"u"&&n.exports&&(n.exports=l),typeof window<"u"&&(window.PIXI=window.PIXI||{},window.PIXI.glCore=l)},{"./GLBuffer":9,"./GLFramebuffer":10,"./GLShader":11,"./GLTexture":12,"./VertexArrayObject":13,"./createContext":14,"./setVertexAttribArrays":16,"./shader":22}],16:[function(_,n,e){var l=function(u,c,s){var p;if(s){var v=s.tempAttribState,h=s.attribState;for(p=0;p<v.length;p++)v[p]=!1;for(p=0;p<c.length;p++)v[c[p].attribute.location]=!0;for(p=0;p<h.length;p++)h[p]!==v[p]&&(h[p]=v[p],s.attribState[p]?u.enableVertexAttribArray(p):u.disableVertexAttribArray(p))}else for(p=0;p<c.length;p++){var o=c[p];u.enableVertexAttribArray(o.attribute.location)}};n.exports=l},{}],17:[function(_,n,e){var l=function(c,s,p,v){var h=u(c,c.VERTEX_SHADER,s),o=u(c,c.FRAGMENT_SHADER,p),i=c.createProgram();if(c.attachShader(i,h),c.attachShader(i,o),v)for(var t in v)c.bindAttribLocation(i,v[t],t);return c.linkProgram(i),c.getProgramParameter(i,c.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",c.getProgramParameter(i,c.VALIDATE_STATUS)),console.error("gl.getError()",c.getError()),c.getProgramInfoLog(i)!==""&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",c.getProgramInfoLog(i)),c.deleteProgram(i),i=null),c.deleteShader(h),c.deleteShader(o),i},u=function(c,s,p){var v=c.createShader(s);return c.shaderSource(v,p),c.compileShader(v),c.getShaderParameter(v,c.COMPILE_STATUS)?v:(console.log(c.getShaderInfoLog(v)),null)};n.exports=l},{}],18:[function(_,n,e){var l=function(c,s){switch(c){case"float":return 0;case"vec2":return new Float32Array(2*s);case"vec3":return new Float32Array(3*s);case"vec4":return new Float32Array(4*s);case"int":case"sampler2D":return 0;case"ivec2":return new Int32Array(2*s);case"ivec3":return new Int32Array(3*s);case"ivec4":return new Int32Array(4*s);case"bool":return!1;case"bvec2":return u(2*s);case"bvec3":return u(3*s);case"bvec4":return u(4*s);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}},u=function(c){for(var s=new Array(c),p=0;p<s.length;p++)s[p]=!1;return s};n.exports=l},{}],19:[function(_,n,e){var l=_("./mapType"),u=_("./mapSize"),c=function(p,v){for(var h={},o=p.getProgramParameter(v,p.ACTIVE_ATTRIBUTES),i=0;i<o;i++){var t=p.getActiveAttrib(v,i),r=l(p,t.type);h[t.name]={type:r,size:u(r),location:p.getAttribLocation(v,t.name),pointer:s}}return h},s=function(p,v,h,o){gl.vertexAttribPointer(this.location,this.size,p||gl.FLOAT,v||!1,h||0,o||0)};n.exports=c},{"./mapSize":23,"./mapType":24}],20:[function(_,n,e){var l=_("./mapType"),u=_("./defaultValue"),c=function(s,p){for(var v={},h=s.getProgramParameter(p,s.ACTIVE_UNIFORMS),o=0;o<h;o++){var i=s.getActiveUniform(p,o),t=i.name.replace(/\[.*?\]/,""),r=l(s,i.type);v[t]={type:r,size:i.size,location:s.getUniformLocation(p,t),value:u(r,i.size)}}return v};n.exports=c},{"./defaultValue":18,"./mapType":24}],21:[function(_,n,e){var l=function(h,o){var i={data:{}};i.gl=h;for(var t=Object.keys(o),r=0;r<t.length;r++){var d=t[r],a=d.split("."),f=a[a.length-1],m=v(a,i),g=o[d];m.data[f]=g,m.gl=h,Object.defineProperty(m,f,{get:u(f),set:p(f,g)})}return i},u=function(h){return function(){return this.data[h].value}},c={float:function(o,i,t){o.uniform1f(i,t)},vec2:function(o,i,t){o.uniform2f(i,t[0],t[1])},vec3:function(o,i,t){o.uniform3f(i,t[0],t[1],t[2])},vec4:function(o,i,t){o.uniform4f(i,t[0],t[1],t[2],t[3])},int:function(o,i,t){o.uniform1i(i,t)},ivec2:function(o,i,t){o.uniform2i(i,t[0],t[1])},ivec3:function(o,i,t){o.uniform3i(i,t[0],t[1],t[2])},ivec4:function(o,i,t){o.uniform4i(i,t[0],t[1],t[2],t[3])},bool:function(o,i,t){o.uniform1i(i,t)},bvec2:function(o,i,t){o.uniform2i(i,t[0],t[1])},bvec3:function(o,i,t){o.uniform3i(i,t[0],t[1],t[2])},bvec4:function(o,i,t){o.uniform4i(i,t[0],t[1],t[2],t[3])},mat2:function(o,i,t){o.uniformMatrix2fv(i,!1,t)},mat3:function(o,i,t){o.uniformMatrix3fv(i,!1,t)},mat4:function(o,i,t){o.uniformMatrix4fv(i,!1,t)},sampler2D:function(o,i,t){o.uniform1i(i,t)}},s={float:function(o,i,t){o.uniform1fv(i,t)},vec2:function(o,i,t){o.uniform2fv(i,t)},vec3:function(o,i,t){o.uniform3fv(i,t)},vec4:function(o,i,t){o.uniform4fv(i,t)},int:function(o,i,t){o.uniform1iv(i,t)},ivec2:function(o,i,t){o.uniform2iv(i,t)},ivec3:function(o,i,t){o.uniform3iv(i,t)},ivec4:function(o,i,t){o.uniform4iv(i,t)},bool:function(o,i,t){o.uniform1iv(i,t)},bvec2:function(o,i,t){o.uniform2iv(i,t)},bvec3:function(o,i,t){o.uniform3iv(i,t)},bvec4:function(o,i,t){o.uniform4iv(i,t)},sampler2D:function(o,i,t){o.uniform1iv(i,t)}};function p(h,o){return function(i){this.data[h].value=i;var t=this.data[h].location;o.size===1?c[o.type](this.gl,t,i):s[o.type](this.gl,t,i)}}function v(h,o){for(var i=o,t=0;t<h.length-1;t++){var r=i[h[t]]||{data:{}};i[h[t]]=r,i=r}return i}n.exports=l},{}],22:[function(_,n,e){n.exports={compileProgram:_("./compileProgram"),defaultValue:_("./defaultValue"),extractAttributes:_("./extractAttributes"),extractUniforms:_("./extractUniforms"),generateUniformAccessObject:_("./generateUniformAccessObject"),setPrecision:_("./setPrecision"),mapSize:_("./mapSize"),mapType:_("./mapType")}},{"./compileProgram":17,"./defaultValue":18,"./extractAttributes":19,"./extractUniforms":20,"./generateUniformAccessObject":21,"./mapSize":23,"./mapType":24,"./setPrecision":25}],23:[function(_,n,e){var l=function(c){return u[c]},u={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};n.exports=l},{}],24:[function(_,n,e){var l=function(s,p){if(!u){var v=Object.keys(c);u={};for(var h=0;h<v.length;++h){var o=v[h];u[s[o]]=c[o]}}return u[p]},u=null,c={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D"};n.exports=l},{}],25:[function(_,n,e){var l=function(u,c){return u.substring(0,9)!=="precision"?"precision "+c+` float;
`+u:u};n.exports=l},{}],26:[function(_,n,e){var l=n.exports={},u,c;function s(){throw new Error("setTimeout has not been defined")}function p(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?u=setTimeout:u=s}catch{u=s}try{typeof clearTimeout=="function"?c=clearTimeout:c=p}catch{c=p}})();function v(g){if(u===setTimeout)return setTimeout(g,0);if((u===s||!u)&&setTimeout)return u=setTimeout,setTimeout(g,0);try{return u(g,0)}catch{try{return u.call(null,g,0)}catch{return u.call(this,g,0)}}}function h(g){if(c===clearTimeout)return clearTimeout(g);if((c===p||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(g);try{return c(g)}catch{try{return c.call(null,g)}catch{return c.call(this,g)}}}var o=[],i=!1,t,r=-1;function d(){!i||!t||(i=!1,t.length?o=t.concat(o):r=-1,o.length&&a())}function a(){if(!i){var g=v(d);i=!0;for(var x=o.length;x;){for(t=o,o=[];++r<x;)t&&t[r].run();r=-1,x=o.length}t=null,i=!1,h(g)}}l.nextTick=function(g){var x=new Array(arguments.length-1);if(arguments.length>1)for(var T=1;T<arguments.length;T++)x[T-1]=arguments[T];o.push(new f(g,x)),o.length===1&&!i&&v(a)};function f(g,x){this.fun=g,this.array=x}f.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={};function m(){}l.on=m,l.addListener=m,l.once=m,l.off=m,l.removeListener=m,l.removeAllListeners=m,l.emit=m,l.prependListener=m,l.prependOnceListener=m,l.listeners=function(g){return[]},l.binding=function(g){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(g){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},{}],27:[function(_,n,e){(function(l){(function(u){var c=typeof e=="object"&&e&&!e.nodeType&&e,s=typeof n=="object"&&n&&!n.nodeType&&n,p=typeof l=="object"&&l;(p.global===p||p.window===p||p.self===p)&&(u=p);var v,h=2147483647,o=36,i=1,t=26,r=38,d=700,a=72,f=128,m="-",g=/^xn--/,x=/[^\x20-\x7E]/,T=/[\x2E\u3002\uFF0E\uFF61]/g,y={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},w=o-i,b=Math.floor,S=String.fromCharCode,E;function O(k){throw new RangeError(y[k])}function P(k,G){for(var W=k.length,K=[];W--;)K[W]=G(k[W]);return K}function M(k,G){var W=k.split("@"),K="";W.length>1&&(K=W[0]+"@",k=W[1]),k=k.replace(T,".");var q=k.split("."),Q=P(q,G).join(".");return K+Q}function A(k){for(var G=[],W=0,K=k.length,q,Q;W<K;)q=k.charCodeAt(W++),q>=55296&&q<=56319&&W<K?(Q=k.charCodeAt(W++),(Q&64512)==56320?G.push(((q&1023)<<10)+(Q&1023)+65536):(G.push(q),W--)):G.push(q);return G}function B(k){return P(k,function(G){var W="";return G>65535&&(G-=65536,W+=S(G>>>10&1023|55296),G=56320|G&1023),W+=S(G),W}).join("")}function I(k){return k-48<10?k-22:k-65<26?k-65:k-97<26?k-97:o}function R(k,G){return k+22+75*(k<26)-((G!=0)<<5)}function D(k,G,W){var K=0;for(k=W?b(k/d):k>>1,k+=b(k/G);k>w*t>>1;K+=o)k=b(k/w);return b(K+(w+1)*k/(k+r))}function L(k){var G=[],W=k.length,K,q=0,Q=f,J=a,V,Z,$,ie,ne,ae,se,re,ee;for(V=k.lastIndexOf(m),V<0&&(V=0),Z=0;Z<V;++Z)k.charCodeAt(Z)>=128&&O("not-basic"),G.push(k.charCodeAt(Z));for($=V>0?V+1:0;$<W;){for(ie=q,ne=1,ae=o;$>=W&&O("invalid-input"),se=I(k.charCodeAt($++)),(se>=o||se>b((h-q)/ne))&&O("overflow"),q+=se*ne,re=ae<=J?i:ae>=J+t?t:ae-J,!(se<re);ae+=o)ee=o-re,ne>b(h/ee)&&O("overflow"),ne*=ee;K=G.length+1,J=D(q-ie,K,ie==0),b(q/K)>h-Q&&O("overflow"),Q+=b(q/K),q%=K,G.splice(q++,0,Q)}return B(G)}function F(k){var G,W,K,q,Q,J,V,Z,$,ie,ne,ae=[],se,re,ee,ue;for(k=A(k),se=k.length,G=f,W=0,Q=a,J=0;J<se;++J)ne=k[J],ne<128&&ae.push(S(ne));for(K=q=ae.length,q&&ae.push(m);K<se;){for(V=h,J=0;J<se;++J)ne=k[J],ne>=G&&ne<V&&(V=ne);for(re=K+1,V-G>b((h-W)/re)&&O("overflow"),W+=(V-G)*re,G=V,J=0;J<se;++J)if(ne=k[J],ne<G&&++W>h&&O("overflow"),ne==G){for(Z=W,$=o;ie=$<=Q?i:$>=Q+t?t:$-Q,!(Z<ie);$+=o)ue=Z-ie,ee=o-ie,ae.push(S(R(ie+ue%ee,0))),Z=b(ue/ee);ae.push(S(R(Z,0))),Q=D(W,re,K==q),W=0,++K}++W,++G}return ae.join("")}function N(k){return M(k,function(G){return g.test(G)?L(G.slice(4).toLowerCase()):G})}function U(k){return M(k,function(G){return x.test(G)?"xn--"+F(G):G})}if(v={version:"1.4.1",ucs2:{decode:A,encode:B},decode:L,encode:F,toASCII:U,toUnicode:N},c&&s)if(n.exports==c)s.exports=v;else for(E in v)v.hasOwnProperty(E)&&(c[E]=v[E]);else u.punycode=v})(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],28:[function(_,n,e){function l(c,s){return Object.prototype.hasOwnProperty.call(c,s)}n.exports=function(c,s,p,v){s=s||"&",p=p||"=";var h={};if(typeof c!="string"||c.length===0)return h;var o=/\+/g;c=c.split(s);var i=1e3;v&&typeof v.maxKeys=="number"&&(i=v.maxKeys);var t=c.length;i>0&&t>i&&(t=i);for(var r=0;r<t;++r){var d=c[r].replace(o,"%20"),a=d.indexOf(p),f,m,g,x;a>=0?(f=d.substr(0,a),m=d.substr(a+1)):(f=d,m=""),g=decodeURIComponent(f),x=decodeURIComponent(m),l(h,g)?u(h[g])?h[g].push(x):h[g]=[h[g],x]:h[g]=x}return h};var u=Array.isArray||function(c){return Object.prototype.toString.call(c)==="[object Array]"}},{}],29:[function(_,n,e){var l=function(p){switch(typeof p){case"string":return p;case"boolean":return p?"true":"false";case"number":return isFinite(p)?p:"";default:return""}};n.exports=function(p,v,h,o){return v=v||"&",h=h||"=",p===null&&(p=void 0),typeof p=="object"?c(s(p),function(i){var t=encodeURIComponent(l(i))+h;return u(p[i])?c(p[i],function(r){return t+encodeURIComponent(l(r))}).join(v):t+encodeURIComponent(l(p[i]))}).join(v):o?encodeURIComponent(l(o))+h+encodeURIComponent(l(p)):""};var u=Array.isArray||function(p){return Object.prototype.toString.call(p)==="[object Array]"};function c(p,v){if(p.map)return p.map(v);for(var h=[],o=0;o<p.length;o++)h.push(v(p[o],o));return h}var s=Object.keys||function(p){var v=[];for(var h in p)Object.prototype.hasOwnProperty.call(p,h)&&v.push(h);return v}},{}],30:[function(_,n,e){e.decode=e.parse=_("./decode"),e.encode=e.stringify=_("./encode")},{"./decode":28,"./encode":29}],31:[function(_,n,e){n.exports=function(u,c,s){var p,v=u.length;if(!(c>=v||s===0)){s=c+s>v?v-c:s;var h=v-s;for(p=c;p<h;++p)u[p]=u[p+s];u.length=h}}},{}],32:[function(_,n,e){e.__esModule=!0;var l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},u=function(){function x(T,y){for(var w=0;w<y.length;w++){var b=y[w];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(T,b.key,b)}}return function(T,y,w){return y&&x(T.prototype,y),w&&x(T,w),T}}(),c=_("mini-signals"),s=d(c),p=_("parse-uri"),v=d(p),h=_("./async"),o=r(h),i=_("./Resource"),t=d(i);function r(x){if(x&&x.__esModule)return x;var T={};if(x!=null)for(var y in x)Object.prototype.hasOwnProperty.call(x,y)&&(T[y]=x[y]);return T.default=x,T}function d(x){return x&&x.__esModule?x:{default:x}}function a(x,T){if(!(x instanceof T))throw new TypeError("Cannot call a class as a function")}var f=100,m=/(#[\w-]+)?$/,g=function(){function x(){var T=this,y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:10;a(this,x),this.baseUrl=y,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(b,S){return T._loadResource(b,S)},this._queue=o.queue(this._boundLoadResource,w),this._queue.pause(),this.resources={},this.onProgress=new s.default,this.onError=new s.default,this.onLoad=new s.default,this.onStart=new s.default,this.onComplete=new s.default}return x.prototype.add=function(y,w,b,S){if(Array.isArray(y)){for(var E=0;E<y.length;++E)this.add(y[E]);return this}if((typeof y>"u"?"undefined":l(y))==="object"&&(S=w||y.callback||y.onComplete,b=y,w=y.url,y=y.name||y.key||y.url),typeof w!="string"&&(S=b,b=w,w=y),typeof w!="string")throw new Error("No url passed to add resource to loader.");if(typeof b=="function"&&(S=b,b=null),this.loading&&(!b||!b.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[y])throw new Error('Resource named "'+y+'" already exists.');if(w=this._prepareUrl(w),this.resources[y]=new t.default(y,w,b),typeof S=="function"&&this.resources[y].onAfterMiddleware.once(S),this.loading){for(var O=b.parentResource,P=[],M=0;M<O.children.length;++M)O.children[M].isComplete||P.push(O.children[M]);var A=O.progressChunk*(P.length+1),B=A/(P.length+2);O.children.push(this.resources[y]),O.progressChunk=B;for(var I=0;I<P.length;++I)P[I].progressChunk=B;this.resources[y].progressChunk=B}return this._queue.push(this.resources[y]),this},x.prototype.pre=function(y){return this._beforeMiddleware.push(y),this},x.prototype.use=function(y){return this._afterMiddleware.push(y),this},x.prototype.reset=function(){this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause();for(var y in this.resources){var w=this.resources[y];w._onLoadBinding&&w._onLoadBinding.detach(),w.isLoading&&w.abort()}return this.resources={},this},x.prototype.load=function(y){if(typeof y=="function"&&this.onComplete.once(y),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var w=this._queue._tasks.length,b=100/w,S=0;S<this._queue._tasks.length;++S)this._queue._tasks[S].data.progressChunk=b;this._onStart(),this._queue.resume()}return this},x.prototype._prepareUrl=function(y){var w=(0,v.default)(y,{strictMode:!0}),b=void 0;if(w.protocol||!w.path||y.indexOf("//")===0?b=y:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&y.charAt(0)!=="/"?b=this.baseUrl+"/"+y:b=this.baseUrl+y,this.defaultQueryString){var S=m.exec(b)[0];b=b.substr(0,b.length-S.length),b.indexOf("?")!==-1?b+="&"+this.defaultQueryString:b+="?"+this.defaultQueryString,b+=S}return b},x.prototype._loadResource=function(y,w){var b=this;y._dequeue=w,o.eachSeries(this._beforeMiddleware,function(S,E){S.call(b,y,function(){E(y.isComplete?{}:null)})},function(){y.isComplete?b._onLoad(y):(y._onLoadBinding=y.onComplete.once(b._onLoad,b),y.load())},!0)},x.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},x.prototype._onComplete=function(){this.progress=f,this.loading=!1,this.onComplete.dispatch(this,this.resources)},x.prototype._onLoad=function(y){var w=this;y._onLoadBinding=null,this._resourcesParsing.push(y),y._dequeue(),o.eachSeries(this._afterMiddleware,function(b,S){b.call(w,y,S)},function(){y.onAfterMiddleware.dispatch(y),w.progress+=y.progressChunk,w.onProgress.dispatch(w,y),y.error?w.onError.dispatch(y.error,w,y):w.onLoad.dispatch(w,y),w._resourcesParsing.splice(w._resourcesParsing.indexOf(y),1),w._queue.idle()&&w._resourcesParsing.length===0&&w._onComplete()},!0)},u(x,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(y){this._queue.concurrency=y}}]),x}();e.default=g},{"./Resource":33,"./async":34,"mini-signals":5,"parse-uri":7}],33:[function(_,n,e){e.__esModule=!0;var l=function(){function y(w,b){for(var S=0;S<b.length;S++){var E=b[S];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(w,E.key,E)}}return function(w,b,S){return b&&y(w.prototype,b),S&&y(w,S),w}}(),u=_("parse-uri"),c=v(u),s=_("mini-signals"),p=v(s);function v(y){return y&&y.__esModule?y:{default:y}}function h(y,w){if(!(y instanceof w))throw new TypeError("Cannot call a class as a function")}var o=!!(window.XDomainRequest&&!("withCredentials"in new XMLHttpRequest)),i=null,t=0,r=200,d=204,a=1223,f=2;function m(){}var g=function(){y.setExtensionLoadType=function(b,S){x(y._loadTypeMap,b,S)},y.setExtensionXhrType=function(b,S){x(y._xhrTypeMap,b,S)};function y(w,b,S){if(h(this,y),typeof w!="string"||typeof b!="string")throw new Error("Both name and url are required for constructing a resource.");S=S||{},this._flags=0,this._setFlag(y.STATUS_FLAGS.DATA_URL,b.indexOf("data:")===0),this.name=w,this.url=b,this.extension=this._getExtension(),this.data=null,this.crossOrigin=S.crossOrigin===!0?"anonymous":S.crossOrigin,this.loadType=S.loadType||this._determineLoadType(),this.xhrType=S.xhrType,this.metadata=S.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=y.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=m,this._onLoadBinding=null,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this),this.onStart=new p.default,this.onProgress=new p.default,this.onComplete=new p.default,this.onAfterMiddleware=new p.default}return y.prototype.complete=function(){if(this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null)),this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(y.STATUS_FLAGS.COMPLETE,!0),this._setFlag(y.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},y.prototype.abort=function(b){if(!this.error){if(this.error=new Error(b),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=y.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this.complete()}},y.prototype.load=function(b){var S=this;if(!this.isLoading){if(this.isComplete){b&&setTimeout(function(){return b(S)},1);return}else b&&this.onComplete.once(b);switch(this._setFlag(y.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),(this.crossOrigin===!1||typeof this.crossOrigin!="string")&&(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case y.LOAD_TYPE.IMAGE:this.type=y.TYPE.IMAGE,this._loadElement("image");break;case y.LOAD_TYPE.AUDIO:this.type=y.TYPE.AUDIO,this._loadSourceElement("audio");break;case y.LOAD_TYPE.VIDEO:this.type=y.TYPE.VIDEO,this._loadSourceElement("video");break;case y.LOAD_TYPE.XHR:default:o&&this.crossOrigin?this._loadXdr():this._loadXhr();break}}},y.prototype._hasFlag=function(b){return!!(this._flags&b)},y.prototype._setFlag=function(b,S){this._flags=S?this._flags|b:this._flags&~b},y.prototype._loadElement=function(b){this.metadata.loadElement?this.data=this.metadata.loadElement:b==="image"&&typeof window.Image<"u"?this.data=new Image:this.data=document.createElement(b),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1)},y.prototype._loadSourceElement=function(b){if(this.metadata.loadElement?this.data=this.metadata.loadElement:b==="audio"&&typeof window.Audio<"u"?this.data=new Audio:this.data=document.createElement(b),this.data===null){this.abort("Unsupported element: "+b);return}if(!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var S=this.metadata.mimeType,E=0;E<this.url.length;++E)this.data.appendChild(this._createSource(b,this.url[E],Array.isArray(S)?S[E]:S));else{var O=this.metadata.mimeType;this.data.appendChild(this._createSource(b,this.url,Array.isArray(O)?O[0]:O))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load()},y.prototype._loadXhr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var b=this.xhr=new XMLHttpRequest;b.open("GET",this.url,!0),this.xhrType===y.XHR_RESPONSE_TYPE.JSON||this.xhrType===y.XHR_RESPONSE_TYPE.DOCUMENT?b.responseType=y.XHR_RESPONSE_TYPE.TEXT:b.responseType=this.xhrType,b.addEventListener("error",this._boundXhrOnError,!1),b.addEventListener("abort",this._boundXhrOnAbort,!1),b.addEventListener("progress",this._boundOnProgress,!1),b.addEventListener("load",this._boundXhrOnLoad,!1),b.send()},y.prototype._loadXdr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var b=this.xhr=new XDomainRequest;b.timeout=5e3,b.onerror=this._boundXhrOnError,b.ontimeout=this._boundXdrOnTimeout,b.onprogress=this._boundOnProgress,b.onload=this._boundXhrOnLoad,b.open("GET",this.url,!0),setTimeout(function(){return b.send()},1)},y.prototype._createSource=function(b,S,E){E||(E=b+"/"+this._getExtension(S));var O=document.createElement("source");return O.src=S,O.type=E,O},y.prototype._onError=function(b){this.abort("Failed to load element using: "+b.target.nodeName)},y.prototype._onProgress=function(b){b&&b.lengthComputable&&this.onProgress.dispatch(this,b.loaded/b.total)},y.prototype._xhrOnError=function(){var b=this.xhr;this.abort(T(b)+" Request failed. Status: "+b.status+', text: "'+b.statusText+'"')},y.prototype._xhrOnAbort=function(){this.abort(T(this.xhr)+" Request was aborted by the user.")},y.prototype._xdrOnTimeout=function(){this.abort(T(this.xhr)+" Request timed out.")},y.prototype._xhrOnLoad=function(){var b=this.xhr,S="",E=typeof b.status>"u"?r:b.status;(b.responseType===""||b.responseType==="text"||typeof b.responseType>"u")&&(S=b.responseText),E===t&&(S.length>0||b.responseType===y.XHR_RESPONSE_TYPE.BUFFER)?E=r:E===a&&(E=d);var O=E/100|0;if(O===f)if(this.xhrType===y.XHR_RESPONSE_TYPE.TEXT)this.data=S,this.type=y.TYPE.TEXT;else if(this.xhrType===y.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(S),this.type=y.TYPE.JSON}catch(A){this.abort("Error trying to parse loaded json: "+A);return}else if(this.xhrType===y.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var P=new DOMParser;this.data=P.parseFromString(S,"text/xml")}else{var M=document.createElement("div");M.innerHTML=S,this.data=M}this.type=y.TYPE.XML}catch(A){this.abort("Error trying to parse loaded xml: "+A);return}else this.data=b.response||S;else{this.abort("["+b.status+"] "+b.statusText+": "+b.responseURL);return}this.complete()},y.prototype._determineCrossOrigin=function(b,S){if(b.indexOf("data:")===0)return"";S=S||window.location,i||(i=document.createElement("a")),i.href=b,b=(0,c.default)(i.href,{strictMode:!0});var E=!b.port&&S.port===""||b.port===S.port,O=b.protocol?b.protocol+":":"";return b.host!==S.hostname||!E||O!==S.protocol?"anonymous":""},y.prototype._determineXhrType=function(){return y._xhrTypeMap[this.extension]||y.XHR_RESPONSE_TYPE.TEXT},y.prototype._determineLoadType=function(){return y._loadTypeMap[this.extension]||y.LOAD_TYPE.XHR},y.prototype._getExtension=function(){var b=this.url,S="";if(this.isDataUrl){var E=b.indexOf("/");S=b.substring(E+1,b.indexOf(";",E))}else{var O=b.indexOf("?"),P=b.indexOf("#"),M=Math.min(O>-1?O:b.length,P>-1?P:b.length);b=b.substring(0,M),S=b.substring(b.lastIndexOf(".")+1)}return S.toLowerCase()},y.prototype._getMimeFromXhrType=function(b){switch(b){case y.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case y.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case y.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case y.XHR_RESPONSE_TYPE.JSON:return"application/json";case y.XHR_RESPONSE_TYPE.DEFAULT:case y.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},l(y,[{key:"isDataUrl",get:function(){return this._hasFlag(y.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(y.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(y.STATUS_FLAGS.LOADING)}}]),y}();e.default=g,g.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},g.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},g.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},g.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},g._loadTypeMap={gif:g.LOAD_TYPE.IMAGE,png:g.LOAD_TYPE.IMAGE,bmp:g.LOAD_TYPE.IMAGE,jpg:g.LOAD_TYPE.IMAGE,jpeg:g.LOAD_TYPE.IMAGE,tif:g.LOAD_TYPE.IMAGE,tiff:g.LOAD_TYPE.IMAGE,webp:g.LOAD_TYPE.IMAGE,tga:g.LOAD_TYPE.IMAGE,svg:g.LOAD_TYPE.IMAGE,"svg+xml":g.LOAD_TYPE.IMAGE,mp3:g.LOAD_TYPE.AUDIO,ogg:g.LOAD_TYPE.AUDIO,wav:g.LOAD_TYPE.AUDIO,mp4:g.LOAD_TYPE.VIDEO,webm:g.LOAD_TYPE.VIDEO},g._xhrTypeMap={xhtml:g.XHR_RESPONSE_TYPE.DOCUMENT,html:g.XHR_RESPONSE_TYPE.DOCUMENT,htm:g.XHR_RESPONSE_TYPE.DOCUMENT,xml:g.XHR_RESPONSE_TYPE.DOCUMENT,tmx:g.XHR_RESPONSE_TYPE.DOCUMENT,svg:g.XHR_RESPONSE_TYPE.DOCUMENT,tsx:g.XHR_RESPONSE_TYPE.DOCUMENT,gif:g.XHR_RESPONSE_TYPE.BLOB,png:g.XHR_RESPONSE_TYPE.BLOB,bmp:g.XHR_RESPONSE_TYPE.BLOB,jpg:g.XHR_RESPONSE_TYPE.BLOB,jpeg:g.XHR_RESPONSE_TYPE.BLOB,tif:g.XHR_RESPONSE_TYPE.BLOB,tiff:g.XHR_RESPONSE_TYPE.BLOB,webp:g.XHR_RESPONSE_TYPE.BLOB,tga:g.XHR_RESPONSE_TYPE.BLOB,json:g.XHR_RESPONSE_TYPE.JSON,text:g.XHR_RESPONSE_TYPE.TEXT,txt:g.XHR_RESPONSE_TYPE.TEXT,ttf:g.XHR_RESPONSE_TYPE.BUFFER,otf:g.XHR_RESPONSE_TYPE.BUFFER},g.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";function x(y,w,b){w&&w.indexOf(".")===0&&(w=w.substring(1)),w&&(y[w]=b)}function T(y){return y.toString().replace("object ","")}},{"mini-signals":5,"parse-uri":7}],34:[function(_,n,e){e.__esModule=!0,e.eachSeries=u,e.queue=s;function l(){}function u(p,v,h,o){var i=0,t=p.length;(function r(d){if(d||i===t){h&&h(d);return}o?setTimeout(function(){v(p[i++],r)},1):v(p[i++],r)})()}function c(p){return function(){if(p===null)throw new Error("Callback was already called.");var h=p;p=null,h.apply(this,arguments)}}function s(p,v){if(v==null)v=1;else if(v===0)throw new Error("Concurrency must not be zero");var h=0,o={_tasks:[],concurrency:v,saturated:l,unsaturated:l,buffer:v/4,empty:l,drain:l,error:l,started:!1,paused:!1,push:function(d,a){i(d,!1,a)},kill:function(){h=0,o.drain=l,o.started=!1,o._tasks=[]},unshift:function(d,a){i(d,!0,a)},process:function(){for(;!o.paused&&h<o.concurrency&&o._tasks.length;){var d=o._tasks.shift();o._tasks.length===0&&o.empty(),h+=1,h===o.concurrency&&o.saturated(),p(d.data,c(t(d)))}},length:function(){return o._tasks.length},running:function(){return h},idle:function(){return o._tasks.length+h===0},pause:function(){o.paused!==!0&&(o.paused=!0)},resume:function(){if(o.paused!==!1){o.paused=!1;for(var d=1;d<=o.concurrency;d++)o.process()}}};function i(r,d,a){if(a!=null&&typeof a!="function")throw new Error("task callback must be a function");if(o.started=!0,r==null&&o.idle()){setTimeout(function(){return o.drain()},1);return}var f={data:r,callback:typeof a=="function"?a:l};d?o._tasks.unshift(f):o._tasks.push(f),setTimeout(function(){return o.process()},1)}function t(r){return function(){h-=1,r.callback.apply(r,arguments),arguments[0]!=null&&o.error(arguments[0],r.data),h<=o.concurrency-o.buffer&&o.unsaturated(),o.idle()&&o.drain(),o.process()}}return o}},{}],35:[function(_,n,e){e.__esModule=!0,e.encodeBinary=u;var l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function u(c){for(var s="",p=0;p<c.length;){for(var v=[0,0,0],h=[0,0,0,0],o=0;o<v.length;++o)p<c.length?v[o]=c.charCodeAt(p++)&255:v[o]=0;h[0]=v[0]>>2,h[1]=(v[0]&3)<<4|v[1]>>4,h[2]=(v[1]&15)<<2|v[2]>>6,h[3]=v[2]&63;var i=p-(c.length-1);switch(i){case 2:h[3]=64,h[2]=64;break;case 1:h[3]=64;break}for(var t=0;t<h.length;++t)s+=l.charAt(h[t])}return s}},{}],36:[function(_,n,e){var l=_("./Loader").default,u=_("./Resource").default,c=_("./async"),s=_("./b64");l.Resource=u,l.async=c,l.base64=s,n.exports=l,n.exports.default=l},{"./Loader":32,"./Resource":33,"./async":34,"./b64":35}],37:[function(_,n,e){e.__esModule=!0;var l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i};e.blobMiddlewareFactory=o;var u=_("../../Resource"),c=v(u),s=_("../../b64"),p=v(s);function v(i){return i&&i.__esModule?i:{default:i}}var h=window.URL||window.webkitURL;function o(){return function(t,r){if(!t.data){r();return}if(t.xhr&&t.xhrType===c.default.XHR_RESPONSE_TYPE.BLOB){if(!window.Blob||typeof t.data=="string"){var d=t.xhr.getResponseHeader("content-type");if(d&&d.indexOf("image")===0){t.data=new Image,t.data.src="data:"+d+";base64,"+p.default.encodeBinary(t.xhr.responseText),t.type=c.default.TYPE.IMAGE,t.data.onload=function(){t.data.onload=null,r()};return}}else if(t.data.type.indexOf("image")===0){var a=function(){var f=h.createObjectURL(t.data);return t.blob=t.data,t.data=new Image,t.data.src=f,t.type=c.default.TYPE.IMAGE,t.data.onload=function(){h.revokeObjectURL(f),t.data.onload=null,r()},{v:void 0}}();if((typeof a>"u"?"undefined":l(a))==="object")return a.v}}r()}}},{"../../Resource":33,"../../b64":35}],38:[function(_,n,e){var l=_("punycode"),u=_("./util");e.parse=y,e.resolve=b,e.resolveObject=S,e.format=w,e.Url=c;function c(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var s=/^([a-z0-9.+-]+:)/i,p=/:[0-9]*$/,v=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,h=["<",">",'"',"`"," ","\r",`
`,"	"],o=["{","}","|","\\","^","`"].concat(h),i=["'"].concat(o),t=["%","/","?",";","#"].concat(i),r=["/","?","#"],d=255,a=/^[+a-z0-9A-Z_-]{0,63}$/,f=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},x={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},T=_("querystring");function y(E,O,P){if(E&&u.isObject(E)&&E instanceof c)return E;var M=new c;return M.parse(E,O,P),M}c.prototype.parse=function(E,O,P){if(!u.isString(E))throw new TypeError("Parameter 'url' must be a string, not "+typeof E);var M=E.indexOf("?"),A=M!==-1&&M<E.indexOf("#")?"?":"#",B=E.split(A),I=/\\/g;B[0]=B[0].replace(I,"/"),E=B.join(A);var R=E;if(R=R.trim(),!P&&E.split("#").length===1){var D=v.exec(R);if(D)return this.path=R,this.href=R,this.pathname=D[1],D[2]?(this.search=D[2],O?this.query=T.parse(this.search.substr(1)):this.query=this.search.substr(1)):O&&(this.search="",this.query={}),this}var L=s.exec(R);if(L){L=L[0];var F=L.toLowerCase();this.protocol=F,R=R.substr(L.length)}if(P||L||R.match(/^\/\/[^@\/]+@[^@\/]+/)){var N=R.substr(0,2)==="//";N&&!(L&&g[L])&&(R=R.substr(2),this.slashes=!0)}if(!g[L]&&(N||L&&!x[L])){for(var U=-1,k=0;k<r.length;k++){var G=R.indexOf(r[k]);G!==-1&&(U===-1||G<U)&&(U=G)}var W,K;U===-1?K=R.lastIndexOf("@"):K=R.lastIndexOf("@",U),K!==-1&&(W=R.slice(0,K),R=R.slice(K+1),this.auth=decodeURIComponent(W)),U=-1;for(var k=0;k<t.length;k++){var G=R.indexOf(t[k]);G!==-1&&(U===-1||G<U)&&(U=G)}U===-1&&(U=R.length),this.host=R.slice(0,U),R=R.slice(U),this.parseHost(),this.hostname=this.hostname||"";var q=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!q)for(var Q=this.hostname.split(/\./),k=0,J=Q.length;k<J;k++){var V=Q[k];if(V&&!V.match(a)){for(var Z="",$=0,ie=V.length;$<ie;$++)V.charCodeAt($)>127?Z+="x":Z+=V[$];if(!Z.match(a)){var ne=Q.slice(0,k),ae=Q.slice(k+1),se=V.match(f);se&&(ne.push(se[1]),ae.unshift(se[2])),ae.length&&(R="/"+ae.join(".")+R),this.hostname=ne.join(".");break}}}this.hostname.length>d?this.hostname="":this.hostname=this.hostname.toLowerCase(),q||(this.hostname=l.toASCII(this.hostname));var re=this.port?":"+this.port:"",ee=this.hostname||"";this.host=ee+re,this.href+=this.host,q&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),R[0]!=="/"&&(R="/"+R))}if(!m[F])for(var k=0,J=i.length;k<J;k++){var ue=i[k];if(R.indexOf(ue)!==-1){var fe=encodeURIComponent(ue);fe===ue&&(fe=escape(ue)),R=R.split(ue).join(fe)}}var _e=R.indexOf("#");_e!==-1&&(this.hash=R.substr(_e),R=R.slice(0,_e));var pe=R.indexOf("?");if(pe!==-1?(this.search=R.substr(pe),this.query=R.substr(pe+1),O&&(this.query=T.parse(this.query)),R=R.slice(0,pe)):O&&(this.search="",this.query={}),R&&(this.pathname=R),x[F]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var re=this.pathname||"",Pe=this.search||"";this.path=re+Pe}return this.href=this.format(),this};function w(E){return u.isString(E)&&(E=y(E)),E instanceof c?E.format():c.prototype.format.call(E)}c.prototype.format=function(){var E=this.auth||"";E&&(E=encodeURIComponent(E),E=E.replace(/%3A/i,":"),E+="@");var O=this.protocol||"",P=this.pathname||"",M=this.hash||"",A=!1,B="";this.host?A=E+this.host:this.hostname&&(A=E+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(A+=":"+this.port)),this.query&&u.isObject(this.query)&&Object.keys(this.query).length&&(B=T.stringify(this.query));var I=this.search||B&&"?"+B||"";return O&&O.substr(-1)!==":"&&(O+=":"),this.slashes||(!O||x[O])&&A!==!1?(A="//"+(A||""),P&&P.charAt(0)!=="/"&&(P="/"+P)):A||(A=""),M&&M.charAt(0)!=="#"&&(M="#"+M),I&&I.charAt(0)!=="?"&&(I="?"+I),P=P.replace(/[?#]/g,function(R){return encodeURIComponent(R)}),I=I.replace("#","%23"),O+A+P+I+M};function b(E,O){return y(E,!1,!0).resolve(O)}c.prototype.resolve=function(E){return this.resolveObject(y(E,!1,!0)).format()};function S(E,O){return E?y(E,!1,!0).resolveObject(O):O}c.prototype.resolveObject=function(E){if(u.isString(E)){var O=new c;O.parse(E,!1,!0),E=O}for(var P=new c,M=Object.keys(this),A=0;A<M.length;A++){var B=M[A];P[B]=this[B]}if(P.hash=E.hash,E.href==="")return P.href=P.format(),P;if(E.slashes&&!E.protocol){for(var I=Object.keys(E),R=0;R<I.length;R++){var D=I[R];D!=="protocol"&&(P[D]=E[D])}return x[P.protocol]&&P.hostname&&!P.pathname&&(P.path=P.pathname="/"),P.href=P.format(),P}if(E.protocol&&E.protocol!==P.protocol){if(!x[E.protocol]){for(var L=Object.keys(E),F=0;F<L.length;F++){var N=L[F];P[N]=E[N]}return P.href=P.format(),P}if(P.protocol=E.protocol,!E.host&&!g[E.protocol]){for(var J=(E.pathname||"").split("/");J.length&&!(E.host=J.shift()););E.host||(E.host=""),E.hostname||(E.hostname=""),J[0]!==""&&J.unshift(""),J.length<2&&J.unshift(""),P.pathname=J.join("/")}else P.pathname=E.pathname;if(P.search=E.search,P.query=E.query,P.host=E.host||"",P.auth=E.auth,P.hostname=E.hostname||E.host,P.port=E.port,P.pathname||P.search){var U=P.pathname||"",k=P.search||"";P.path=U+k}return P.slashes=P.slashes||E.slashes,P.href=P.format(),P}var G=P.pathname&&P.pathname.charAt(0)==="/",W=E.host||E.pathname&&E.pathname.charAt(0)==="/",K=W||G||P.host&&E.pathname,q=K,Q=P.pathname&&P.pathname.split("/")||[],J=E.pathname&&E.pathname.split("/")||[],V=P.protocol&&!x[P.protocol];if(V&&(P.hostname="",P.port=null,P.host&&(Q[0]===""?Q[0]=P.host:Q.unshift(P.host)),P.host="",E.protocol&&(E.hostname=null,E.port=null,E.host&&(J[0]===""?J[0]=E.host:J.unshift(E.host)),E.host=null),K=K&&(J[0]===""||Q[0]==="")),W)P.host=E.host||E.host===""?E.host:P.host,P.hostname=E.hostname||E.hostname===""?E.hostname:P.hostname,P.search=E.search,P.query=E.query,Q=J;else if(J.length)Q||(Q=[]),Q.pop(),Q=Q.concat(J),P.search=E.search,P.query=E.query;else if(!u.isNullOrUndefined(E.search)){if(V){P.hostname=P.host=Q.shift();var Z=P.host&&P.host.indexOf("@")>0?P.host.split("@"):!1;Z&&(P.auth=Z.shift(),P.host=P.hostname=Z.shift())}return P.search=E.search,P.query=E.query,(!u.isNull(P.pathname)||!u.isNull(P.search))&&(P.path=(P.pathname?P.pathname:"")+(P.search?P.search:"")),P.href=P.format(),P}if(!Q.length)return P.pathname=null,P.search?P.path="/"+P.search:P.path=null,P.href=P.format(),P;for(var $=Q.slice(-1)[0],ie=(P.host||E.host||Q.length>1)&&($==="."||$==="..")||$==="",ne=0,ae=Q.length;ae>=0;ae--)$=Q[ae],$==="."?Q.splice(ae,1):$===".."?(Q.splice(ae,1),ne++):ne&&(Q.splice(ae,1),ne--);if(!K&&!q)for(;ne--;ne)Q.unshift("..");K&&Q[0]!==""&&(!Q[0]||Q[0].charAt(0)!=="/")&&Q.unshift(""),ie&&Q.join("/").substr(-1)!=="/"&&Q.push("");var se=Q[0]===""||Q[0]&&Q[0].charAt(0)==="/";if(V){P.hostname=P.host=se?"":Q.length?Q.shift():"";var Z=P.host&&P.host.indexOf("@")>0?P.host.split("@"):!1;Z&&(P.auth=Z.shift(),P.host=P.hostname=Z.shift())}return K=K||P.host&&Q.length,K&&!se&&Q.unshift(""),Q.length?P.pathname=Q.join("/"):(P.pathname=null,P.path=null),(!u.isNull(P.pathname)||!u.isNull(P.search))&&(P.path=(P.pathname?P.pathname:"")+(P.search?P.search:"")),P.auth=E.auth||P.auth,P.slashes=P.slashes||E.slashes,P.href=P.format(),P},c.prototype.parseHost=function(){var E=this.host,O=p.exec(E);O&&(O=O[0],O!==":"&&(this.port=O.substr(1)),E=E.substr(0,E.length-O.length)),E&&(this.hostname=E)}},{"./util":39,punycode:27,querystring:30}],39:[function(_,n,e){n.exports={isString:function(l){return typeof l=="string"},isObject:function(l){return typeof l=="object"&&l!==null},isNull:function(l){return l===null},isNullOrUndefined:function(l){return l==null}}},{}],40:[function(_,n,e){e.__esModule=!0;var l=_("../core"),u=o(l),c=_("ismobilejs"),s=h(c),p=_("./accessibleTarget"),v=h(p);function h(w){return w&&w.__esModule?w:{default:w}}function o(w){if(w&&w.__esModule)return w;var b={};if(w!=null)for(var S in w)Object.prototype.hasOwnProperty.call(w,S)&&(b[S]=w[S]);return b.default=w,b}function i(w,b){if(!(w instanceof b))throw new TypeError("Cannot call a class as a function")}u.utils.mixins.delayMixin(u.DisplayObject.prototype,v.default);var t=9,r=100,d=0,a=0,f=2,m=1,g=-1e3,x=-1e3,T=2,y=function(){function w(b){i(this,w),(s.default.tablet||s.default.phone)&&!navigator.isCocoonJS&&this.createTouchHook();var S=document.createElement("div");S.style.width=r+"px",S.style.height=r+"px",S.style.position="absolute",S.style.top=d+"px",S.style.left=a+"px",S.style.zIndex=f,this.div=S,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=b,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,this.isMobileAccessabillity=!1,window.addEventListener("keydown",this._onKeyDown,!1)}return w.prototype.createTouchHook=function(){var S=this,E=document.createElement("button");E.style.width=m+"px",E.style.height=m+"px",E.style.position="absolute",E.style.top=g+"px",E.style.left=x+"px",E.style.zIndex=T,E.style.backgroundColor="#FF0000",E.title="HOOK DIV",E.addEventListener("focus",function(){S.isMobileAccessabillity=!0,S.activate(),document.body.removeChild(E)}),document.body.appendChild(E)},w.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},w.prototype.deactivate=function(){!this.isActive||this.isMobileAccessabillity||(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},w.prototype.updateAccessibleObjects=function(S){if(S.visible){S.accessible&&S.interactive&&(S._accessibleActive||this.addChild(S),S.renderId=this.renderId);for(var E=S.children,O=0;O<E.length;O++)this.updateAccessibleObjects(E[O])}},w.prototype.update=function(){if(this.renderer.renderingToScreen){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var S=this.renderer.view.getBoundingClientRect(),E=S.width/this.renderer.width,O=S.height/this.renderer.height,P=this.div;P.style.left=S.left+"px",P.style.top=S.top+"px",P.style.width=this.renderer.width+"px",P.style.height=this.renderer.height+"px";for(var M=0;M<this.children.length;M++){var A=this.children[M];if(A.renderId!==this.renderId)A._accessibleActive=!1,u.utils.removeItems(this.children,M,1),this.div.removeChild(A._accessibleDiv),this.pool.push(A._accessibleDiv),A._accessibleDiv=null,M--,this.children.length===0&&this.deactivate();else{P=A._accessibleDiv;var B=A.hitArea,I=A.worldTransform;A.hitArea?(P.style.left=(I.tx+B.x*I.a)*E+"px",P.style.top=(I.ty+B.y*I.d)*O+"px",P.style.width=B.width*I.a*E+"px",P.style.height=B.height*I.d*O+"px"):(B=A.getBounds(),this.capHitArea(B),P.style.left=B.x*E+"px",P.style.top=B.y*O+"px",P.style.width=B.width*E+"px",P.style.height=B.height*O+"px",P.title!==A.accessibleTitle&&A.accessibleTitle!==null&&(P.title=A.accessibleTitle),P.getAttribute("aria-label")!==A.accessibleHint&&A.accessibleHint!==null&&P.setAttribute("aria-label",A.accessibleHint))}}this.renderId++}},w.prototype.capHitArea=function(S){S.x<0&&(S.width+=S.x,S.x=0),S.y<0&&(S.height+=S.y,S.y=0),S.x+S.width>this.renderer.width&&(S.width=this.renderer.width-S.x),S.y+S.height>this.renderer.height&&(S.height=this.renderer.height-S.y)},w.prototype.addChild=function(S){var E=this.pool.pop();E||(E=document.createElement("button"),E.style.width=r+"px",E.style.height=r+"px",E.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent",E.style.position="absolute",E.style.zIndex=f,E.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?E.setAttribute("aria-live","off"):E.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?E.setAttribute("aria-relevant","additions"):E.setAttribute("aria-relevant","text"),E.addEventListener("click",this._onClick.bind(this)),E.addEventListener("focus",this._onFocus.bind(this)),E.addEventListener("focusout",this._onFocusOut.bind(this))),S.accessibleTitle&&S.accessibleTitle!==null?E.title=S.accessibleTitle:(!S.accessibleHint||S.accessibleHint===null)&&(E.title="displayObject "+S.tabIndex),S.accessibleHint&&S.accessibleHint!==null&&E.setAttribute("aria-label",S.accessibleHint),S._accessibleActive=!0,S._accessibleDiv=E,E.displayObject=S,this.children.push(S),this.div.appendChild(S._accessibleDiv),S._accessibleDiv.tabIndex=S.tabIndex},w.prototype._onClick=function(S){var E=this.renderer.plugins.interaction;E.dispatchEvent(S.target.displayObject,"click",E.eventData)},w.prototype._onFocus=function(S){S.target.getAttribute("aria-live","off")||S.target.setAttribute("aria-live","assertive");var E=this.renderer.plugins.interaction;E.dispatchEvent(S.target.displayObject,"mouseover",E.eventData)},w.prototype._onFocusOut=function(S){S.target.getAttribute("aria-live","off")||S.target.setAttribute("aria-live","polite");var E=this.renderer.plugins.interaction;E.dispatchEvent(S.target.displayObject,"mouseout",E.eventData)},w.prototype._onKeyDown=function(S){S.keyCode===t&&this.activate()},w.prototype._onMouseMove=function(S){S.movementX===0&&S.movementY===0||this.deactivate()},w.prototype.destroy=function(){this.div=null;for(var S=0;S<this.children.length;S++)this.children[S].div=null;window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},w}();e.default=y,u.WebGLRenderer.registerPlugin("accessibility",y),u.CanvasRenderer.registerPlugin("accessibility",y)},{"../core":65,"./accessibleTarget":41,ismobilejs:4}],41:[function(_,n,e){e.__esModule=!0,e.default={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1}},{}],42:[function(_,n,e){e.__esModule=!0;var l=_("./accessibleTarget");Object.defineProperty(e,"accessibleTarget",{enumerable:!0,get:function(){return c(l).default}});var u=_("./AccessibilityManager");Object.defineProperty(e,"AccessibilityManager",{enumerable:!0,get:function(){return c(u).default}});function c(s){return s&&s.__esModule?s:{default:s}}},{"./AccessibilityManager":40,"./accessibleTarget":41}],43:[function(_,n,e){e.__esModule=!0;var l=function(){function d(a,f){for(var m=0;m<f.length;m++){var g=f[m];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(a,g.key,g)}}return function(a,f,m){return f&&d(a.prototype,f),m&&d(a,m),a}}(),u=_("./autoDetectRenderer"),c=_("./display/Container"),s=i(c),p=_("./ticker"),v=_("./settings"),h=i(v),o=_("./const");function i(d){return d&&d.__esModule?d:{default:d}}function t(d,a){if(!(d instanceof a))throw new TypeError("Cannot call a class as a function")}var r=function(){function d(a,f,m,g,x){t(this,d),typeof a=="number"&&(a=Object.assign({width:a,height:f||h.default.RENDER_OPTIONS.height,forceCanvas:!!g,sharedTicker:!!x},m)),this._options=a=Object.assign({autoStart:!0,sharedTicker:!1,forceCanvas:!1,sharedLoader:!1},a),this.renderer=(0,u.autoDetectRenderer)(a),this.stage=new s.default,this._ticker=null,this.ticker=a.sharedTicker?p.shared:new p.Ticker,a.autoStart&&this.start()}return d.prototype.render=function(){this.renderer.render(this.stage)},d.prototype.stop=function(){this._ticker.stop()},d.prototype.start=function(){this._ticker.start()},d.prototype.destroy=function(f,m){if(this._ticker){var g=this._ticker;this.ticker=null,g.destroy()}this.stage.destroy(m),this.stage=null,this.renderer.destroy(f),this.renderer=null,this._options=null},l(d,[{key:"ticker",set:function(f){this._ticker&&this._ticker.remove(this.render,this),this._ticker=f,f&&f.add(this.render,this,o.UPDATE_PRIORITY.LOW)},get:function(){return this._ticker}},{key:"view",get:function(){return this.renderer.view}},{key:"screen",get:function(){return this.renderer.screen}}]),d}();e.default=r},{"./autoDetectRenderer":45,"./const":46,"./display/Container":48,"./settings":101,"./ticker":121}],44:[function(_,n,e){e.__esModule=!0;var l=_("pixi-gl-core"),u=_("./settings"),c=s(u);function s(t){return t&&t.__esModule?t:{default:t}}function p(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function v(t,r){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&(typeof r=="object"||typeof r=="function")?r:t}function h(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof r);t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(t,r):t.__proto__=r)}function o(t,r){if(t instanceof Array){if(t[0].substring(0,9)!=="precision"){var d=t.slice(0);return d.unshift("precision "+r+" float;"),d}}else if(t.trim().substring(0,9)!=="precision")return"precision "+r+` float;
`+t;return t}var i=function(t){h(r,t);function r(d,a,f,m,g){return p(this,r),v(this,t.call(this,d,o(a,g||c.default.PRECISION_VERTEX),o(f,g||c.default.PRECISION_FRAGMENT),void 0,m))}return r}(l.GLShader);e.default=i},{"./settings":101,"pixi-gl-core":15}],45:[function(_,n,e){e.__esModule=!0,e.autoDetectRenderer=i;var l=_("./utils"),u=o(l),c=_("./renderers/canvas/CanvasRenderer"),s=h(c),p=_("./renderers/webgl/WebGLRenderer"),v=h(p);function h(t){return t&&t.__esModule?t:{default:t}}function o(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var d in t)Object.prototype.hasOwnProperty.call(t,d)&&(r[d]=t[d]);return r.default=t,r}function i(t,r,d,a){var f=t&&t.forceCanvas;return a!==void 0&&(f=a),!f&&u.isWebGLSupported()?new v.default(t,r,d):new s.default(t,r,d)}},{"./renderers/canvas/CanvasRenderer":77,"./renderers/webgl/WebGLRenderer":84,"./utils":125}],46:[function(_,n,e){e.__esModule=!0,e.VERSION="4.8.2",e.PI_2=Math.PI*2,e.RAD_TO_DEG=180/Math.PI,e.DEG_TO_RAD=Math.PI/180,e.RENDERER_TYPE={UNKNOWN:0,WEBGL:1,CANVAS:2},e.BLEND_MODES={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,NORMAL_NPM:17,ADD_NPM:18,SCREEN_NPM:19},e.DRAW_MODES={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},e.SCALE_MODES={LINEAR:0,NEAREST:1},e.WRAP_MODES={CLAMP:0,REPEAT:1,MIRRORED_REPEAT:2},e.GC_MODES={AUTO:0,MANUAL:1},e.URL_FILE_EXTENSION=/\.(\w{3,4})(?:$|\?|#)/i,e.DATA_URI=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i,e.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,e.SHAPES={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},e.PRECISION={LOW:"lowp",MEDIUM:"mediump",HIGH:"highp"},e.TRANSFORM_MODE={STATIC:0,DYNAMIC:1},e.TEXT_GRADIENT={LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1},e.UPDATE_PRIORITY={INTERACTION:50,HIGH:25,NORMAL:0,LOW:-25,UTILITY:-50}},{}],47:[function(_,n,e){e.__esModule=!0;var l=_("../math");function u(s,p){if(!(s instanceof p))throw new TypeError("Cannot call a class as a function")}var c=function(){function s(){u(this,s),this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null}return s.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},s.prototype.clear=function(){this.updateID++,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},s.prototype.getRectangle=function(v){return this.minX>this.maxX||this.minY>this.maxY?l.Rectangle.EMPTY:(v=v||new l.Rectangle(0,0,1,1),v.x=this.minX,v.y=this.minY,v.width=this.maxX-this.minX,v.height=this.maxY-this.minY,v)},s.prototype.addPoint=function(v){this.minX=Math.min(this.minX,v.x),this.maxX=Math.max(this.maxX,v.x),this.minY=Math.min(this.minY,v.y),this.maxY=Math.max(this.maxY,v.y)},s.prototype.addQuad=function(v){var h=this.minX,o=this.minY,i=this.maxX,t=this.maxY,r=v[0],d=v[1];h=r<h?r:h,o=d<o?d:o,i=r>i?r:i,t=d>t?d:t,r=v[2],d=v[3],h=r<h?r:h,o=d<o?d:o,i=r>i?r:i,t=d>t?d:t,r=v[4],d=v[5],h=r<h?r:h,o=d<o?d:o,i=r>i?r:i,t=d>t?d:t,r=v[6],d=v[7],h=r<h?r:h,o=d<o?d:o,i=r>i?r:i,t=d>t?d:t,this.minX=h,this.minY=o,this.maxX=i,this.maxY=t},s.prototype.addFrame=function(v,h,o,i,t){var r=v.worldTransform,d=r.a,a=r.b,f=r.c,m=r.d,g=r.tx,x=r.ty,T=this.minX,y=this.minY,w=this.maxX,b=this.maxY,S=d*h+f*o+g,E=a*h+m*o+x;T=S<T?S:T,y=E<y?E:y,w=S>w?S:w,b=E>b?E:b,S=d*i+f*o+g,E=a*i+m*o+x,T=S<T?S:T,y=E<y?E:y,w=S>w?S:w,b=E>b?E:b,S=d*h+f*t+g,E=a*h+m*t+x,T=S<T?S:T,y=E<y?E:y,w=S>w?S:w,b=E>b?E:b,S=d*i+f*t+g,E=a*i+m*t+x,T=S<T?S:T,y=E<y?E:y,w=S>w?S:w,b=E>b?E:b,this.minX=T,this.minY=y,this.maxX=w,this.maxY=b},s.prototype.addVertices=function(v,h,o,i){for(var t=v.worldTransform,r=t.a,d=t.b,a=t.c,f=t.d,m=t.tx,g=t.ty,x=this.minX,T=this.minY,y=this.maxX,w=this.maxY,b=o;b<i;b+=2){var S=h[b],E=h[b+1],O=r*S+a*E+m,P=f*E+d*S+g;x=O<x?O:x,T=P<T?P:T,y=O>y?O:y,w=P>w?P:w}this.minX=x,this.minY=T,this.maxX=y,this.maxY=w},s.prototype.addBounds=function(v){var h=this.minX,o=this.minY,i=this.maxX,t=this.maxY;this.minX=v.minX<h?v.minX:h,this.minY=v.minY<o?v.minY:o,this.maxX=v.maxX>i?v.maxX:i,this.maxY=v.maxY>t?v.maxY:t},s.prototype.addBoundsMask=function(v,h){var o=v.minX>h.minX?v.minX:h.minX,i=v.minY>h.minY?v.minY:h.minY,t=v.maxX<h.maxX?v.maxX:h.maxX,r=v.maxY<h.maxY?v.maxY:h.maxY;if(o<=t&&i<=r){var d=this.minX,a=this.minY,f=this.maxX,m=this.maxY;this.minX=o<d?o:d,this.minY=i<a?i:a,this.maxX=t>f?t:f,this.maxY=r>m?r:m}},s.prototype.addBoundsArea=function(v,h){var o=v.minX>h.x?v.minX:h.x,i=v.minY>h.y?v.minY:h.y,t=v.maxX<h.x+h.width?v.maxX:h.x+h.width,r=v.maxY<h.y+h.height?v.maxY:h.y+h.height;if(o<=t&&i<=r){var d=this.minX,a=this.minY,f=this.maxX,m=this.maxY;this.minX=o<d?o:d,this.minY=i<a?i:a,this.maxX=t>f?t:f,this.maxY=r>m?r:m}},s}();e.default=c},{"../math":70}],48:[function(_,n,e){e.__esModule=!0;var l=function(){function t(r,d){for(var a=0;a<d.length;a++){var f=d[a];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(r,f.key,f)}}return function(r,d,a){return d&&t(r.prototype,d),a&&t(r,a),r}}(),u=_("../utils"),c=_("./DisplayObject"),s=p(c);function p(t){return t&&t.__esModule?t:{default:t}}function v(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function h(t,r){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&(typeof r=="object"||typeof r=="function")?r:t}function o(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof r);t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(t,r):t.__proto__=r)}var i=function(t){o(r,t);function r(){v(this,r);var d=h(this,t.call(this));return d.children=[],d}return r.prototype.onChildrenChange=function(){},r.prototype.addChild=function(a){var f=arguments.length;if(f>1)for(var m=0;m<f;m++)this.addChild(arguments[m]);else a.parent&&a.parent.removeChild(a),a.parent=this,a.transform._parentID=-1,this.children.push(a),this._boundsID++,this.onChildrenChange(this.children.length-1),a.emit("added",this);return a},r.prototype.addChildAt=function(a,f){if(f<0||f>this.children.length)throw new Error(a+"addChildAt: The index "+f+" supplied is out of bounds "+this.children.length);return a.parent&&a.parent.removeChild(a),a.parent=this,a.transform._parentID=-1,this.children.splice(f,0,a),this._boundsID++,this.onChildrenChange(f),a.emit("added",this),a},r.prototype.swapChildren=function(a,f){if(a!==f){var m=this.getChildIndex(a),g=this.getChildIndex(f);this.children[m]=f,this.children[g]=a,this.onChildrenChange(m<g?m:g)}},r.prototype.getChildIndex=function(a){var f=this.children.indexOf(a);if(f===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return f},r.prototype.setChildIndex=function(a,f){if(f<0||f>=this.children.length)throw new Error("The index "+f+" supplied is out of bounds "+this.children.length);var m=this.getChildIndex(a);(0,u.removeItems)(this.children,m,1),this.children.splice(f,0,a),this.onChildrenChange(f)},r.prototype.getChildAt=function(a){if(a<0||a>=this.children.length)throw new Error("getChildAt: Index ("+a+") does not exist.");return this.children[a]},r.prototype.removeChild=function(a){var f=arguments.length;if(f>1)for(var m=0;m<f;m++)this.removeChild(arguments[m]);else{var g=this.children.indexOf(a);if(g===-1)return null;a.parent=null,a.transform._parentID=-1,(0,u.removeItems)(this.children,g,1),this._boundsID++,this.onChildrenChange(g),a.emit("removed",this)}return a},r.prototype.removeChildAt=function(a){var f=this.getChildAt(a);return f.parent=null,f.transform._parentID=-1,(0,u.removeItems)(this.children,a,1),this._boundsID++,this.onChildrenChange(a),f.emit("removed",this),f},r.prototype.removeChildren=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,f=arguments[1],m=a,g=typeof f=="number"?f:this.children.length,x=g-m,T=void 0;if(x>0&&x<=g){T=this.children.splice(m,x);for(var y=0;y<T.length;++y)T[y].parent=null,T[y].transform&&(T[y].transform._parentID=-1);this._boundsID++,this.onChildrenChange(a);for(var w=0;w<T.length;++w)T[w].emit("removed",this);return T}else if(x===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},r.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var a=0,f=this.children.length;a<f;++a){var m=this.children[a];m.visible&&m.updateTransform()}},r.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var a=0;a<this.children.length;a++){var f=this.children[a];!f.visible||!f.renderable||(f.calculateBounds(),f._mask?(f._mask.calculateBounds(),this._bounds.addBoundsMask(f._bounds,f._mask._bounds)):f.filterArea?this._bounds.addBoundsArea(f._bounds,f.filterArea):this._bounds.addBounds(f._bounds))}this._lastBoundsID=this._boundsID},r.prototype._calculateBounds=function(){},r.prototype.renderWebGL=function(a){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this._filters)this.renderAdvancedWebGL(a);else{this._renderWebGL(a);for(var f=0,m=this.children.length;f<m;++f)this.children[f].renderWebGL(a)}},r.prototype.renderAdvancedWebGL=function(a){a.flush();var f=this._filters,m=this._mask;if(f){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var g=0;g<f.length;g++)f[g].enabled&&this._enabledFilters.push(f[g]);this._enabledFilters.length&&a.filterManager.pushFilter(this,this._enabledFilters)}m&&a.maskManager.pushMask(this,this._mask),this._renderWebGL(a);for(var x=0,T=this.children.length;x<T;x++)this.children[x].renderWebGL(a);a.flush(),m&&a.maskManager.popMask(this,this._mask),f&&this._enabledFilters&&this._enabledFilters.length&&a.filterManager.popFilter()},r.prototype._renderWebGL=function(a){},r.prototype._renderCanvas=function(a){},r.prototype.renderCanvas=function(a){if(!(!this.visible||this.worldAlpha<=0||!this.renderable)){this._mask&&a.maskManager.pushMask(this._mask),this._renderCanvas(a);for(var f=0,m=this.children.length;f<m;++f)this.children[f].renderCanvas(a);this._mask&&a.maskManager.popMask(a)}},r.prototype.destroy=function(a){t.prototype.destroy.call(this);var f=typeof a=="boolean"?a:a&&a.children,m=this.removeChildren(0,this.children.length);if(f)for(var g=0;g<m.length;++g)m[g].destroy(a)},l(r,[{key:"width",get:function(){return this.scale.x*this.getLocalBounds().width},set:function(a){var f=this.getLocalBounds().width;f!==0?this.scale.x=a/f:this.scale.x=1,this._width=a}},{key:"height",get:function(){return this.scale.y*this.getLocalBounds().height},set:function(a){var f=this.getLocalBounds().height;f!==0?this.scale.y=a/f:this.scale.y=1,this._height=a}}]),r}(s.default);e.default=i,i.prototype.containerUpdateTransform=i.prototype.updateTransform},{"../utils":125,"./DisplayObject":49}],49:[function(_,n,e){e.__esModule=!0;var l=function(){function y(w,b){for(var S=0;S<b.length;S++){var E=b[S];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(w,E.key,E)}}return function(w,b,S){return b&&y(w.prototype,b),S&&y(w,S),w}}(),u=_("eventemitter3"),c=f(u),s=_("../const"),p=_("../settings"),v=f(p),h=_("./TransformStatic"),o=f(h),i=_("./Transform"),t=f(i),r=_("./Bounds"),d=f(r),a=_("../math");function f(y){return y&&y.__esModule?y:{default:y}}function m(y,w){if(!(y instanceof w))throw new TypeError("Cannot call a class as a function")}function g(y,w){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:y}function x(y,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);y.prototype=Object.create(w&&w.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(y,w):y.__proto__=w)}var T=function(y){x(w,y);function w(){m(this,w);var b=g(this,y.call(this)),S=v.default.TRANSFORM_MODE===s.TRANSFORM_MODE.STATIC?o.default:t.default;return b.tempDisplayObjectParent=null,b.transform=new S,b.alpha=1,b.visible=!0,b.renderable=!0,b.parent=null,b.worldAlpha=1,b.filterArea=null,b._filters=null,b._enabledFilters=null,b._bounds=new d.default,b._boundsID=0,b._lastBoundsID=-1,b._boundsRect=null,b._localBoundsRect=null,b._mask=null,b._destroyed=!1,b}return w.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._bounds.updateID++},w.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},w.prototype.getBounds=function(S,E){return S||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&this.calculateBounds(),E||(this._boundsRect||(this._boundsRect=new a.Rectangle),E=this._boundsRect),this._bounds.getRectangle(E)},w.prototype.getLocalBounds=function(S){var E=this.transform,O=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform,S||(this._localBoundsRect||(this._localBoundsRect=new a.Rectangle),S=this._localBoundsRect);var P=this.getBounds(!1,S);return this.parent=O,this.transform=E,P},w.prototype.toGlobal=function(S,E){var O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return O||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(S,E)},w.prototype.toLocal=function(S,E,O,P){return E&&(S=E.toGlobal(S,O,P)),P||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(S,O)},w.prototype.renderWebGL=function(S){},w.prototype.renderCanvas=function(S){},w.prototype.setParent=function(S){if(!S||!S.addChild)throw new Error("setParent: Argument must be a Container");return S.addChild(this),S},w.prototype.setTransform=function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,P=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,M=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,A=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,B=arguments.length>6&&arguments[6]!==void 0?arguments[6]:0,I=arguments.length>7&&arguments[7]!==void 0?arguments[7]:0,R=arguments.length>8&&arguments[8]!==void 0?arguments[8]:0;return this.position.x=S,this.position.y=E,this.scale.x=O||1,this.scale.y=P||1,this.rotation=M,this.skew.x=A,this.skew.y=B,this.pivot.x=I,this.pivot.y=R,this},w.prototype.destroy=function(){this.removeAllListeners(),this.parent&&this.parent.removeChild(this),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filterArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},l(w,[{key:"_tempDisplayObjectParent",get:function(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new w),this.tempDisplayObjectParent}},{key:"x",get:function(){return this.position.x},set:function(S){this.transform.position.x=S}},{key:"y",get:function(){return this.position.y},set:function(S){this.transform.position.y=S}},{key:"worldTransform",get:function(){return this.transform.worldTransform}},{key:"localTransform",get:function(){return this.transform.localTransform}},{key:"position",get:function(){return this.transform.position},set:function(S){this.transform.position.copy(S)}},{key:"scale",get:function(){return this.transform.scale},set:function(S){this.transform.scale.copy(S)}},{key:"pivot",get:function(){return this.transform.pivot},set:function(S){this.transform.pivot.copy(S)}},{key:"skew",get:function(){return this.transform.skew},set:function(S){this.transform.skew.copy(S)}},{key:"rotation",get:function(){return this.transform.rotation},set:function(S){this.transform.rotation=S}},{key:"worldVisible",get:function(){var S=this;do{if(!S.visible)return!1;S=S.parent}while(S);return!0}},{key:"mask",get:function(){return this._mask},set:function(S){this._mask&&(this._mask.renderable=!0,this._mask.isMask=!1),this._mask=S,this._mask&&(this._mask.renderable=!1,this._mask.isMask=!0)}},{key:"filters",get:function(){return this._filters&&this._filters.slice()},set:function(S){this._filters=S&&S.slice()}}]),w}(c.default);e.default=T,T.prototype.displayObjectUpdateTransform=T.prototype.updateTransform},{"../const":46,"../math":70,"../settings":101,"./Bounds":47,"./Transform":50,"./TransformStatic":52,eventemitter3:3}],50:[function(_,n,e){e.__esModule=!0;var l=function(){function t(r,d){for(var a=0;a<d.length;a++){var f=d[a];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(r,f.key,f)}}return function(r,d,a){return d&&t(r.prototype,d),a&&t(r,a),r}}(),u=_("../math"),c=_("./TransformBase"),s=p(c);function p(t){return t&&t.__esModule?t:{default:t}}function v(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function h(t,r){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&(typeof r=="object"||typeof r=="function")?r:t}function o(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof r);t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(t,r):t.__proto__=r)}var i=function(t){o(r,t);function r(){v(this,r);var d=h(this,t.call(this));return d.position=new u.Point(0,0),d.scale=new u.Point(1,1),d.skew=new u.ObservablePoint(d.updateSkew,d,0,0),d.pivot=new u.Point(0,0),d._rotation=0,d._cx=1,d._sx=0,d._cy=0,d._sy=1,d}return r.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x)},r.prototype.updateLocalTransform=function(){var a=this.localTransform;a.a=this._cx*this.scale.x,a.b=this._sx*this.scale.x,a.c=this._cy*this.scale.y,a.d=this._sy*this.scale.y,a.tx=this.position.x-(this.pivot.x*a.a+this.pivot.y*a.c),a.ty=this.position.y-(this.pivot.x*a.b+this.pivot.y*a.d)},r.prototype.updateTransform=function(a){var f=this.localTransform;f.a=this._cx*this.scale.x,f.b=this._sx*this.scale.x,f.c=this._cy*this.scale.y,f.d=this._sy*this.scale.y,f.tx=this.position.x-(this.pivot.x*f.a+this.pivot.y*f.c),f.ty=this.position.y-(this.pivot.x*f.b+this.pivot.y*f.d);var m=a.worldTransform,g=this.worldTransform;g.a=f.a*m.a+f.b*m.c,g.b=f.a*m.b+f.b*m.d,g.c=f.c*m.a+f.d*m.c,g.d=f.c*m.b+f.d*m.d,g.tx=f.tx*m.a+f.ty*m.c+m.tx,g.ty=f.tx*m.b+f.ty*m.d+m.ty,this._worldID++},r.prototype.setFromMatrix=function(a){a.decompose(this)},l(r,[{key:"rotation",get:function(){return this._rotation},set:function(a){this._rotation=a,this.updateSkew()}}]),r}(s.default);e.default=i},{"../math":70,"./TransformBase":51}],51:[function(_,n,e){e.__esModule=!0;var l=_("../math");function u(s,p){if(!(s instanceof p))throw new TypeError("Cannot call a class as a function")}var c=function(){function s(){u(this,s),this.worldTransform=new l.Matrix,this.localTransform=new l.Matrix,this._worldID=0,this._parentID=0}return s.prototype.updateLocalTransform=function(){},s.prototype.updateTransform=function(v){var h=v.worldTransform,o=this.worldTransform,i=this.localTransform;o.a=i.a*h.a+i.b*h.c,o.b=i.a*h.b+i.b*h.d,o.c=i.c*h.a+i.d*h.c,o.d=i.c*h.b+i.d*h.d,o.tx=i.tx*h.a+i.ty*h.c+h.tx,o.ty=i.tx*h.b+i.ty*h.d+h.ty,this._worldID++},s}();e.default=c,c.prototype.updateWorldTransform=c.prototype.updateTransform,c.IDENTITY=new c},{"../math":70}],52:[function(_,n,e){e.__esModule=!0;var l=function(){function t(r,d){for(var a=0;a<d.length;a++){var f=d[a];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(r,f.key,f)}}return function(r,d,a){return d&&t(r.prototype,d),a&&t(r,a),r}}(),u=_("../math"),c=_("./TransformBase"),s=p(c);function p(t){return t&&t.__esModule?t:{default:t}}function v(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function h(t,r){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&(typeof r=="object"||typeof r=="function")?r:t}function o(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof r);t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(t,r):t.__proto__=r)}var i=function(t){o(r,t);function r(){v(this,r);var d=h(this,t.call(this));return d.position=new u.ObservablePoint(d.onChange,d,0,0),d.scale=new u.ObservablePoint(d.onChange,d,1,1),d.pivot=new u.ObservablePoint(d.onChange,d,0,0),d.skew=new u.ObservablePoint(d.updateSkew,d,0,0),d._rotation=0,d._cx=1,d._sx=0,d._cy=0,d._sy=1,d._localID=0,d._currentLocalID=0,d}return r.prototype.onChange=function(){this._localID++},r.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x),this._localID++},r.prototype.updateLocalTransform=function(){var a=this.localTransform;this._localID!==this._currentLocalID&&(a.a=this._cx*this.scale._x,a.b=this._sx*this.scale._x,a.c=this._cy*this.scale._y,a.d=this._sy*this.scale._y,a.tx=this.position._x-(this.pivot._x*a.a+this.pivot._y*a.c),a.ty=this.position._y-(this.pivot._x*a.b+this.pivot._y*a.d),this._currentLocalID=this._localID,this._parentID=-1)},r.prototype.updateTransform=function(a){var f=this.localTransform;if(this._localID!==this._currentLocalID&&(f.a=this._cx*this.scale._x,f.b=this._sx*this.scale._x,f.c=this._cy*this.scale._y,f.d=this._sy*this.scale._y,f.tx=this.position._x-(this.pivot._x*f.a+this.pivot._y*f.c),f.ty=this.position._y-(this.pivot._x*f.b+this.pivot._y*f.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==a._worldID){var m=a.worldTransform,g=this.worldTransform;g.a=f.a*m.a+f.b*m.c,g.b=f.a*m.b+f.b*m.d,g.c=f.c*m.a+f.d*m.c,g.d=f.c*m.b+f.d*m.d,g.tx=f.tx*m.a+f.ty*m.c+m.tx,g.ty=f.tx*m.b+f.ty*m.d+m.ty,this._parentID=a._worldID,this._worldID++}},r.prototype.setFromMatrix=function(a){a.decompose(this),this._localID++},l(r,[{key:"rotation",get:function(){return this._rotation},set:function(a){this._rotation=a,this.updateSkew()}}]),r}(s.default);e.default=i},{"../math":70,"./TransformBase":51}],53:[function(_,n,e){e.__esModule=!0;var l=_("../display/Container"),u=w(l),c=_("../textures/RenderTexture"),s=w(c),p=_("../textures/Texture"),v=w(p),h=_("./GraphicsData"),o=w(h),i=_("../sprites/Sprite"),t=w(i),r=_("../math"),d=_("../utils"),a=_("../const"),f=_("../display/Bounds"),m=w(f),g=_("./utils/bezierCurveTo"),x=w(g),T=_("../renderers/canvas/CanvasRenderer"),y=w(T);function w(R){return R&&R.__esModule?R:{default:R}}function b(R,D){if(!(R instanceof D))throw new TypeError("Cannot call a class as a function")}function S(R,D){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D&&(typeof D=="object"||typeof D=="function")?D:R}function E(R,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof D);R.prototype=Object.create(D&&D.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),D&&(Object.setPrototypeOf?Object.setPrototypeOf(R,D):R.__proto__=D)}var O=void 0,P=new r.Matrix,M=new r.Point,A=new Float32Array(4),B=new Float32Array(4),I=function(R){E(D,R);function D(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;b(this,D);var F=S(this,R.call(this));return F.fillAlpha=1,F.lineWidth=0,F.nativeLines=L,F.lineColor=0,F.lineAlignment=.5,F.graphicsData=[],F.tint=16777215,F._prevTint=16777215,F.blendMode=a.BLEND_MODES.NORMAL,F.currentPath=null,F._webGL={},F.isMask=!1,F.boundsPadding=0,F._localBounds=new m.default,F.dirty=0,F.fastRectDirty=-1,F.clearDirty=0,F.boundsDirty=-1,F.cachedSpriteDirty=!1,F._spriteRect=null,F._fastRect=!1,F._prevRectTint=null,F._prevRectFillColor=null,F}return D.prototype.clone=function(){var F=new D;F.renderable=this.renderable,F.fillAlpha=this.fillAlpha,F.lineWidth=this.lineWidth,F.lineColor=this.lineColor,F.lineAlignment=this.lineAlignment,F.tint=this.tint,F.blendMode=this.blendMode,F.isMask=this.isMask,F.boundsPadding=this.boundsPadding,F.dirty=0,F.cachedSpriteDirty=this.cachedSpriteDirty;for(var N=0;N<this.graphicsData.length;++N)F.graphicsData.push(this.graphicsData[N].clone());return F.currentPath=F.graphicsData[F.graphicsData.length-1],F.updateLocalBounds(),F},D.prototype._quadraticCurveLength=function(F,N,U,k,G,W){var K=F-(2*U+G),q=N-(2*k+W),Q=2*((U-2)*F),J=2*((k-2)*N),V=4*(K*K+q*q),Z=4*(K*Q+q*J),$=Q*Q+J*J,ie=2*Math.sqrt(V+Z+$),ne=Math.sqrt(V),ae=2*V*ne,se=2*Math.sqrt($),re=Z/ne;return(ae*ie+ne*Z*(ie-se)+(4*$*V-Z*Z)*Math.log((2*ne+re+ie)/(re+se)))/(4*ae)},D.prototype._bezierCurveLength=function(F,N,U,k,G,W,K,q){for(var Q=10,J=0,V=0,Z=0,$=0,ie=0,ne=0,ae=0,se=0,re=0,ee=0,ue=0,fe=F,_e=N,pe=1;pe<=Q;++pe)V=pe/Q,Z=V*V,$=Z*V,ie=1-V,ne=ie*ie,ae=ne*ie,se=ae*F+3*ne*V*U+3*ie*Z*G+$*K,re=ae*N+3*ne*V*k+3*ie*Z*W+$*q,ee=fe-se,ue=_e-re,fe=se,_e=re,J+=Math.sqrt(ee*ee+ue*ue);return J},D.prototype._segmentsCount=function(F){var N=Math.ceil(F/D.CURVES.maxLength);return N<D.CURVES.minSegments?N=D.CURVES.minSegments:N>D.CURVES.maxSegments&&(N=D.CURVES.maxSegments),N},D.prototype.lineStyle=function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,k=arguments.length>3&&arguments[3]!==void 0?arguments[3]:.5;if(this.lineWidth=F,this.lineColor=N,this.lineAlpha=U,this.lineAlignment=k,this.currentPath)if(this.currentPath.shape.points.length){var G=new r.Polygon(this.currentPath.shape.points.slice(-2));G.closed=!1,this.drawShape(G)}else this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha,this.currentPath.lineAlignment=this.lineAlignment;return this},D.prototype.moveTo=function(F,N){var U=new r.Polygon([F,N]);return U.closed=!1,this.drawShape(U),this},D.prototype.lineTo=function(F,N){var U=this.currentPath.shape.points,k=U[U.length-2],G=U[U.length-1];return(k!==F||G!==N)&&(U.push(F,N),this.dirty++),this},D.prototype.quadraticCurveTo=function(F,N,U,k){this.currentPath?this.currentPath.shape.points.length===0&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var G=this.currentPath.shape.points,W=0,K=0;G.length===0&&this.moveTo(0,0);for(var q=G[G.length-2],Q=G[G.length-1],J=D.CURVES.adaptive?this._segmentsCount(this._quadraticCurveLength(q,Q,F,N,U,k)):20,V=1;V<=J;++V){var Z=V/J;W=q+(F-q)*Z,K=Q+(N-Q)*Z,G.push(W+(F+(U-F)*Z-W)*Z,K+(N+(k-N)*Z-K)*Z)}return this.dirty++,this},D.prototype.bezierCurveTo=function(F,N,U,k,G,W){this.currentPath?this.currentPath.shape.points.length===0&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var K=this.currentPath.shape.points,q=K[K.length-2],Q=K[K.length-1];K.length-=2;var J=D.CURVES.adaptive?this._segmentsCount(this._bezierCurveLength(q,Q,F,N,U,k,G,W)):20;return(0,x.default)(q,Q,F,N,U,k,G,W,J,K),this.dirty++,this},D.prototype.arcTo=function(F,N,U,k,G){this.currentPath?this.currentPath.shape.points.length===0&&this.currentPath.shape.points.push(F,N):this.moveTo(F,N);var W=this.currentPath.shape.points,K=W[W.length-2],q=W[W.length-1],Q=q-N,J=K-F,V=k-N,Z=U-F,$=Math.abs(Q*Z-J*V);if($<1e-8||G===0)(W[W.length-2]!==F||W[W.length-1]!==N)&&W.push(F,N);else{var ie=Q*Q+J*J,ne=V*V+Z*Z,ae=Q*V+J*Z,se=G*Math.sqrt(ie)/$,re=G*Math.sqrt(ne)/$,ee=se*ae/ie,ue=re*ae/ne,fe=se*Z+re*J,_e=se*V+re*Q,pe=J*(re+ee),Pe=Q*(re+ee),kt=Z*(se+ue),be=V*(se+ue),bt=Math.atan2(Pe-_e,pe-fe),rr=Math.atan2(be-_e,kt-fe);this.arc(fe+F,_e+N,G,bt,rr,J*V>Z*Q)}return this.dirty++,this},D.prototype.arc=function(F,N,U,k,G){var W=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1;if(k===G)return this;!W&&G<=k?G+=a.PI_2:W&&k<=G&&(k+=a.PI_2);var K=G-k,q=D.CURVES.adaptive?this._segmentsCount(Math.abs(K)*U):Math.ceil(Math.abs(K)/a.PI_2)*40;if(K===0)return this;var Q=F+Math.cos(k)*U,J=N+Math.sin(k)*U,V=this.currentPath?this.currentPath.shape.points:null;if(V){var Z=Math.abs(V[V.length-2]-Q),$=Math.abs(V[V.length-1]-J);Z<.001&&$<.001||V.push(Q,J)}else this.moveTo(Q,J),V=this.currentPath.shape.points;for(var ie=K/(q*2),ne=ie*2,ae=Math.cos(ie),se=Math.sin(ie),re=q-1,ee=re%1/re,ue=0;ue<=re;++ue){var fe=ue+ee*ue,_e=ie+k+ne*fe,pe=Math.cos(_e),Pe=-Math.sin(_e);V.push((ae*pe+se*Pe)*U+F,(ae*-Pe+se*pe)*U+N)}return this.dirty++,this},D.prototype.beginFill=function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return this.filling=!0,this.fillColor=F,this.fillAlpha=N,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},D.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},D.prototype.drawRect=function(F,N,U,k){return this.drawShape(new r.Rectangle(F,N,U,k)),this},D.prototype.drawRoundedRect=function(F,N,U,k,G){return this.drawShape(new r.RoundedRectangle(F,N,U,k,G)),this},D.prototype.drawCircle=function(F,N,U){return this.drawShape(new r.Circle(F,N,U)),this},D.prototype.drawEllipse=function(F,N,U,k){return this.drawShape(new r.Ellipse(F,N,U,k)),this},D.prototype.drawPolygon=function(F){var N=F,U=!0;if(N instanceof r.Polygon&&(U=N.closed,N=N.points),!Array.isArray(N)){N=new Array(arguments.length);for(var k=0;k<N.length;++k)N[k]=arguments[k]}var G=new r.Polygon(N);return G.closed=U,this.drawShape(G),this},D.prototype.drawStar=function(F,N,U,k,G){var W=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0;G=G||k/2;for(var K=-1*Math.PI/2+W,q=U*2,Q=a.PI_2/q,J=[],V=0;V<q;V++){var Z=V%2?G:k,$=V*Q+K;J.push(F+Z*Math.cos($),N+Z*Math.sin($))}return this.drawPolygon(J)},D.prototype.clear=function(){return(this.lineWidth||this.filling||this.graphicsData.length>0)&&(this.lineWidth=0,this.lineAlignment=.5,this.filling=!1,this.boundsDirty=-1,this.canvasTintDirty=-1,this.dirty++,this.clearDirty++,this.graphicsData.length=0),this.currentPath=null,this._spriteRect=null,this},D.prototype.isFastRect=function(){return this.graphicsData.length===1&&this.graphicsData[0].shape.type===a.SHAPES.RECT&&!this.graphicsData[0].lineWidth},D.prototype._renderWebGL=function(F){this.dirty!==this.fastRectDirty&&(this.fastRectDirty=this.dirty,this._fastRect=this.isFastRect()),this._fastRect?this._renderSpriteRect(F):(F.setObjectRenderer(F.plugins.graphics),F.plugins.graphics.render(this))},D.prototype._renderSpriteRect=function(F){var N=this.graphicsData[0].shape;this._spriteRect||(this._spriteRect=new t.default(new v.default(v.default.WHITE)));var U=this._spriteRect,k=this.graphicsData[0].fillColor;if(this.tint===16777215)U.tint=k;else if(this.tint!==this._prevRectTint||k!==this._prevRectFillColor){var G=A,W=B;(0,d.hex2rgb)(k,G),(0,d.hex2rgb)(this.tint,W),G[0]*=W[0],G[1]*=W[1],G[2]*=W[2],U.tint=(0,d.rgb2hex)(G),this._prevRectTint=this.tint,this._prevRectFillColor=k}U.alpha=this.graphicsData[0].fillAlpha,U.worldAlpha=this.worldAlpha*U.alpha,U.blendMode=this.blendMode,U._texture._frame.width=N.width,U._texture._frame.height=N.height,U.transform.worldTransform=this.transform.worldTransform,U.anchor.set(-N.x/N.width,-N.y/N.height),U._onAnchorUpdate(),U._renderWebGL(F)},D.prototype._renderCanvas=function(F){this.isMask!==!0&&F.plugins.graphics.render(this)},D.prototype._calculateBounds=function(){this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.updateLocalBounds(),this.cachedSpriteDirty=!0);var F=this._localBounds;this._bounds.addFrame(this.transform,F.minX,F.minY,F.maxX,F.maxY)},D.prototype.containsPoint=function(F){this.worldTransform.applyInverse(F,M);for(var N=this.graphicsData,U=0;U<N.length;++U){var k=N[U];if(k.fill&&k.shape&&k.shape.contains(M.x,M.y)){if(k.holes)for(var G=0;G<k.holes.length;G++){var W=k.holes[G];if(W.contains(M.x,M.y))return!1}return!0}}return!1},D.prototype.updateLocalBounds=function(){var F=1/0,N=-1/0,U=1/0,k=-1/0;if(this.graphicsData.length)for(var G=0,W=0,K=0,q=0,Q=0,J=0;J<this.graphicsData.length;J++){var V=this.graphicsData[J],Z=V.type,$=V.lineWidth;if(G=V.shape,Z===a.SHAPES.RECT||Z===a.SHAPES.RREC)W=G.x-$/2,K=G.y-$/2,q=G.width+$,Q=G.height+$,F=W<F?W:F,N=W+q>N?W+q:N,U=K<U?K:U,k=K+Q>k?K+Q:k;else if(Z===a.SHAPES.CIRC)W=G.x,K=G.y,q=G.radius+$/2,Q=G.radius+$/2,F=W-q<F?W-q:F,N=W+q>N?W+q:N,U=K-Q<U?K-Q:U,k=K+Q>k?K+Q:k;else if(Z===a.SHAPES.ELIP)W=G.x,K=G.y,q=G.width+$/2,Q=G.height+$/2,F=W-q<F?W-q:F,N=W+q>N?W+q:N,U=K-Q<U?K-Q:U,k=K+Q>k?K+Q:k;else for(var ie=G.points,ne=0,ae=0,se=0,re=0,ee=0,ue=0,fe=0,_e=0,pe=0;pe+2<ie.length;pe+=2)W=ie[pe],K=ie[pe+1],ne=ie[pe+2],ae=ie[pe+3],se=Math.abs(ne-W),re=Math.abs(ae-K),Q=$,q=Math.sqrt(se*se+re*re),!(q<1e-9)&&(ee=(Q/q*re+se)/2,ue=(Q/q*se+re)/2,fe=(ne+W)/2,_e=(ae+K)/2,F=fe-ee<F?fe-ee:F,N=fe+ee>N?fe+ee:N,U=_e-ue<U?_e-ue:U,k=_e+ue>k?_e+ue:k)}else F=0,N=0,U=0,k=0;var Pe=this.boundsPadding;this._localBounds.minX=F-Pe,this._localBounds.maxX=N+Pe,this._localBounds.minY=U-Pe,this._localBounds.maxY=k+Pe},D.prototype.drawShape=function(F){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var N=new o.default(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,this.nativeLines,F,this.lineAlignment);return this.graphicsData.push(N),N.type===a.SHAPES.POLY&&(N.shape.closed=N.shape.closed,this.currentPath=N),this.dirty++,N},D.prototype.generateCanvasTexture=function(F){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,U=this.getLocalBounds(),k=s.default.create(U.width,U.height,F,N);O||(O=new y.default),this.transform.updateLocalTransform(),this.transform.localTransform.copy(P),P.invert(),P.tx-=U.x,P.ty-=U.y,O.render(this,k,!0,P);var G=v.default.fromCanvas(k.baseTexture._canvasRenderTarget.canvas,F,"graphics");return G.baseTexture.resolution=N,G.baseTexture.update(),G},D.prototype.closePath=function(){var F=this.currentPath;return F&&F.shape&&F.shape.close(),this},D.prototype.addHole=function(){var F=this.graphicsData.pop();return this.currentPath=this.graphicsData[this.graphicsData.length-1],this.currentPath.addHole(F.shape),this.currentPath=null,this},D.prototype.destroy=function(F){R.prototype.destroy.call(this,F);for(var N=0;N<this.graphicsData.length;++N)this.graphicsData[N].destroy();for(var U in this._webGL)for(var k=0;k<this._webGL[U].data.length;++k)this._webGL[U].data[k].destroy();this._spriteRect&&this._spriteRect.destroy(),this.graphicsData=null,this.currentPath=null,this._webGL=null,this._localBounds=null},D}(u.default);e.default=I,I._SPRITE_TEXTURE=null,I.CURVES={adaptive:!1,maxLength:10,minSegments:8,maxSegments:2048}},{"../const":46,"../display/Bounds":47,"../display/Container":48,"../math":70,"../renderers/canvas/CanvasRenderer":77,"../sprites/Sprite":102,"../textures/RenderTexture":113,"../textures/Texture":115,"../utils":125,"./GraphicsData":54,"./utils/bezierCurveTo":56}],54:[function(_,n,e){e.__esModule=!0;function l(c,s){if(!(c instanceof s))throw new TypeError("Cannot call a class as a function")}var u=function(){function c(s,p,v,h,o,i,t,r,d){l(this,c),this.lineWidth=s,this.lineAlignment=d,this.nativeLines=t,this.lineColor=p,this.lineAlpha=v,this._lineTint=p,this.fillColor=h,this.fillAlpha=o,this._fillTint=h,this.fill=i,this.holes=[],this.shape=r,this.type=r.type}return c.prototype.clone=function(){return new c(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.nativeLines,this.shape)},c.prototype.addHole=function(p){this.holes.push(p)},c.prototype.destroy=function(){this.shape=null,this.holes=null},c}();e.default=u},{}],55:[function(_,n,e){e.__esModule=!0;var l=_("../../renderers/canvas/CanvasRenderer"),u=s(l),c=_("../../const");function s(h){return h&&h.__esModule?h:{default:h}}function p(h,o){if(!(h instanceof o))throw new TypeError("Cannot call a class as a function")}var v=function(){function h(o){p(this,h),this.renderer=o}return h.prototype.render=function(i){var t=this.renderer,r=t.context,d=i.worldAlpha,a=i.transform.worldTransform,f=t.resolution;r.setTransform(a.a*f,a.b*f,a.c*f,a.d*f,a.tx*f,a.ty*f),(i.canvasTintDirty!==i.dirty||i._prevTint!==i.tint)&&this.updateGraphicsTint(i),t.setBlendMode(i.blendMode);for(var m=0;m<i.graphicsData.length;m++){var g=i.graphicsData[m],x=g.shape,T=g._fillTint,y=g._lineTint;if(r.lineWidth=g.lineWidth,g.type===c.SHAPES.POLY){r.beginPath(),this.renderPolygon(x.points,x.closed,r);for(var w=0;w<g.holes.length;w++)this.renderPolygon(g.holes[w].points,!0,r);g.fill&&(r.globalAlpha=g.fillAlpha*d,r.fillStyle="#"+("00000"+(T|0).toString(16)).substr(-6),r.fill()),g.lineWidth&&(r.globalAlpha=g.lineAlpha*d,r.strokeStyle="#"+("00000"+(y|0).toString(16)).substr(-6),r.stroke())}else if(g.type===c.SHAPES.RECT)(g.fillColor||g.fillColor===0)&&(r.globalAlpha=g.fillAlpha*d,r.fillStyle="#"+("00000"+(T|0).toString(16)).substr(-6),r.fillRect(x.x,x.y,x.width,x.height)),g.lineWidth&&(r.globalAlpha=g.lineAlpha*d,r.strokeStyle="#"+("00000"+(y|0).toString(16)).substr(-6),r.strokeRect(x.x,x.y,x.width,x.height));else if(g.type===c.SHAPES.CIRC)r.beginPath(),r.arc(x.x,x.y,x.radius,0,2*Math.PI),r.closePath(),g.fill&&(r.globalAlpha=g.fillAlpha*d,r.fillStyle="#"+("00000"+(T|0).toString(16)).substr(-6),r.fill()),g.lineWidth&&(r.globalAlpha=g.lineAlpha*d,r.strokeStyle="#"+("00000"+(y|0).toString(16)).substr(-6),r.stroke());else if(g.type===c.SHAPES.ELIP){var b=x.width*2,S=x.height*2,E=x.x-b/2,O=x.y-S/2;r.beginPath();var P=.5522848,M=b/2*P,A=S/2*P,B=E+b,I=O+S,R=E+b/2,D=O+S/2;r.moveTo(E,D),r.bezierCurveTo(E,D-A,R-M,O,R,O),r.bezierCurveTo(R+M,O,B,D-A,B,D),r.bezierCurveTo(B,D+A,R+M,I,R,I),r.bezierCurveTo(R-M,I,E,D+A,E,D),r.closePath(),g.fill&&(r.globalAlpha=g.fillAlpha*d,r.fillStyle="#"+("00000"+(T|0).toString(16)).substr(-6),r.fill()),g.lineWidth&&(r.globalAlpha=g.lineAlpha*d,r.strokeStyle="#"+("00000"+(y|0).toString(16)).substr(-6),r.stroke())}else if(g.type===c.SHAPES.RREC){var L=x.x,F=x.y,N=x.width,U=x.height,k=x.radius,G=Math.min(N,U)/2|0;k=k>G?G:k,r.beginPath(),r.moveTo(L,F+k),r.lineTo(L,F+U-k),r.quadraticCurveTo(L,F+U,L+k,F+U),r.lineTo(L+N-k,F+U),r.quadraticCurveTo(L+N,F+U,L+N,F+U-k),r.lineTo(L+N,F+k),r.quadraticCurveTo(L+N,F,L+N-k,F),r.lineTo(L+k,F),r.quadraticCurveTo(L,F,L,F+k),r.closePath(),(g.fillColor||g.fillColor===0)&&(r.globalAlpha=g.fillAlpha*d,r.fillStyle="#"+("00000"+(T|0).toString(16)).substr(-6),r.fill()),g.lineWidth&&(r.globalAlpha=g.lineAlpha*d,r.strokeStyle="#"+("00000"+(y|0).toString(16)).substr(-6),r.stroke())}}},h.prototype.updateGraphicsTint=function(i){i._prevTint=i.tint,i.canvasTintDirty=i.dirty;for(var t=(i.tint>>16&255)/255,r=(i.tint>>8&255)/255,d=(i.tint&255)/255,a=0;a<i.graphicsData.length;++a){var f=i.graphicsData[a],m=f.fillColor|0,g=f.lineColor|0;f._fillTint=((m>>16&255)/255*t*255<<16)+((m>>8&255)/255*r*255<<8)+(m&255)/255*d*255,f._lineTint=((g>>16&255)/255*t*255<<16)+((g>>8&255)/255*r*255<<8)+(g&255)/255*d*255}},h.prototype.renderPolygon=function(i,t,r){r.moveTo(i[0],i[1]);for(var d=1;d<i.length/2;++d)r.lineTo(i[d*2],i[d*2+1]);t&&r.closePath()},h.prototype.destroy=function(){this.renderer=null},h}();e.default=v,u.default.registerPlugin("graphics",v)},{"../../const":46,"../../renderers/canvas/CanvasRenderer":77}],56:[function(_,n,e){e.__esModule=!0,e.default=l;function l(u,c,s,p,v,h,o,i,t){var r=arguments.length>9&&arguments[9]!==void 0?arguments[9]:[],d=0,a=0,f=0,m=0,g=0;r.push(u,c);for(var x=1,T=0;x<=t;++x)T=x/t,d=1-T,a=d*d,f=a*d,m=T*T,g=m*T,r.push(f*u+3*a*T*s+3*d*m*v+g*o,f*c+3*a*T*p+3*d*m*h+g*i);return r}},{}],57:[function(_,n,e){e.__esModule=!0;var l=_("../../utils"),u=_("../../const"),c=_("../../renderers/webgl/utils/ObjectRenderer"),s=y(c),p=_("../../renderers/webgl/WebGLRenderer"),v=y(p),h=_("./WebGLGraphicsData"),o=y(h),i=_("./shaders/PrimitiveShader"),t=y(i),r=_("./utils/buildPoly"),d=y(r),a=_("./utils/buildRectangle"),f=y(a),m=_("./utils/buildRoundedRectangle"),g=y(m),x=_("./utils/buildCircle"),T=y(x);function y(O){return O&&O.__esModule?O:{default:O}}function w(O,P){if(!(O instanceof P))throw new TypeError("Cannot call a class as a function")}function b(O,P){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:O}function S(O,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);O.prototype=Object.create(P&&P.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(O,P):O.__proto__=P)}var E=function(O){S(P,O);function P(M){w(this,P);var A=b(this,O.call(this,M));return A.graphicsDataPool=[],A.primitiveShader=null,A.gl=M.gl,A.CONTEXT_UID=0,A}return P.prototype.onContextChange=function(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.primitiveShader=new t.default(this.gl)},P.prototype.destroy=function(){s.default.prototype.destroy.call(this);for(var A=0;A<this.graphicsDataPool.length;++A)this.graphicsDataPool[A].destroy();this.graphicsDataPool=null},P.prototype.render=function(A){var B=this.renderer,I=B.gl,R=void 0,D=A._webGL[this.CONTEXT_UID];(!D||A.dirty!==D.dirty)&&(this.updateGraphics(A),D=A._webGL[this.CONTEXT_UID]);var L=this.primitiveShader;B.bindShader(L),B.state.setBlendMode(A.blendMode);for(var F=0,N=D.data.length;F<N;F++){R=D.data[F];var U=R.shader;B.bindShader(U),U.uniforms.translationMatrix=A.transform.worldTransform.toArray(!0),U.uniforms.tint=(0,l.hex2rgb)(A.tint),U.uniforms.alpha=A.worldAlpha,B.bindVao(R.vao),R.nativeLines?I.drawArrays(I.LINES,0,R.points.length/6):R.vao.draw(I.TRIANGLE_STRIP,R.indices.length)}},P.prototype.updateGraphics=function(A){var B=this.renderer.gl,I=A._webGL[this.CONTEXT_UID];if(I||(I=A._webGL[this.CONTEXT_UID]={lastIndex:0,data:[],gl:B,clearDirty:-1,dirty:-1}),I.dirty=A.dirty,A.clearDirty!==I.clearDirty){I.clearDirty=A.clearDirty;for(var R=0;R<I.data.length;R++)this.graphicsDataPool.push(I.data[R]);I.data.length=0,I.lastIndex=0}for(var D=void 0,L=void 0,F=I.lastIndex;F<A.graphicsData.length;F++){var N=A.graphicsData[F];D=this.getWebGLData(I,0),N.nativeLines&&N.lineWidth&&(L=this.getWebGLData(I,0,!0),I.lastIndex++),N.type===u.SHAPES.POLY&&(0,d.default)(N,D,L),N.type===u.SHAPES.RECT?(0,f.default)(N,D,L):N.type===u.SHAPES.CIRC||N.type===u.SHAPES.ELIP?(0,T.default)(N,D,L):N.type===u.SHAPES.RREC&&(0,g.default)(N,D,L),I.lastIndex++}this.renderer.bindVao(null);for(var U=0;U<I.data.length;U++)D=I.data[U],D.dirty&&D.upload()},P.prototype.getWebGLData=function(A,B,I){var R=A.data[A.data.length-1];return(!R||R.nativeLines!==I||R.points.length>32e4)&&(R=this.graphicsDataPool.pop()||new o.default(this.renderer.gl,this.primitiveShader,this.renderer.state.attribsState),R.nativeLines=I,R.reset(B),A.data.push(R)),R.dirty=!0,R},P}(s.default);e.default=E,v.default.registerPlugin("graphics",E)},{"../../const":46,"../../renderers/webgl/WebGLRenderer":84,"../../renderers/webgl/utils/ObjectRenderer":94,"../../utils":125,"./WebGLGraphicsData":58,"./shaders/PrimitiveShader":59,"./utils/buildCircle":60,"./utils/buildPoly":62,"./utils/buildRectangle":63,"./utils/buildRoundedRectangle":64}],58:[function(_,n,e){e.__esModule=!0;var l=_("pixi-gl-core"),u=c(l);function c(v){return v&&v.__esModule?v:{default:v}}function s(v,h){if(!(v instanceof h))throw new TypeError("Cannot call a class as a function")}var p=function(){function v(h,o,i){s(this,v),this.gl=h,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=u.default.GLBuffer.createVertexBuffer(h),this.indexBuffer=u.default.GLBuffer.createIndexBuffer(h),this.dirty=!0,this.nativeLines=!1,this.glPoints=null,this.glIndices=null,this.shader=o,this.vao=new u.default.VertexArrayObject(h,i).addIndex(this.indexBuffer).addAttribute(this.buffer,o.attributes.aVertexPosition,h.FLOAT,!1,4*6,0).addAttribute(this.buffer,o.attributes.aColor,h.FLOAT,!1,4*6,2*4)}return v.prototype.reset=function(){this.points.length=0,this.indices.length=0},v.prototype.upload=function(){this.glPoints=new Float32Array(this.points),this.buffer.upload(this.glPoints),this.glIndices=new Uint16Array(this.indices),this.indexBuffer.upload(this.glIndices),this.dirty=!1},v.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.vao.destroy(),this.buffer.destroy(),this.indexBuffer.destroy(),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null},v}();e.default=p},{"pixi-gl-core":15}],59:[function(_,n,e){e.__esModule=!0;var l=_("../../../Shader"),u=c(l);function c(o){return o&&o.__esModule?o:{default:o}}function s(o,i){if(!(o instanceof i))throw new TypeError("Cannot call a class as a function")}function p(o,i){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i&&(typeof i=="object"||typeof i=="function")?i:o}function v(o,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);o.prototype=Object.create(i&&i.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(o,i):o.__proto__=i)}var h=function(o){v(i,o);function i(t){return s(this,i),p(this,o.call(this,t,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join(`
`),["varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join(`
`)))}return i}(u.default);e.default=h},{"../../../Shader":44}],60:[function(_,n,e){e.__esModule=!0,e.default=v;var l=_("./buildLine"),u=p(l),c=_("../../../const"),s=_("../../../utils");function p(h){return h&&h.__esModule?h:{default:h}}function v(h,o,i){var t=h.shape,r=t.x,d=t.y,a=void 0,f=void 0;if(h.type===c.SHAPES.CIRC?(a=t.radius,f=t.radius):(a=t.width,f=t.height),!(a===0||f===0)){var m=Math.floor(30*Math.sqrt(t.radius))||Math.floor(15*Math.sqrt(t.width+t.height)),g=Math.PI*2/m;if(h.fill){var x=(0,s.hex2rgb)(h.fillColor),T=h.fillAlpha,y=x[0]*T,w=x[1]*T,b=x[2]*T,S=o.points,E=o.indices,O=S.length/6;E.push(O);for(var P=0;P<m+1;P++)S.push(r,d,y,w,b,T),S.push(r+Math.sin(g*P)*a,d+Math.cos(g*P)*f,y,w,b,T),E.push(O++,O++);E.push(O-1)}if(h.lineWidth){var M=h.points;h.points=[];for(var A=0;A<m;A++)h.points.push(r+Math.sin(g*-A)*a,d+Math.cos(g*-A)*f);h.points.push(h.points[0],h.points[1]),(0,u.default)(h,o,i),h.points=M}}}},{"../../../const":46,"../../../utils":125,"./buildLine":61}],61:[function(_,n,e){e.__esModule=!0,e.default=function(p,v,h){p.nativeLines?s(p,h):c(p,v)};var l=_("../../../math"),u=_("../../../utils");function c(p,v){var h=p.points;if(h.length!==0){var o=new l.Point(h[0],h[1]),i=new l.Point(h[h.length-2],h[h.length-1]);if(o.x===i.x&&o.y===i.y){h=h.slice(),h.pop(),h.pop(),i=new l.Point(h[h.length-2],h[h.length-1]);var t=i.x+(o.x-i.x)*.5,r=i.y+(o.y-i.y)*.5;h.unshift(t,r),h.push(t,r)}var d=v.points,a=v.indices,f=h.length/2,m=h.length,g=d.length/6,x=p.lineWidth/2,T=(0,u.hex2rgb)(p.lineColor),y=p.lineAlpha,w=T[0]*y,b=T[1]*y,S=T[2]*y,E=h[0],O=h[1],P=h[2],M=h[3],A=0,B=0,I=-(O-M),R=E-P,D=0,L=0,F=0,N=0,U=Math.sqrt(I*I+R*R);I/=U,R/=U,I*=x,R*=x;var k=p.lineAlignment,G=(1-k)*2,W=k*2;d.push(E-I*G,O-R*G,w,b,S,y),d.push(E+I*W,O+R*W,w,b,S,y);for(var K=1;K<f-1;++K){E=h[(K-1)*2],O=h[(K-1)*2+1],P=h[K*2],M=h[K*2+1],A=h[(K+1)*2],B=h[(K+1)*2+1],I=-(O-M),R=E-P,U=Math.sqrt(I*I+R*R),I/=U,R/=U,I*=x,R*=x,D=-(M-B),L=P-A,U=Math.sqrt(D*D+L*L),D/=U,L/=U,D*=x,L*=x;var q=-R+O-(-R+M),Q=-I+P-(-I+E),J=(-I+E)*(-R+M)-(-I+P)*(-R+O),V=-L+B-(-L+M),Z=-D+P-(-D+A),$=(-D+A)*(-L+M)-(-D+P)*(-L+B),ie=q*Z-V*Q;if(Math.abs(ie)<.1){ie+=10.1,d.push(P-I*G,M-R*G,w,b,S,y),d.push(P+I*W,M+R*W,w,b,S,y);continue}var ne=(Q*$-Z*J)/ie,ae=(V*J-q*$)/ie,se=(ne-P)*(ne-P)+(ae-M)*(ae-M);se>196*x*x?(F=I-D,N=R-L,U=Math.sqrt(F*F+N*N),F/=U,N/=U,F*=x,N*=x,d.push(P-F*G,M-N*G),d.push(w,b,S,y),d.push(P+F*W,M+N*W),d.push(w,b,S,y),d.push(P-F*W*G,M-N*G),d.push(w,b,S,y),m++):(d.push(P+(ne-P)*G,M+(ae-M)*G),d.push(w,b,S,y),d.push(P-(ne-P)*W,M-(ae-M)*W),d.push(w,b,S,y))}E=h[(f-2)*2],O=h[(f-2)*2+1],P=h[(f-1)*2],M=h[(f-1)*2+1],I=-(O-M),R=E-P,U=Math.sqrt(I*I+R*R),I/=U,R/=U,I*=x,R*=x,d.push(P-I*G,M-R*G),d.push(w,b,S,y),d.push(P+I*W,M+R*W),d.push(w,b,S,y),a.push(g);for(var re=0;re<m;++re)a.push(g++);a.push(g-1)}}function s(p,v){var h=0,o=p.points;if(o.length!==0){var i=v.points,t=o.length/2,r=(0,u.hex2rgb)(p.lineColor),d=p.lineAlpha,a=r[0]*d,f=r[1]*d,m=r[2]*d;for(h=1;h<t;h++){var g=o[(h-1)*2],x=o[(h-1)*2+1],T=o[h*2],y=o[h*2+1];i.push(g,x),i.push(a,f,m,d),i.push(T,y),i.push(a,f,m,d)}}}},{"../../../math":70,"../../../utils":125}],62:[function(_,n,e){e.__esModule=!0,e.default=h;var l=_("./buildLine"),u=v(l),c=_("../../../utils"),s=_("earcut"),p=v(s);function v(o){return o&&o.__esModule?o:{default:o}}function h(o,i,t){o.points=o.shape.points.slice();var r=o.points;if(o.fill&&r.length>=6){for(var d=[],a=o.holes,f=0;f<a.length;f++){var m=a[f];d.push(r.length/2),r=r.concat(m.points)}var g=i.points,x=i.indices,T=r.length/2,y=(0,c.hex2rgb)(o.fillColor),w=o.fillAlpha,b=y[0]*w,S=y[1]*w,E=y[2]*w,O=(0,p.default)(r,d,2);if(!O)return;for(var P=g.length/6,M=0;M<O.length;M+=3)x.push(O[M]+P),x.push(O[M]+P),x.push(O[M+1]+P),x.push(O[M+2]+P),x.push(O[M+2]+P);for(var A=0;A<T;A++)g.push(r[A*2],r[A*2+1],b,S,E,w)}o.lineWidth>0&&(0,u.default)(o,i,t)}},{"../../../utils":125,"./buildLine":61,earcut:2}],63:[function(_,n,e){e.__esModule=!0,e.default=p;var l=_("./buildLine"),u=s(l),c=_("../../../utils");function s(v){return v&&v.__esModule?v:{default:v}}function p(v,h,o){var i=v.shape,t=i.x,r=i.y,d=i.width,a=i.height;if(v.fill){var f=(0,c.hex2rgb)(v.fillColor),m=v.fillAlpha,g=f[0]*m,x=f[1]*m,T=f[2]*m,y=h.points,w=h.indices,b=y.length/6;y.push(t,r),y.push(g,x,T,m),y.push(t+d,r),y.push(g,x,T,m),y.push(t,r+a),y.push(g,x,T,m),y.push(t+d,r+a),y.push(g,x,T,m),w.push(b,b,b+1,b+2,b+3,b+3)}if(v.lineWidth){var S=v.points;v.points=[t,r,t+d,r,t+d,r+a,t,r+a,t,r],(0,u.default)(v,h,o),v.points=S}}},{"../../../utils":125,"./buildLine":61}],64:[function(_,n,e){e.__esModule=!0,e.default=h;var l=_("earcut"),u=v(l),c=_("./buildLine"),s=v(c),p=_("../../../utils");function v(t){return t&&t.__esModule?t:{default:t}}function h(t,r,d){var a=t.shape,f=a.x,m=a.y,g=a.width,x=a.height,T=a.radius,y=[];if(y.push(f,m+T),i(f,m+x-T,f,m+x,f+T,m+x,y),i(f+g-T,m+x,f+g,m+x,f+g,m+x-T,y),i(f+g,m+T,f+g,m,f+g-T,m,y),i(f+T,m,f,m,f,m+T+1e-10,y),t.fill){for(var w=(0,p.hex2rgb)(t.fillColor),b=t.fillAlpha,S=w[0]*b,E=w[1]*b,O=w[2]*b,P=r.points,M=r.indices,A=P.length/6,B=(0,u.default)(y,null,2),I=0,R=B.length;I<R;I+=3)M.push(B[I]+A),M.push(B[I]+A),M.push(B[I+1]+A),M.push(B[I+2]+A),M.push(B[I+2]+A);for(var D=0,L=y.length;D<L;D++)P.push(y[D],y[++D],S,E,O,b)}if(t.lineWidth){var F=t.points;t.points=y,(0,s.default)(t,r,d),t.points=F}}function o(t,r,d){var a=r-t;return t+a*d}function i(t,r,d,a,f,m){for(var g=arguments.length>6&&arguments[6]!==void 0?arguments[6]:[],x=20,T=g,y=0,w=0,b=0,S=0,E=0,O=0,P=0,M=0;P<=x;++P)M=P/x,y=o(t,d,M),w=o(r,a,M),b=o(d,f,M),S=o(a,m,M),E=o(y,b,M),O=o(w,S,M),T.push(E,O);return T}},{"../../../utils":125,"./buildLine":61,earcut:2}],65:[function(_,n,e){e.__esModule=!0,e.autoDetectRenderer=e.Application=e.Filter=e.SpriteMaskFilter=e.Quad=e.RenderTarget=e.ObjectRenderer=e.WebGLManager=e.Shader=e.CanvasRenderTarget=e.TextureUvs=e.VideoBaseTexture=e.BaseRenderTexture=e.RenderTexture=e.BaseTexture=e.TextureMatrix=e.Texture=e.Spritesheet=e.CanvasGraphicsRenderer=e.GraphicsRenderer=e.GraphicsData=e.Graphics=e.TextMetrics=e.TextStyle=e.Text=e.SpriteRenderer=e.CanvasTinter=e.CanvasSpriteRenderer=e.Sprite=e.TransformBase=e.TransformStatic=e.Transform=e.Container=e.DisplayObject=e.Bounds=e.glCore=e.WebGLRenderer=e.CanvasRenderer=e.ticker=e.utils=e.settings=void 0;var l=_("./const");Object.keys(l).forEach(function(ee){ee==="default"||ee==="__esModule"||Object.defineProperty(e,ee,{enumerable:!0,get:function(){return l[ee]}})});var u=_("./math");Object.keys(u).forEach(function(ee){ee==="default"||ee==="__esModule"||Object.defineProperty(e,ee,{enumerable:!0,get:function(){return u[ee]}})});var c=_("pixi-gl-core");Object.defineProperty(e,"glCore",{enumerable:!0,get:function(){return re(c).default}});var s=_("./display/Bounds");Object.defineProperty(e,"Bounds",{enumerable:!0,get:function(){return re(s).default}});var p=_("./display/DisplayObject");Object.defineProperty(e,"DisplayObject",{enumerable:!0,get:function(){return re(p).default}});var v=_("./display/Container");Object.defineProperty(e,"Container",{enumerable:!0,get:function(){return re(v).default}});var h=_("./display/Transform");Object.defineProperty(e,"Transform",{enumerable:!0,get:function(){return re(h).default}});var o=_("./display/TransformStatic");Object.defineProperty(e,"TransformStatic",{enumerable:!0,get:function(){return re(o).default}});var i=_("./display/TransformBase");Object.defineProperty(e,"TransformBase",{enumerable:!0,get:function(){return re(i).default}});var t=_("./sprites/Sprite");Object.defineProperty(e,"Sprite",{enumerable:!0,get:function(){return re(t).default}});var r=_("./sprites/canvas/CanvasSpriteRenderer");Object.defineProperty(e,"CanvasSpriteRenderer",{enumerable:!0,get:function(){return re(r).default}});var d=_("./sprites/canvas/CanvasTinter");Object.defineProperty(e,"CanvasTinter",{enumerable:!0,get:function(){return re(d).default}});var a=_("./sprites/webgl/SpriteRenderer");Object.defineProperty(e,"SpriteRenderer",{enumerable:!0,get:function(){return re(a).default}});var f=_("./text/Text");Object.defineProperty(e,"Text",{enumerable:!0,get:function(){return re(f).default}});var m=_("./text/TextStyle");Object.defineProperty(e,"TextStyle",{enumerable:!0,get:function(){return re(m).default}});var g=_("./text/TextMetrics");Object.defineProperty(e,"TextMetrics",{enumerable:!0,get:function(){return re(g).default}});var x=_("./graphics/Graphics");Object.defineProperty(e,"Graphics",{enumerable:!0,get:function(){return re(x).default}});var T=_("./graphics/GraphicsData");Object.defineProperty(e,"GraphicsData",{enumerable:!0,get:function(){return re(T).default}});var y=_("./graphics/webgl/GraphicsRenderer");Object.defineProperty(e,"GraphicsRenderer",{enumerable:!0,get:function(){return re(y).default}});var w=_("./graphics/canvas/CanvasGraphicsRenderer");Object.defineProperty(e,"CanvasGraphicsRenderer",{enumerable:!0,get:function(){return re(w).default}});var b=_("./textures/Spritesheet");Object.defineProperty(e,"Spritesheet",{enumerable:!0,get:function(){return re(b).default}});var S=_("./textures/Texture");Object.defineProperty(e,"Texture",{enumerable:!0,get:function(){return re(S).default}});var E=_("./textures/TextureMatrix");Object.defineProperty(e,"TextureMatrix",{enumerable:!0,get:function(){return re(E).default}});var O=_("./textures/BaseTexture");Object.defineProperty(e,"BaseTexture",{enumerable:!0,get:function(){return re(O).default}});var P=_("./textures/RenderTexture");Object.defineProperty(e,"RenderTexture",{enumerable:!0,get:function(){return re(P).default}});var M=_("./textures/BaseRenderTexture");Object.defineProperty(e,"BaseRenderTexture",{enumerable:!0,get:function(){return re(M).default}});var A=_("./textures/VideoBaseTexture");Object.defineProperty(e,"VideoBaseTexture",{enumerable:!0,get:function(){return re(A).default}});var B=_("./textures/TextureUvs");Object.defineProperty(e,"TextureUvs",{enumerable:!0,get:function(){return re(B).default}});var I=_("./renderers/canvas/utils/CanvasRenderTarget");Object.defineProperty(e,"CanvasRenderTarget",{enumerable:!0,get:function(){return re(I).default}});var R=_("./Shader");Object.defineProperty(e,"Shader",{enumerable:!0,get:function(){return re(R).default}});var D=_("./renderers/webgl/managers/WebGLManager");Object.defineProperty(e,"WebGLManager",{enumerable:!0,get:function(){return re(D).default}});var L=_("./renderers/webgl/utils/ObjectRenderer");Object.defineProperty(e,"ObjectRenderer",{enumerable:!0,get:function(){return re(L).default}});var F=_("./renderers/webgl/utils/RenderTarget");Object.defineProperty(e,"RenderTarget",{enumerable:!0,get:function(){return re(F).default}});var N=_("./renderers/webgl/utils/Quad");Object.defineProperty(e,"Quad",{enumerable:!0,get:function(){return re(N).default}});var U=_("./renderers/webgl/filters/spriteMask/SpriteMaskFilter");Object.defineProperty(e,"SpriteMaskFilter",{enumerable:!0,get:function(){return re(U).default}});var k=_("./renderers/webgl/filters/Filter");Object.defineProperty(e,"Filter",{enumerable:!0,get:function(){return re(k).default}});var G=_("./Application");Object.defineProperty(e,"Application",{enumerable:!0,get:function(){return re(G).default}});var W=_("./autoDetectRenderer");Object.defineProperty(e,"autoDetectRenderer",{enumerable:!0,get:function(){return W.autoDetectRenderer}});var K=_("./utils"),q=se(K),Q=_("./ticker"),J=se(Q),V=_("./settings"),Z=re(V),$=_("./renderers/canvas/CanvasRenderer"),ie=re($),ne=_("./renderers/webgl/WebGLRenderer"),ae=re(ne);function se(ee){if(ee&&ee.__esModule)return ee;var ue={};if(ee!=null)for(var fe in ee)Object.prototype.hasOwnProperty.call(ee,fe)&&(ue[fe]=ee[fe]);return ue.default=ee,ue}function re(ee){return ee&&ee.__esModule?ee:{default:ee}}e.settings=Z.default,e.utils=q,e.ticker=J,e.CanvasRenderer=ie.default,e.WebGLRenderer=ae.default},{"./Application":43,"./Shader":44,"./autoDetectRenderer":45,"./const":46,"./display/Bounds":47,"./display/Container":48,"./display/DisplayObject":49,"./display/Transform":50,"./display/TransformBase":51,"./display/TransformStatic":52,"./graphics/Graphics":53,"./graphics/GraphicsData":54,"./graphics/canvas/CanvasGraphicsRenderer":55,"./graphics/webgl/GraphicsRenderer":57,"./math":70,"./renderers/canvas/CanvasRenderer":77,"./renderers/canvas/utils/CanvasRenderTarget":79,"./renderers/webgl/WebGLRenderer":84,"./renderers/webgl/filters/Filter":86,"./renderers/webgl/filters/spriteMask/SpriteMaskFilter":89,"./renderers/webgl/managers/WebGLManager":93,"./renderers/webgl/utils/ObjectRenderer":94,"./renderers/webgl/utils/Quad":95,"./renderers/webgl/utils/RenderTarget":96,"./settings":101,"./sprites/Sprite":102,"./sprites/canvas/CanvasSpriteRenderer":103,"./sprites/canvas/CanvasTinter":104,"./sprites/webgl/SpriteRenderer":106,"./text/Text":108,"./text/TextMetrics":109,"./text/TextStyle":110,"./textures/BaseRenderTexture":111,"./textures/BaseTexture":112,"./textures/RenderTexture":113,"./textures/Spritesheet":114,"./textures/Texture":115,"./textures/TextureMatrix":116,"./textures/TextureUvs":117,"./textures/VideoBaseTexture":118,"./ticker":121,"./utils":125,"pixi-gl-core":15}],66:[function(_,n,e){e.__esModule=!0;var l=_("./Matrix"),u=c(l);function c(a){return a&&a.__esModule?a:{default:a}}var s=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],p=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],v=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],h=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],o=[],i=[];function t(a){return a<0?-1:a>0?1:0}function r(){for(var a=0;a<16;a++){var f=[];i.push(f);for(var m=0;m<16;m++)for(var g=t(s[a]*s[m]+v[a]*p[m]),x=t(p[a]*s[m]+h[a]*p[m]),T=t(s[a]*v[m]+v[a]*h[m]),y=t(p[a]*v[m]+h[a]*h[m]),w=0;w<16;w++)if(s[w]===g&&p[w]===x&&v[w]===T&&h[w]===y){f.push(w);break}}for(var b=0;b<16;b++){var S=new u.default;S.set(s[b],p[b],v[b],h[b],0,0),o.push(S)}}r();var d={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(f){return s[f]},uY:function(f){return p[f]},vX:function(f){return v[f]},vY:function(f){return h[f]},inv:function(f){return f&8?f&15:-f&7},add:function(f,m){return i[f][m]},sub:function(f,m){return i[f][d.inv(m)]},rotate180:function(f){return f^4},isVertical:function(f){return(f&3)===2},byDirection:function(f,m){return Math.abs(f)*2<=Math.abs(m)?m>=0?d.S:d.N:Math.abs(m)*2<=Math.abs(f)?f>0?d.E:d.W:m>0?f>0?d.SE:d.SW:f>0?d.NE:d.NW},matrixAppendRotationInv:function(f,m){var g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,x=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,T=o[d.inv(m)];T.tx=g,T.ty=x,f.append(T)}};e.default=d},{"./Matrix":67}],67:[function(_,n,e){e.__esModule=!0;var l=function(){function o(i,t){for(var r=0;r<t.length;r++){var d=t[r];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(i,d.key,d)}}return function(i,t,r){return t&&o(i.prototype,t),r&&o(i,r),i}}(),u=_("./Point"),c=p(u),s=_("../const");function p(o){return o&&o.__esModule?o:{default:o}}function v(o,i){if(!(o instanceof i))throw new TypeError("Cannot call a class as a function")}var h=function(){function o(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,f=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0;v(this,o),this.a=i,this.b=t,this.c=r,this.d=d,this.tx=a,this.ty=f,this.array=null}return o.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},o.prototype.set=function(t,r,d,a,f,m){return this.a=t,this.b=r,this.c=d,this.d=a,this.tx=f,this.ty=m,this},o.prototype.toArray=function(t,r){this.array||(this.array=new Float32Array(9));var d=r||this.array;return t?(d[0]=this.a,d[1]=this.b,d[2]=0,d[3]=this.c,d[4]=this.d,d[5]=0,d[6]=this.tx,d[7]=this.ty,d[8]=1):(d[0]=this.a,d[1]=this.c,d[2]=this.tx,d[3]=this.b,d[4]=this.d,d[5]=this.ty,d[6]=0,d[7]=0,d[8]=1),d},o.prototype.apply=function(t,r){r=r||new c.default;var d=t.x,a=t.y;return r.x=this.a*d+this.c*a+this.tx,r.y=this.b*d+this.d*a+this.ty,r},o.prototype.applyInverse=function(t,r){r=r||new c.default;var d=1/(this.a*this.d+this.c*-this.b),a=t.x,f=t.y;return r.x=this.d*d*a+-this.c*d*f+(this.ty*this.c-this.tx*this.d)*d,r.y=this.a*d*f+-this.b*d*a+(-this.ty*this.a+this.tx*this.b)*d,r},o.prototype.translate=function(t,r){return this.tx+=t,this.ty+=r,this},o.prototype.scale=function(t,r){return this.a*=t,this.d*=r,this.c*=t,this.b*=r,this.tx*=t,this.ty*=r,this},o.prototype.rotate=function(t){var r=Math.cos(t),d=Math.sin(t),a=this.a,f=this.c,m=this.tx;return this.a=a*r-this.b*d,this.b=a*d+this.b*r,this.c=f*r-this.d*d,this.d=f*d+this.d*r,this.tx=m*r-this.ty*d,this.ty=m*d+this.ty*r,this},o.prototype.append=function(t){var r=this.a,d=this.b,a=this.c,f=this.d;return this.a=t.a*r+t.b*a,this.b=t.a*d+t.b*f,this.c=t.c*r+t.d*a,this.d=t.c*d+t.d*f,this.tx=t.tx*r+t.ty*a+this.tx,this.ty=t.tx*d+t.ty*f+this.ty,this},o.prototype.setTransform=function(t,r,d,a,f,m,g,x,T){return this.a=Math.cos(g+T)*f,this.b=Math.sin(g+T)*f,this.c=-Math.sin(g-x)*m,this.d=Math.cos(g-x)*m,this.tx=t-(d*this.a+a*this.c),this.ty=r-(d*this.b+a*this.d),this},o.prototype.prepend=function(t){var r=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){var d=this.a,a=this.c;this.a=d*t.a+this.b*t.c,this.b=d*t.b+this.b*t.d,this.c=a*t.a+this.d*t.c,this.d=a*t.b+this.d*t.d}return this.tx=r*t.a+this.ty*t.c+t.tx,this.ty=r*t.b+this.ty*t.d+t.ty,this},o.prototype.decompose=function(t){var r=this.a,d=this.b,a=this.c,f=this.d,m=-Math.atan2(-a,f),g=Math.atan2(d,r),x=Math.abs(m+g);return x<1e-5||Math.abs(s.PI_2-x)<1e-5?(t.rotation=g,r<0&&f>=0&&(t.rotation+=t.rotation<=0?Math.PI:-Math.PI),t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=m,t.skew.y=g),t.scale.x=Math.sqrt(r*r+d*d),t.scale.y=Math.sqrt(a*a+f*f),t.position.x=this.tx,t.position.y=this.ty,t},o.prototype.invert=function(){var t=this.a,r=this.b,d=this.c,a=this.d,f=this.tx,m=t*a-r*d;return this.a=a/m,this.b=-r/m,this.c=-d/m,this.d=t/m,this.tx=(d*this.ty-a*f)/m,this.ty=-(t*this.ty-r*f)/m,this},o.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},o.prototype.clone=function(){var t=new o;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},o.prototype.copy=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},l(o,null,[{key:"IDENTITY",get:function(){return new o}},{key:"TEMP_MATRIX",get:function(){return new o}}]),o}();e.default=h},{"../const":46,"./Point":69}],68:[function(_,n,e){e.__esModule=!0;var l=function(){function s(p,v){for(var h=0;h<v.length;h++){var o=v[h];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(p,o.key,o)}}return function(p,v,h){return v&&s(p.prototype,v),h&&s(p,h),p}}();function u(s,p){if(!(s instanceof p))throw new TypeError("Cannot call a class as a function")}var c=function(){function s(p,v){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;u(this,s),this._x=h,this._y=o,this.cb=p,this.scope=v}return s.prototype.clone=function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,o=v||this.cb,i=h||this.scope;return new s(o,i,this._x,this._y)},s.prototype.set=function(v,h){var o=v||0,i=h||(h!==0?o:0);(this._x!==o||this._y!==i)&&(this._x=o,this._y=i,this.cb.call(this.scope))},s.prototype.copy=function(v){(this._x!==v.x||this._y!==v.y)&&(this._x=v.x,this._y=v.y,this.cb.call(this.scope))},s.prototype.equals=function(v){return v.x===this._x&&v.y===this._y},l(s,[{key:"x",get:function(){return this._x},set:function(v){this._x!==v&&(this._x=v,this.cb.call(this.scope))}},{key:"y",get:function(){return this._y},set:function(v){this._y!==v&&(this._y=v,this.cb.call(this.scope))}}]),s}();e.default=c},{}],69:[function(_,n,e){e.__esModule=!0;function l(c,s){if(!(c instanceof s))throw new TypeError("Cannot call a class as a function")}var u=function(){function c(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;l(this,c),this.x=s,this.y=p}return c.prototype.clone=function(){return new c(this.x,this.y)},c.prototype.copy=function(p){this.set(p.x,p.y)},c.prototype.equals=function(p){return p.x===this.x&&p.y===this.y},c.prototype.set=function(p,v){this.x=p||0,this.y=v||(v!==0?this.x:0)},c}();e.default=u},{}],70:[function(_,n,e){e.__esModule=!0;var l=_("./Point");Object.defineProperty(e,"Point",{enumerable:!0,get:function(){return t(l).default}});var u=_("./ObservablePoint");Object.defineProperty(e,"ObservablePoint",{enumerable:!0,get:function(){return t(u).default}});var c=_("./Matrix");Object.defineProperty(e,"Matrix",{enumerable:!0,get:function(){return t(c).default}});var s=_("./GroupD8");Object.defineProperty(e,"GroupD8",{enumerable:!0,get:function(){return t(s).default}});var p=_("./shapes/Circle");Object.defineProperty(e,"Circle",{enumerable:!0,get:function(){return t(p).default}});var v=_("./shapes/Ellipse");Object.defineProperty(e,"Ellipse",{enumerable:!0,get:function(){return t(v).default}});var h=_("./shapes/Polygon");Object.defineProperty(e,"Polygon",{enumerable:!0,get:function(){return t(h).default}});var o=_("./shapes/Rectangle");Object.defineProperty(e,"Rectangle",{enumerable:!0,get:function(){return t(o).default}});var i=_("./shapes/RoundedRectangle");Object.defineProperty(e,"RoundedRectangle",{enumerable:!0,get:function(){return t(i).default}});function t(r){return r&&r.__esModule?r:{default:r}}},{"./GroupD8":66,"./Matrix":67,"./ObservablePoint":68,"./Point":69,"./shapes/Circle":71,"./shapes/Ellipse":72,"./shapes/Polygon":73,"./shapes/Rectangle":74,"./shapes/RoundedRectangle":75}],71:[function(_,n,e){e.__esModule=!0;var l=_("./Rectangle"),u=s(l),c=_("../../const");function s(h){return h&&h.__esModule?h:{default:h}}function p(h,o){if(!(h instanceof o))throw new TypeError("Cannot call a class as a function")}var v=function(){function h(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;p(this,h),this.x=o,this.y=i,this.radius=t,this.type=c.SHAPES.CIRC}return h.prototype.clone=function(){return new h(this.x,this.y,this.radius)},h.prototype.contains=function(i,t){if(this.radius<=0)return!1;var r=this.radius*this.radius,d=this.x-i,a=this.y-t;return d*=d,a*=a,d+a<=r},h.prototype.getBounds=function(){return new u.default(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)},h}();e.default=v},{"../../const":46,"./Rectangle":74}],72:[function(_,n,e){e.__esModule=!0;var l=_("./Rectangle"),u=s(l),c=_("../../const");function s(h){return h&&h.__esModule?h:{default:h}}function p(h,o){if(!(h instanceof o))throw new TypeError("Cannot call a class as a function")}var v=function(){function h(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;p(this,h),this.x=o,this.y=i,this.width=t,this.height=r,this.type=c.SHAPES.ELIP}return h.prototype.clone=function(){return new h(this.x,this.y,this.width,this.height)},h.prototype.contains=function(i,t){if(this.width<=0||this.height<=0)return!1;var r=(i-this.x)/this.width,d=(t-this.y)/this.height;return r*=r,d*=d,r+d<=1},h.prototype.getBounds=function(){return new u.default(this.x-this.width,this.y-this.height,this.width,this.height)},h}();e.default=v},{"../../const":46,"./Rectangle":74}],73:[function(_,n,e){e.__esModule=!0;var l=_("../Point"),u=s(l),c=_("../../const");function s(h){return h&&h.__esModule?h:{default:h}}function p(h,o){if(!(h instanceof o))throw new TypeError("Cannot call a class as a function")}var v=function(){function h(){for(var o=arguments.length,i=Array(o),t=0;t<o;t++)i[t]=arguments[t];if(p(this,h),Array.isArray(i[0])&&(i=i[0]),i[0]instanceof u.default){for(var r=[],d=0,a=i.length;d<a;d++)r.push(i[d].x,i[d].y);i=r}this.closed=!0,this.points=i,this.type=c.SHAPES.POLY}return h.prototype.clone=function(){return new h(this.points.slice())},h.prototype.close=function(){var i=this.points;(i[0]!==i[i.length-2]||i[1]!==i[i.length-1])&&i.push(i[0],i[1])},h.prototype.contains=function(i,t){for(var r=!1,d=this.points.length/2,a=0,f=d-1;a<d;f=a++){var m=this.points[a*2],g=this.points[a*2+1],x=this.points[f*2],T=this.points[f*2+1],y=g>t!=T>t&&i<(x-m)*((t-g)/(T-g))+m;y&&(r=!r)}return r},h}();e.default=v},{"../../const":46,"../Point":69}],74:[function(_,n,e){e.__esModule=!0;var l=function(){function p(v,h){for(var o=0;o<h.length;o++){var i=h[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(v,i.key,i)}}return function(v,h,o){return h&&p(v.prototype,h),o&&p(v,o),v}}(),u=_("../../const");function c(p,v){if(!(p instanceof v))throw new TypeError("Cannot call a class as a function")}var s=function(){function p(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;c(this,p),this.x=Number(v),this.y=Number(h),this.width=Number(o),this.height=Number(i),this.type=u.SHAPES.RECT}return p.prototype.clone=function(){return new p(this.x,this.y,this.width,this.height)},p.prototype.copy=function(h){return this.x=h.x,this.y=h.y,this.width=h.width,this.height=h.height,this},p.prototype.contains=function(h,o){return this.width<=0||this.height<=0?!1:h>=this.x&&h<this.x+this.width&&o>=this.y&&o<this.y+this.height},p.prototype.pad=function(h,o){h=h||0,o=o||(o!==0?h:0),this.x-=h,this.y-=o,this.width+=h*2,this.height+=o*2},p.prototype.fit=function(h){this.x<h.x&&(this.width+=this.x,this.width<0&&(this.width=0),this.x=h.x),this.y<h.y&&(this.height+=this.y,this.height<0&&(this.height=0),this.y=h.y),this.x+this.width>h.x+h.width&&(this.width=h.width-this.x,this.width<0&&(this.width=0)),this.y+this.height>h.y+h.height&&(this.height=h.height-this.y,this.height<0&&(this.height=0))},p.prototype.enlarge=function(h){var o=Math.min(this.x,h.x),i=Math.max(this.x+this.width,h.x+h.width),t=Math.min(this.y,h.y),r=Math.max(this.y+this.height,h.y+h.height);this.x=o,this.width=i-o,this.y=t,this.height=r-t},l(p,[{key:"left",get:function(){return this.x}},{key:"right",get:function(){return this.x+this.width}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.height}}],[{key:"EMPTY",get:function(){return new p(0,0,0,0)}}]),p}();e.default=s},{"../../const":46}],75:[function(_,n,e){e.__esModule=!0;var l=_("../../const");function u(s,p){if(!(s instanceof p))throw new TypeError("Cannot call a class as a function")}var c=function(){function s(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:20;u(this,s),this.x=p,this.y=v,this.width=h,this.height=o,this.radius=i,this.type=l.SHAPES.RREC}return s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.radius)},s.prototype.contains=function(v,h){if(this.width<=0||this.height<=0)return!1;if(v>=this.x&&v<=this.x+this.width&&h>=this.y&&h<=this.y+this.height){if(h>=this.y+this.radius&&h<=this.y+this.height-this.radius||v>=this.x+this.radius&&v<=this.x+this.width-this.radius)return!0;var o=v-(this.x+this.radius),i=h-(this.y+this.radius),t=this.radius*this.radius;if(o*o+i*i<=t||(o=v-(this.x+this.width-this.radius),o*o+i*i<=t)||(i=h-(this.y+this.height-this.radius),o*o+i*i<=t)||(o=v-(this.x+this.radius),o*o+i*i<=t))return!0}return!1},s}();e.default=c},{"../../const":46}],76:[function(_,n,e){e.__esModule=!0;var l=function(){function y(w,b){for(var S=0;S<b.length;S++){var E=b[S];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(w,E.key,E)}}return function(w,b,S){return b&&y(w.prototype,b),S&&y(w,S),w}}(),u=_("../utils"),c=_("../math"),s=_("../const"),p=_("../settings"),v=a(p),h=_("../display/Container"),o=a(h),i=_("../textures/RenderTexture"),t=a(i),r=_("eventemitter3"),d=a(r);function a(y){return y&&y.__esModule?y:{default:y}}function f(y,w){if(!(y instanceof w))throw new TypeError("Cannot call a class as a function")}function m(y,w){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:y}function g(y,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);y.prototype=Object.create(w&&w.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(y,w):y.__proto__=w)}var x=new c.Matrix,T=function(y){g(w,y);function w(b,S,E,O){f(this,w);var P=m(this,y.call(this));return(0,u.sayHello)(b),typeof S=="number"&&(S=Object.assign({width:S,height:E||v.default.RENDER_OPTIONS.height},O)),S=Object.assign({},v.default.RENDER_OPTIONS,S),P.options=S,P.type=s.RENDERER_TYPE.UNKNOWN,P.screen=new c.Rectangle(0,0,S.width,S.height),P.view=S.view||document.createElement("canvas"),P.resolution=S.resolution||v.default.RESOLUTION,P.transparent=S.transparent,P.autoResize=S.autoResize||!1,P.blendModes=null,P.preserveDrawingBuffer=S.preserveDrawingBuffer,P.clearBeforeRender=S.clearBeforeRender,P.roundPixels=S.roundPixels,P._backgroundColor=0,P._backgroundColorRgba=[0,0,0,0],P._backgroundColorString="#000000",P.backgroundColor=S.backgroundColor||P._backgroundColor,P._tempDisplayObjectParent=new o.default,P._lastObjectRendered=P._tempDisplayObjectParent,P}return w.prototype.resize=function(S,E){this.screen.width=S,this.screen.height=E,this.view.width=S*this.resolution,this.view.height=E*this.resolution,this.autoResize&&(this.view.style.width=S+"px",this.view.style.height=E+"px")},w.prototype.generateTexture=function(S,E,O,P){P=P||S.getLocalBounds();var M=t.default.create(P.width|0,P.height|0,E,O);return x.tx=-P.x,x.ty=-P.y,this.render(S,M,!1,x,!!S.parent),M},w.prototype.destroy=function(S){S&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=s.RENDERER_TYPE.UNKNOWN,this.view=null,this.screen=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.options=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this._tempDisplayObjectParent=null,this._lastObjectRendered=null},l(w,[{key:"width",get:function(){return this.view.width}},{key:"height",get:function(){return this.view.height}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(S){this._backgroundColor=S,this._backgroundColorString=(0,u.hex2string)(S),(0,u.hex2rgb)(S,this._backgroundColorRgba)}}]),w}(d.default);e.default=T},{"../const":46,"../display/Container":48,"../math":70,"../settings":101,"../textures/RenderTexture":113,"../utils":125,eventemitter3:3}],77:[function(_,n,e){e.__esModule=!0;var l=_("../SystemRenderer"),u=a(l),c=_("./utils/CanvasMaskManager"),s=a(c),p=_("./utils/CanvasRenderTarget"),v=a(p),h=_("./utils/mapCanvasBlendModesToPixi"),o=a(h),i=_("../../utils"),t=_("../../const"),r=_("../../settings"),d=a(r);function a(T){return T&&T.__esModule?T:{default:T}}function f(T,y){if(!(T instanceof y))throw new TypeError("Cannot call a class as a function")}function m(T,y){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:T}function g(T,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);T.prototype=Object.create(y&&y.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(T,y):T.__proto__=y)}var x=function(T){g(y,T);function y(w,b,S){f(this,y);var E=m(this,T.call(this,"Canvas",w,b,S));return E.type=t.RENDERER_TYPE.CANVAS,E.rootContext=E.view.getContext("2d",{alpha:E.transparent}),E.context=E.rootContext,E.refresh=!0,E.maskManager=new s.default(E),E.smoothProperty="imageSmoothingEnabled",E.rootContext.imageSmoothingEnabled||(E.rootContext.webkitImageSmoothingEnabled?E.smoothProperty="webkitImageSmoothingEnabled":E.rootContext.mozImageSmoothingEnabled?E.smoothProperty="mozImageSmoothingEnabled":E.rootContext.oImageSmoothingEnabled?E.smoothProperty="oImageSmoothingEnabled":E.rootContext.msImageSmoothingEnabled&&(E.smoothProperty="msImageSmoothingEnabled")),E.initPlugins(),E.blendModes=(0,o.default)(),E._activeBlendMode=null,E.renderingToScreen=!1,E.resize(E.options.width,E.options.height),E}return y.prototype.render=function(b,S,E,O,P){if(this.view){this.renderingToScreen=!S,this.emit("prerender");var M=this.resolution;S?(S=S.baseTexture||S,S._canvasRenderTarget||(S._canvasRenderTarget=new v.default(S.width,S.height,S.resolution),S.source=S._canvasRenderTarget.canvas,S.valid=!0),this.context=S._canvasRenderTarget.context,this.resolution=S._canvasRenderTarget.resolution):this.context=this.rootContext;var A=this.context;if(S||(this._lastObjectRendered=b),!P){var B=b.parent,I=this._tempDisplayObjectParent.transform.worldTransform;O?(O.copy(I),this._tempDisplayObjectParent.transform._worldID=-1):I.identity(),b.parent=this._tempDisplayObjectParent,b.updateTransform(),b.parent=B}A.save(),A.setTransform(1,0,0,1,0,0),A.globalAlpha=1,this._activeBlendMode=t.BLEND_MODES.NORMAL,A.globalCompositeOperation=this.blendModes[t.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(A.fillStyle="black",A.clear()),(E!==void 0?E:this.clearBeforeRender)&&this.renderingToScreen&&(this.transparent?A.clearRect(0,0,this.width,this.height):(A.fillStyle=this._backgroundColorString,A.fillRect(0,0,this.width,this.height)));var R=this.context;this.context=A,b.renderCanvas(this),this.context=R,A.restore(),this.resolution=M,this.emit("postrender")}},y.prototype.clear=function(b){var S=this.context;b=b||this._backgroundColorString,!this.transparent&&b?(S.fillStyle=b,S.fillRect(0,0,this.width,this.height)):S.clearRect(0,0,this.width,this.height)},y.prototype.setBlendMode=function(b){this._activeBlendMode!==b&&(this._activeBlendMode=b,this.context.globalCompositeOperation=this.blendModes[b])},y.prototype.destroy=function(b){this.destroyPlugins(),T.prototype.destroy.call(this,b),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},y.prototype.resize=function(b,S){T.prototype.resize.call(this,b,S),this.smoothProperty&&(this.rootContext[this.smoothProperty]=d.default.SCALE_MODE===t.SCALE_MODES.LINEAR)},y.prototype.invalidateBlendMode=function(){this._activeBlendMode=this.blendModes.indexOf(this.context.globalCompositeOperation)},y}(u.default);e.default=x,i.pluginTarget.mixin(x)},{"../../const":46,"../../settings":101,"../../utils":125,"../SystemRenderer":76,"./utils/CanvasMaskManager":78,"./utils/CanvasRenderTarget":79,"./utils/mapCanvasBlendModesToPixi":81}],78:[function(_,n,e){e.__esModule=!0;var l=_("../../../const");function u(s,p){if(!(s instanceof p))throw new TypeError("Cannot call a class as a function")}var c=function(){function s(p){u(this,s),this.renderer=p}return s.prototype.pushMask=function(v){var h=this.renderer;h.context.save();var o=v.alpha,i=v.transform.worldTransform,t=h.resolution;h.context.setTransform(i.a*t,i.b*t,i.c*t,i.d*t,i.tx*t,i.ty*t),v._texture||(this.renderGraphicsShape(v),h.context.clip()),v.worldAlpha=o},s.prototype.renderGraphicsShape=function(v){var h=this.renderer.context,o=v.graphicsData.length;if(o!==0){h.beginPath();for(var i=0;i<o;i++){var t=v.graphicsData[i],r=t.shape;if(t.type===l.SHAPES.POLY){var d=r.points;h.moveTo(d[0],d[1]);for(var a=1;a<d.length/2;a++)h.lineTo(d[a*2],d[a*2+1]);d[0]===d[d.length-2]&&d[1]===d[d.length-1]&&h.closePath()}else if(t.type===l.SHAPES.RECT)h.rect(r.x,r.y,r.width,r.height),h.closePath();else if(t.type===l.SHAPES.CIRC)h.arc(r.x,r.y,r.radius,0,2*Math.PI),h.closePath();else if(t.type===l.SHAPES.ELIP){var f=r.width*2,m=r.height*2,g=r.x-f/2,x=r.y-m/2,T=.5522848,y=f/2*T,w=m/2*T,b=g+f,S=x+m,E=g+f/2,O=x+m/2;h.moveTo(g,O),h.bezierCurveTo(g,O-w,E-y,x,E,x),h.bezierCurveTo(E+y,x,b,O-w,b,O),h.bezierCurveTo(b,O+w,E+y,S,E,S),h.bezierCurveTo(E-y,S,g,O+w,g,O),h.closePath()}else if(t.type===l.SHAPES.RREC){var P=r.x,M=r.y,A=r.width,B=r.height,I=r.radius,R=Math.min(A,B)/2|0;I=I>R?R:I,h.moveTo(P,M+I),h.lineTo(P,M+B-I),h.quadraticCurveTo(P,M+B,P+I,M+B),h.lineTo(P+A-I,M+B),h.quadraticCurveTo(P+A,M+B,P+A,M+B-I),h.lineTo(P+A,M+I),h.quadraticCurveTo(P+A,M,P+A-I,M),h.lineTo(P+I,M),h.quadraticCurveTo(P,M,P,M+I),h.closePath()}}}},s.prototype.popMask=function(v){v.context.restore(),v.invalidateBlendMode()},s.prototype.destroy=function(){},s}();e.default=c},{"../../../const":46}],79:[function(_,n,e){e.__esModule=!0;var l=function(){function h(o,i){for(var t=0;t<i.length;t++){var r=i[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(o,r.key,r)}}return function(o,i,t){return i&&h(o.prototype,i),t&&h(o,t),o}}(),u=_("../../../settings"),c=s(u);function s(h){return h&&h.__esModule?h:{default:h}}function p(h,o){if(!(h instanceof o))throw new TypeError("Cannot call a class as a function")}var v=function(){function h(o,i,t){p(this,h),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=t||c.default.RESOLUTION,this.resize(o,i)}return h.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},h.prototype.resize=function(i,t){this.canvas.width=i*this.resolution,this.canvas.height=t*this.resolution},h.prototype.destroy=function(){this.context=null,this.canvas=null},l(h,[{key:"width",get:function(){return this.canvas.width},set:function(i){this.canvas.width=i}},{key:"height",get:function(){return this.canvas.height},set:function(i){this.canvas.height=i}}]),h}();e.default=v},{"../../../settings":101}],80:[function(_,n,e){e.__esModule=!0,e.default=u;function l(c){var s=document.createElement("canvas");s.width=6,s.height=1;var p=s.getContext("2d");return p.fillStyle=c,p.fillRect(0,0,6,1),s}function u(){if(typeof document>"u")return!1;var c=l("#ff00ff"),s=l("#ffff00"),p=document.createElement("canvas");p.width=6,p.height=1;var v=p.getContext("2d");v.globalCompositeOperation="multiply",v.drawImage(c,0,0),v.drawImage(s,2,0);var h=v.getImageData(2,0,1,1);if(!h)return!1;var o=h.data;return o[0]===255&&o[1]===0&&o[2]===0}},{}],81:[function(_,n,e){e.__esModule=!0,e.default=p;var l=_("../../../const"),u=_("./canUseNewCanvasBlendModes"),c=s(u);function s(v){return v&&v.__esModule?v:{default:v}}function p(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return(0,c.default)()?(v[l.BLEND_MODES.NORMAL]="source-over",v[l.BLEND_MODES.ADD]="lighter",v[l.BLEND_MODES.MULTIPLY]="multiply",v[l.BLEND_MODES.SCREEN]="screen",v[l.BLEND_MODES.OVERLAY]="overlay",v[l.BLEND_MODES.DARKEN]="darken",v[l.BLEND_MODES.LIGHTEN]="lighten",v[l.BLEND_MODES.COLOR_DODGE]="color-dodge",v[l.BLEND_MODES.COLOR_BURN]="color-burn",v[l.BLEND_MODES.HARD_LIGHT]="hard-light",v[l.BLEND_MODES.SOFT_LIGHT]="soft-light",v[l.BLEND_MODES.DIFFERENCE]="difference",v[l.BLEND_MODES.EXCLUSION]="exclusion",v[l.BLEND_MODES.HUE]="hue",v[l.BLEND_MODES.SATURATION]="saturate",v[l.BLEND_MODES.COLOR]="color",v[l.BLEND_MODES.LUMINOSITY]="luminosity"):(v[l.BLEND_MODES.NORMAL]="source-over",v[l.BLEND_MODES.ADD]="lighter",v[l.BLEND_MODES.MULTIPLY]="source-over",v[l.BLEND_MODES.SCREEN]="source-over",v[l.BLEND_MODES.OVERLAY]="source-over",v[l.BLEND_MODES.DARKEN]="source-over",v[l.BLEND_MODES.LIGHTEN]="source-over",v[l.BLEND_MODES.COLOR_DODGE]="source-over",v[l.BLEND_MODES.COLOR_BURN]="source-over",v[l.BLEND_MODES.HARD_LIGHT]="source-over",v[l.BLEND_MODES.SOFT_LIGHT]="source-over",v[l.BLEND_MODES.DIFFERENCE]="source-over",v[l.BLEND_MODES.EXCLUSION]="source-over",v[l.BLEND_MODES.HUE]="source-over",v[l.BLEND_MODES.SATURATION]="source-over",v[l.BLEND_MODES.COLOR]="source-over",v[l.BLEND_MODES.LUMINOSITY]="source-over"),v[l.BLEND_MODES.NORMAL_NPM]=v[l.BLEND_MODES.NORMAL],v[l.BLEND_MODES.ADD_NPM]=v[l.BLEND_MODES.ADD],v[l.BLEND_MODES.SCREEN_NPM]=v[l.BLEND_MODES.SCREEN],v}},{"../../../const":46,"./canUseNewCanvasBlendModes":80}],82:[function(_,n,e){e.__esModule=!0;var l=_("../../const"),u=_("../../settings"),c=s(u);function s(h){return h&&h.__esModule?h:{default:h}}function p(h,o){if(!(h instanceof o))throw new TypeError("Cannot call a class as a function")}var v=function(){function h(o){p(this,h),this.renderer=o,this.count=0,this.checkCount=0,this.maxIdle=c.default.GC_MAX_IDLE,this.checkCountMax=c.default.GC_MAX_CHECK_COUNT,this.mode=c.default.GC_MODE}return h.prototype.update=function(){this.count++,this.mode!==l.GC_MODES.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run()))},h.prototype.run=function(){for(var i=this.renderer.textureManager,t=i._managedTextures,r=!1,d=0;d<t.length;d++){var a=t[d];!a._glRenderTargets&&this.count-a.touched>this.maxIdle&&(i.destroyTexture(a,!0),t[d]=null,r=!0)}if(r){for(var f=0,m=0;m<t.length;m++)t[m]!==null&&(t[f++]=t[m]);t.length=f}},h.prototype.unload=function(i){var t=this.renderer.textureManager;i._texture&&i._texture._glRenderTargets&&t.destroyTexture(i._texture,!0);for(var r=i.children.length-1;r>=0;r--)this.unload(i.children[r])},h}();e.default=v},{"../../const":46,"../../settings":101}],83:[function(_,n,e){e.__esModule=!0;var l=_("pixi-gl-core"),u=_("../../const"),c=_("./utils/RenderTarget"),s=v(c),p=_("../../utils");function v(i){return i&&i.__esModule?i:{default:i}}function h(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function i(t){h(this,i),this.renderer=t,this.gl=t.gl,this._managedTextures=[]}return i.prototype.bindTexture=function(){},i.prototype.getTexture=function(){},i.prototype.updateTexture=function(r,d){var a=this.gl,f=!!r._glRenderTargets;if(!r.hasLoaded)return null;var m=this.renderer.boundTextures;if(d===void 0){d=0;for(var g=0;g<m.length;++g)if(m[g]===r){d=g;break}}m[d]=r,a.activeTexture(a.TEXTURE0+d);var x=r._glTextures[this.renderer.CONTEXT_UID];if(x)f?r._glRenderTargets[this.renderer.CONTEXT_UID].resize(r.width,r.height):x.upload(r.source);else{if(f){var T=new s.default(this.gl,r.width,r.height,r.scaleMode,r.resolution);T.resize(r.width,r.height),r._glRenderTargets[this.renderer.CONTEXT_UID]=T,x=T.texture}else x=new l.GLTexture(this.gl,null,null,null,null),x.bind(d),x.premultiplyAlpha=!0,x.upload(r.source);r._glTextures[this.renderer.CONTEXT_UID]=x,r.on("update",this.updateTexture,this),r.on("dispose",this.destroyTexture,this),this._managedTextures.push(r),r.isPowerOfTwo?(r.mipmap&&x.enableMipmap(),r.wrapMode===u.WRAP_MODES.CLAMP?x.enableWrapClamp():r.wrapMode===u.WRAP_MODES.REPEAT?x.enableWrapRepeat():x.enableWrapMirrorRepeat()):x.enableWrapClamp(),r.scaleMode===u.SCALE_MODES.NEAREST?x.enableNearestScaling():x.enableLinearScaling()}return x},i.prototype.destroyTexture=function(r,d){if(r=r.baseTexture||r,!!r.hasLoaded){var a=this.renderer.CONTEXT_UID,f=r._glTextures,m=r._glRenderTargets;if(f[a]&&(this.renderer.unbindTexture(r),f[a].destroy(),r.off("update",this.updateTexture,this),r.off("dispose",this.destroyTexture,this),delete f[a],!d)){var g=this._managedTextures.indexOf(r);g!==-1&&(0,p.removeItems)(this._managedTextures,g,1)}m&&m[a]&&(m[a].destroy(),delete m[a])}},i.prototype.removeAll=function(){for(var r=0;r<this._managedTextures.length;++r){var d=this._managedTextures[r];d._glTextures[this.renderer.CONTEXT_UID]&&delete d._glTextures[this.renderer.CONTEXT_UID]}},i.prototype.destroy=function(){for(var r=0;r<this._managedTextures.length;++r){var d=this._managedTextures[r];this.destroyTexture(d,!0),d.off("update",this.updateTexture,this),d.off("dispose",this.destroyTexture,this)}this._managedTextures=null},i}();e.default=o},{"../../const":46,"../../utils":125,"./utils/RenderTarget":96,"pixi-gl-core":15}],84:[function(_,n,e){e.__esModule=!0;var l=_("../SystemRenderer"),u=I(l),c=_("./managers/MaskManager"),s=I(c),p=_("./managers/StencilManager"),v=I(p),h=_("./managers/FilterManager"),o=I(h),i=_("./utils/RenderTarget"),t=I(i),r=_("./utils/ObjectRenderer"),d=I(r),a=_("./TextureManager"),f=I(a),m=_("../../textures/BaseTexture"),g=I(m),x=_("./TextureGarbageCollector"),T=I(x),y=_("./WebGLState"),w=I(y),b=_("./utils/mapWebGLDrawModesToPixi"),S=I(b),E=_("./utils/validateContext"),O=I(E),P=_("../../utils"),M=_("pixi-gl-core"),A=I(M),B=_("../../const");function I(U){return U&&U.__esModule?U:{default:U}}function R(U,k){if(!(U instanceof k))throw new TypeError("Cannot call a class as a function")}function D(U,k){if(!U)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:U}function L(U,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);U.prototype=Object.create(k&&k.prototype,{constructor:{value:U,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(U,k):U.__proto__=k)}var F=0,N=function(U){L(k,U);function k(G,W,K){R(this,k);var q=D(this,U.call(this,"WebGL",G,W,K));return q.legacy=q.options.legacy,q.legacy&&(A.default.VertexArrayObject.FORCE_NATIVE=!0),q.type=B.RENDERER_TYPE.WEBGL,q.handleContextLost=q.handleContextLost.bind(q),q.handleContextRestored=q.handleContextRestored.bind(q),q.view.addEventListener("webglcontextlost",q.handleContextLost,!1),q.view.addEventListener("webglcontextrestored",q.handleContextRestored,!1),q._contextOptions={alpha:q.transparent,antialias:q.options.antialias,premultipliedAlpha:q.transparent&&q.transparent!=="notMultiplied",stencil:!0,preserveDrawingBuffer:q.options.preserveDrawingBuffer,powerPreference:q.options.powerPreference},q._backgroundColorRgba[3]=q.transparent?0:1,q.maskManager=new s.default(q),q.stencilManager=new v.default(q),q.emptyRenderer=new d.default(q),q.currentRenderer=q.emptyRenderer,q.textureManager=null,q.filterManager=null,q.initPlugins(),q.options.context&&(0,O.default)(q.options.context),q.gl=q.options.context||A.default.createContext(q.view,q._contextOptions),q.CONTEXT_UID=F++,q.state=new w.default(q.gl),q.renderingToScreen=!0,q.boundTextures=null,q._activeShader=null,q._activeVao=null,q._activeRenderTarget=null,q._initContext(),q.drawModes=(0,S.default)(q.gl),q._nextTextureLocation=0,q.setBlendMode(0),q}return k.prototype._initContext=function(){var W=this.gl;W.isContextLost()&&W.getExtension("WEBGL_lose_context")&&W.getExtension("WEBGL_lose_context").restoreContext();var K=W.getParameter(W.MAX_TEXTURE_IMAGE_UNITS);this._activeShader=null,this._activeVao=null,this.boundTextures=new Array(K),this.emptyTextures=new Array(K),this.textureManager=new f.default(this),this.filterManager=new o.default(this),this.textureGC=new T.default(this),this.state.resetToDefault(),this.rootRenderTarget=new t.default(W,this.width,this.height,null,this.resolution,!0),this.rootRenderTarget.clearColor=this._backgroundColorRgba,this.bindRenderTarget(this.rootRenderTarget);var q=new A.default.GLTexture.fromData(W,null,1,1),Q={_glTextures:{}};Q._glTextures[this.CONTEXT_UID]={};for(var J=0;J<K;J++){var V=new g.default;V._glTextures[this.CONTEXT_UID]=q,this.boundTextures[J]=Q,this.emptyTextures[J]=V,this.bindTexture(null,J)}this.emit("context",W),this.resize(this.screen.width,this.screen.height)},k.prototype.render=function(W,K,q,Q,J){if(this.renderingToScreen=!K,this.emit("prerender"),!(!this.gl||this.gl.isContextLost())){if(this._nextTextureLocation=0,K||(this._lastObjectRendered=W),!J){var V=W.parent;W.parent=this._tempDisplayObjectParent,W.updateTransform(),W.parent=V}this.bindRenderTexture(K,Q),this.currentRenderer.start(),(q!==void 0?q:this.clearBeforeRender)&&this._activeRenderTarget.clear(),W.renderWebGL(this),this.currentRenderer.flush(),this.textureGC.update(),this.emit("postrender")}},k.prototype.setObjectRenderer=function(W){this.currentRenderer!==W&&(this.currentRenderer.stop(),this.currentRenderer=W,this.currentRenderer.start())},k.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},k.prototype.resize=function(W,K){u.default.prototype.resize.call(this,W,K),this.rootRenderTarget.resize(W,K),this._activeRenderTarget===this.rootRenderTarget&&(this.rootRenderTarget.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=this.rootRenderTarget.projectionMatrix.toArray(!0)))},k.prototype.setBlendMode=function(W){this.state.setBlendMode(W)},k.prototype.clear=function(W){this._activeRenderTarget.clear(W)},k.prototype.setTransform=function(W){this._activeRenderTarget.transform=W},k.prototype.clearRenderTexture=function(W,K){var q=W.baseTexture,Q=q._glRenderTargets[this.CONTEXT_UID];return Q&&Q.clear(K),this},k.prototype.bindRenderTexture=function(W,K){var q=void 0;if(W){var Q=W.baseTexture;Q._glRenderTargets[this.CONTEXT_UID]||this.textureManager.updateTexture(Q,0),this.unbindTexture(Q),q=Q._glRenderTargets[this.CONTEXT_UID],q.setFrame(W.frame)}else q=this.rootRenderTarget;return q.transform=K,this.bindRenderTarget(q),this},k.prototype.bindRenderTarget=function(W){return W!==this._activeRenderTarget&&(this._activeRenderTarget=W,W.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=W.projectionMatrix.toArray(!0)),this.stencilManager.setMaskStack(W.stencilMaskStack)),this},k.prototype.bindShader=function(W,K){return this._activeShader!==W&&(this._activeShader=W,W.bind(),K!==!1&&(W.uniforms.projectionMatrix=this._activeRenderTarget.projectionMatrix.toArray(!0))),this},k.prototype.bindTexture=function(W,K,q){if(W=W||this.emptyTextures[K],W=W.baseTexture||W,W.touched=this.textureGC.count,q)K=K||0;else{for(var Q=0;Q<this.boundTextures.length;Q++)if(this.boundTextures[Q]===W)return Q;K===void 0&&(this._nextTextureLocation++,this._nextTextureLocation%=this.boundTextures.length,K=this.boundTextures.length-this._nextTextureLocation-1)}var J=this.gl,V=W._glTextures[this.CONTEXT_UID];return V?(this.boundTextures[K]=W,J.activeTexture(J.TEXTURE0+K),J.bindTexture(J.TEXTURE_2D,V.texture)):this.textureManager.updateTexture(W,K),K},k.prototype.unbindTexture=function(W){var K=this.gl;W=W.baseTexture||W;for(var q=0;q<this.boundTextures.length;q++)this.boundTextures[q]===W&&(this.boundTextures[q]=this.emptyTextures[q],K.activeTexture(K.TEXTURE0+q),K.bindTexture(K.TEXTURE_2D,this.emptyTextures[q]._glTextures[this.CONTEXT_UID].texture));return this},k.prototype.createVao=function(){return new A.default.VertexArrayObject(this.gl,this.state.attribState)},k.prototype.bindVao=function(W){return this._activeVao===W?this:(W?W.bind():this._activeVao&&this._activeVao.unbind(),this._activeVao=W,this)},k.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer),this.bindVao(null),this._activeShader=null,this._activeRenderTarget=this.rootRenderTarget;for(var W=0;W<this.boundTextures.length;W++)this.boundTextures[W]=this.emptyTextures[W];return this.rootRenderTarget.activate(),this.state.resetToDefault(),this},k.prototype.handleContextLost=function(W){W.preventDefault()},k.prototype.handleContextRestored=function(){this.textureManager.removeAll(),this.filterManager.destroy(!0),this._initContext()},k.prototype.destroy=function(W){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored),this.textureManager.destroy(),U.prototype.destroy.call(this,W),this.uid=0,this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.maskManager=null,this.filterManager=null,this.textureManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this.gl.useProgram(null),this.gl.getExtension("WEBGL_lose_context")&&this.gl.getExtension("WEBGL_lose_context").loseContext(),this.gl=null},k}(u.default);e.default=N,P.pluginTarget.mixin(N)},{"../../const":46,"../../textures/BaseTexture":112,"../../utils":125,"../SystemRenderer":76,"./TextureGarbageCollector":82,"./TextureManager":83,"./WebGLState":85,"./managers/FilterManager":90,"./managers/MaskManager":91,"./managers/StencilManager":92,"./utils/ObjectRenderer":94,"./utils/RenderTarget":96,"./utils/mapWebGLDrawModesToPixi":99,"./utils/validateContext":100,"pixi-gl-core":15}],85:[function(_,n,e){e.__esModule=!0;var l=_("./utils/mapWebGLBlendModesToPixi"),u=c(l);function c(r){return r&&r.__esModule?r:{default:r}}function s(r,d){if(!(r instanceof d))throw new TypeError("Cannot call a class as a function")}var p=0,v=1,h=2,o=3,i=4,t=function(){function r(d){s(this,r),this.activeState=new Uint8Array(16),this.defaultState=new Uint8Array(16),this.defaultState[0]=1,this.stackIndex=0,this.stack=[],this.gl=d,this.maxAttribs=d.getParameter(d.MAX_VERTEX_ATTRIBS),this.attribState={tempAttribState:new Array(this.maxAttribs),attribState:new Array(this.maxAttribs)},this.blendModes=(0,u.default)(d),this.nativeVaoExtension=d.getExtension("OES_vertex_array_object")||d.getExtension("MOZ_OES_vertex_array_object")||d.getExtension("WEBKIT_OES_vertex_array_object")}return r.prototype.push=function(){var a=this.stack[this.stackIndex];a||(a=this.stack[this.stackIndex]=new Uint8Array(16)),++this.stackIndex;for(var f=0;f<this.activeState.length;f++)a[f]=this.activeState[f]},r.prototype.pop=function(){var a=this.stack[--this.stackIndex];this.setState(a)},r.prototype.setState=function(a){this.setBlend(a[p]),this.setDepthTest(a[v]),this.setFrontFace(a[h]),this.setCullFace(a[o]),this.setBlendMode(a[i])},r.prototype.setBlend=function(a){a=a?1:0,this.activeState[p]!==a&&(this.activeState[p]=a,this.gl[a?"enable":"disable"](this.gl.BLEND))},r.prototype.setBlendMode=function(a){if(a!==this.activeState[i]){this.activeState[i]=a;var f=this.blendModes[a];f.length===2?this.gl.blendFunc(f[0],f[1]):this.gl.blendFuncSeparate(f[0],f[1],f[2],f[3])}},r.prototype.setDepthTest=function(a){a=a?1:0,this.activeState[v]!==a&&(this.activeState[v]=a,this.gl[a?"enable":"disable"](this.gl.DEPTH_TEST))},r.prototype.setCullFace=function(a){a=a?1:0,this.activeState[o]!==a&&(this.activeState[o]=a,this.gl[a?"enable":"disable"](this.gl.CULL_FACE))},r.prototype.setFrontFace=function(a){a=a?1:0,this.activeState[h]!==a&&(this.activeState[h]=a,this.gl.frontFace(this.gl[a?"CW":"CCW"]))},r.prototype.resetAttributes=function(){for(var a=0;a<this.attribState.tempAttribState.length;a++)this.attribState.tempAttribState[a]=0;for(var f=0;f<this.attribState.attribState.length;f++)this.attribState.attribState[f]=0;for(var m=1;m<this.maxAttribs;m++)this.gl.disableVertexAttribArray(m)},r.prototype.resetToDefault=function(){this.nativeVaoExtension&&this.nativeVaoExtension.bindVertexArrayOES(null),this.resetAttributes();for(var a=0;a<this.activeState.length;++a)this.activeState[a]=32;this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.setState(this.defaultState)},r}();e.default=t},{"./utils/mapWebGLBlendModesToPixi":98}],86:[function(_,n,e){e.__esModule=!0;var l=function(){function d(a,f){for(var m=0;m<f.length;m++){var g=f[m];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(a,g.key,g)}}return function(a,f,m){return f&&d(a.prototype,f),m&&d(a,m),a}}(),u=_("./extractUniformsFromSrc"),c=o(u),s=_("../../../utils"),p=_("../../../const"),v=_("../../../settings"),h=o(v);function o(d){return d&&d.__esModule?d:{default:d}}function i(d,a){if(!(d instanceof a))throw new TypeError("Cannot call a class as a function")}var t={},r=function(){function d(a,f,m){i(this,d),this.vertexSrc=a||d.defaultVertexSrc,this.fragmentSrc=f||d.defaultFragmentSrc,this._blendMode=p.BLEND_MODES.NORMAL,this.uniformData=m||(0,c.default)(this.vertexSrc,this.fragmentSrc,"projectionMatrix|uSampler"),this.uniforms={};for(var g in this.uniformData)this.uniforms[g]=this.uniformData[g].value,this.uniformData[g].type&&(this.uniformData[g].type=this.uniformData[g].type.toLowerCase());this.glShaders={},t[this.vertexSrc+this.fragmentSrc]||(t[this.vertexSrc+this.fragmentSrc]=(0,s.uid)()),this.glShaderKey=t[this.vertexSrc+this.fragmentSrc],this.padding=4,this.resolution=h.default.FILTER_RESOLUTION,this.enabled=!0,this.autoFit=!0}return d.prototype.apply=function(f,m,g,x,T){f.applyFilter(this,m,g,x)},l(d,[{key:"blendMode",get:function(){return this._blendMode},set:function(f){this._blendMode=f}}],[{key:"defaultVertexSrc",get:function(){return["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 projectionMatrix;","uniform mat3 filterMatrix;","varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;","   vTextureCoord = aTextureCoord ;","}"].join(`
`)}},{key:"defaultFragmentSrc",get:function(){return["varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","uniform sampler2D uSampler;","uniform sampler2D filterSampler;","void main(void){","   vec4 masky = texture2D(filterSampler, vFilterCoord);","   vec4 sample = texture2D(uSampler, vTextureCoord);","   vec4 color;","   if(mod(vFilterCoord.x, 1.0) > 0.5)","   {","     color = vec4(1.0, 0.0, 0.0, 1.0);","   }","   else","   {","     color = vec4(0.0, 1.0, 0.0, 1.0);","   }","   gl_FragColor = mix(sample, masky, 0.5);","   gl_FragColor *= sample.a;","}"].join(`
`)}}]),d}();e.default=r},{"../../../const":46,"../../../settings":101,"../../../utils":125,"./extractUniformsFromSrc":87}],87:[function(_,n,e){e.__esModule=!0,e.default=p;var l=_("pixi-gl-core"),u=c(l);function c(h){return h&&h.__esModule?h:{default:h}}var s=u.default.shader.defaultValue;function p(h,o,i){var t=v(h),r=v(o);return Object.assign(t,r)}function v(h){for(var o=new RegExp("^(projectionMatrix|uSampler|filterArea|filterClamp)$"),i={},t=void 0,r=h.replace(/\s+/g," ").split(/\s*;\s*/),d=0;d<r.length;d++){var a=r[d].trim();if(a.indexOf("uniform")>-1){var f=a.split(" "),m=f[1],g=f[2],x=1;g.indexOf("[")>-1&&(t=g.split(/\[|]/),g=t[0],x*=Number(t[1])),g.match(o)||(i[g]={value:s(m,x),name:g,type:m})}}return i}},{"pixi-gl-core":15}],88:[function(_,n,e){e.__esModule=!0,e.calculateScreenSpaceMatrix=u,e.calculateNormalizedScreenSpaceMatrix=c,e.calculateSpriteMatrix=s;var l=_("../../../math");function u(p,v,h){var o=p.identity();return o.translate(v.x/h.width,v.y/h.height),o.scale(h.width,h.height),o}function c(p,v,h){var o=p.identity();o.translate(v.x/h.width,v.y/h.height);var i=h.width/v.width,t=h.height/v.height;return o.scale(i,t),o}function s(p,v,h,o){var i=o._texture.orig,t=p.set(h.width,0,0,h.height,v.x,v.y),r=o.worldTransform.copy(l.Matrix.TEMP_MATRIX);return r.invert(),t.prepend(r),t.scale(1/i.width,1/i.height),t.translate(o.anchor.x,o.anchor.y),t}},{"../../../math":70}],89:[function(_,n,e){e.__esModule=!0;var l=_("../Filter"),u=v(l),c=_("../../../../math");_("path");var s=_("../../../../textures/TextureMatrix"),p=v(s);function v(r){return r&&r.__esModule?r:{default:r}}function h(r,d){if(!(r instanceof d))throw new TypeError("Cannot call a class as a function")}function o(r,d){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:r}function i(r,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);r.prototype=Object.create(d&&d.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(r,d):r.__proto__=d)}var t=function(r){i(d,r);function d(a){h(this,d);var f=new c.Matrix,m=o(this,r.call(this,`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`,`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);

    original *= (masky.r * masky.a * alpha * clip);

    gl_FragColor = original;
}
`));return a.renderable=!1,m.maskSprite=a,m.maskMatrix=f,m}return d.prototype.apply=function(f,m,g){var x=this.maskSprite,T=this.maskSprite.texture;T.valid&&(T.transform||(T.transform=new p.default(T,0)),T.transform.update(),this.uniforms.mask=T,this.uniforms.otherMatrix=f.calculateSpriteMatrix(this.maskMatrix,x).prepend(T.transform.mapCoord),this.uniforms.alpha=x.worldAlpha,this.uniforms.maskClamp=T.transform.uClampFrame,f.applyFilter(this,m,g))},d}(u.default);e.default=t},{"../../../../math":70,"../../../../textures/TextureMatrix":116,"../Filter":86,path:8}],90:[function(_,n,e){e.__esModule=!0;var l=_("./WebGLManager"),u=m(l),c=_("../utils/RenderTarget"),s=m(c),p=_("../utils/Quad"),v=m(p),h=_("../../../math"),o=_("../../../Shader"),i=m(o),t=_("../filters/filterTransforms"),r=f(t),d=_("bit-twiddle"),a=m(d);function f(S){if(S&&S.__esModule)return S;var E={};if(S!=null)for(var O in S)Object.prototype.hasOwnProperty.call(S,O)&&(E[O]=S[O]);return E.default=S,E}function m(S){return S&&S.__esModule?S:{default:S}}function g(S,E){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:S}function x(S,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);S.prototype=Object.create(E&&E.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(S,E):S.__proto__=E)}function T(S,E){if(!(S instanceof E))throw new TypeError("Cannot call a class as a function")}var y=function(){function S(){T(this,S),this.renderTarget=null,this.target=null,this.resolution=1,this.sourceFrame=new h.Rectangle,this.destinationFrame=new h.Rectangle,this.filters=[]}return S.prototype.clear=function(){this.filters=null,this.target=null,this.renderTarget=null},S}(),w="screen",b=function(S){x(E,S);function E(O){T(this,E);var P=g(this,S.call(this,O));return P.gl=P.renderer.gl,P.quad=new v.default(P.gl,O.state.attribState),P.shaderCache={},P.pool={},P.filterData=null,P.managedFilters=[],P.renderer.on("prerender",P.onPrerender,P),P._screenWidth=O.view.width,P._screenHeight=O.view.height,P}return E.prototype.pushFilter=function(P,M){var A=this.renderer,B=this.filterData;if(!B){B=this.renderer._activeRenderTarget.filterStack;var I=new y;I.sourceFrame=I.destinationFrame=this.renderer._activeRenderTarget.size,I.renderTarget=A._activeRenderTarget,this.renderer._activeRenderTarget.filterData=B={index:0,stack:[I]},this.filterData=B}var R=B.stack[++B.index],D=B.stack[0].destinationFrame;R||(R=B.stack[B.index]=new y);var L=P.filterArea&&P.filterArea.x===0&&P.filterArea.y===0&&P.filterArea.width===A.screen.width&&P.filterArea.height===A.screen.height,F=M[0].resolution,N=M[0].padding|0,U=L?A.screen:P.filterArea||P.getBounds(!0),k=R.sourceFrame,G=R.destinationFrame;k.x=(U.x*F|0)/F,k.y=(U.y*F|0)/F,k.width=(U.width*F|0)/F,k.height=(U.height*F|0)/F,L||(B.stack[0].renderTarget.transform||M[0].autoFit&&k.fit(D),k.pad(N)),G.width=k.width,G.height=k.height;var W=this.getPotRenderTarget(A.gl,k.width,k.height,F);R.target=P,R.filters=M,R.resolution=F,R.renderTarget=W,W.setFrame(G,k),A.bindRenderTarget(W),W.clear()},E.prototype.popFilter=function(){var P=this.filterData,M=P.stack[P.index-1],A=P.stack[P.index];this.quad.map(A.renderTarget.size,A.sourceFrame).upload();var B=A.filters;if(B.length===1)B[0].apply(this,A.renderTarget,M.renderTarget,!1,A),this.freePotRenderTarget(A.renderTarget);else{var I=A.renderTarget,R=this.getPotRenderTarget(this.renderer.gl,A.sourceFrame.width,A.sourceFrame.height,A.resolution);R.setFrame(A.destinationFrame,A.sourceFrame),R.clear();var D=0;for(D=0;D<B.length-1;++D){B[D].apply(this,I,R,!0,A);var L=I;I=R,R=L}B[D].apply(this,I,M.renderTarget,!1,A),this.freePotRenderTarget(I),this.freePotRenderTarget(R)}A.clear(),P.index--,P.index===0&&(this.filterData=null)},E.prototype.applyFilter=function(P,M,A,B){var I=this.renderer,R=I.gl,D=P.glShaders[I.CONTEXT_UID];D||(P.glShaderKey?(D=this.shaderCache[P.glShaderKey],D||(D=new i.default(this.gl,P.vertexSrc,P.fragmentSrc),P.glShaders[I.CONTEXT_UID]=this.shaderCache[P.glShaderKey]=D,this.managedFilters.push(P))):(D=P.glShaders[I.CONTEXT_UID]=new i.default(this.gl,P.vertexSrc,P.fragmentSrc),this.managedFilters.push(P)),I.bindVao(null),this.quad.initVao(D)),I.bindVao(this.quad.vao),I.bindRenderTarget(A),B&&(R.disable(R.SCISSOR_TEST),I.clear(),R.enable(R.SCISSOR_TEST)),A===I.maskManager.scissorRenderTarget&&I.maskManager.pushScissorMask(null,I.maskManager.scissorData),I.bindShader(D);var L=this.renderer.emptyTextures[0];this.renderer.boundTextures[0]=L,this.syncUniforms(D,P),I.state.setBlendMode(P.blendMode),R.activeTexture(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,M.texture.texture),this.quad.vao.draw(this.renderer.gl.TRIANGLES,6,0),R.bindTexture(R.TEXTURE_2D,L._glTextures[this.renderer.CONTEXT_UID].texture)},E.prototype.syncUniforms=function(P,M){var A=M.uniformData,B=M.uniforms,I=1,R=void 0;if(P.uniforms.filterArea){R=this.filterData.stack[this.filterData.index];var D=P.uniforms.filterArea;D[0]=R.renderTarget.size.width,D[1]=R.renderTarget.size.height,D[2]=R.sourceFrame.x,D[3]=R.sourceFrame.y,P.uniforms.filterArea=D}if(P.uniforms.filterClamp){R=R||this.filterData.stack[this.filterData.index];var L=P.uniforms.filterClamp;L[0]=0,L[1]=0,L[2]=(R.sourceFrame.width-1)/R.renderTarget.size.width,L[3]=(R.sourceFrame.height-1)/R.renderTarget.size.height,P.uniforms.filterClamp=L}for(var F in A){var N=A[F].type;if(N==="sampler2d"&&B[F]!==0){if(B[F].baseTexture)P.uniforms[F]=this.renderer.bindTexture(B[F].baseTexture,I);else{P.uniforms[F]=I;var U=this.renderer.gl;this.renderer.boundTextures[I]=this.renderer.emptyTextures[I],U.activeTexture(U.TEXTURE0+I),B[F].texture.bind()}I++}else if(N==="mat3")B[F].a!==void 0?P.uniforms[F]=B[F].toArray(!0):P.uniforms[F]=B[F];else if(N==="vec2")if(B[F].x!==void 0){var k=P.uniforms[F]||new Float32Array(2);k[0]=B[F].x,k[1]=B[F].y,P.uniforms[F]=k}else P.uniforms[F]=B[F];else N==="float"?P.uniforms.data[F].value!==A[F]&&(P.uniforms[F]=B[F]):P.uniforms[F]=B[F]}},E.prototype.getRenderTarget=function(P,M){var A=this.filterData.stack[this.filterData.index],B=this.getPotRenderTarget(this.renderer.gl,A.sourceFrame.width,A.sourceFrame.height,M||A.resolution);return B.setFrame(A.destinationFrame,A.sourceFrame),B},E.prototype.returnRenderTarget=function(P){this.freePotRenderTarget(P)},E.prototype.calculateScreenSpaceMatrix=function(P){var M=this.filterData.stack[this.filterData.index];return r.calculateScreenSpaceMatrix(P,M.sourceFrame,M.renderTarget.size)},E.prototype.calculateNormalizedScreenSpaceMatrix=function(P){var M=this.filterData.stack[this.filterData.index];return r.calculateNormalizedScreenSpaceMatrix(P,M.sourceFrame,M.renderTarget.size,M.destinationFrame)},E.prototype.calculateSpriteMatrix=function(P,M){var A=this.filterData.stack[this.filterData.index];return r.calculateSpriteMatrix(P,A.sourceFrame,A.renderTarget.size,M)},E.prototype.destroy=function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,M=this.renderer,A=this.managedFilters;M.off("prerender",this.onPrerender,this);for(var B=0;B<A.length;B++)P||A[B].glShaders[M.CONTEXT_UID].destroy(),delete A[B].glShaders[M.CONTEXT_UID];this.shaderCache={},P?this.pool={}:this.emptyPool()},E.prototype.getPotRenderTarget=function(P,M,A,B){var I=w;M*=B,A*=B,(M!==this._screenWidth||A!==this._screenHeight)&&(M=a.default.nextPow2(M),A=a.default.nextPow2(A),I=(M&65535)<<16|A&65535),this.pool[I]||(this.pool[I]=[]);var R=this.pool[I].pop();if(!R){var D=this.renderer.boundTextures[0];P.activeTexture(P.TEXTURE0),R=new s.default(P,M,A,null,1),P.bindTexture(P.TEXTURE_2D,D._glTextures[this.renderer.CONTEXT_UID].texture)}return R.resolution=B,R.defaultFrame.width=R.size.width=M/B,R.defaultFrame.height=R.size.height=A/B,R.filterPoolKey=I,R},E.prototype.emptyPool=function(){for(var P in this.pool){var M=this.pool[P];if(M)for(var A=0;A<M.length;A++)M[A].destroy(!0)}this.pool={}},E.prototype.freePotRenderTarget=function(P){this.pool[P.filterPoolKey].push(P)},E.prototype.onPrerender=function(){if(this._screenWidth!==this.renderer.view.width||this._screenHeight!==this.renderer.view.height){this._screenWidth=this.renderer.view.width,this._screenHeight=this.renderer.view.height;var P=this.pool[w];if(P)for(var M=0;M<P.length;M++)P[M].destroy(!0);this.pool[w]=[]}},E}(u.default);e.default=b},{"../../../Shader":44,"../../../math":70,"../filters/filterTransforms":88,"../utils/Quad":95,"../utils/RenderTarget":96,"./WebGLManager":93,"bit-twiddle":1}],91:[function(_,n,e){e.__esModule=!0;var l=_("./WebGLManager"),u=p(l),c=_("../filters/spriteMask/SpriteMaskFilter"),s=p(c);function p(t){return t&&t.__esModule?t:{default:t}}function v(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function h(t,r){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&(typeof r=="object"||typeof r=="function")?r:t}function o(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof r);t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(t,r):t.__proto__=r)}var i=function(t){o(r,t);function r(d){v(this,r);var a=h(this,t.call(this,d));return a.scissor=!1,a.scissorData=null,a.scissorRenderTarget=null,a.enableScissor=!0,a.alphaMaskPool=[],a.alphaMaskIndex=0,a}return r.prototype.pushMask=function(a,f){if(f.texture)this.pushSpriteMask(a,f);else if(this.enableScissor&&!this.scissor&&this.renderer._activeRenderTarget.root&&!this.renderer.stencilManager.stencilMaskStack.length&&f.isFastRect()){var m=f.worldTransform,g=Math.atan2(m.b,m.a);g=Math.round(g*(180/Math.PI)),g%90?this.pushStencilMask(f):this.pushScissorMask(a,f)}else this.pushStencilMask(f)},r.prototype.popMask=function(a,f){f.texture?this.popSpriteMask(a,f):this.enableScissor&&!this.renderer.stencilManager.stencilMaskStack.length?this.popScissorMask(a,f):this.popStencilMask(a,f)},r.prototype.pushSpriteMask=function(a,f){var m=this.alphaMaskPool[this.alphaMaskIndex];m||(m=this.alphaMaskPool[this.alphaMaskIndex]=[new s.default(f)]),m[0].resolution=this.renderer.resolution,m[0].maskSprite=f,a.filterArea=f.getBounds(!0),this.renderer.filterManager.pushFilter(a,m),this.alphaMaskIndex++},r.prototype.popSpriteMask=function(){this.renderer.filterManager.popFilter(),this.alphaMaskIndex--},r.prototype.pushStencilMask=function(a){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.pushStencil(a)},r.prototype.popStencilMask=function(){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.popStencil()},r.prototype.pushScissorMask=function(a,f){f.renderable=!0;var m=this.renderer._activeRenderTarget,g=f.getBounds();g.fit(m.size),f.renderable=!1,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST);var x=this.renderer.resolution;this.renderer.gl.scissor(g.x*x,(m.root?m.size.height-g.y-g.height:g.y)*x,g.width*x,g.height*x),this.scissorRenderTarget=m,this.scissorData=f,this.scissor=!0},r.prototype.popScissorMask=function(){this.scissorRenderTarget=null,this.scissorData=null,this.scissor=!1;var a=this.renderer.gl;a.disable(a.SCISSOR_TEST)},r}(u.default);e.default=i},{"../filters/spriteMask/SpriteMaskFilter":89,"./WebGLManager":93}],92:[function(_,n,e){e.__esModule=!0;var l=_("./WebGLManager"),u=c(l);function c(o){return o&&o.__esModule?o:{default:o}}function s(o,i){if(!(o instanceof i))throw new TypeError("Cannot call a class as a function")}function p(o,i){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i&&(typeof i=="object"||typeof i=="function")?i:o}function v(o,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);o.prototype=Object.create(i&&i.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(o,i):o.__proto__=i)}var h=function(o){v(i,o);function i(t){s(this,i);var r=p(this,o.call(this,t));return r.stencilMaskStack=null,r}return i.prototype.setMaskStack=function(r){this.stencilMaskStack=r;var d=this.renderer.gl;r.length===0?d.disable(d.STENCIL_TEST):d.enable(d.STENCIL_TEST)},i.prototype.pushStencil=function(r){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.renderer._activeRenderTarget.attachStencilBuffer();var d=this.renderer.gl,a=this.stencilMaskStack.length;a===0&&d.enable(d.STENCIL_TEST),this.stencilMaskStack.push(r),d.colorMask(!1,!1,!1,!1),d.stencilFunc(d.EQUAL,a,this._getBitwiseMask()),d.stencilOp(d.KEEP,d.KEEP,d.INCR),this.renderer.plugins.graphics.render(r),this._useCurrent()},i.prototype.popStencil=function(){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);var r=this.renderer.gl,d=this.stencilMaskStack.pop();this.stencilMaskStack.length===0?(r.disable(r.STENCIL_TEST),r.clear(r.STENCIL_BUFFER_BIT),r.clearStencil(0)):(r.colorMask(!1,!1,!1,!1),r.stencilOp(r.KEEP,r.KEEP,r.DECR),this.renderer.plugins.graphics.render(d),this._useCurrent())},i.prototype._useCurrent=function(){var r=this.renderer.gl;r.colorMask(!0,!0,!0,!0),r.stencilFunc(r.EQUAL,this.stencilMaskStack.length,this._getBitwiseMask()),r.stencilOp(r.KEEP,r.KEEP,r.KEEP)},i.prototype._getBitwiseMask=function(){return(1<<this.stencilMaskStack.length)-1},i.prototype.destroy=function(){u.default.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},i}(u.default);e.default=h},{"./WebGLManager":93}],93:[function(_,n,e){e.__esModule=!0;function l(c,s){if(!(c instanceof s))throw new TypeError("Cannot call a class as a function")}var u=function(){function c(s){l(this,c),this.renderer=s,this.renderer.on("context",this.onContextChange,this)}return c.prototype.onContextChange=function(){},c.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null},c}();e.default=u},{}],94:[function(_,n,e){e.__esModule=!0;var l=_("../managers/WebGLManager"),u=c(l);function c(o){return o&&o.__esModule?o:{default:o}}function s(o,i){if(!(o instanceof i))throw new TypeError("Cannot call a class as a function")}function p(o,i){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i&&(typeof i=="object"||typeof i=="function")?i:o}function v(o,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);o.prototype=Object.create(i&&i.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(o,i):o.__proto__=i)}var h=function(o){v(i,o);function i(){return s(this,i),p(this,o.apply(this,arguments))}return i.prototype.start=function(){},i.prototype.stop=function(){this.flush()},i.prototype.flush=function(){},i.prototype.render=function(r){},i}(u.default);e.default=h},{"../managers/WebGLManager":93}],95:[function(_,n,e){e.__esModule=!0;var l=_("pixi-gl-core"),u=p(l),c=_("../../../utils/createIndicesForQuads"),s=p(c);function p(o){return o&&o.__esModule?o:{default:o}}function v(o,i){if(!(o instanceof i))throw new TypeError("Cannot call a class as a function")}var h=function(){function o(i,t){v(this,o),this.gl=i,this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.interleaved=new Float32Array(8*2);for(var r=0;r<4;r++)this.interleaved[r*4]=this.vertices[r*2],this.interleaved[r*4+1]=this.vertices[r*2+1],this.interleaved[r*4+2]=this.uvs[r*2],this.interleaved[r*4+3]=this.uvs[r*2+1];this.indices=(0,s.default)(1),this.vertexBuffer=u.default.GLBuffer.createVertexBuffer(i,this.interleaved,i.STATIC_DRAW),this.indexBuffer=u.default.GLBuffer.createIndexBuffer(i,this.indices,i.STATIC_DRAW),this.vao=new u.default.VertexArrayObject(i,t)}return o.prototype.initVao=function(t){this.vao.clear().addIndex(this.indexBuffer).addAttribute(this.vertexBuffer,t.attributes.aVertexPosition,this.gl.FLOAT,!1,4*4,0).addAttribute(this.vertexBuffer,t.attributes.aTextureCoord,this.gl.FLOAT,!1,4*4,2*4)},o.prototype.map=function(t,r){var d=0,a=0;return this.uvs[0]=d,this.uvs[1]=a,this.uvs[2]=d+r.width/t.width,this.uvs[3]=a,this.uvs[4]=d+r.width/t.width,this.uvs[5]=a+r.height/t.height,this.uvs[6]=d,this.uvs[7]=a+r.height/t.height,d=r.x,a=r.y,this.vertices[0]=d,this.vertices[1]=a,this.vertices[2]=d+r.width,this.vertices[3]=a,this.vertices[4]=d+r.width,this.vertices[5]=a+r.height,this.vertices[6]=d,this.vertices[7]=a+r.height,this},o.prototype.upload=function(){for(var t=0;t<4;t++)this.interleaved[t*4]=this.vertices[t*2],this.interleaved[t*4+1]=this.vertices[t*2+1],this.interleaved[t*4+2]=this.uvs[t*2],this.interleaved[t*4+3]=this.uvs[t*2+1];return this.vertexBuffer.upload(this.interleaved),this},o.prototype.destroy=function(){var t=this.gl;t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.indexBuffer)},o}();e.default=h},{"../../../utils/createIndicesForQuads":123,"pixi-gl-core":15}],96:[function(_,n,e){e.__esModule=!0;var l=_("../../../math"),u=_("../../../const"),c=_("../../../settings"),s=v(c),p=_("pixi-gl-core");function v(i){return i&&i.__esModule?i:{default:i}}function h(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function i(t,r,d,a,f,m){h(this,i),this.gl=t,this.frameBuffer=null,this.texture=null,this.clearColor=[0,0,0,0],this.size=new l.Rectangle(0,0,1,1),this.resolution=f||s.default.RESOLUTION,this.projectionMatrix=new l.Matrix,this.transform=null,this.frame=null,this.defaultFrame=new l.Rectangle,this.destinationFrame=null,this.sourceFrame=null,this.stencilBuffer=null,this.stencilMaskStack=[],this.filterData=null,this.filterPoolKey="",this.scaleMode=a!==void 0?a:s.default.SCALE_MODE,this.root=m,this.root?(this.frameBuffer=new p.GLFramebuffer(t,100,100),this.frameBuffer.framebuffer=null):(this.frameBuffer=p.GLFramebuffer.createRGBA(t,100,100),this.scaleMode===u.SCALE_MODES.NEAREST?this.frameBuffer.texture.enableNearestScaling():this.frameBuffer.texture.enableLinearScaling(),this.texture=this.frameBuffer.texture),this.setFrame(),this.resize(r,d)}return i.prototype.clear=function(r){var d=r||this.clearColor;this.frameBuffer.clear(d[0],d[1],d[2],d[3])},i.prototype.attachStencilBuffer=function(){this.root||this.frameBuffer.enableStencil()},i.prototype.setFrame=function(r,d){this.destinationFrame=r||this.destinationFrame||this.defaultFrame,this.sourceFrame=d||this.sourceFrame||this.destinationFrame},i.prototype.activate=function(){var r=this.gl;this.frameBuffer.bind(),this.calculateProjection(this.destinationFrame,this.sourceFrame),this.transform&&this.projectionMatrix.append(this.transform),this.destinationFrame!==this.sourceFrame?(r.enable(r.SCISSOR_TEST),r.scissor(this.destinationFrame.x|0,this.destinationFrame.y|0,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)):r.disable(r.SCISSOR_TEST),r.viewport(this.destinationFrame.x|0,this.destinationFrame.y|0,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)},i.prototype.calculateProjection=function(r,d){var a=this.projectionMatrix;d=d||r,a.identity(),this.root?(a.a=1/r.width*2,a.d=-1/r.height*2,a.tx=-1-d.x*a.a,a.ty=1-d.y*a.d):(a.a=1/r.width*2,a.d=1/r.height*2,a.tx=-1-d.x*a.a,a.ty=-1-d.y*a.d)},i.prototype.resize=function(r,d){if(r=r|0,d=d|0,!(this.size.width===r&&this.size.height===d)){this.size.width=r,this.size.height=d,this.defaultFrame.width=r,this.defaultFrame.height=d,this.frameBuffer.resize(r*this.resolution,d*this.resolution);var a=this.frame||this.size;this.calculateProjection(a)}},i.prototype.destroy=function(){this.frameBuffer.destroy(),this.frameBuffer=null,this.texture=null},i}();e.default=o},{"../../../const":46,"../../../math":70,"../../../settings":101,"pixi-gl-core":15}],97:[function(_,n,e){e.__esModule=!0,e.default=p;var l=_("pixi-gl-core"),u=c(l);function c(h){return h&&h.__esModule?h:{default:h}}var s=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function p(h,o){var i=!o;if(h===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");if(i){var t=document.createElement("canvas");t.width=1,t.height=1,o=u.default.createContext(t)}for(var r=o.createShader(o.FRAGMENT_SHADER);;){var d=s.replace(/%forloop%/gi,v(h));if(o.shaderSource(r,d),o.compileShader(r),!o.getShaderParameter(r,o.COMPILE_STATUS))h=h/2|0;else break}return i&&o.getExtension("WEBGL_lose_context")&&o.getExtension("WEBGL_lose_context").loseContext(),h}function v(h){for(var o="",i=0;i<h;++i)i>0&&(o+=`
else `),i<h-1&&(o+="if(test == "+i+".0){}");return o}},{"pixi-gl-core":15}],98:[function(_,n,e){e.__esModule=!0,e.default=u;var l=_("../../../const");function u(c){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return s[l.BLEND_MODES.NORMAL]=[c.ONE,c.ONE_MINUS_SRC_ALPHA],s[l.BLEND_MODES.ADD]=[c.ONE,c.DST_ALPHA],s[l.BLEND_MODES.MULTIPLY]=[c.DST_COLOR,c.ONE_MINUS_SRC_ALPHA],s[l.BLEND_MODES.SCREEN]=[c.ONE,c.ONE_MINUS_SRC_COLOR],s[l.BLEND_MODES.OVERLAY]=[c.ONE,c.ONE_MINUS_SRC_ALPHA],s[l.BLEND_MODES.DARKEN]=[c.ONE,c.ONE_MINUS_SRC_ALPHA],s[l.BLEND_MODES.LIGHTEN]=[c.ONE,c.ONE_MINUS_SRC_ALPHA],s[l.BLEND_MODES.COLOR_DODGE]=[c.ONE,c.ONE_MINUS_SRC_ALPHA],s[l.BLEND_MODES.COLOR_BURN]=[c.ONE,c.ONE_MINUS_SRC_ALPHA],s[l.BLEND_MODES.HARD_LIGHT]=[c.ONE,c.ONE_MINUS_SRC_ALPHA],s[l.BLEND_MODES.SOFT_LIGHT]=[c.ONE,c.ONE_MINUS_SRC_ALPHA],s[l.BLEND_MODES.DIFFERENCE]=[c.ONE,c.ONE_MINUS_SRC_ALPHA],s[l.BLEND_MODES.EXCLUSION]=[c.ONE,c.ONE_MINUS_SRC_ALPHA],s[l.BLEND_MODES.HUE]=[c.ONE,c.ONE_MINUS_SRC_ALPHA],s[l.BLEND_MODES.SATURATION]=[c.ONE,c.ONE_MINUS_SRC_ALPHA],s[l.BLEND_MODES.COLOR]=[c.ONE,c.ONE_MINUS_SRC_ALPHA],s[l.BLEND_MODES.LUMINOSITY]=[c.ONE,c.ONE_MINUS_SRC_ALPHA],s[l.BLEND_MODES.NORMAL_NPM]=[c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA,c.ONE,c.ONE_MINUS_SRC_ALPHA],s[l.BLEND_MODES.ADD_NPM]=[c.SRC_ALPHA,c.DST_ALPHA,c.ONE,c.DST_ALPHA],s[l.BLEND_MODES.SCREEN_NPM]=[c.SRC_ALPHA,c.ONE_MINUS_SRC_COLOR,c.ONE,c.ONE_MINUS_SRC_COLOR],s}},{"../../../const":46}],99:[function(_,n,e){e.__esModule=!0,e.default=u;var l=_("../../../const");function u(c){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return s[l.DRAW_MODES.POINTS]=c.POINTS,s[l.DRAW_MODES.LINES]=c.LINES,s[l.DRAW_MODES.LINE_LOOP]=c.LINE_LOOP,s[l.DRAW_MODES.LINE_STRIP]=c.LINE_STRIP,s[l.DRAW_MODES.TRIANGLES]=c.TRIANGLES,s[l.DRAW_MODES.TRIANGLE_STRIP]=c.TRIANGLE_STRIP,s[l.DRAW_MODES.TRIANGLE_FAN]=c.TRIANGLE_FAN,s}},{"../../../const":46}],100:[function(_,n,e){e.__esModule=!0,e.default=l;function l(u){var c=u.getContextAttributes();c.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")}},{}],101:[function(_,n,e){e.__esModule=!0;var l=_("./utils/maxRecommendedTextures"),u=p(l),c=_("./utils/canUploadSameBuffer"),s=p(c);function p(v){return v&&v.__esModule?v:{default:v}}e.default={TARGET_FPMS:.06,MIPMAP_TEXTURES:!0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(0,u.default)(32),SPRITE_BATCH_SIZE:4096,RETINA_PREFIX:/@([0-9\.]+)x/,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1,width:800,height:600,legacy:!1},TRANSFORM_MODE:0,GC_MODE:0,GC_MAX_IDLE:60*60,GC_MAX_CHECK_COUNT:60*10,WRAP_MODE:0,SCALE_MODE:0,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:"mediump",CAN_UPLOAD_SAME_BUFFER:(0,s.default)(),MESH_CANVAS_PADDING:0}},{"./utils/canUploadSameBuffer":122,"./utils/maxRecommendedTextures":127}],102:[function(_,n,e){e.__esModule=!0;var l=function(){function m(g,x){for(var T=0;T<x.length;T++){var y=x[T];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(g,y.key,y)}}return function(g,x,T){return x&&m(g.prototype,x),T&&m(g,T),g}}(),u=_("../math"),c=_("../utils"),s=_("../const"),p=_("../textures/Texture"),v=i(p),h=_("../display/Container"),o=i(h);function i(m){return m&&m.__esModule?m:{default:m}}function t(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")}function r(m,g){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:m}function d(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);m.prototype=Object.create(g&&g.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(m,g):m.__proto__=g)}var a=new u.Point,f=function(m){d(g,m);function g(x){t(this,g);var T=r(this,m.call(this));return T._anchor=new u.ObservablePoint(T._onAnchorUpdate,T,x?x.defaultAnchor.x:0,x?x.defaultAnchor.y:0),T._texture=null,T._width=0,T._height=0,T._tint=null,T._tintRGB=null,T.tint=16777215,T.blendMode=s.BLEND_MODES.NORMAL,T.shader=null,T.cachedTint=16777215,T.texture=x||v.default.EMPTY,T.vertexData=new Float32Array(8),T.vertexTrimmedData=null,T._transformID=-1,T._textureID=-1,T._transformTrimmedID=-1,T._textureTrimmedID=-1,T.pluginName="sprite",T}return g.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this.cachedTint=16777215,this._width&&(this.scale.x=(0,c.sign)(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=(0,c.sign)(this.scale.y)*this._height/this._texture.orig.height)},g.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},g.prototype.calculateVertices=function(){if(!(this._transformID===this.transform._worldID&&this._textureID===this._texture._updateID)){this._transformID=this.transform._worldID,this._textureID=this._texture._updateID;var T=this._texture,y=this.transform.worldTransform,w=y.a,b=y.b,S=y.c,E=y.d,O=y.tx,P=y.ty,M=this.vertexData,A=T.trim,B=T.orig,I=this._anchor,R=0,D=0,L=0,F=0;A?(D=A.x-I._x*B.width,R=D+A.width,F=A.y-I._y*B.height,L=F+A.height):(D=-I._x*B.width,R=D+B.width,F=-I._y*B.height,L=F+B.height),M[0]=w*D+S*F+O,M[1]=E*F+b*D+P,M[2]=w*R+S*F+O,M[3]=E*F+b*R+P,M[4]=w*R+S*L+O,M[5]=E*L+b*R+P,M[6]=w*D+S*L+O,M[7]=E*L+b*D+P}},g.prototype.calculateTrimmedVertices=function(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var T=this._texture,y=this.vertexTrimmedData,w=T.orig,b=this._anchor,S=this.transform.worldTransform,E=S.a,O=S.b,P=S.c,M=S.d,A=S.tx,B=S.ty,I=-b._x*w.width,R=I+w.width,D=-b._y*w.height,L=D+w.height;y[0]=E*I+P*D+A,y[1]=M*D+O*I+B,y[2]=E*R+P*D+A,y[3]=M*D+O*R+B,y[4]=E*R+P*L+A,y[5]=M*L+O*R+B,y[6]=E*I+P*L+A,y[7]=M*L+O*I+B},g.prototype._renderWebGL=function(T){this.calculateVertices(),T.setObjectRenderer(T.plugins[this.pluginName]),T.plugins[this.pluginName].render(this)},g.prototype._renderCanvas=function(T){T.plugins[this.pluginName].render(this)},g.prototype._calculateBounds=function(){var T=this._texture.trim,y=this._texture.orig;!T||T.width===y.width&&T.height===y.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},g.prototype.getLocalBounds=function(T){return this.children.length===0?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),T||(this._localBoundsRect||(this._localBoundsRect=new u.Rectangle),T=this._localBoundsRect),this._bounds.getRectangle(T)):m.prototype.getLocalBounds.call(this,T)},g.prototype.containsPoint=function(T){this.worldTransform.applyInverse(T,a);var y=this._texture.orig.width,w=this._texture.orig.height,b=-y*this.anchor.x,S=0;return a.x>=b&&a.x<b+y&&(S=-w*this.anchor.y,a.y>=S&&a.y<S+w)},g.prototype.destroy=function(T){m.prototype.destroy.call(this,T),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null;var y=typeof T=="boolean"?T:T&&T.texture;if(y){var w=typeof T=="boolean"?T:T&&T.baseTexture;this._texture.destroy(!!w)}this._texture=null,this.shader=null},g.from=function(T){return new g(v.default.from(T))},g.fromFrame=function(T){var y=c.TextureCache[T];if(!y)throw new Error('The frameId "'+T+'" does not exist in the texture cache');return new g(y)},g.fromImage=function(T,y,w){return new g(v.default.fromImage(T,y,w))},l(g,[{key:"width",get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(T){var y=(0,c.sign)(this.scale.x)||1;this.scale.x=y*T/this._texture.orig.width,this._width=T}},{key:"height",get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(T){var y=(0,c.sign)(this.scale.y)||1;this.scale.y=y*T/this._texture.orig.height,this._height=T}},{key:"anchor",get:function(){return this._anchor},set:function(T){this._anchor.copy(T)}},{key:"tint",get:function(){return this._tint},set:function(T){this._tint=T,this._tintRGB=(T>>16)+(T&65280)+((T&255)<<16)}},{key:"texture",get:function(){return this._texture},set:function(T){this._texture!==T&&(this._texture=T||v.default.EMPTY,this.cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,T&&(T.baseTexture.hasLoaded?this._onTextureUpdate():T.once("update",this._onTextureUpdate,this)))}}]),g}(o.default);e.default=f},{"../const":46,"../display/Container":48,"../math":70,"../textures/Texture":115,"../utils":125}],103:[function(_,n,e){e.__esModule=!0;var l=_("../../renderers/canvas/CanvasRenderer"),u=h(l),c=_("../../const"),s=_("../../math"),p=_("./CanvasTinter"),v=h(p);function h(r){return r&&r.__esModule?r:{default:r}}function o(r,d){if(!(r instanceof d))throw new TypeError("Cannot call a class as a function")}var i=new s.Matrix,t=function(){function r(d){o(this,r),this.renderer=d}return r.prototype.render=function(a){var f=a._texture,m=this.renderer,g=f._frame.width,x=f._frame.height,T=a.transform.worldTransform,y=0,w=0;if(!(f.orig.width<=0||f.orig.height<=0||!f.baseTexture.source)&&(m.setBlendMode(a.blendMode),f.valid)){m.context.globalAlpha=a.worldAlpha;var b=f.baseTexture.scaleMode===c.SCALE_MODES.LINEAR;m.smoothProperty&&m.context[m.smoothProperty]!==b&&(m.context[m.smoothProperty]=b),f.trim?(y=f.trim.width/2+f.trim.x-a.anchor.x*f.orig.width,w=f.trim.height/2+f.trim.y-a.anchor.y*f.orig.height):(y=(.5-a.anchor.x)*f.orig.width,w=(.5-a.anchor.y)*f.orig.height),f.rotate&&(T.copy(i),T=i,s.GroupD8.matrixAppendRotationInv(T,f.rotate,y,w),y=0,w=0),y-=g/2,w-=x/2,m.roundPixels?(m.context.setTransform(T.a,T.b,T.c,T.d,T.tx*m.resolution|0,T.ty*m.resolution|0),y=y|0,w=w|0):m.context.setTransform(T.a,T.b,T.c,T.d,T.tx*m.resolution,T.ty*m.resolution);var S=f.baseTexture.resolution;a.tint!==16777215?((a.cachedTint!==a.tint||a.tintedTexture.tintId!==a._texture._updateID)&&(a.cachedTint=a.tint,a.tintedTexture=v.default.getTintedTexture(a,a.tint)),m.context.drawImage(a.tintedTexture,0,0,g*S,x*S,y*m.resolution,w*m.resolution,g*m.resolution,x*m.resolution)):m.context.drawImage(f.baseTexture.source,f._frame.x*S,f._frame.y*S,g*S,x*S,y*m.resolution,w*m.resolution,g*m.resolution,x*m.resolution)}},r.prototype.destroy=function(){this.renderer=null},r}();e.default=t,u.default.registerPlugin("sprite",t)},{"../../const":46,"../../math":70,"../../renderers/canvas/CanvasRenderer":77,"./CanvasTinter":104}],104:[function(_,n,e){e.__esModule=!0;var l=_("../../utils"),u=_("../../renderers/canvas/utils/canUseNewCanvasBlendModes"),c=s(u);function s(v){return v&&v.__esModule?v:{default:v}}var p={getTintedTexture:function(h,o){var i=h._texture;o=p.roundColor(o);var t="#"+("00000"+(o|0).toString(16)).substr(-6);i.tintCache=i.tintCache||{};var r=i.tintCache[t],d=void 0;if(r){if(r.tintId===i._updateID)return i.tintCache[t];d=i.tintCache[t]}else d=p.canvas||document.createElement("canvas");if(p.tintMethod(i,o,d),d.tintId=i._updateID,p.convertTintToImage){var a=new Image;a.src=d.toDataURL(),i.tintCache[t]=a}else i.tintCache[t]=d,p.canvas=null;return d},tintWithMultiply:function(h,o,i){var t=i.getContext("2d"),r=h._frame.clone(),d=h.baseTexture.resolution;r.x*=d,r.y*=d,r.width*=d,r.height*=d,i.width=Math.ceil(r.width),i.height=Math.ceil(r.height),t.save(),t.fillStyle="#"+("00000"+(o|0).toString(16)).substr(-6),t.fillRect(0,0,r.width,r.height),t.globalCompositeOperation="multiply",t.drawImage(h.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height),t.globalCompositeOperation="destination-atop",t.drawImage(h.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height),t.restore()},tintWithOverlay:function(h,o,i){var t=i.getContext("2d"),r=h._frame.clone(),d=h.baseTexture.resolution;r.x*=d,r.y*=d,r.width*=d,r.height*=d,i.width=Math.ceil(r.width),i.height=Math.ceil(r.height),t.save(),t.globalCompositeOperation="copy",t.fillStyle="#"+("00000"+(o|0).toString(16)).substr(-6),t.fillRect(0,0,r.width,r.height),t.globalCompositeOperation="destination-atop",t.drawImage(h.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height),t.restore()},tintWithPerPixel:function(h,o,i){var t=i.getContext("2d"),r=h._frame.clone(),d=h.baseTexture.resolution;r.x*=d,r.y*=d,r.width*=d,r.height*=d,i.width=Math.ceil(r.width),i.height=Math.ceil(r.height),t.save(),t.globalCompositeOperation="copy",t.drawImage(h.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height),t.restore();for(var a=(0,l.hex2rgb)(o),f=a[0],m=a[1],g=a[2],x=t.getImageData(0,0,r.width,r.height),T=x.data,y=0;y<T.length;y+=4)T[y+0]*=f,T[y+1]*=m,T[y+2]*=g;t.putImageData(x,0,0)},roundColor:function(h){var o=p.cacheStepsPerColorChannel,i=(0,l.hex2rgb)(h);return i[0]=Math.min(255,i[0]/o*o),i[1]=Math.min(255,i[1]/o*o),i[2]=Math.min(255,i[2]/o*o),(0,l.rgb2hex)(i)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:(0,c.default)(),tintMethod:0};p.tintMethod=p.canUseMultiply?p.tintWithMultiply:p.tintWithPerPixel,e.default=p},{"../../renderers/canvas/utils/canUseNewCanvasBlendModes":80,"../../utils":125}],105:[function(_,n,e){e.__esModule=!0;function l(c,s){if(!(c instanceof s))throw new TypeError("Cannot call a class as a function")}var u=function(){function c(s){l(this,c),this.vertices=new ArrayBuffer(s),this.float32View=new Float32Array(this.vertices),this.uint32View=new Uint32Array(this.vertices)}return c.prototype.destroy=function(){this.vertices=null,this.positions=null,this.uvs=null,this.colors=null},c}();e.default=u},{}],106:[function(_,n,e){e.__esModule=!0;var l=_("../../renderers/webgl/utils/ObjectRenderer"),u=w(l),c=_("../../renderers/webgl/WebGLRenderer"),s=w(c),p=_("../../utils/createIndicesForQuads"),v=w(p),h=_("./generateMultiTextureShader"),o=w(h),i=_("../../renderers/webgl/utils/checkMaxIfStatmentsInShader"),t=w(i),r=_("./BatchBuffer"),d=w(r),a=_("../../settings"),f=w(a),m=_("../../utils"),g=_("pixi-gl-core"),x=w(g),T=_("bit-twiddle"),y=w(T);function w(A){return A&&A.__esModule?A:{default:A}}function b(A,B){if(!(A instanceof B))throw new TypeError("Cannot call a class as a function")}function S(A,B){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B&&(typeof B=="object"||typeof B=="function")?B:A}function E(A,B){if(typeof B!="function"&&B!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof B);A.prototype=Object.create(B&&B.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),B&&(Object.setPrototypeOf?Object.setPrototypeOf(A,B):A.__proto__=B)}var O=0,P=0,M=function(A){E(B,A);function B(I){b(this,B);var R=S(this,A.call(this,I));R.vertSize=5,R.vertByteSize=R.vertSize*4,R.size=f.default.SPRITE_BATCH_SIZE,R.buffers=[];for(var D=1;D<=y.default.nextPow2(R.size);D*=2)R.buffers.push(new d.default(D*4*R.vertByteSize));R.indices=(0,v.default)(R.size),R.shader=null,R.currentIndex=0,R.groups=[];for(var L=0;L<R.size;L++)R.groups[L]={textures:[],textureCount:0,ids:[],size:0,start:0,blend:0};return R.sprites=[],R.vertexBuffers=[],R.vaos=[],R.vaoMax=2,R.vertexCount=0,R.renderer.on("prerender",R.onPrerender,R),R}return B.prototype.onContextChange=function(){var R=this.renderer.gl;this.renderer.legacy?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(R.getParameter(R.MAX_TEXTURE_IMAGE_UNITS),f.default.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=(0,t.default)(this.MAX_TEXTURES,R)),this.shader=(0,o.default)(R,this.MAX_TEXTURES),this.indexBuffer=x.default.GLBuffer.createIndexBuffer(R,this.indices,R.STATIC_DRAW),this.renderer.bindVao(null);for(var D=this.shader.attributes,L=0;L<this.vaoMax;L++){var F=this.vertexBuffers[L]=x.default.GLBuffer.createVertexBuffer(R,null,R.STREAM_DRAW),N=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(F,D.aVertexPosition,R.FLOAT,!1,this.vertByteSize,0).addAttribute(F,D.aTextureCoord,R.UNSIGNED_SHORT,!0,this.vertByteSize,2*4).addAttribute(F,D.aColor,R.UNSIGNED_BYTE,!0,this.vertByteSize,3*4);D.aTextureId&&N.addAttribute(F,D.aTextureId,R.FLOAT,!1,this.vertByteSize,4*4),this.vaos[L]=N}this.vao=this.vaos[0],this.currentBlendMode=99999,this.boundTextures=new Array(this.MAX_TEXTURES)},B.prototype.onPrerender=function(){this.vertexCount=0},B.prototype.render=function(R){this.currentIndex>=this.size&&this.flush(),R._texture._uvs&&(this.sprites[this.currentIndex++]=R)},B.prototype.flush=function(){if(this.currentIndex!==0){var R=this.renderer.gl,D=this.MAX_TEXTURES,L=y.default.nextPow2(this.currentIndex),F=y.default.log2(L),N=this.buffers[F],U=this.sprites,k=this.groups,G=N.float32View,W=N.uint32View,K=this.boundTextures,q=this.renderer.boundTextures,Q=this.renderer.textureGC.count,J=0,V=void 0,Z=void 0,$=1,ie=0,ne=k[0],ae=void 0,se=void 0,re=m.premultiplyBlendMode[U[0]._texture.baseTexture.premultipliedAlpha?1:0][U[0].blendMode];ne.textureCount=0,ne.start=0,ne.blend=re,O++;var ee=void 0;for(ee=0;ee<D;++ee){var ue=q[ee];if(ue._enabled===O){K[ee]=this.renderer.emptyTextures[ee];continue}K[ee]=ue,ue._virtalBoundId=ee,ue._enabled=O}for(O++,ee=0;ee<this.currentIndex;++ee){var fe=U[ee];U[ee]=null,V=fe._texture.baseTexture;var _e=m.premultiplyBlendMode[Number(V.premultipliedAlpha)][fe.blendMode];if(re!==_e&&(re=_e,Z=null,ie=D,O++),Z!==V&&(Z=V,V._enabled!==O)){if(ie===D&&(O++,ne.size=ee-ne.start,ie=0,ne=k[$++],ne.blend=re,ne.textureCount=0,ne.start=ee),V.touched=Q,V._virtalBoundId===-1)for(var pe=0;pe<D;++pe){var Pe=(pe+P)%D,kt=K[Pe];if(kt._enabled!==O){P++,kt._virtalBoundId=-1,V._virtalBoundId=Pe,K[Pe]=V;break}}V._enabled=O,ne.textureCount++,ne.ids[ie]=V._virtalBoundId,ne.textures[ie++]=V}if(ae=fe.vertexData,se=fe._texture._uvs.uvsUint32,this.renderer.roundPixels){var be=this.renderer.resolution;G[J]=(ae[0]*be|0)/be,G[J+1]=(ae[1]*be|0)/be,G[J+5]=(ae[2]*be|0)/be,G[J+6]=(ae[3]*be|0)/be,G[J+10]=(ae[4]*be|0)/be,G[J+11]=(ae[5]*be|0)/be,G[J+15]=(ae[6]*be|0)/be,G[J+16]=(ae[7]*be|0)/be}else G[J]=ae[0],G[J+1]=ae[1],G[J+5]=ae[2],G[J+6]=ae[3],G[J+10]=ae[4],G[J+11]=ae[5],G[J+15]=ae[6],G[J+16]=ae[7];W[J+2]=se[0],W[J+7]=se[1],W[J+12]=se[2],W[J+17]=se[3];var bt=Math.min(fe.worldAlpha,1),rr=bt<1&&V.premultipliedAlpha?(0,m.premultiplyTint)(fe._tintRGB,bt):fe._tintRGB+(bt*255<<24);W[J+3]=W[J+8]=W[J+13]=W[J+18]=rr,G[J+4]=G[J+9]=G[J+14]=G[J+19]=V._virtalBoundId,J+=20}if(ne.size=ee-ne.start,f.default.CAN_UPLOAD_SAME_BUFFER)this.vertexBuffers[this.vertexCount].upload(N.vertices,0,!0);else{if(this.vaoMax<=this.vertexCount){this.vaoMax++;var St=this.shader.attributes,Nt=this.vertexBuffers[this.vertexCount]=x.default.GLBuffer.createVertexBuffer(R,null,R.STREAM_DRAW),Tr=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(Nt,St.aVertexPosition,R.FLOAT,!1,this.vertByteSize,0).addAttribute(Nt,St.aTextureCoord,R.UNSIGNED_SHORT,!0,this.vertByteSize,2*4).addAttribute(Nt,St.aColor,R.UNSIGNED_BYTE,!0,this.vertByteSize,3*4);St.aTextureId&&Tr.addAttribute(Nt,St.aTextureId,R.FLOAT,!1,this.vertByteSize,4*4),this.vaos[this.vertexCount]=Tr}this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].upload(N.vertices,0,!1),this.vertexCount++}for(ee=0;ee<D;++ee)q[ee]._virtalBoundId=-1;for(ee=0;ee<$;++ee){for(var it=k[ee],Gr=it.textureCount,wt=0;wt<Gr;wt++)Z=it.textures[wt],q[it.ids[wt]]!==Z&&this.renderer.bindTexture(Z,it.ids[wt],!0),Z._virtalBoundId=-1;this.renderer.state.setBlendMode(it.blend),R.drawElements(R.TRIANGLES,it.size*6,R.UNSIGNED_SHORT,it.start*6*2)}this.currentIndex=0}},B.prototype.start=function(){this.renderer.bindShader(this.shader),f.default.CAN_UPLOAD_SAME_BUFFER&&(this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].bind())},B.prototype.stop=function(){this.flush()},B.prototype.destroy=function(){for(var R=0;R<this.vaoMax;R++)this.vertexBuffers[R]&&this.vertexBuffers[R].destroy(),this.vaos[R]&&this.vaos[R].destroy();this.indexBuffer&&this.indexBuffer.destroy(),this.renderer.off("prerender",this.onPrerender,this),A.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.vertexBuffers=null,this.vaos=null,this.indexBuffer=null,this.indices=null,this.sprites=null;for(var D=0;D<this.buffers.length;++D)this.buffers[D].destroy()},B}(u.default);e.default=M,s.default.registerPlugin("sprite",M)},{"../../renderers/webgl/WebGLRenderer":84,"../../renderers/webgl/utils/ObjectRenderer":94,"../../renderers/webgl/utils/checkMaxIfStatmentsInShader":97,"../../settings":101,"../../utils":125,"../../utils/createIndicesForQuads":123,"./BatchBuffer":105,"./generateMultiTextureShader":107,"bit-twiddle":1,"pixi-gl-core":15}],107:[function(_,n,e){e.__esModule=!0,e.default=p;var l=_("../../Shader"),u=c(l);_("path");function c(h){return h&&h.__esModule?h:{default:h}}var s=["varying vec2 vTextureCoord;","varying vec4 vColor;","varying float vTextureId;","uniform sampler2D uSamplers[%count%];","void main(void){","vec4 color;","float textureId = floor(vTextureId+0.5);","%forloop%","gl_FragColor = color * vColor;","}"].join(`
`);function p(h,o){var i=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor;
}
`,t=s;t=t.replace(/%count%/gi,o),t=t.replace(/%forloop%/gi,v(o));for(var r=new u.default(h,i,t),d=[],a=0;a<o;a++)d[a]=a;return r.bind(),r.uniforms.uSamplers=d,r}function v(h){var o="";o+=`
`,o+=`
`;for(var i=0;i<h;i++)i>0&&(o+=`
else `),i<h-1&&(o+="if(textureId == "+i+".0)"),o+=`
{`,o+=`
	color = texture2D(uSamplers[`+i+"], vTextureCoord);",o+=`
}`;return o+=`
`,o+=`
`,o}},{"../../Shader":44,path:8}],108:[function(_,n,e){e.__esModule=!0;var l=function(){function E(O,P){for(var M=0;M<P.length;M++){var A=P[M];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(O,A.key,A)}}return function(O,P,M){return P&&E(O.prototype,P),M&&E(O,M),O}}(),u=_("../sprites/Sprite"),c=x(u),s=_("../textures/Texture"),p=x(s),v=_("../math"),h=_("../utils"),o=_("../const"),i=_("../settings"),t=x(i),r=_("./TextStyle"),d=x(r),a=_("./TextMetrics"),f=x(a),m=_("../utils/trimCanvas"),g=x(m);function x(E){return E&&E.__esModule?E:{default:E}}function T(E,O){if(!(E instanceof O))throw new TypeError("Cannot call a class as a function")}function y(E,O){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O&&(typeof O=="object"||typeof O=="function")?O:E}function w(E,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof O);E.prototype=Object.create(O&&O.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(E,O):E.__proto__=O)}var b={texture:!0,children:!1,baseTexture:!0},S=function(E){w(O,E);function O(P,M,A){T(this,O),A=A||document.createElement("canvas"),A.width=3,A.height=3;var B=p.default.fromCanvas(A,t.default.SCALE_MODE,"text");B.orig=new v.Rectangle,B.trim=new v.Rectangle;var I=y(this,E.call(this,B));return p.default.addToCache(I._texture,I._texture.baseTexture.textureCacheIds[0]),I.canvas=A,I.context=I.canvas.getContext("2d"),I.resolution=t.default.RESOLUTION,I._text=null,I._style=null,I._styleListener=null,I._font="",I.text=P,I.style=M,I.localStyleID=-1,I}return O.prototype.updateText=function(M){var A=this._style;if(this.localStyleID!==A.styleID&&(this.dirty=!0,this.localStyleID=A.styleID),!(!this.dirty&&M)){this._font=this._style.toFontString();var B=this.context,I=f.default.measureText(this._text,this._style,this._style.wordWrap,this.canvas),R=I.width,D=I.height,L=I.lines,F=I.lineHeight,N=I.lineWidths,U=I.maxLineWidth,k=I.fontProperties;this.canvas.width=Math.ceil((Math.max(1,R)+A.padding*2)*this.resolution),this.canvas.height=Math.ceil((Math.max(1,D)+A.padding*2)*this.resolution),B.scale(this.resolution,this.resolution),B.clearRect(0,0,this.canvas.width,this.canvas.height),B.font=this._font,B.strokeStyle=A.stroke,B.lineWidth=A.strokeThickness,B.textBaseline=A.textBaseline,B.lineJoin=A.lineJoin,B.miterLimit=A.miterLimit;var G=void 0,W=void 0;if(A.dropShadow){B.fillStyle=A.dropShadowColor,B.globalAlpha=A.dropShadowAlpha,B.shadowBlur=A.dropShadowBlur,A.dropShadowBlur>0&&(B.shadowColor=A.dropShadowColor);for(var K=Math.cos(A.dropShadowAngle)*A.dropShadowDistance,q=Math.sin(A.dropShadowAngle)*A.dropShadowDistance,Q=0;Q<L.length;Q++)G=A.strokeThickness/2,W=A.strokeThickness/2+Q*F+k.ascent,A.align==="right"?G+=U-N[Q]:A.align==="center"&&(G+=(U-N[Q])/2),A.fill&&(this.drawLetterSpacing(L[Q],G+K+A.padding,W+q+A.padding),A.stroke&&A.strokeThickness&&(B.strokeStyle=A.dropShadowColor,this.drawLetterSpacing(L[Q],G+K+A.padding,W+q+A.padding,!0),B.strokeStyle=A.stroke))}B.shadowBlur=0,B.globalAlpha=1,B.fillStyle=this._generateFillStyle(A,L);for(var J=0;J<L.length;J++)G=A.strokeThickness/2,W=A.strokeThickness/2+J*F+k.ascent,A.align==="right"?G+=U-N[J]:A.align==="center"&&(G+=(U-N[J])/2),A.stroke&&A.strokeThickness&&this.drawLetterSpacing(L[J],G+A.padding,W+A.padding,!0),A.fill&&this.drawLetterSpacing(L[J],G+A.padding,W+A.padding);this.updateTexture()}},O.prototype.drawLetterSpacing=function(M,A,B){var I=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,R=this._style,D=R.letterSpacing;if(D===0){I?this.context.strokeText(M,A,B):this.context.fillText(M,A,B);return}for(var L=String.prototype.split.call(M,""),F=A,N=0,U="";N<M.length;)U=L[N++],I?this.context.strokeText(U,F,B):this.context.fillText(U,F,B),F+=this.context.measureText(U).width+D},O.prototype.updateTexture=function(){var M=this.canvas;if(this._style.trim){var A=(0,g.default)(M);A.data&&(M.width=A.width,M.height=A.height,this.context.putImageData(A.data,0,0))}var B=this._texture,I=this._style,R=I.trim?0:I.padding,D=B.baseTexture;D.hasLoaded=!0,D.resolution=this.resolution,D.realWidth=M.width,D.realHeight=M.height,D.width=M.width/this.resolution,D.height=M.height/this.resolution,B.trim.width=B._frame.width=M.width/this.resolution,B.trim.height=B._frame.height=M.height/this.resolution,B.trim.x=-R,B.trim.y=-R,B.orig.width=B._frame.width-R*2,B.orig.height=B._frame.height-R*2,this._onTextureUpdate(),D.emit("update",D),this.dirty=!1},O.prototype.renderWebGL=function(M){this.resolution!==M.resolution&&(this.resolution=M.resolution,this.dirty=!0),this.updateText(!0),E.prototype.renderWebGL.call(this,M)},O.prototype._renderCanvas=function(M){this.resolution!==M.resolution&&(this.resolution=M.resolution,this.dirty=!0),this.updateText(!0),E.prototype._renderCanvas.call(this,M)},O.prototype.getLocalBounds=function(M){return this.updateText(!0),E.prototype.getLocalBounds.call(this,M)},O.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},O.prototype._onStyleChange=function(){this.dirty=!0},O.prototype._generateFillStyle=function(M,A){if(!Array.isArray(M.fill))return M.fill;if(navigator.isCocoonJS)return M.fill[0];var B=void 0,I=void 0,R=void 0,D=void 0,L=this.canvas.width/this.resolution,F=this.canvas.height/this.resolution,N=M.fill.slice(),U=M.fillGradientStops.slice();if(!U.length)for(var k=N.length+1,G=1;G<k;++G)U.push(G/k);if(N.unshift(M.fill[0]),U.unshift(0),N.push(M.fill[M.fill.length-1]),U.push(1),M.fillGradientType===o.TEXT_GRADIENT.LINEAR_VERTICAL){B=this.context.createLinearGradient(L/2,0,L/2,F),I=(N.length+1)*A.length,R=0;for(var W=0;W<A.length;W++){R+=1;for(var K=0;K<N.length;K++)typeof U[K]=="number"?D=U[K]/A.length+W/A.length:D=R/I,B.addColorStop(D,N[K]),R++}}else{B=this.context.createLinearGradient(0,F/2,L,F/2),I=N.length+1,R=1;for(var q=0;q<N.length;q++)typeof U[q]=="number"?D=U[q]:D=R/I,B.addColorStop(D,N[q]),R++}return B},O.prototype.destroy=function(M){typeof M=="boolean"&&(M={children:M}),M=Object.assign({},b,M),E.prototype.destroy.call(this,M),this.context=null,this.canvas=null,this._style=null},l(O,[{key:"width",get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(M){this.updateText(!0);var A=(0,h.sign)(this.scale.x)||1;this.scale.x=A*M/this._texture.orig.width,this._width=M}},{key:"height",get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(M){this.updateText(!0);var A=(0,h.sign)(this.scale.y)||1;this.scale.y=A*M/this._texture.orig.height,this._height=M}},{key:"style",get:function(){return this._style},set:function(M){M=M||{},M instanceof d.default?this._style=M:this._style=new d.default(M),this.localStyleID=-1,this.dirty=!0}},{key:"text",get:function(){return this._text},set:function(M){M=String(M===""||M===null||M===void 0?" ":M),this._text!==M&&(this._text=M,this.dirty=!0)}}]),O}(c.default);e.default=S},{"../const":46,"../math":70,"../settings":101,"../sprites/Sprite":102,"../textures/Texture":115,"../utils":125,"../utils/trimCanvas":130,"./TextMetrics":109,"./TextStyle":110}],109:[function(_,n,e){e.__esModule=!0;function l(s,p){if(!(s instanceof p))throw new TypeError("Cannot call a class as a function")}var u=function(){function s(p,v,h,o,i,t,r,d,a){l(this,s),this.text=p,this.style=v,this.width=h,this.height=o,this.lines=i,this.lineWidths=t,this.lineHeight=r,this.maxLineWidth=d,this.fontProperties=a}return s.measureText=function(v,h,o){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:s._canvas;o=o??h.wordWrap;var t=h.toFontString(),r=s.measureFont(t),d=i.getContext("2d");d.font=t;for(var a=o?s.wordWrap(v,h,i):v,f=a.split(/(?:\r\n|\r|\n)/),m=new Array(f.length),g=0,x=0;x<f.length;x++){var T=d.measureText(f[x]).width+(f[x].length-1)*h.letterSpacing;m[x]=T,g=Math.max(g,T)}var y=g+h.strokeThickness;h.dropShadow&&(y+=h.dropShadowDistance);var w=h.lineHeight||r.fontSize+h.strokeThickness,b=Math.max(w,r.fontSize+h.strokeThickness)+(f.length-1)*(w+h.leading);return h.dropShadow&&(b+=h.dropShadowDistance),new s(v,h,y,b,f,m,w+h.leading,g,r)},s.wordWrap=function(v,h){for(var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:s._canvas,i=o.getContext("2d"),t=0,r="",d="",a={},f=h.letterSpacing,m=h.whiteSpace,g=s.collapseSpaces(m),x=s.collapseNewlines(m),T=!g,y=h.wordWrapWidth+f,w=s.tokenize(v),b=0;b<w.length;b++){var S=w[b];if(s.isNewline(S)){if(!x){d+=s.addLine(r),T=!g,r="",t=0;continue}S=" "}if(g){var E=s.isBreakingSpace(S),O=s.isBreakingSpace(r[r.length-1]);if(E&&O)continue}var P=s.getFromCache(S,f,a,i);if(P>y)if(r!==""&&(d+=s.addLine(r),r="",t=0),s.canBreakWords(S,h.breakWords))for(var M=S.split(""),A=0;A<M.length;A++){for(var B=M[A],I=1;M[A+I];){var R=M[A+I],D=B[B.length-1];if(!s.canBreakChars(D,R,S,A,h.breakWords))B+=R;else break;I++}A+=B.length-1;var L=s.getFromCache(B,f,a,i);L+t>y&&(d+=s.addLine(r),T=!1,r="",t=0),r+=B,t+=L}else{r.length>0&&(d+=s.addLine(r),r="",t=0);var F=b===w.length-1;d+=s.addLine(S,!F),T=!1,r="",t=0}else P+t>y&&(T=!1,d+=s.addLine(r),r="",t=0),(r.length>0||!s.isBreakingSpace(S)||T)&&(r+=S,t+=P)}return d+=s.addLine(r,!1),d},s.addLine=function(v){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return v=s.trimRight(v),v=h?v+`
`:v,v},s.getFromCache=function(v,h,o,i){var t=o[v];if(t===void 0){var r=v.length*h;t=i.measureText(v).width+r,o[v]=t}return t},s.collapseSpaces=function(v){return v==="normal"||v==="pre-line"},s.collapseNewlines=function(v){return v==="normal"},s.trimRight=function(v){if(typeof v!="string")return"";for(var h=v.length-1;h>=0;h--){var o=v[h];if(!s.isBreakingSpace(o))break;v=v.slice(0,-1)}return v},s.isNewline=function(v){return typeof v!="string"?!1:s._newlines.indexOf(v.charCodeAt(0))>=0},s.isBreakingSpace=function(v){return typeof v!="string"?!1:s._breakingSpaces.indexOf(v.charCodeAt(0))>=0},s.tokenize=function(v){var h=[],o="";if(typeof v!="string")return h;for(var i=0;i<v.length;i++){var t=v[i];if(s.isBreakingSpace(t)||s.isNewline(t)){o!==""&&(h.push(o),o=""),h.push(t);continue}o+=t}return o!==""&&h.push(o),h},s.canBreakWords=function(v,h){return h},s.canBreakChars=function(v,h,o,i,t){return!0},s.measureFont=function(v){if(s._fonts[v])return s._fonts[v];var h={},o=s._canvas,i=s._context;i.font=v;var t=s.METRICS_STRING+s.BASELINE_SYMBOL,r=Math.ceil(i.measureText(t).width),d=Math.ceil(i.measureText(s.BASELINE_SYMBOL).width),a=2*d;d=d*s.BASELINE_MULTIPLIER|0,o.width=r,o.height=a,i.fillStyle="#f00",i.fillRect(0,0,r,a),i.font=v,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(t,0,d);var f=i.getImageData(0,0,r,a).data,m=f.length,g=r*4,x=0,T=0,y=!1;for(x=0;x<d;++x){for(var w=0;w<g;w+=4)if(f[T+w]!==255){y=!0;break}if(!y)T+=g;else break}for(h.ascent=d-x,T=m-g,y=!1,x=a;x>d;--x){for(var b=0;b<g;b+=4)if(f[T+b]!==255){y=!0;break}if(!y)T-=g;else break}return h.descent=x-d,h.fontSize=h.ascent+h.descent,s._fonts[v]=h,h},s.clearMetrics=function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";v?delete s._fonts[v]:s._fonts={}},s}();e.default=u;var c=document.createElement("canvas");c.width=c.height=10,u._canvas=c,u._context=c.getContext("2d"),u._fonts={},u.METRICS_STRING="|q",u.BASELINE_SYMBOL="M",u.BASELINE_MULTIPLIER=1.4,u._newlines=[10,13],u._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]},{}],110:[function(_,n,e){e.__esModule=!0;var l=function(){function d(a,f){for(var m=0;m<f.length;m++){var g=f[m];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(a,g.key,g)}}return function(a,f,m){return f&&d(a.prototype,f),m&&d(a,m),a}}(),u=_("../const"),c=_("../utils");function s(d,a){if(!(d instanceof a))throw new TypeError("Cannot call a class as a function")}var p={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:u.TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},v=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],h=function(){function d(a){s(this,d),this.styleID=0,this.reset(),r(this,a,a)}return d.prototype.clone=function(){var f={};return r(f,this,p),new d(f)},d.prototype.reset=function(){r(this,p,p)},d.prototype.toFontString=function(){var f=typeof this.fontSize=="number"?this.fontSize+"px":this.fontSize,m=this.fontFamily;Array.isArray(this.fontFamily)||(m=this.fontFamily.split(","));for(var g=m.length-1;g>=0;g--){var x=m[g].trim();!/([\"\'])[^\'\"]+\1/.test(x)&&v.indexOf(x)<0&&(x='"'+x+'"'),m[g]=x}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+f+" "+m.join(",")},l(d,[{key:"align",get:function(){return this._align},set:function(f){this._align!==f&&(this._align=f,this.styleID++)}},{key:"breakWords",get:function(){return this._breakWords},set:function(f){this._breakWords!==f&&(this._breakWords=f,this.styleID++)}},{key:"dropShadow",get:function(){return this._dropShadow},set:function(f){this._dropShadow!==f&&(this._dropShadow=f,this.styleID++)}},{key:"dropShadowAlpha",get:function(){return this._dropShadowAlpha},set:function(f){this._dropShadowAlpha!==f&&(this._dropShadowAlpha=f,this.styleID++)}},{key:"dropShadowAngle",get:function(){return this._dropShadowAngle},set:function(f){this._dropShadowAngle!==f&&(this._dropShadowAngle=f,this.styleID++)}},{key:"dropShadowBlur",get:function(){return this._dropShadowBlur},set:function(f){this._dropShadowBlur!==f&&(this._dropShadowBlur=f,this.styleID++)}},{key:"dropShadowColor",get:function(){return this._dropShadowColor},set:function(f){var m=i(f);this._dropShadowColor!==m&&(this._dropShadowColor=m,this.styleID++)}},{key:"dropShadowDistance",get:function(){return this._dropShadowDistance},set:function(f){this._dropShadowDistance!==f&&(this._dropShadowDistance=f,this.styleID++)}},{key:"fill",get:function(){return this._fill},set:function(f){var m=i(f);this._fill!==m&&(this._fill=m,this.styleID++)}},{key:"fillGradientType",get:function(){return this._fillGradientType},set:function(f){this._fillGradientType!==f&&(this._fillGradientType=f,this.styleID++)}},{key:"fillGradientStops",get:function(){return this._fillGradientStops},set:function(f){t(this._fillGradientStops,f)||(this._fillGradientStops=f,this.styleID++)}},{key:"fontFamily",get:function(){return this._fontFamily},set:function(f){this.fontFamily!==f&&(this._fontFamily=f,this.styleID++)}},{key:"fontSize",get:function(){return this._fontSize},set:function(f){this._fontSize!==f&&(this._fontSize=f,this.styleID++)}},{key:"fontStyle",get:function(){return this._fontStyle},set:function(f){this._fontStyle!==f&&(this._fontStyle=f,this.styleID++)}},{key:"fontVariant",get:function(){return this._fontVariant},set:function(f){this._fontVariant!==f&&(this._fontVariant=f,this.styleID++)}},{key:"fontWeight",get:function(){return this._fontWeight},set:function(f){this._fontWeight!==f&&(this._fontWeight=f,this.styleID++)}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(f){this._letterSpacing!==f&&(this._letterSpacing=f,this.styleID++)}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(f){this._lineHeight!==f&&(this._lineHeight=f,this.styleID++)}},{key:"leading",get:function(){return this._leading},set:function(f){this._leading!==f&&(this._leading=f,this.styleID++)}},{key:"lineJoin",get:function(){return this._lineJoin},set:function(f){this._lineJoin!==f&&(this._lineJoin=f,this.styleID++)}},{key:"miterLimit",get:function(){return this._miterLimit},set:function(f){this._miterLimit!==f&&(this._miterLimit=f,this.styleID++)}},{key:"padding",get:function(){return this._padding},set:function(f){this._padding!==f&&(this._padding=f,this.styleID++)}},{key:"stroke",get:function(){return this._stroke},set:function(f){var m=i(f);this._stroke!==m&&(this._stroke=m,this.styleID++)}},{key:"strokeThickness",get:function(){return this._strokeThickness},set:function(f){this._strokeThickness!==f&&(this._strokeThickness=f,this.styleID++)}},{key:"textBaseline",get:function(){return this._textBaseline},set:function(f){this._textBaseline!==f&&(this._textBaseline=f,this.styleID++)}},{key:"trim",get:function(){return this._trim},set:function(f){this._trim!==f&&(this._trim=f,this.styleID++)}},{key:"whiteSpace",get:function(){return this._whiteSpace},set:function(f){this._whiteSpace!==f&&(this._whiteSpace=f,this.styleID++)}},{key:"wordWrap",get:function(){return this._wordWrap},set:function(f){this._wordWrap!==f&&(this._wordWrap=f,this.styleID++)}},{key:"wordWrapWidth",get:function(){return this._wordWrapWidth},set:function(f){this._wordWrapWidth!==f&&(this._wordWrapWidth=f,this.styleID++)}}]),d}();e.default=h;function o(d){return typeof d=="number"?(0,c.hex2string)(d):(typeof d=="string"&&d.indexOf("0x")===0&&(d=d.replace("0x","#")),d)}function i(d){if(Array.isArray(d)){for(var a=0;a<d.length;++a)d[a]=o(d[a]);return d}else return o(d)}function t(d,a){if(!Array.isArray(d)||!Array.isArray(a)||d.length!==a.length)return!1;for(var f=0;f<d.length;++f)if(d[f]!==a[f])return!1;return!0}function r(d,a,f){for(var m in f)Array.isArray(a[m])?d[m]=a[m].slice():d[m]=a[m]}},{"../const":46,"../utils":125}],111:[function(_,n,e){e.__esModule=!0;var l=_("./BaseTexture"),u=p(l),c=_("../settings"),s=p(c);function p(t){return t&&t.__esModule?t:{default:t}}function v(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function h(t,r){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&(typeof r=="object"||typeof r=="function")?r:t}function o(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof r);t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(t,r):t.__proto__=r)}var i=function(t){o(r,t);function r(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100,f=arguments[2],m=arguments[3];v(this,r);var g=h(this,t.call(this,null,f));return g.resolution=m||s.default.RESOLUTION,g.width=Math.ceil(d),g.height=Math.ceil(a),g.realWidth=g.width*g.resolution,g.realHeight=g.height*g.resolution,g.scaleMode=f!==void 0?f:s.default.SCALE_MODE,g.hasLoaded=!0,g._glRenderTargets={},g._canvasRenderTarget=null,g.valid=!1,g}return r.prototype.resize=function(a,f){a=Math.ceil(a),f=Math.ceil(f),!(a===this.width&&f===this.height)&&(this.valid=a>0&&f>0,this.width=a,this.height=f,this.realWidth=this.width*this.resolution,this.realHeight=this.height*this.resolution,this.valid&&this.emit("update",this))},r.prototype.destroy=function(){t.prototype.destroy.call(this,!0),this.renderer=null},r}(u.default);e.default=i},{"../settings":101,"./BaseTexture":112}],112:[function(_,n,e){e.__esModule=!0;var l=_("../utils"),u=_("../settings"),c=t(u),s=_("eventemitter3"),p=t(s),v=_("../utils/determineCrossOrigin"),h=t(v),o=_("bit-twiddle"),i=t(o);function t(m){return m&&m.__esModule?m:{default:m}}function r(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")}function d(m,g){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:m}function a(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);m.prototype=Object.create(g&&g.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(m,g):m.__proto__=g)}var f=function(m){a(g,m);function g(x,T,y){r(this,g);var w=d(this,m.call(this));return w.uid=(0,l.uid)(),w.touched=0,w.resolution=y||c.default.RESOLUTION,w.width=100,w.height=100,w.realWidth=100,w.realHeight=100,w.scaleMode=T!==void 0?T:c.default.SCALE_MODE,w.hasLoaded=!1,w.isLoading=!1,w.source=null,w.origSource=null,w.imageType=null,w.sourceScale=1,w.premultipliedAlpha=!0,w.imageUrl=null,w.isPowerOfTwo=!1,w.mipmap=c.default.MIPMAP_TEXTURES,w.wrapMode=c.default.WRAP_MODE,w._glTextures={},w._enabled=0,w._virtalBoundId=-1,w._destroyed=!1,w.textureCacheIds=[],x&&w.loadSource(x),w}return g.prototype.update=function(){this.imageType!=="svg"&&(this.realWidth=this.source.naturalWidth||this.source.videoWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.videoHeight||this.source.height,this._updateDimensions()),this.emit("update",this)},g.prototype._updateDimensions=function(){this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=i.default.isPow2(this.realWidth)&&i.default.isPow2(this.realHeight)},g.prototype.loadSource=function(T){var y=this.isLoading;this.hasLoaded=!1,this.isLoading=!1,y&&this.source&&(this.source.onload=null,this.source.onerror=null);var w=!this.source;if(this.source=T,(T.src&&T.complete||T.getContext)&&T.width&&T.height)this._updateImageType(),this.imageType==="svg"?this._loadSvgSource():this._sourceLoaded(),w&&this.emit("loaded",this);else if(!T.getContext){this.isLoading=!0;var b=this;if(T.onload=function(){if(b._updateImageType(),T.onload=null,T.onerror=null,!!b.isLoading){if(b.isLoading=!1,b._sourceLoaded(),b.imageType==="svg"){b._loadSvgSource();return}b.emit("loaded",b)}},T.onerror=function(){T.onload=null,T.onerror=null,b.isLoading&&(b.isLoading=!1,b.emit("error",b))},T.complete&&T.src){if(T.onload=null,T.onerror=null,b.imageType==="svg"){b._loadSvgSource();return}this.isLoading=!1,T.width&&T.height?(this._sourceLoaded(),y&&this.emit("loaded",this)):y&&this.emit("error",this)}}},g.prototype._updateImageType=function(){if(this.imageUrl){var T=(0,l.decomposeDataUri)(this.imageUrl),y=void 0;if(T&&T.mediaType==="image"){var w=T.subType.split("+")[0];if(y=(0,l.getUrlFileExtension)("."+w),!y)throw new Error("Invalid image type in data URI.")}else y=(0,l.getUrlFileExtension)(this.imageUrl),y||(y="png");this.imageType=y}},g.prototype._loadSvgSource=function(){if(this.imageType==="svg"){var T=(0,l.decomposeDataUri)(this.imageUrl);T?this._loadSvgSourceUsingDataUri(T):this._loadSvgSourceUsingXhr()}},g.prototype._loadSvgSourceUsingDataUri=function(T){var y=void 0;if(T.encoding==="base64"){if(!atob)throw new Error("Your browser doesn't support base64 conversions.");y=atob(T.data)}else y=T.data;this._loadSvgSourceUsingString(y)},g.prototype._loadSvgSourceUsingXhr=function(){var T=this,y=new XMLHttpRequest;y.onload=function(){if(y.readyState!==y.DONE||y.status!==200)throw new Error("Failed to load SVG using XHR.");T._loadSvgSourceUsingString(y.response)},y.onerror=function(){return T.emit("error",T)},y.open("GET",this.imageUrl,!0),y.send()},g.prototype._loadSvgSourceUsingString=function(T){var y=(0,l.getSvgSize)(T),w=y.width,b=y.height;if(!w||!b)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");this.realWidth=Math.round(w*this.sourceScale),this.realHeight=Math.round(b*this.sourceScale),this._updateDimensions();var S=document.createElement("canvas");S.width=this.realWidth,S.height=this.realHeight,S._pixiId="canvas_"+(0,l.uid)(),S.getContext("2d").drawImage(this.source,0,0,w,b,0,0,this.realWidth,this.realHeight),this.origSource=this.source,this.source=S,g.addToCache(this,S._pixiId),this.isLoading=!1,this._sourceLoaded(),this.emit("loaded",this)},g.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},g.prototype.destroy=function(){this.imageUrl&&(delete l.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")),this.source=null,this.dispose(),g.removeFromCache(this),this.textureCacheIds=null,this._destroyed=!0},g.prototype.dispose=function(){this.emit("dispose",this)},g.prototype.updateSourceImage=function(T){this.source.src=T,this.loadSource(this.source)},g.fromImage=function(T,y,w,b){var S=l.BaseTextureCache[T];if(!S){var E=new Image;y===void 0&&T.indexOf("data:")!==0?E.crossOrigin=(0,h.default)(T):y&&(E.crossOrigin=typeof y=="string"?y:"anonymous"),S=new g(E,w),S.imageUrl=T,b&&(S.sourceScale=b),S.resolution=(0,l.getResolutionOfUrl)(T),E.src=T,g.addToCache(S,T)}return S},g.fromCanvas=function(T,y){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"canvas";T._pixiId||(T._pixiId=w+"_"+(0,l.uid)());var b=l.BaseTextureCache[T._pixiId];return b||(b=new g(T,y),g.addToCache(b,T._pixiId)),b},g.from=function(T,y,w){if(typeof T=="string")return g.fromImage(T,void 0,y,w);if(T instanceof HTMLImageElement){var b=T.src,S=l.BaseTextureCache[b];return S||(S=new g(T,y),S.imageUrl=b,w&&(S.sourceScale=w),S.resolution=(0,l.getResolutionOfUrl)(b),g.addToCache(S,b)),S}else if(T instanceof HTMLCanvasElement)return g.fromCanvas(T,y);return T},g.addToCache=function(T,y){y&&(T.textureCacheIds.indexOf(y)===-1&&T.textureCacheIds.push(y),l.BaseTextureCache[y]&&console.warn("BaseTexture added to the cache with an id ["+y+"] that already had an entry"),l.BaseTextureCache[y]=T)},g.removeFromCache=function(T){if(typeof T=="string"){var y=l.BaseTextureCache[T];if(y){var w=y.textureCacheIds.indexOf(T);return w>-1&&y.textureCacheIds.splice(w,1),delete l.BaseTextureCache[T],y}}else if(T&&T.textureCacheIds){for(var b=0;b<T.textureCacheIds.length;++b)delete l.BaseTextureCache[T.textureCacheIds[b]];return T.textureCacheIds.length=0,T}return null},g}(p.default);e.default=f},{"../settings":101,"../utils":125,"../utils/determineCrossOrigin":124,"bit-twiddle":1,eventemitter3:3}],113:[function(_,n,e){e.__esModule=!0;var l=_("./BaseRenderTexture"),u=p(l),c=_("./Texture"),s=p(c);function p(t){return t&&t.__esModule?t:{default:t}}function v(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function h(t,r){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&(typeof r=="object"||typeof r=="function")?r:t}function o(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof r);t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(t,r):t.__proto__=r)}var i=function(t){o(r,t);function r(d,a){v(this,r);var f=null;if(!(d instanceof u.default)){var m=arguments[1],g=arguments[2],x=arguments[3],T=arguments[4];console.warn("Please use RenderTexture.create("+m+", "+g+") instead of the ctor directly."),f=arguments[0],a=null,d=new u.default(m,g,x,T)}var y=h(this,t.call(this,d,a));return y.legacyRenderer=f,y.valid=!0,y._updateUvs(),y}return r.prototype.resize=function(a,f,m){a=Math.ceil(a),f=Math.ceil(f),this.valid=a>0&&f>0,this._frame.width=this.orig.width=a,this._frame.height=this.orig.height=f,m||this.baseTexture.resize(a,f),this._updateUvs()},r.create=function(a,f,m,g){return new r(new u.default(a,f,m,g))},r}(s.default);e.default=i},{"./BaseRenderTexture":111,"./Texture":115}],114:[function(_,n,e){e.__esModule=!0;var l=function(){function v(h,o){for(var i=0;i<o.length;i++){var t=o[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(h,t.key,t)}}return function(h,o,i){return o&&v(h.prototype,o),i&&v(h,i),h}}(),u=_("../"),c=_("../utils");function s(v,h){if(!(v instanceof h))throw new TypeError("Cannot call a class as a function")}var p=function(){l(v,null,[{key:"BATCH_SIZE",get:function(){return 1e3}}]);function v(h,o){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;s(this,v),this.baseTexture=h,this.textures={},this.animations={},this.data=o,this.resolution=this._updateResolution(i||this.baseTexture.imageUrl),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return v.prototype._updateResolution=function(o){var i=this.data.meta.scale,t=(0,c.getResolutionOfUrl)(o,null);return t===null&&(t=i!==void 0?parseFloat(i):1),t!==1&&(this.baseTexture.resolution=t,this.baseTexture.update()),t},v.prototype.parse=function(o){this._batchIndex=0,this._callback=o,this._frameKeys.length<=v.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},v.prototype._processFrames=function(o){for(var i=o,t=v.BATCH_SIZE,r=this.baseTexture.sourceScale;i-o<t&&i<this._frameKeys.length;){var d=this._frameKeys[i],a=this._frames[d],f=a.frame;if(f){var m=null,g=null,x=a.trimmed!==!1&&a.sourceSize?a.sourceSize:a.frame,T=new u.Rectangle(0,0,Math.floor(x.w*r)/this.resolution,Math.floor(x.h*r)/this.resolution);a.rotated?m=new u.Rectangle(Math.floor(f.x*r)/this.resolution,Math.floor(f.y*r)/this.resolution,Math.floor(f.h*r)/this.resolution,Math.floor(f.w*r)/this.resolution):m=new u.Rectangle(Math.floor(f.x*r)/this.resolution,Math.floor(f.y*r)/this.resolution,Math.floor(f.w*r)/this.resolution,Math.floor(f.h*r)/this.resolution),a.trimmed!==!1&&a.spriteSourceSize&&(g=new u.Rectangle(Math.floor(a.spriteSourceSize.x*r)/this.resolution,Math.floor(a.spriteSourceSize.y*r)/this.resolution,Math.floor(f.w*r)/this.resolution,Math.floor(f.h*r)/this.resolution)),this.textures[d]=new u.Texture(this.baseTexture,m,T,g,a.rotated?2:0,a.anchor),u.Texture.addToCache(this.textures[d],d)}i++}},v.prototype._processAnimations=function(){var o=this.data.animations||{};for(var i in o){this.animations[i]=[];for(var d=o[i],t=Array.isArray(d),r=0,d=t?d:d[Symbol.iterator]();;){var a;if(t){if(r>=d.length)break;a=d[r++]}else{if(r=d.next(),r.done)break;a=r.value}var f=a;this.animations[i].push(this.textures[f])}}},v.prototype._parseComplete=function(){var o=this._callback;this._callback=null,this._batchIndex=0,o.call(this,this.textures)},v.prototype._nextBatch=function(){var o=this;this._processFrames(this._batchIndex*v.BATCH_SIZE),this._batchIndex++,setTimeout(function(){o._batchIndex*v.BATCH_SIZE<o._frameKeys.length?o._nextBatch():(o._processAnimations(),o._parseComplete())},0)},v.prototype.destroy=function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;for(var i in this.textures)this.textures[i].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,o&&this.baseTexture.destroy(),this.baseTexture=null},v}();e.default=p},{"../":65,"../utils":125}],115:[function(_,n,e){e.__esModule=!0;var l=function(){function b(S,E){for(var O=0;O<E.length;O++){var P=E[O];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(S,P.key,P)}}return function(S,E,O){return E&&b(S.prototype,E),O&&b(S,O),S}}(),u=_("./BaseTexture"),c=f(u),s=_("./VideoBaseTexture"),p=f(s),v=_("./TextureUvs"),h=f(v),o=_("eventemitter3"),i=f(o),t=_("../math"),r=_("../utils"),d=_("../settings"),a=f(d);function f(b){return b&&b.__esModule?b:{default:b}}function m(b,S){if(!(b instanceof S))throw new TypeError("Cannot call a class as a function")}function g(b,S){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:b}function x(b,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);b.prototype=Object.create(S&&S.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(b,S):b.__proto__=S)}var T=function(b){x(S,b);function S(E,O,P,M,A,B){m(this,S);var I=g(this,b.call(this));if(I.noFrame=!1,O||(I.noFrame=!0,O=new t.Rectangle(0,0,1,1)),E instanceof S&&(E=E.baseTexture),I.baseTexture=E,I._frame=O,I.trim=M,I.valid=!1,I.requiresUpdate=!1,I._uvs=null,I.orig=P||O,I._rotate=Number(A||0),A===!0)I._rotate=2;else if(I._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return E.hasLoaded?(I.noFrame&&(O=new t.Rectangle(0,0,E.width,E.height),E.on("update",I.onBaseTextureUpdated,I)),I.frame=O):E.once("loaded",I.onBaseTextureLoaded,I),I.defaultAnchor=B?new t.Point(B.x,B.y):new t.Point(0,0),I._updateID=0,I.transform=null,I.textureCacheIds=[],I}return S.prototype.update=function(){this.baseTexture.update()},S.prototype.onBaseTextureLoaded=function(O){this._updateID++,this.noFrame?this.frame=new t.Rectangle(0,0,O.width,O.height):this.frame=this._frame,this.baseTexture.on("update",this.onBaseTextureUpdated,this),this.emit("update",this)},S.prototype.onBaseTextureUpdated=function(O){this._updateID++,this._frame.width=O.width,this._frame.height=O.height,this.emit("update",this)},S.prototype.destroy=function(O){this.baseTexture&&(O&&(r.TextureCache[this.baseTexture.imageUrl]&&S.removeFromCache(this.baseTexture.imageUrl),this.baseTexture.destroy()),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,S.removeFromCache(this),this.textureCacheIds=null},S.prototype.clone=function(){return new S(this.baseTexture,this.frame,this.orig,this.trim,this.rotate)},S.prototype._updateUvs=function(){this._uvs||(this._uvs=new h.default),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},S.fromImage=function(O,P,M,A){var B=r.TextureCache[O];return B||(B=new S(c.default.fromImage(O,P,M,A)),S.addToCache(B,O)),B},S.fromFrame=function(O){var P=r.TextureCache[O];if(!P)throw new Error('The frameId "'+O+'" does not exist in the texture cache');return P},S.fromCanvas=function(O,P){var M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"canvas";return new S(c.default.fromCanvas(O,P,M))},S.fromVideo=function(O,P){return typeof O=="string"?S.fromVideoUrl(O,P):new S(p.default.fromVideo(O,P))},S.fromVideoUrl=function(O,P){return new S(p.default.fromUrl(O,P))},S.from=function(O){if(typeof O=="string"){var P=r.TextureCache[O];if(!P){var M=O.match(/\.(mp4|webm|ogg|h264|avi|mov)$/)!==null;return M?S.fromVideoUrl(O):S.fromImage(O)}return P}else{if(O instanceof HTMLImageElement)return new S(c.default.from(O));if(O instanceof HTMLCanvasElement)return S.fromCanvas(O,a.default.SCALE_MODE,"HTMLCanvasElement");if(O instanceof HTMLVideoElement)return S.fromVideo(O);if(O instanceof c.default)return new S(O)}return O},S.fromLoader=function(O,P,M){var A=new c.default(O,void 0,(0,r.getResolutionOfUrl)(P)),B=new S(A);return A.imageUrl=P,M||(M=P),c.default.addToCache(B.baseTexture,M),S.addToCache(B,M),M!==P&&(c.default.addToCache(B.baseTexture,P),S.addToCache(B,P)),B},S.addToCache=function(O,P){P&&(O.textureCacheIds.indexOf(P)===-1&&O.textureCacheIds.push(P),r.TextureCache[P]&&console.warn("Texture added to the cache with an id ["+P+"] that already had an entry"),r.TextureCache[P]=O)},S.removeFromCache=function(O){if(typeof O=="string"){var P=r.TextureCache[O];if(P){var M=P.textureCacheIds.indexOf(O);return M>-1&&P.textureCacheIds.splice(M,1),delete r.TextureCache[O],P}}else if(O&&O.textureCacheIds){for(var A=0;A<O.textureCacheIds.length;++A)r.TextureCache[O.textureCacheIds[A]]===O&&delete r.TextureCache[O.textureCacheIds[A]];return O.textureCacheIds.length=0,O}return null},l(S,[{key:"frame",get:function(){return this._frame},set:function(O){this._frame=O,this.noFrame=!1;var P=O.x,M=O.y,A=O.width,B=O.height,I=P+A>this.baseTexture.width,R=M+B>this.baseTexture.height;if(I||R){var D=I&&R?"and":"or",L="X: "+P+" + "+A+" = "+(P+A)+" > "+this.baseTexture.width,F="Y: "+M+" + "+B+" = "+(M+B)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+(L+" "+D+" "+F))}this.valid=A&&B&&this.baseTexture.hasLoaded,!this.trim&&!this.rotate&&(this.orig=O),this.valid&&this._updateUvs()}},{key:"rotate",get:function(){return this._rotate},set:function(O){this._rotate=O,this.valid&&this._updateUvs()}},{key:"width",get:function(){return this.orig.width}},{key:"height",get:function(){return this.orig.height}}]),S}(i.default);e.default=T;function y(){var b=document.createElement("canvas");b.width=10,b.height=10;var S=b.getContext("2d");return S.fillStyle="white",S.fillRect(0,0,10,10),new T(new c.default(b))}function w(b){b.destroy=function(){},b.on=function(){},b.once=function(){},b.emit=function(){}}T.EMPTY=new T(new c.default),w(T.EMPTY),w(T.EMPTY.baseTexture),T.WHITE=y(),w(T.WHITE),w(T.WHITE.baseTexture)},{"../math":70,"../settings":101,"../utils":125,"./BaseTexture":112,"./TextureUvs":117,"./VideoBaseTexture":118,eventemitter3:3}],116:[function(_,n,e){e.__esModule=!0;var l=function(){function o(i,t){for(var r=0;r<t.length;r++){var d=t[r];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(i,d.key,d)}}return function(i,t,r){return t&&o(i.prototype,t),r&&o(i,r),i}}(),u=_("../math/Matrix"),c=s(u);function s(o){return o&&o.__esModule?o:{default:o}}function p(o,i){if(!(o instanceof i))throw new TypeError("Cannot call a class as a function")}var v=new c.default,h=function(){function o(i,t){p(this,o),this._texture=i,this.mapCoord=new c.default,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._lastTextureID=-1,this.clampOffset=0,this.clampMargin=typeof t>"u"?.5:t}return o.prototype.multiplyUvs=function(t,r){r===void 0&&(r=t);for(var d=this.mapCoord,a=0;a<t.length;a+=2){var f=t[a],m=t[a+1];r[a]=f*d.a+m*d.c+d.tx,r[a+1]=f*d.b+m*d.d+d.ty}return r},o.prototype.update=function(t){var r=this._texture;if(!r||!r.valid||!t&&this._lastTextureID===r._updateID)return!1;this._lastTextureID=r._updateID;var d=r._uvs;this.mapCoord.set(d.x1-d.x0,d.y1-d.y0,d.x3-d.x0,d.y3-d.y0,d.x0,d.y0);var a=r.orig,f=r.trim;f&&(v.set(a.width/f.width,0,0,a.height/f.height,-f.x/f.width,-f.y/f.height),this.mapCoord.append(v));var m=r.baseTexture,g=this.uClampFrame,x=this.clampMargin/m.resolution,T=this.clampOffset;return g[0]=(r._frame.x+x+T)/m.width,g[1]=(r._frame.y+x+T)/m.height,g[2]=(r._frame.x+r._frame.width-x+T)/m.width,g[3]=(r._frame.y+r._frame.height-x+T)/m.height,this.uClampOffset[0]=T/m.realWidth,this.uClampOffset[1]=T/m.realHeight,!0},l(o,[{key:"texture",get:function(){return this._texture},set:function(t){this._texture=t,this._lastTextureID=-1}}]),o}();e.default=h},{"../math/Matrix":67}],117:[function(_,n,e){e.__esModule=!0;var l=_("../math/GroupD8"),u=c(l);function c(v){return v&&v.__esModule?v:{default:v}}function s(v,h){if(!(v instanceof h))throw new TypeError("Cannot call a class as a function")}var p=function(){function v(){s(this,v),this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsUint32=new Uint32Array(4)}return v.prototype.set=function(o,i,t){var r=i.width,d=i.height;if(t){var a=o.width/2/r,f=o.height/2/d,m=o.x/r+a,g=o.y/d+f;t=u.default.add(t,u.default.NW),this.x0=m+a*u.default.uX(t),this.y0=g+f*u.default.uY(t),t=u.default.add(t,2),this.x1=m+a*u.default.uX(t),this.y1=g+f*u.default.uY(t),t=u.default.add(t,2),this.x2=m+a*u.default.uX(t),this.y2=g+f*u.default.uY(t),t=u.default.add(t,2),this.x3=m+a*u.default.uX(t),this.y3=g+f*u.default.uY(t)}else this.x0=o.x/r,this.y0=o.y/d,this.x1=(o.x+o.width)/r,this.y1=o.y/d,this.x2=(o.x+o.width)/r,this.y2=(o.y+o.height)/d,this.x3=o.x/r,this.y3=(o.y+o.height)/d;this.uvsUint32[0]=(this.y0*65535&65535)<<16|this.x0*65535&65535,this.uvsUint32[1]=(this.y1*65535&65535)<<16|this.x1*65535&65535,this.uvsUint32[2]=(this.y2*65535&65535)<<16|this.x2*65535&65535,this.uvsUint32[3]=(this.y3*65535&65535)<<16|this.x3*65535&65535},v}();e.default=p},{"../math/GroupD8":66}],118:[function(_,n,e){e.__esModule=!0;var l=function(){function m(g,x){for(var T=0;T<x.length;T++){var y=x[T];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(g,y.key,y)}}return function(g,x,T){return x&&m(g.prototype,x),T&&m(g,T),g}}(),u=_("./BaseTexture"),c=i(u),s=_("../utils"),p=_("../ticker"),v=_("../const"),h=_("../utils/determineCrossOrigin"),o=i(h);function i(m){return m&&m.__esModule?m:{default:m}}function t(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")}function r(m,g){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:m}function d(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);m.prototype=Object.create(g&&g.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(m,g):m.__proto__=g)}var a=function(m){d(g,m);function g(x,T){if(t(this,g),!x)throw new Error("No video source element specified.");(x.readyState===x.HAVE_ENOUGH_DATA||x.readyState===x.HAVE_FUTURE_DATA)&&x.width&&x.height&&(x.complete=!0);var y=r(this,m.call(this,x,T));return y.width=x.videoWidth,y.height=x.videoHeight,y._autoUpdate=!0,y._isAutoUpdating=!1,y.autoPlay=!0,y.update=y.update.bind(y),y._onCanPlay=y._onCanPlay.bind(y),x.addEventListener("play",y._onPlayStart.bind(y)),x.addEventListener("pause",y._onPlayStop.bind(y)),y.hasLoaded=!1,y.__loaded=!1,y._isSourceReady()?y._onCanPlay():(x.addEventListener("canplay",y._onCanPlay),x.addEventListener("canplaythrough",y._onCanPlay)),y}return g.prototype._isSourcePlaying=function(){var T=this.source;return T.currentTime>0&&T.paused===!1&&T.ended===!1&&T.readyState>2},g.prototype._isSourceReady=function(){return this.source.readyState===3||this.source.readyState===4},g.prototype._onPlayStart=function(){this.hasLoaded||this._onCanPlay(),!this._isAutoUpdating&&this.autoUpdate&&(p.shared.add(this.update,this,v.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0)},g.prototype._onPlayStop=function(){this._isAutoUpdating&&(p.shared.remove(this.update,this),this._isAutoUpdating=!1)},g.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.emit("loaded",this)),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.source.play())},g.prototype.destroy=function(){this._isAutoUpdating&&p.shared.remove(this.update,this),this.source&&this.source._pixiId&&(c.default.removeFromCache(this.source._pixiId),delete this.source._pixiId,this.source.pause(),this.source.src="",this.source.load()),m.prototype.destroy.call(this)},g.fromVideo=function(T,y){T._pixiId||(T._pixiId="video_"+(0,s.uid)());var w=s.BaseTextureCache[T._pixiId];return w||(w=new g(T,y),c.default.addToCache(w,T._pixiId)),w},g.fromUrl=function(T,y,w){var b=document.createElement("video");b.setAttribute("webkit-playsinline",""),b.setAttribute("playsinline","");var S=Array.isArray(T)?T[0].src||T[0]:T.src||T;if(w===void 0&&S.indexOf("data:")!==0?b.crossOrigin=(0,o.default)(S):w&&(b.crossOrigin=typeof w=="string"?w:"anonymous"),Array.isArray(T))for(var E=0;E<T.length;++E)b.appendChild(f(T[E].src||T[E],T[E].mime));else b.appendChild(f(S,T.mime));return b.load(),g.fromVideo(b,y)},l(g,[{key:"autoUpdate",get:function(){return this._autoUpdate},set:function(T){T!==this._autoUpdate&&(this._autoUpdate=T,!this._autoUpdate&&this._isAutoUpdating?(p.shared.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(p.shared.add(this.update,this,v.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0))}}]),g}(c.default);e.default=a,a.fromUrls=a.fromUrl;function f(m,g){g||(m=m.split("?").shift().toLowerCase(),g="video/"+m.substr(m.lastIndexOf(".")+1));var x=document.createElement("source");return x.src=m,x.type=g,x}},{"../const":46,"../ticker":121,"../utils":125,"../utils/determineCrossOrigin":124,"./BaseTexture":112}],119:[function(_,n,e){e.__esModule=!0;var l=function(){function t(r,d){for(var a=0;a<d.length;a++){var f=d[a];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(r,f.key,f)}}return function(r,d,a){return d&&t(r.prototype,d),a&&t(r,a),r}}(),u=_("../settings"),c=h(u),s=_("../const"),p=_("./TickerListener"),v=h(p);function h(t){return t&&t.__esModule?t:{default:t}}function o(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(){var r=this;o(this,t),this._head=new v.default(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/c.default.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._tick=function(d){r._requestId=null,r.started&&(r.update(d),r.started&&r._requestId===null&&r._head.next&&(r._requestId=requestAnimationFrame(r._tick)))}}return t.prototype._requestIfNeeded=function(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},t.prototype._cancelIfNeeded=function(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)},t.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},t.prototype.add=function(d,a){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:s.UPDATE_PRIORITY.NORMAL;return this._addListener(new v.default(d,a,f))},t.prototype.addOnce=function(d,a){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:s.UPDATE_PRIORITY.NORMAL;return this._addListener(new v.default(d,a,f,!0))},t.prototype._addListener=function(d){var a=this._head.next,f=this._head;if(!a)d.connect(f);else{for(;a;){if(d.priority>a.priority){d.connect(f);break}f=a,a=a.next}d.previous||d.connect(f)}return this._startIfPossible(),this},t.prototype.remove=function(d,a){for(var f=this._head.next;f;)f.match(d,a)?f=f.destroy():f=f.next;return this._head.next||this._cancelIfNeeded(),this},t.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},t.prototype.destroy=function(){this.stop();for(var d=this._head.next;d;)d=d.destroy(!0);this._head.destroy(),this._head=null},t.prototype.update=function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:performance.now(),a=void 0;if(d>this.lastTime){a=this.elapsedMS=d-this.lastTime,a>this._maxElapsedMS&&(a=this._maxElapsedMS),this.deltaTime=a*c.default.TARGET_FPMS*this.speed;for(var f=this._head,m=f.next;m;)m=m.emit(this.deltaTime);f.next||this._cancelIfNeeded()}else this.deltaTime=this.elapsedMS=0;this.lastTime=d},l(t,[{key:"FPS",get:function(){return 1e3/this.elapsedMS}},{key:"minFPS",get:function(){return 1e3/this._maxElapsedMS},set:function(d){var a=Math.min(Math.max(0,d)/1e3,c.default.TARGET_FPMS);this._maxElapsedMS=1/a}}]),t}();e.default=i},{"../const":46,"../settings":101,"./TickerListener":120}],120:[function(_,n,e){e.__esModule=!0;function l(c,s){if(!(c instanceof s))throw new TypeError("Cannot call a class as a function")}var u=function(){function c(s){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;l(this,c),this.fn=s,this.context=p,this.priority=v,this.once=h,this.next=null,this.previous=null,this._destroyed=!1}return c.prototype.match=function(p,v){return v=v||null,this.fn===p&&this.context===v},c.prototype.emit=function(p){this.fn&&(this.context?this.fn.call(this.context,p):this.fn(p));var v=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),v},c.prototype.connect=function(p){this.previous=p,p.next&&(p.next.previous=this),this.next=p.next,p.next=this},c.prototype.destroy=function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var v=this.next;return this.next=p?null:v,this.previous=null,v},c}();e.default=u},{}],121:[function(_,n,e){e.__esModule=!0,e.Ticker=e.shared=void 0;var l=_("./Ticker"),u=c(l);function c(p){return p&&p.__esModule?p:{default:p}}var s=new u.default;s.autoStart=!0,s.destroy=function(){},e.shared=s,e.Ticker=u.default},{"./Ticker":119}],122:[function(_,n,e){e.__esModule=!0,e.default=l;function l(){var u=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);return!u}},{}],123:[function(_,n,e){e.__esModule=!0,e.default=l;function l(u){for(var c=u*6,s=new Uint16Array(c),p=0,v=0;p<c;p+=6,v+=4)s[p+0]=v+0,s[p+1]=v+1,s[p+2]=v+2,s[p+3]=v+0,s[p+4]=v+2,s[p+5]=v+3;return s}},{}],124:[function(_,n,e){e.__esModule=!0,e.default=p;var l=_("url"),u=c(l);function c(v){return v&&v.__esModule?v:{default:v}}var s=void 0;function p(v){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:window.location;if(v.indexOf("data:")===0)return"";h=h||window.location,s||(s=document.createElement("a")),s.href=v,v=u.default.parse(s.href);var o=!v.port&&h.port===""||v.port===h.port;return v.hostname!==h.hostname||!o||v.protocol!==h.protocol?"anonymous":""}},{url:38}],125:[function(_,n,e){e.__esModule=!0,e.premultiplyBlendMode=e.BaseTextureCache=e.TextureCache=e.earcut=e.mixins=e.pluginTarget=e.EventEmitter=e.removeItems=e.isMobile=void 0,e.uid=S,e.hex2rgb=E,e.hex2string=O,e.rgb2hex=P,e.getResolutionOfUrl=M,e.decomposeDataUri=A,e.getUrlFileExtension=B,e.getSvgSize=I,e.skipHello=R,e.sayHello=D,e.isWebGLSupported=L,e.sign=F,e.destroyTextureCache=k,e.clearTextureCache=G,e.correctBlendMode=K,e.premultiplyTint=q,e.premultiplyRgba=Q,e.premultiplyTintToRgba=J;var l=_("../const"),u=_("../settings"),c=y(u),s=_("eventemitter3"),p=y(s),v=_("./pluginTarget"),h=y(v),o=_("./mixin"),i=T(o),t=_("ismobilejs"),r=T(t),d=_("remove-array-items"),a=y(d),f=_("./mapPremultipliedBlendModes"),m=y(f),g=_("earcut"),x=y(g);function T(V){if(V&&V.__esModule)return V;var Z={};if(V!=null)for(var $ in V)Object.prototype.hasOwnProperty.call(V,$)&&(Z[$]=V[$]);return Z.default=V,Z}function y(V){return V&&V.__esModule?V:{default:V}}var w=0,b=!1;e.isMobile=r,e.removeItems=a.default,e.EventEmitter=p.default,e.pluginTarget=h.default,e.mixins=i,e.earcut=x.default;function S(){return++w}function E(V,Z){return Z=Z||[],Z[0]=(V>>16&255)/255,Z[1]=(V>>8&255)/255,Z[2]=(V&255)/255,Z}function O(V){return V=V.toString(16),V="000000".substr(0,6-V.length)+V,"#"+V}function P(V){return(V[0]*255<<16)+(V[1]*255<<8)+(V[2]*255|0)}function M(V,Z){var $=c.default.RETINA_PREFIX.exec(V);return $?parseFloat($[1]):Z!==void 0?Z:1}function A(V){var Z=l.DATA_URI.exec(V);if(Z)return{mediaType:Z[1]?Z[1].toLowerCase():void 0,subType:Z[2]?Z[2].toLowerCase():void 0,charset:Z[3]?Z[3].toLowerCase():void 0,encoding:Z[4]?Z[4].toLowerCase():void 0,data:Z[5]}}function B(V){var Z=l.URL_FILE_EXTENSION.exec(V);if(Z)return Z[1].toLowerCase()}function I(V){var Z=l.SVG_SIZE.exec(V),$={};return Z&&($[Z[1]]=Math.round(parseFloat(Z[3])),$[Z[5]]=Math.round(parseFloat(Z[7]))),$}function R(){b=!0}function D(V){if(!b){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var Z=[`
 %c %c %c PixiJS `+l.VERSION+" -  "+V+`   %c  %c  http://www.pixijs.com/  %c %c %c%c 

`,"background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,Z)}else window.console&&window.console.log("PixiJS "+l.VERSION+" - "+V+" - http://www.pixijs.com/");b=!0}}function L(){var V={stencil:!0,failIfMajorPerformanceCaveat:!0};try{if(!window.WebGLRenderingContext)return!1;var Z=document.createElement("canvas"),$=Z.getContext("webgl",V)||Z.getContext("experimental-webgl",V),ie=!!($&&$.getContextAttributes().stencil);if($){var ne=$.getExtension("WEBGL_lose_context");ne&&ne.loseContext()}return $=null,ie}catch{return!1}}function F(V){return V===0?0:V<0?-1:1}var N=e.TextureCache=Object.create(null),U=e.BaseTextureCache=Object.create(null);function k(){var V=void 0;for(V in N)N[V].destroy();for(V in U)U[V].destroy()}function G(){var V=void 0;for(V in N)delete N[V];for(V in U)delete U[V]}var W=e.premultiplyBlendMode=(0,m.default)();function K(V,Z){return W[Z?1:0][V]}function q(V,Z){if(Z===1)return(Z*255<<24)+V;if(Z===0)return 0;var $=V>>16&255,ie=V>>8&255,ne=V&255;return $=$*Z+.5|0,ie=ie*Z+.5|0,ne=ne*Z+.5|0,(Z*255<<24)+($<<16)+(ie<<8)+ne}function Q(V,Z,$,ie){return $=$||new Float32Array(4),ie||ie===void 0?($[0]=V[0]*Z,$[1]=V[1]*Z,$[2]=V[2]*Z):($[0]=V[0],$[1]=V[1],$[2]=V[2]),$[3]=Z,$}function J(V,Z,$,ie){return $=$||new Float32Array(4),$[0]=(V>>16&255)/255,$[1]=(V>>8&255)/255,$[2]=(V&255)/255,(ie||ie===void 0)&&($[0]*=Z,$[1]*=Z,$[2]*=Z),$[3]=Z,$}},{"../const":46,"../settings":101,"./mapPremultipliedBlendModes":126,"./mixin":128,"./pluginTarget":129,earcut:2,eventemitter3:3,ismobilejs:4,"remove-array-items":31}],126:[function(_,n,e){e.__esModule=!0,e.default=u;var l=_("../const");function u(){for(var c=[],s=[],p=0;p<32;p++)c[p]=p,s[p]=p;c[l.BLEND_MODES.NORMAL_NPM]=l.BLEND_MODES.NORMAL,c[l.BLEND_MODES.ADD_NPM]=l.BLEND_MODES.ADD,c[l.BLEND_MODES.SCREEN_NPM]=l.BLEND_MODES.SCREEN,s[l.BLEND_MODES.NORMAL]=l.BLEND_MODES.NORMAL_NPM,s[l.BLEND_MODES.ADD]=l.BLEND_MODES.ADD_NPM,s[l.BLEND_MODES.SCREEN]=l.BLEND_MODES.SCREEN_NPM;var v=[];return v.push(s),v.push(c),v}},{"../const":46}],127:[function(_,n,e){e.__esModule=!0,e.default=s;var l=_("ismobilejs"),u=c(l);function c(p){return p&&p.__esModule?p:{default:p}}function s(p){return u.default.tablet||u.default.phone?4:p}},{ismobilejs:4}],128:[function(_,n,e){e.__esModule=!0,e.mixin=l,e.delayMixin=c,e.performMixins=s;function l(p,v){if(!(!p||!v))for(var h=Object.keys(v),o=0;o<h.length;++o){var i=h[o];Object.defineProperty(p,i,Object.getOwnPropertyDescriptor(v,i))}}var u=[];function c(p,v){u.push(p,v)}function s(){for(var p=0;p<u.length;p+=2)l(u[p],u[p+1]);u.length=0}},{}],129:[function(_,n,e){e.__esModule=!0;function l(u){u.__plugins={},u.registerPlugin=function(s,p){u.__plugins[s]=p},u.prototype.initPlugins=function(){this.plugins=this.plugins||{};for(var s in u.__plugins)this.plugins[s]=new u.__plugins[s](this)},u.prototype.destroyPlugins=function(){for(var s in this.plugins)this.plugins[s].destroy(),this.plugins[s]=null;this.plugins=null}}e.default={mixin:function(c){l(c)}}},{}],130:[function(_,n,e){e.__esModule=!0,e.default=l;function l(u){var c=u.width,s=u.height,p=u.getContext("2d"),v=p.getImageData(0,0,c,s),h=v.data,o=h.length,i={top:null,left:null,right:null,bottom:null},t=null,r=void 0,d=void 0,a=void 0;for(r=0;r<o;r+=4)h[r+3]!==0&&(d=r/4%c,a=~~(r/4/c),i.top===null&&(i.top=a),(i.left===null||d<i.left)&&(i.left=d),(i.right===null||i.right<d)&&(i.right=d+1),(i.bottom===null||i.bottom<a)&&(i.bottom=a));return i.top!==null&&(c=i.right-i.left,s=i.bottom-i.top+1,t=p.getImageData(i.left,i.top,c,s)),{height:s,width:c,data:t}}},{}],131:[function(_,n,e){e.__esModule=!0,e.default=c;var l={};function u(s){if(!l[s]){var p=new Error().stack;typeof p>"u"?console.warn("Deprecation Warning: ",s):(p=p.split(`
`).splice(3).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cDeprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",s),console.warn(p),console.groupEnd()):(console.warn("Deprecation Warning: ",s),console.warn(p))),l[s]=!0}}function c(s){var p=s.mesh,v=s.particles,h=s.extras,o=s.filters,i=s.prepare,t=s.loaders,r=s.interaction;Object.defineProperties(s,{SpriteBatch:{get:function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")}},AssetLoader:{get:function(){throw new ReferenceError("The loader system was overhauled in PixiJS v3, please see the new PIXI.loaders.Loader class.")}},Stage:{get:function(){return u("You do not need to use a PIXI Stage any more, you can simply render any container."),s.Container}},DisplayObjectContainer:{get:function(){return u("DisplayObjectContainer has been shortened to Container, please use Container from now on."),s.Container}},Strip:{get:function(){return u("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on."),p.Mesh}},Rope:{get:function(){return u("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on."),p.Rope}},ParticleContainer:{get:function(){return u("The ParticleContainer class has been moved to particles.ParticleContainer, please use particles.ParticleContainer from now on."),v.ParticleContainer}},MovieClip:{get:function(){return u("The MovieClip class has been moved to extras.AnimatedSprite, please use extras.AnimatedSprite."),h.AnimatedSprite}},TilingSprite:{get:function(){return u("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on."),h.TilingSprite}},BitmapText:{get:function(){return u("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on."),h.BitmapText}},blendModes:{get:function(){return u("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on."),s.BLEND_MODES}},scaleModes:{get:function(){return u("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on."),s.SCALE_MODES}},BaseTextureCache:{get:function(){return u("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on."),s.utils.BaseTextureCache}},TextureCache:{get:function(){return u("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on."),s.utils.TextureCache}},math:{get:function(){return u("The math namespace is deprecated, please access members already accessible on PIXI."),s}},AbstractFilter:{get:function(){return u("AstractFilter has been renamed to Filter, please use PIXI.Filter"),s.Filter}},TransformManual:{get:function(){return u("TransformManual has been renamed to TransformBase, please update your pixi-spine"),s.TransformBase}},TARGET_FPMS:{get:function(){return u("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),s.settings.TARGET_FPMS},set:function(y){u("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),s.settings.TARGET_FPMS=y}},FILTER_RESOLUTION:{get:function(){return u("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),s.settings.FILTER_RESOLUTION},set:function(y){u("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),s.settings.FILTER_RESOLUTION=y}},RESOLUTION:{get:function(){return u("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),s.settings.RESOLUTION},set:function(y){u("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),s.settings.RESOLUTION=y}},MIPMAP_TEXTURES:{get:function(){return u("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),s.settings.MIPMAP_TEXTURES},set:function(y){u("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),s.settings.MIPMAP_TEXTURES=y}},SPRITE_BATCH_SIZE:{get:function(){return u("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),s.settings.SPRITE_BATCH_SIZE},set:function(y){u("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),s.settings.SPRITE_BATCH_SIZE=y}},SPRITE_MAX_TEXTURES:{get:function(){return u("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),s.settings.SPRITE_MAX_TEXTURES},set:function(y){u("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),s.settings.SPRITE_MAX_TEXTURES=y}},RETINA_PREFIX:{get:function(){return u("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),s.settings.RETINA_PREFIX},set:function(y){u("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),s.settings.RETINA_PREFIX=y}},DEFAULT_RENDER_OPTIONS:{get:function(){return u("PIXI.DEFAULT_RENDER_OPTIONS has been deprecated, please use PIXI.settings.DEFAULT_RENDER_OPTIONS"),s.settings.RENDER_OPTIONS}}});for(var d=[{parent:"TRANSFORM_MODE",target:"TRANSFORM_MODE"},{parent:"GC_MODES",target:"GC_MODE"},{parent:"WRAP_MODES",target:"WRAP_MODE"},{parent:"SCALE_MODES",target:"SCALE_MODE"},{parent:"PRECISION",target:"PRECISION_FRAGMENT"}],a=function(y){var w=d[y];Object.defineProperty(s[w.parent],"DEFAULT",{get:function(){return u("PIXI."+w.parent+".DEFAULT has been deprecated, "+("please use PIXI.settings."+w.target)),s.settings[w.target]},set:function(S){u("PIXI."+w.parent+".DEFAULT has been deprecated, "+("please use PIXI.settings."+w.target)),s.settings[w.target]=S}})},f=0;f<d.length;f++)a(f);Object.defineProperties(s.settings,{PRECISION:{get:function(){return u("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),s.settings.PRECISION_FRAGMENT},set:function(y){u("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),s.settings.PRECISION_FRAGMENT=y}}}),h.AnimatedSprite&&Object.defineProperties(h,{MovieClip:{get:function(){return u("The MovieClip class has been renamed to AnimatedSprite, please use AnimatedSprite from now on."),h.AnimatedSprite}}}),h&&Object.defineProperties(h,{TextureTransform:{get:function(){return u("The TextureTransform class has been renamed to TextureMatrix, please use PIXI.TextureMatrix from now on."),s.TextureMatrix}}}),s.DisplayObject.prototype.generateTexture=function(y,w,b){return u("generateTexture has moved to the renderer, please use renderer.generateTexture(displayObject)"),y.generateTexture(this,w,b)},s.Graphics.prototype.generateTexture=function(y,w){return u("graphics generate texture has moved to the renderer. Or to render a graphics to a texture using canvas please use generateCanvasTexture"),this.generateCanvasTexture(y,w)},s.GroupD8.isSwapWidthHeight=function(y){return u("GroupD8.isSwapWidthHeight was renamed to GroupD8.isVertical"),s.GroupD8.isVertical(y)},s.RenderTexture.prototype.render=function(y,w,b,S){this.legacyRenderer.render(y,this,b,w,!S),u("RenderTexture.render is now deprecated, please use renderer.render(displayObject, renderTexture)")},s.RenderTexture.prototype.getImage=function(y){return u("RenderTexture.getImage is now deprecated, please use renderer.extract.image(target)"),this.legacyRenderer.extract.image(y)},s.RenderTexture.prototype.getBase64=function(y){return u("RenderTexture.getBase64 is now deprecated, please use renderer.extract.base64(target)"),this.legacyRenderer.extract.base64(y)},s.RenderTexture.prototype.getCanvas=function(y){return u("RenderTexture.getCanvas is now deprecated, please use renderer.extract.canvas(target)"),this.legacyRenderer.extract.canvas(y)},s.RenderTexture.prototype.getPixels=function(y){return u("RenderTexture.getPixels is now deprecated, please use renderer.extract.pixels(target)"),this.legacyRenderer.pixels(y)},s.Sprite.prototype.setTexture=function(y){this.texture=y,u("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")},h.BitmapText&&(h.BitmapText.prototype.setText=function(y){this.text=y,u("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")}),s.Text.prototype.setText=function(y){this.text=y,u("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")},s.Text.calculateFontProperties=function(y){return u("Text.calculateFontProperties is now deprecated, please use the TextMetrics.measureFont"),s.TextMetrics.measureFont(y)},Object.defineProperties(s.Text,{fontPropertiesCache:{get:function(){return u("Text.fontPropertiesCache is deprecated"),s.TextMetrics._fonts}},fontPropertiesCanvas:{get:function(){return u("Text.fontPropertiesCanvas is deprecated"),s.TextMetrics._canvas}},fontPropertiesContext:{get:function(){return u("Text.fontPropertiesContext is deprecated"),s.TextMetrics._context}}}),s.Text.prototype.setStyle=function(y){this.style=y,u("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")},s.Text.prototype.determineFontProperties=function(y){return u("determineFontProperties is now deprecated, please use TextMetrics.measureFont method"),s.TextMetrics.measureFont(y)},s.Text.getFontStyle=function(y){return u("getFontStyle is now deprecated, please use TextStyle.toFontString() instead"),y=y||{},y instanceof s.TextStyle||(y=new s.TextStyle(y)),y.toFontString()},Object.defineProperties(s.TextStyle.prototype,{font:{get:function(){u("text style property 'font' is now deprecated, please use the 'fontFamily', 'fontSize', 'fontStyle', 'fontVariant' and 'fontWeight' properties from now on");var y=typeof this._fontSize=="number"?this._fontSize+"px":this._fontSize;return this._fontStyle+" "+this._fontVariant+" "+this._fontWeight+" "+y+" "+this._fontFamily},set:function(y){u("text style property 'font' is now deprecated, please use the 'fontFamily','fontSize',fontStyle','fontVariant' and 'fontWeight' properties from now on"),y.indexOf("italic")>1?this._fontStyle="italic":y.indexOf("oblique")>-1?this._fontStyle="oblique":this._fontStyle="normal",y.indexOf("small-caps")>-1?this._fontVariant="small-caps":this._fontVariant="normal";var w=y.split(" "),b=-1;this._fontSize=26;for(var S=0;S<w.length;++S)if(w[S].match(/(px|pt|em|%)/)){b=S,this._fontSize=w[S];break}this._fontWeight="normal";for(var E=0;E<b;++E)if(w[E].match(/(bold|bolder|lighter|100|200|300|400|500|600|700|800|900)/)){this._fontWeight=w[E];break}if(b>-1&&b<w.length-1){this._fontFamily="";for(var O=b+1;O<w.length;++O)this._fontFamily+=w[O]+" ";this._fontFamily=this._fontFamily.slice(0,-1)}else this._fontFamily="Arial";this.styleID++}}}),s.Texture.prototype.setFrame=function(y){this.frame=y,u("setFrame is now deprecated, please use the frame property, e.g: myTexture.frame = frame;")},s.Texture.addTextureToCache=function(y,w){s.Texture.addToCache(y,w),u("Texture.addTextureToCache is deprecated, please use Texture.addToCache from now on.")},s.Texture.removeTextureFromCache=function(y){return u("Texture.removeTextureFromCache is deprecated, please use Texture.removeFromCache from now on. Be aware that Texture.removeFromCache does not automatically its BaseTexture from the BaseTextureCache. For that, use BaseTexture.removeFromCache"),s.BaseTexture.removeFromCache(y),s.Texture.removeFromCache(y)},Object.defineProperties(o,{AbstractFilter:{get:function(){return u("AstractFilter has been renamed to Filter, please use PIXI.Filter"),s.AbstractFilter}},SpriteMaskFilter:{get:function(){return u("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on."),s.SpriteMaskFilter}},VoidFilter:{get:function(){return u("VoidFilter has been renamed to AlphaFilter, please use PIXI.filters.AlphaFilter"),o.AlphaFilter}}}),s.utils.uuid=function(){return u("utils.uuid() is deprecated, please use utils.uid() from now on."),s.utils.uid()},s.utils.canUseNewCanvasBlendModes=function(){return u("utils.canUseNewCanvasBlendModes() is deprecated, please use CanvasTinter.canUseMultiply from now on"),s.CanvasTinter.canUseMultiply};var m=!0;if(Object.defineProperty(s.utils,"_saidHello",{set:function(y){y&&(u("PIXI.utils._saidHello is deprecated, please use PIXI.utils.skipHello()"),this.skipHello()),m=y},get:function(){return m}}),i.BasePrepare&&(i.BasePrepare.prototype.register=function(y,w){return u("renderer.plugins.prepare.register is now deprecated, please use renderer.plugins.prepare.registerFindHook & renderer.plugins.prepare.registerUploadHook"),y&&this.registerFindHook(y),w&&this.registerUploadHook(w),this}),i.canvas&&Object.defineProperty(i.canvas,"UPLOADS_PER_FRAME",{set:function(){u("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return u("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}}),i.webgl&&Object.defineProperty(i.webgl,"UPLOADS_PER_FRAME",{set:function(){u("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return u("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}}),t.Loader){var g=t.Resource,x=t.Loader;Object.defineProperties(g.prototype,{isJson:{get:function(){return u("The isJson property is deprecated, please use `resource.type === Resource.TYPE.JSON`."),this.type===g.TYPE.JSON}},isXml:{get:function(){return u("The isXml property is deprecated, please use `resource.type === Resource.TYPE.XML`."),this.type===g.TYPE.XML}},isImage:{get:function(){return u("The isImage property is deprecated, please use `resource.type === Resource.TYPE.IMAGE`."),this.type===g.TYPE.IMAGE}},isAudio:{get:function(){return u("The isAudio property is deprecated, please use `resource.type === Resource.TYPE.AUDIO`."),this.type===g.TYPE.AUDIO}},isVideo:{get:function(){return u("The isVideo property is deprecated, please use `resource.type === Resource.TYPE.VIDEO`."),this.type===g.TYPE.VIDEO}}}),Object.defineProperties(x.prototype,{before:{get:function(){return u("The before() method is deprecated, please use pre()."),this.pre}},after:{get:function(){return u("The after() method is deprecated, please use use()."),this.use}}})}r.interactiveTarget&&Object.defineProperty(r.interactiveTarget,"defaultCursor",{set:function(y){u("Property defaultCursor has been replaced with 'cursor'. "),this.cursor=y},get:function(){return u("Property defaultCursor has been replaced with 'cursor'. "),this.cursor}}),r.InteractionManager&&(Object.defineProperty(r.InteractionManager,"defaultCursorStyle",{set:function(y){u("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default=y},get:function(){return u("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default}}),Object.defineProperty(r.InteractionManager,"currentCursorStyle",{set:function(y){u("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode=y},get:function(){return u("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode}}))}},{}],132:[function(_,n,e){e.__esModule=!0;var l=_("../../core"),u=c(l);function c(h){if(h&&h.__esModule)return h;var o={};if(h!=null)for(var i in h)Object.prototype.hasOwnProperty.call(h,i)&&(o[i]=h[i]);return o.default=h,o}function s(h,o){if(!(h instanceof o))throw new TypeError("Cannot call a class as a function")}var p=new u.Rectangle,v=function(){function h(o){s(this,h),this.renderer=o,o.extract=this}return h.prototype.image=function(i){var t=new Image;return t.src=this.base64(i),t},h.prototype.base64=function(i){return this.canvas(i).toDataURL()},h.prototype.canvas=function(i){var t=this.renderer,r=void 0,d=void 0,a=void 0,f=void 0;i&&(i instanceof u.RenderTexture?f=i:f=t.generateTexture(i)),f?(r=f.baseTexture._canvasRenderTarget.context,d=f.baseTexture._canvasRenderTarget.resolution,a=f.frame):(r=t.rootContext,a=p,a.width=this.renderer.width,a.height=this.renderer.height);var m=a.width*d,g=a.height*d,x=new u.CanvasRenderTarget(m,g,1),T=r.getImageData(a.x*d,a.y*d,m,g);return x.context.putImageData(T,0,0),x.canvas},h.prototype.pixels=function(i){var t=this.renderer,r=void 0,d=void 0,a=void 0,f=void 0;return i&&(i instanceof u.RenderTexture?f=i:f=t.generateTexture(i)),f?(r=f.baseTexture._canvasRenderTarget.context,d=f.baseTexture._canvasRenderTarget.resolution,a=f.frame):(r=t.rootContext,a=p,a.width=t.width,a.height=t.height),r.getImageData(0,0,a.width*d,a.height*d).data},h.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},h}();e.default=v,u.CanvasRenderer.registerPlugin("extract",v)},{"../../core":65}],133:[function(_,n,e){e.__esModule=!0;var l=_("./webgl/WebGLExtract");Object.defineProperty(e,"webgl",{enumerable:!0,get:function(){return c(l).default}});var u=_("./canvas/CanvasExtract");Object.defineProperty(e,"canvas",{enumerable:!0,get:function(){return c(u).default}});function c(s){return s&&s.__esModule?s:{default:s}}},{"./canvas/CanvasExtract":132,"./webgl/WebGLExtract":134}],134:[function(_,n,e){e.__esModule=!0;var l=_("../../core"),u=c(l);function c(o){if(o&&o.__esModule)return o;var i={};if(o!=null)for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(i[t]=o[t]);return i.default=o,i}function s(o,i){if(!(o instanceof i))throw new TypeError("Cannot call a class as a function")}var p=new u.Rectangle,v=4,h=function(){function o(i){s(this,o),this.renderer=i,i.extract=this}return o.prototype.image=function(t){var r=new Image;return r.src=this.base64(t),r},o.prototype.base64=function(t){return this.canvas(t).toDataURL()},o.prototype.canvas=function(t){var r=this.renderer,d=void 0,a=void 0,f=void 0,m=!1,g=void 0,x=!1;t&&(t instanceof u.RenderTexture?g=t:(g=this.renderer.generateTexture(t),x=!0)),g?(d=g.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],a=d.resolution,f=g.frame,m=!1):(d=this.renderer.rootRenderTarget,a=d.resolution,m=!0,f=p,f.width=d.size.width,f.height=d.size.height);var T=f.width*a,y=f.height*a,w=new u.CanvasRenderTarget(T,y,1);if(d){r.bindRenderTarget(d);var b=new Uint8Array(v*T*y),S=r.gl;S.readPixels(f.x*a,f.y*a,T,y,S.RGBA,S.UNSIGNED_BYTE,b);var E=w.context.getImageData(0,0,T,y);E.data.set(b),w.context.putImageData(E,0,0),m&&(w.context.scale(1,-1),w.context.drawImage(w.canvas,0,-y))}return x&&g.destroy(!0),w.canvas},o.prototype.pixels=function(t){var r=this.renderer,d=void 0,a=void 0,f=void 0,m=void 0,g=!1;t&&(t instanceof u.RenderTexture?m=t:(m=this.renderer.generateTexture(t),g=!0)),m?(d=m.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],a=d.resolution,f=m.frame):(d=this.renderer.rootRenderTarget,a=d.resolution,f=p,f.width=d.size.width,f.height=d.size.height);var x=f.width*a,T=f.height*a,y=new Uint8Array(v*x*T);if(d){r.bindRenderTarget(d);var w=r.gl;w.readPixels(f.x*a,f.y*a,x,T,w.RGBA,w.UNSIGNED_BYTE,y)}return g&&m.destroy(!0),y},o.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},o}();e.default=h,u.WebGLRenderer.registerPlugin("extract",h)},{"../../core":65}],135:[function(_,n,e){e.__esModule=!0;var l=function(){function i(t,r){for(var d=0;d<r.length;d++){var a=r[d];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,r,d){return r&&i(t.prototype,r),d&&i(t,d),t}}(),u=_("../core"),c=s(u);function s(i){if(i&&i.__esModule)return i;var t={};if(i!=null)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r]);return t.default=i,t}function p(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function v(i,t){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:i}function h(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(i,t):i.__proto__=t)}var o=function(i){h(t,i);function t(r,d){p(this,t);var a=v(this,i.call(this,r[0]instanceof c.Texture?r[0]:r[0].texture));return a._textures=null,a._durations=null,a.textures=r,a._autoUpdate=d!==!1,a.animationSpeed=1,a.loop=!0,a.onComplete=null,a.onFrameChange=null,a.onLoop=null,a._currentTime=0,a.playing=!1,a}return t.prototype.stop=function(){this.playing&&(this.playing=!1,this._autoUpdate&&c.ticker.shared.remove(this.update,this))},t.prototype.play=function(){this.playing||(this.playing=!0,this._autoUpdate&&c.ticker.shared.add(this.update,this,c.UPDATE_PRIORITY.HIGH))},t.prototype.gotoAndStop=function(d){this.stop();var a=this.currentFrame;this._currentTime=d,a!==this.currentFrame&&this.updateTexture()},t.prototype.gotoAndPlay=function(d){var a=this.currentFrame;this._currentTime=d,a!==this.currentFrame&&this.updateTexture(),this.play()},t.prototype.update=function(d){var a=this.animationSpeed*d,f=this.currentFrame;if(this._durations!==null){var m=this._currentTime%1*this._durations[this.currentFrame];for(m+=a/60*1e3;m<0;)this._currentTime--,m+=this._durations[this.currentFrame];var g=Math.sign(this.animationSpeed*d);for(this._currentTime=Math.floor(this._currentTime);m>=this._durations[this.currentFrame];)m-=this._durations[this.currentFrame]*g,this._currentTime+=g;this._currentTime+=m/this._durations[this.currentFrame]}else this._currentTime+=a;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):f!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<f?this.onLoop():this.animationSpeed<0&&this.currentFrame>f&&this.onLoop()),this.updateTexture())},t.prototype.updateTexture=function(){this._texture=this._textures[this.currentFrame],this._textureID=-1,this.cachedTint=16777215,this.onFrameChange&&this.onFrameChange(this.currentFrame)},t.prototype.destroy=function(d){this.stop(),i.prototype.destroy.call(this,d)},t.fromFrames=function(d){for(var a=[],f=0;f<d.length;++f)a.push(c.Texture.fromFrame(d[f]));return new t(a)},t.fromImages=function(d){for(var a=[],f=0;f<d.length;++f)a.push(c.Texture.fromImage(d[f]));return new t(a)},l(t,[{key:"totalFrames",get:function(){return this._textures.length}},{key:"textures",get:function(){return this._textures},set:function(d){if(d[0]instanceof c.Texture)this._textures=d,this._durations=null;else{this._textures=[],this._durations=[];for(var a=0;a<d.length;a++)this._textures.push(d[a].texture),this._durations.push(d[a].time)}this.gotoAndStop(0),this.updateTexture()}},{key:"currentFrame",get:function(){var d=Math.floor(this._currentTime)%this._textures.length;return d<0&&(d+=this._textures.length),d}}]),t}(c.Sprite);e.default=o},{"../core":65}],136:[function(_,n,e){e.__esModule=!0;var l=function(){function m(g,x){for(var T=0;T<x.length;T++){var y=x[T];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(g,y.key,y)}}return function(g,x,T){return x&&m(g.prototype,x),T&&m(g,T),g}}(),u=_("../core"),c=t(u),s=_("../core/math/ObservablePoint"),p=i(s),v=_("../core/utils"),h=_("../core/settings"),o=i(h);function i(m){return m&&m.__esModule?m:{default:m}}function t(m){if(m&&m.__esModule)return m;var g={};if(m!=null)for(var x in m)Object.prototype.hasOwnProperty.call(m,x)&&(g[x]=m[x]);return g.default=m,g}function r(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")}function d(m,g){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:m}function a(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);m.prototype=Object.create(g&&g.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(m,g):m.__proto__=g)}var f=function(m){a(g,m);function g(x){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};r(this,g);var y=d(this,m.call(this));return y._textWidth=0,y._textHeight=0,y._glyphs=[],y._font={tint:T.tint!==void 0?T.tint:16777215,align:T.align||"left",name:null,size:0},y.font=T.font,y._text=x,y._maxWidth=0,y._maxLineHeight=0,y._letterSpacing=0,y._anchor=new p.default(function(){y.dirty=!0},y,0,0),y.dirty=!1,y.updateText(),y}return g.prototype.updateText=function(){for(var T=g.fonts[this._font.name],y=this._font.size/T.size,w=new c.Point,b=[],S=[],E=this.text.replace(/(?:\r\n|\r)/g,`
`),O=E.length,P=this._maxWidth*T.size/this._font.size,M=null,A=0,B=0,I=0,R=-1,D=0,L=0,F=0,N=0;N<O;N++){var U=E.charCodeAt(N),k=E.charAt(N);if(/(?:\s)/.test(k)&&(R=N,D=A),k==="\r"||k===`
`){S.push(A),B=Math.max(B,A),++I,++L,w.x=0,w.y+=T.lineHeight,M=null;continue}var G=T.chars[U];G&&(M&&G.kerning[M]&&(w.x+=G.kerning[M]),b.push({texture:G.texture,line:I,charCode:U,position:new c.Point(w.x+G.xOffset+this._letterSpacing/2,w.y+G.yOffset)}),w.x+=G.xAdvance+this._letterSpacing,A=w.x,F=Math.max(F,G.yOffset+G.texture.height),M=U,R!==-1&&P>0&&w.x>P&&(++L,c.utils.removeItems(b,1+R-L,1+N-R),N=R,R=-1,S.push(D),B=Math.max(B,D),I++,w.x=0,w.y+=T.lineHeight,M=null))}var W=E.charAt(E.length-1);W!=="\r"&&W!==`
`&&(/(?:\s)/.test(W)&&(A=D),S.push(A),B=Math.max(B,A));for(var K=[],q=0;q<=I;q++){var Q=0;this._font.align==="right"?Q=B-S[q]:this._font.align==="center"&&(Q=(B-S[q])/2),K.push(Q)}for(var J=b.length,V=this.tint,Z=0;Z<J;Z++){var $=this._glyphs[Z];$?$.texture=b[Z].texture:($=new c.Sprite(b[Z].texture),this._glyphs.push($)),$.position.x=(b[Z].position.x+K[b[Z].line])*y,$.position.y=b[Z].position.y*y,$.scale.x=$.scale.y=y,$.tint=V,$.parent||this.addChild($)}for(var ie=J;ie<this._glyphs.length;++ie)this.removeChild(this._glyphs[ie]);if(this._textWidth=B*y,this._textHeight=(w.y+T.lineHeight)*y,this.anchor.x!==0||this.anchor.y!==0)for(var ne=0;ne<J;ne++)this._glyphs[ne].x-=this._textWidth*this.anchor.x,this._glyphs[ne].y-=this._textHeight*this.anchor.y;this._maxLineHeight=F*y},g.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},g.prototype.getLocalBounds=function(){return this.validate(),m.prototype.getLocalBounds.call(this)},g.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},g.registerFont=function(T,y){var w={},b=T.getElementsByTagName("info")[0],S=T.getElementsByTagName("common")[0],E=T.getElementsByTagName("page"),O=(0,v.getResolutionOfUrl)(E[0].getAttribute("file"),o.default.RESOLUTION),P={};w.font=b.getAttribute("face"),w.size=parseInt(b.getAttribute("size"),10),w.lineHeight=parseInt(S.getAttribute("lineHeight"),10)/O,w.chars={},y instanceof c.Texture&&(y=[y]);for(var M=0;M<E.length;M++){var A=E[M].getAttribute("id"),B=E[M].getAttribute("file");P[A]=y instanceof Array?y[M]:y[B]}for(var I=T.getElementsByTagName("char"),R=0;R<I.length;R++){var D=I[R],L=parseInt(D.getAttribute("id"),10),F=D.getAttribute("page")||0,N=new c.Rectangle(parseInt(D.getAttribute("x"),10)/O+P[F].frame.x/O,parseInt(D.getAttribute("y"),10)/O+P[F].frame.y/O,parseInt(D.getAttribute("width"),10)/O,parseInt(D.getAttribute("height"),10)/O);w.chars[L]={xOffset:parseInt(D.getAttribute("xoffset"),10)/O,yOffset:parseInt(D.getAttribute("yoffset"),10)/O,xAdvance:parseInt(D.getAttribute("xadvance"),10)/O,kerning:{},texture:new c.Texture(P[F].baseTexture,N),page:F}}for(var U=T.getElementsByTagName("kerning"),k=0;k<U.length;k++){var G=U[k],W=parseInt(G.getAttribute("first"),10)/O,K=parseInt(G.getAttribute("second"),10)/O,q=parseInt(G.getAttribute("amount"),10)/O;w.chars[K]&&(w.chars[K].kerning[W]=q)}return g.fonts[w.font]=w,w},l(g,[{key:"tint",get:function(){return this._font.tint},set:function(T){this._font.tint=typeof T=="number"&&T>=0?T:16777215,this.dirty=!0}},{key:"align",get:function(){return this._font.align},set:function(T){this._font.align=T||"left",this.dirty=!0}},{key:"anchor",get:function(){return this._anchor},set:function(T){typeof T=="number"?this._anchor.set(T):this._anchor.copy(T)}},{key:"font",get:function(){return this._font},set:function(T){T&&(typeof T=="string"?(T=T.split(" "),this._font.name=T.length===1?T[0]:T.slice(1).join(" "),this._font.size=T.length>=2?parseInt(T[0],10):g.fonts[this._font.name].size):(this._font.name=T.name,this._font.size=typeof T.size=="number"?T.size:parseInt(T.size,10)),this.dirty=!0)}},{key:"text",get:function(){return this._text},set:function(T){T=T.toString()||" ",this._text!==T&&(this._text=T,this.dirty=!0)}},{key:"maxWidth",get:function(){return this._maxWidth},set:function(T){this._maxWidth!==T&&(this._maxWidth=T,this.dirty=!0)}},{key:"maxLineHeight",get:function(){return this.validate(),this._maxLineHeight}},{key:"textWidth",get:function(){return this.validate(),this._textWidth}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(T){this._letterSpacing!==T&&(this._letterSpacing=T,this.dirty=!0)}},{key:"textHeight",get:function(){return this.validate(),this._textHeight}}]),g}(c.Container);e.default=f,f.fonts={}},{"../core":65,"../core/math/ObservablePoint":68,"../core/settings":101,"../core/utils":125}],137:[function(_,n,e){e.__esModule=!0;var l=function(){function a(f,m){for(var g=0;g<m.length;g++){var x=m[g];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(f,x.key,x)}}return function(f,m,g){return m&&a(f.prototype,m),g&&a(f,g),f}}(),u=_("../core"),c=h(u),s=_("../core/sprites/canvas/CanvasTinter"),p=v(s);function v(a){return a&&a.__esModule?a:{default:a}}function h(a){if(a&&a.__esModule)return a;var f={};if(a!=null)for(var m in a)Object.prototype.hasOwnProperty.call(a,m)&&(f[m]=a[m]);return f.default=a,f}function o(a,f){if(!(a instanceof f))throw new TypeError("Cannot call a class as a function")}function i(a,f){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:a}function t(a,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);a.prototype=Object.create(f&&f.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(a,f):a.__proto__=f)}var r=new c.Point,d=function(a){t(f,a);function f(m){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100,x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:100;o(this,f);var T=i(this,a.call(this,m));return T.tileTransform=new c.TransformStatic,T._width=g,T._height=x,T._canvasPattern=null,T.uvTransform=m.transform||new c.TextureMatrix(m),T.pluginName="tilingSprite",T.uvRespectAnchor=!1,T}return f.prototype._onTextureUpdate=function(){this.uvTransform&&(this.uvTransform.texture=this._texture),this.cachedTint=16777215},f.prototype._renderWebGL=function(g){var x=this._texture;!x||!x.valid||(this.tileTransform.updateLocalTransform(),this.uvTransform.update(),g.setObjectRenderer(g.plugins[this.pluginName]),g.plugins[this.pluginName].render(this))},f.prototype._renderCanvas=function(g){var x=this._texture;if(x.baseTexture.hasLoaded){var T=g.context,y=this.worldTransform,w=g.resolution,b=x.baseTexture,S=b.resolution,E=this.tilePosition.x/this.tileScale.x%x._frame.width*S,O=this.tilePosition.y/this.tileScale.y%x._frame.height*S;if(this._textureID!==this._texture._updateID||this.cachedTint!==this.tint){this._textureID=this._texture._updateID;var P=new c.CanvasRenderTarget(x._frame.width,x._frame.height,S);this.tint!==16777215?(this.tintedTexture=p.default.getTintedTexture(this,this.tint),P.context.drawImage(this.tintedTexture,0,0)):P.context.drawImage(b.source,-x._frame.x*S,-x._frame.y*S),this.cachedTint=this.tint,this._canvasPattern=P.context.createPattern(P.canvas,"repeat")}T.globalAlpha=this.worldAlpha,T.setTransform(y.a*w,y.b*w,y.c*w,y.d*w,y.tx*w,y.ty*w),g.setBlendMode(this.blendMode),T.fillStyle=this._canvasPattern,T.scale(this.tileScale.x/S,this.tileScale.y/S);var M=this.anchor.x*-this._width,A=this.anchor.y*-this._height;this.uvRespectAnchor?(T.translate(E,O),T.fillRect(-E+M,-O+A,this._width/this.tileScale.x*S,this._height/this.tileScale.y*S)):(T.translate(E+M,O+A),T.fillRect(-E,-O,this._width/this.tileScale.x*S,this._height/this.tileScale.y*S))}},f.prototype._calculateBounds=function(){var g=this._width*-this._anchor._x,x=this._height*-this._anchor._y,T=this._width*(1-this._anchor._x),y=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,g,x,T,y)},f.prototype.getLocalBounds=function(g){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),g||(this._localBoundsRect||(this._localBoundsRect=new c.Rectangle),g=this._localBoundsRect),this._bounds.getRectangle(g)):a.prototype.getLocalBounds.call(this,g)},f.prototype.containsPoint=function(g){this.worldTransform.applyInverse(g,r);var x=this._width,T=this._height,y=-x*this.anchor._x;if(r.x>=y&&r.x<y+x){var w=-T*this.anchor._y;if(r.y>=w&&r.y<w+T)return!0}return!1},f.prototype.destroy=function(g){a.prototype.destroy.call(this,g),this.tileTransform=null,this.uvTransform=null},f.from=function(g,x,T){return new f(c.Texture.from(g),x,T)},f.fromFrame=function(g,x,T){var y=c.utils.TextureCache[g];if(!y)throw new Error('The frameId "'+g+'" does not exist in the texture cache '+this);return new f(y,x,T)},f.fromImage=function(g,x,T,y,w){return new f(c.Texture.fromImage(g,y,w),x,T)},l(f,[{key:"clampMargin",get:function(){return this.uvTransform.clampMargin},set:function(g){this.uvTransform.clampMargin=g,this.uvTransform.update(!0)}},{key:"tileScale",get:function(){return this.tileTransform.scale},set:function(g){this.tileTransform.scale.copy(g)}},{key:"tilePosition",get:function(){return this.tileTransform.position},set:function(g){this.tileTransform.position.copy(g)}},{key:"width",get:function(){return this._width},set:function(g){this._width=g}},{key:"height",get:function(){return this._height},set:function(g){this._height=g}}]),f}(c.Sprite);e.default=d},{"../core":65,"../core/sprites/canvas/CanvasTinter":104}],138:[function(_,n,e){var l=_("../core"),u=i(l),c=_("../core/textures/Texture"),s=o(c),p=_("../core/textures/BaseTexture"),v=o(p),h=_("../core/utils");function o(f){return f&&f.__esModule?f:{default:f}}function i(f){if(f&&f.__esModule)return f;var m={};if(f!=null)for(var g in f)Object.prototype.hasOwnProperty.call(f,g)&&(m[g]=f[g]);return m.default=f,m}function t(f,m){if(!(f instanceof m))throw new TypeError("Cannot call a class as a function")}var r=u.DisplayObject,d=new u.Matrix;r.prototype._cacheAsBitmap=!1,r.prototype._cacheData=!1;var a=function f(){t(this,f),this.textureCacheId=null,this.originalRenderWebGL=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalHitTest=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.sprite=null};Object.defineProperties(r.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(m){if(this._cacheAsBitmap!==m){this._cacheAsBitmap=m;var g=void 0;m?(this._cacheData||(this._cacheData=new a),g=this._cacheData,g.originalRenderWebGL=this.renderWebGL,g.originalRenderCanvas=this.renderCanvas,g.originalUpdateTransform=this.updateTransform,g.originalCalculateBounds=this._calculateBounds,g.originalGetLocalBounds=this.getLocalBounds,g.originalDestroy=this.destroy,g.originalContainsPoint=this.containsPoint,g.originalMask=this._mask,g.originalFilterArea=this.filterArea,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(g=this._cacheData,g.sprite&&this._destroyCachedDisplayObject(),this.renderWebGL=g.originalRenderWebGL,this.renderCanvas=g.originalRenderCanvas,this._calculateBounds=g.originalCalculateBounds,this.getLocalBounds=g.originalGetLocalBounds,this.destroy=g.originalDestroy,this.updateTransform=g.originalUpdateTransform,this.containsPoint=g.originalContainsPoint,this._mask=g.originalMask,this.filterArea=g.originalFilterArea)}}}}),r.prototype._renderCachedWebGL=function(m){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(m),this._cacheData.sprite._transformID=-1,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderWebGL(m))},r.prototype._initCachedDisplayObject=function(m){if(!(this._cacheData&&this._cacheData.sprite)){var g=this.alpha;this.alpha=1,m.currentRenderer.flush();var x=this.getLocalBounds().clone();if(this._filters){var T=this._filters[0].padding;x.pad(T)}var y=m._activeRenderTarget,w=m.filterManager.filterStack,b=u.RenderTexture.create(x.width|0,x.height|0),S="cacheAsBitmap_"+(0,h.uid)();this._cacheData.textureCacheId=S,v.default.addToCache(b.baseTexture,S),s.default.addToCache(b,S);var E=d;E.tx=-x.x,E.ty=-x.y,this.transform.worldTransform.identity(),this.renderWebGL=this._cacheData.originalRenderWebGL,m.render(this,b,!0,E,!0),m.bindRenderTarget(y),m.filterManager.filterStack=w,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this._mask=null,this.filterArea=null;var O=new u.Sprite(b);O.transform.worldTransform=this.transform.worldTransform,O.anchor.x=-(x.x/x.width),O.anchor.y=-(x.y/x.height),O.alpha=g,O._bounds=this._bounds,this._calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._cacheData.sprite=O,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=m._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=O.containsPoint.bind(O)}},r.prototype._renderCachedCanvas=function(m){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(m),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite.renderCanvas(m))},r.prototype._initCachedDisplayObjectCanvas=function(m){if(!(this._cacheData&&this._cacheData.sprite)){var g=this.getLocalBounds(),x=this.alpha;this.alpha=1;var T=m.context,y=u.RenderTexture.create(g.width|0,g.height|0),w="cacheAsBitmap_"+(0,h.uid)();this._cacheData.textureCacheId=w,v.default.addToCache(y.baseTexture,w),s.default.addToCache(y,w);var b=d;this.transform.localTransform.copy(b),b.invert(),b.tx-=g.x,b.ty-=g.y,this.renderCanvas=this._cacheData.originalRenderCanvas,m.render(this,y,!0,b,!1),m.context=T,this.renderCanvas=this._renderCachedCanvas,this._calculateBounds=this._calculateCachedBounds,this._mask=null,this.filterArea=null;var S=new u.Sprite(y);S.transform.worldTransform=this.transform.worldTransform,S.anchor.x=-(g.x/g.width),S.anchor.y=-(g.y/g.height),S._bounds=this._bounds,S.alpha=x,this.parent?this.updateTransform():(this.parent=m._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.updateTransform=this.displayObjectUpdateTransform,this._cacheData.sprite=S,this.containsPoint=S.containsPoint.bind(S)}},r.prototype._calculateCachedBounds=function(){this._cacheData.sprite._calculateBounds()},r.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds()},r.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,v.default.removeFromCache(this._cacheData.textureCacheId),s.default.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},r.prototype._cacheAsBitmapDestroy=function(m){this.cacheAsBitmap=!1,this.destroy(m)}},{"../core":65,"../core/textures/BaseTexture":112,"../core/textures/Texture":115,"../core/utils":125}],139:[function(_,n,e){var l=_("../core"),u=c(l);function c(s){if(s&&s.__esModule)return s;var p={};if(s!=null)for(var v in s)Object.prototype.hasOwnProperty.call(s,v)&&(p[v]=s[v]);return p.default=s,p}u.DisplayObject.prototype.name=null,u.Container.prototype.getChildByName=function(p){for(var v=0;v<this.children.length;v++)if(this.children[v].name===p)return this.children[v];return null}},{"../core":65}],140:[function(_,n,e){var l=_("../core"),u=c(l);function c(s){if(s&&s.__esModule)return s;var p={};if(s!=null)for(var v in s)Object.prototype.hasOwnProperty.call(s,v)&&(p[v]=s[v]);return p.default=s,p}u.DisplayObject.prototype.getGlobalPosition=function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new u.Point,v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this.parent?this.parent.toGlobal(this.position,p,v):(p.x=this.position.x,p.y=this.position.y),p}},{"../core":65}],141:[function(_,n,e){e.__esModule=!0,e.BitmapText=e.TilingSpriteRenderer=e.TilingSprite=e.AnimatedSprite=void 0;var l=_("./AnimatedSprite");Object.defineProperty(e,"AnimatedSprite",{enumerable:!0,get:function(){return p(l).default}});var u=_("./TilingSprite");Object.defineProperty(e,"TilingSprite",{enumerable:!0,get:function(){return p(u).default}});var c=_("./webgl/TilingSpriteRenderer");Object.defineProperty(e,"TilingSpriteRenderer",{enumerable:!0,get:function(){return p(c).default}});var s=_("./BitmapText");Object.defineProperty(e,"BitmapText",{enumerable:!0,get:function(){return p(s).default}}),_("./cacheAsBitmap"),_("./getChildByName"),_("./getGlobalPosition");function p(v){return v&&v.__esModule?v:{default:v}}},{"./AnimatedSprite":135,"./BitmapText":136,"./TilingSprite":137,"./cacheAsBitmap":138,"./getChildByName":139,"./getGlobalPosition":140,"./webgl/TilingSpriteRenderer":142}],142:[function(_,n,e){e.__esModule=!0;var l=_("../../core"),u=s(l),c=_("../../core/const");_("path");function s(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var d in t)Object.prototype.hasOwnProperty.call(t,d)&&(r[d]=t[d]);return r.default=t,r}function p(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function v(t,r){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&(typeof r=="object"||typeof r=="function")?r:t}function h(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof r);t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(t,r):t.__proto__=r)}var o=new u.Matrix,i=function(t){h(r,t);function r(d){p(this,r);var a=v(this,t.call(this,d));return a.shader=null,a.simpleShader=null,a.quad=null,a}return r.prototype.onContextChange=function(){var a=this.renderer.gl;this.shader=new u.Shader(a,`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = mod(vTextureCoord - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 sample = texture2D(uSampler, coord);
    gl_FragColor = sample * uColor;
}
`),this.simpleShader=new u.Shader(a,`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 sample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = sample * uColor;
}
`),this.renderer.bindVao(null),this.quad=new u.Quad(a,this.renderer.state.attribState),this.quad.initVao(this.shader)},r.prototype.render=function(a){var f=this.renderer,m=this.quad;f.bindVao(m.vao);var g=m.vertices;g[0]=g[6]=a._width*-a.anchor.x,g[1]=g[3]=a._height*-a.anchor.y,g[2]=g[4]=a._width*(1-a.anchor.x),g[5]=g[7]=a._height*(1-a.anchor.y),a.uvRespectAnchor&&(g=m.uvs,g[0]=g[6]=-a.anchor.x,g[1]=g[3]=-a.anchor.y,g[2]=g[4]=1-a.anchor.x,g[5]=g[7]=1-a.anchor.y),m.upload();var x=a._texture,T=x.baseTexture,y=a.tileTransform.localTransform,w=a.uvTransform,b=T.isPowerOfTwo&&x.frame.width===T.width&&x.frame.height===T.height;b&&(T._glTextures[f.CONTEXT_UID]?b=T.wrapMode!==c.WRAP_MODES.CLAMP:T.wrapMode===c.WRAP_MODES.CLAMP&&(T.wrapMode=c.WRAP_MODES.REPEAT));var S=b?this.simpleShader:this.shader;f.bindShader(S);var E=x.width,O=x.height,P=a._width,M=a._height;o.set(y.a*E/P,y.b*E/M,y.c*O/P,y.d*O/M,y.tx/P,y.ty/M),o.invert(),b?o.prepend(w.mapCoord):(S.uniforms.uMapCoord=w.mapCoord.toArray(!0),S.uniforms.uClampFrame=w.uClampFrame,S.uniforms.uClampOffset=w.uClampOffset),S.uniforms.uTransform=o.toArray(!0),S.uniforms.uColor=u.utils.premultiplyTintToRgba(a.tint,a.worldAlpha,S.uniforms.uColor,T.premultipliedAlpha),S.uniforms.translationMatrix=a.transform.worldTransform.toArray(!0),S.uniforms.uSampler=f.bindTexture(x),f.setBlendMode(u.utils.correctBlendMode(a.blendMode,T.premultipliedAlpha)),m.vao.draw(this.renderer.gl.TRIANGLES,6,0)},r}(u.ObjectRenderer);e.default=i,u.WebGLRenderer.registerPlugin("tilingSprite",i)},{"../../core":65,"../../core/const":46,path:8}],143:[function(_,n,e){e.__esModule=!0;var l=function(){function i(t,r){for(var d=0;d<r.length;d++){var a=r[d];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,r,d){return r&&i(t.prototype,r),d&&i(t,d),t}}(),u=_("../../core"),c=s(u);_("path");function s(i){if(i&&i.__esModule)return i;var t={};if(i!=null)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r]);return t.default=i,t}function p(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function v(i,t){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:i}function h(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(i,t):i.__proto__=t)}var o=function(i){h(t,i);function t(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;p(this,t);var d=v(this,i.call(this,`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`));return d.alpha=r,d.glShaderKey="alpha",d}return l(t,[{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(d){this.uniforms.uAlpha=d}}]),t}(c.Filter);e.default=o},{"../../core":65,path:8}],144:[function(_,n,e){e.__esModule=!0;var l=function(){function f(m,g){for(var x=0;x<g.length;x++){var T=g[x];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(m,T.key,T)}}return function(m,g,x){return g&&f(m.prototype,g),x&&f(m,x),m}}(),u=_("../../core"),c=i(u),s=_("./BlurXFilter"),p=o(s),v=_("./BlurYFilter"),h=o(v);function o(f){return f&&f.__esModule?f:{default:f}}function i(f){if(f&&f.__esModule)return f;var m={};if(f!=null)for(var g in f)Object.prototype.hasOwnProperty.call(f,g)&&(m[g]=f[g]);return m.default=f,m}function t(f,m){if(!(f instanceof m))throw new TypeError("Cannot call a class as a function")}function r(f,m){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:f}function d(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(f,m):f.__proto__=m)}var a=function(f){d(m,f);function m(g,x,T,y){t(this,m);var w=r(this,f.call(this));return w.blurXFilter=new p.default(g,x,T,y),w.blurYFilter=new h.default(g,x,T,y),w.padding=0,w.resolution=T||c.settings.RESOLUTION,w.quality=x||4,w.blur=g||8,w}return m.prototype.apply=function(x,T,y){var w=x.getRenderTarget(!0);this.blurXFilter.apply(x,T,w,!0),this.blurYFilter.apply(x,w,y,!1),x.returnRenderTarget(w)},l(m,[{key:"blur",get:function(){return this.blurXFilter.blur},set:function(x){this.blurXFilter.blur=this.blurYFilter.blur=x,this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}},{key:"quality",get:function(){return this.blurXFilter.quality},set:function(x){this.blurXFilter.quality=this.blurYFilter.quality=x}},{key:"blurX",get:function(){return this.blurXFilter.blur},set:function(x){this.blurXFilter.blur=x,this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}},{key:"blurY",get:function(){return this.blurYFilter.blur},set:function(x){this.blurYFilter.blur=x,this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}},{key:"blendMode",get:function(){return this.blurYFilter._blendMode},set:function(x){this.blurYFilter._blendMode=x}}]),m}(c.Filter);e.default=a},{"../../core":65,"./BlurXFilter":145,"./BlurYFilter":146}],145:[function(_,n,e){e.__esModule=!0;var l=function(){function g(x,T){for(var y=0;y<T.length;y++){var w=T[y];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(x,w.key,w)}}return function(x,T,y){return T&&g(x.prototype,T),y&&g(x,y),x}}(),u=_("../../core"),c=r(u),s=_("./generateBlurVertSource"),p=t(s),v=_("./generateBlurFragSource"),h=t(v),o=_("./getMaxBlurKernelSize"),i=t(o);function t(g){return g&&g.__esModule?g:{default:g}}function r(g){if(g&&g.__esModule)return g;var x={};if(g!=null)for(var T in g)Object.prototype.hasOwnProperty.call(g,T)&&(x[T]=g[T]);return x.default=g,x}function d(g,x){if(!(g instanceof x))throw new TypeError("Cannot call a class as a function")}function a(g,x){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:g}function f(g,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);g.prototype=Object.create(x&&x.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(g,x):g.__proto__=x)}var m=function(g){f(x,g);function x(T,y,w,b){d(this,x),b=b||5;var S=(0,p.default)(b,!0),E=(0,h.default)(b),O=a(this,g.call(this,S,E));return O.resolution=w||c.settings.RESOLUTION,O._quality=0,O.quality=y||4,O.strength=T||8,O.firstRun=!0,O}return x.prototype.apply=function(y,w,b,S){if(this.firstRun){var E=y.renderer.gl,O=(0,i.default)(E);this.vertexSrc=(0,p.default)(O,!0),this.fragmentSrc=(0,h.default)(O),this.firstRun=!1}if(this.uniforms.strength=1/b.size.width*(b.size.width/w.size.width),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)y.applyFilter(this,w,b,S);else{for(var P=y.getRenderTarget(!0),M=w,A=P,B=0;B<this.passes-1;B++){y.applyFilter(this,M,A,!0);var I=A;A=M,M=I}y.applyFilter(this,M,b,S),y.returnRenderTarget(P)}},l(x,[{key:"blur",get:function(){return this.strength},set:function(y){this.padding=Math.abs(y)*2,this.strength=y}},{key:"quality",get:function(){return this._quality},set:function(y){this._quality=y,this.passes=y}}]),x}(c.Filter);e.default=m},{"../../core":65,"./generateBlurFragSource":147,"./generateBlurVertSource":148,"./getMaxBlurKernelSize":149}],146:[function(_,n,e){e.__esModule=!0;var l=function(){function g(x,T){for(var y=0;y<T.length;y++){var w=T[y];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(x,w.key,w)}}return function(x,T,y){return T&&g(x.prototype,T),y&&g(x,y),x}}(),u=_("../../core"),c=r(u),s=_("./generateBlurVertSource"),p=t(s),v=_("./generateBlurFragSource"),h=t(v),o=_("./getMaxBlurKernelSize"),i=t(o);function t(g){return g&&g.__esModule?g:{default:g}}function r(g){if(g&&g.__esModule)return g;var x={};if(g!=null)for(var T in g)Object.prototype.hasOwnProperty.call(g,T)&&(x[T]=g[T]);return x.default=g,x}function d(g,x){if(!(g instanceof x))throw new TypeError("Cannot call a class as a function")}function a(g,x){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:g}function f(g,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);g.prototype=Object.create(x&&x.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(g,x):g.__proto__=x)}var m=function(g){f(x,g);function x(T,y,w,b){d(this,x),b=b||5;var S=(0,p.default)(b,!1),E=(0,h.default)(b),O=a(this,g.call(this,S,E));return O.resolution=w||c.settings.RESOLUTION,O._quality=0,O.quality=y||4,O.strength=T||8,O.firstRun=!0,O}return x.prototype.apply=function(y,w,b,S){if(this.firstRun){var E=y.renderer.gl,O=(0,i.default)(E);this.vertexSrc=(0,p.default)(O,!1),this.fragmentSrc=(0,h.default)(O),this.firstRun=!1}if(this.uniforms.strength=1/b.size.height*(b.size.height/w.size.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)y.applyFilter(this,w,b,S);else{for(var P=y.getRenderTarget(!0),M=w,A=P,B=0;B<this.passes-1;B++){y.applyFilter(this,M,A,!0);var I=A;A=M,M=I}y.applyFilter(this,M,b,S),y.returnRenderTarget(P)}},l(x,[{key:"blur",get:function(){return this.strength},set:function(y){this.padding=Math.abs(y)*2,this.strength=y}},{key:"quality",get:function(){return this._quality},set:function(y){this._quality=y,this.passes=y}}]),x}(c.Filter);e.default=m},{"../../core":65,"./generateBlurFragSource":147,"./generateBlurVertSource":148,"./getMaxBlurKernelSize":149}],147:[function(_,n,e){e.__esModule=!0,e.default=c;var l={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},u=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function c(s){for(var p=l[s],v=p.length,h=u,o="",i="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;",t=void 0,r=0;r<s;r++){var d=i.replace("%index%",r);t=r,r>=v&&(t=s-r-1),d=d.replace("%value%",p[t]),o+=d,o+=`
`}return h=h.replace("%blur%",o),h=h.replace("%size%",s),h}},{}],148:[function(_,n,e){e.__esModule=!0,e.default=u;var l=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform float strength;","uniform mat3 projectionMatrix;","varying vec2 vBlurTexCoords[%size%];","void main(void)","{","gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);","%blur%","}"].join(`
`);function u(c,s){var p=Math.ceil(c/2),v=l,h="",o=void 0;s?o="vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);":o="vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);";for(var i=0;i<c;i++){var t=o.replace("%index%",i);t=t.replace("%sampleIndex%",i-(p-1)+".0"),h+=t,h+=`
`}return v=v.replace("%blur%",h),v=v.replace("%size%",c),v}},{}],149:[function(_,n,e){e.__esModule=!0,e.default=l;function l(u){for(var c=u.getParameter(u.MAX_VARYING_VECTORS),s=15;s>c;)s-=2;return s}},{}],150:[function(_,n,e){e.__esModule=!0;var l=function(){function i(t,r){for(var d=0;d<r.length;d++){var a=r[d];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,r,d){return r&&i(t.prototype,r),d&&i(t,d),t}}(),u=_("../../core"),c=s(u);_("path");function s(i){if(i&&i.__esModule)return i;var t={};if(i!=null)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r]);return t.default=i,t}function p(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function v(i,t){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:i}function h(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(i,t):i.__proto__=t)}var o=function(i){h(t,i);function t(){p(this,t);var r=v(this,i.call(this,`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`));return r.uniforms.m=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],r.alpha=1,r}return t.prototype._loadMatrix=function(d){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,f=d;a&&(this._multiply(f,this.uniforms.m,d),f=this._colorMatrix(f)),this.uniforms.m=f},t.prototype._multiply=function(d,a,f){return d[0]=a[0]*f[0]+a[1]*f[5]+a[2]*f[10]+a[3]*f[15],d[1]=a[0]*f[1]+a[1]*f[6]+a[2]*f[11]+a[3]*f[16],d[2]=a[0]*f[2]+a[1]*f[7]+a[2]*f[12]+a[3]*f[17],d[3]=a[0]*f[3]+a[1]*f[8]+a[2]*f[13]+a[3]*f[18],d[4]=a[0]*f[4]+a[1]*f[9]+a[2]*f[14]+a[3]*f[19]+a[4],d[5]=a[5]*f[0]+a[6]*f[5]+a[7]*f[10]+a[8]*f[15],d[6]=a[5]*f[1]+a[6]*f[6]+a[7]*f[11]+a[8]*f[16],d[7]=a[5]*f[2]+a[6]*f[7]+a[7]*f[12]+a[8]*f[17],d[8]=a[5]*f[3]+a[6]*f[8]+a[7]*f[13]+a[8]*f[18],d[9]=a[5]*f[4]+a[6]*f[9]+a[7]*f[14]+a[8]*f[19]+a[9],d[10]=a[10]*f[0]+a[11]*f[5]+a[12]*f[10]+a[13]*f[15],d[11]=a[10]*f[1]+a[11]*f[6]+a[12]*f[11]+a[13]*f[16],d[12]=a[10]*f[2]+a[11]*f[7]+a[12]*f[12]+a[13]*f[17],d[13]=a[10]*f[3]+a[11]*f[8]+a[12]*f[13]+a[13]*f[18],d[14]=a[10]*f[4]+a[11]*f[9]+a[12]*f[14]+a[13]*f[19]+a[14],d[15]=a[15]*f[0]+a[16]*f[5]+a[17]*f[10]+a[18]*f[15],d[16]=a[15]*f[1]+a[16]*f[6]+a[17]*f[11]+a[18]*f[16],d[17]=a[15]*f[2]+a[16]*f[7]+a[17]*f[12]+a[18]*f[17],d[18]=a[15]*f[3]+a[16]*f[8]+a[17]*f[13]+a[18]*f[18],d[19]=a[15]*f[4]+a[16]*f[9]+a[17]*f[14]+a[18]*f[19]+a[19],d},t.prototype._colorMatrix=function(d){var a=new Float32Array(d);return a[4]/=255,a[9]/=255,a[14]/=255,a[19]/=255,a},t.prototype.brightness=function(d,a){var f=[d,0,0,0,0,0,d,0,0,0,0,0,d,0,0,0,0,0,1,0];this._loadMatrix(f,a)},t.prototype.greyscale=function(d,a){var f=[d,d,d,0,0,d,d,d,0,0,d,d,d,0,0,0,0,0,1,0];this._loadMatrix(f,a)},t.prototype.blackAndWhite=function(d){var a=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(a,d)},t.prototype.hue=function(d,a){d=(d||0)/180*Math.PI;var f=Math.cos(d),m=Math.sin(d),g=Math.sqrt,x=1/3,T=g(x),y=f+(1-f)*x,w=x*(1-f)-T*m,b=x*(1-f)+T*m,S=x*(1-f)+T*m,E=f+x*(1-f),O=x*(1-f)-T*m,P=x*(1-f)-T*m,M=x*(1-f)+T*m,A=f+x*(1-f),B=[y,w,b,0,0,S,E,O,0,0,P,M,A,0,0,0,0,0,1,0];this._loadMatrix(B,a)},t.prototype.contrast=function(d,a){var f=(d||0)+1,m=-.5*(f-1),g=[f,0,0,0,m,0,f,0,0,m,0,0,f,0,m,0,0,0,1,0];this._loadMatrix(g,a)},t.prototype.saturate=function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,a=arguments[1],f=d*2/3+1,m=(f-1)*-.5,g=[f,m,m,0,0,m,f,m,0,0,m,m,f,0,0,0,0,0,1,0];this._loadMatrix(g,a)},t.prototype.desaturate=function(){this.saturate(-1)},t.prototype.negative=function(d){var a=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(a,d)},t.prototype.sepia=function(d){var a=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(a,d)},t.prototype.technicolor=function(d){var a=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(a,d)},t.prototype.polaroid=function(d){var a=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(a,d)},t.prototype.toBGR=function(d){var a=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(a,d)},t.prototype.kodachrome=function(d){var a=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(a,d)},t.prototype.browni=function(d){var a=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(a,d)},t.prototype.vintage=function(d){var a=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(a,d)},t.prototype.colorTone=function(d,a,f,m,g){d=d||.2,a=a||.15,f=f||16770432,m=m||3375104;var x=(f>>16&255)/255,T=(f>>8&255)/255,y=(f&255)/255,w=(m>>16&255)/255,b=(m>>8&255)/255,S=(m&255)/255,E=[.3,.59,.11,0,0,x,T,y,d,0,w,b,S,a,0,x-w,T-b,y-S,0,0];this._loadMatrix(E,g)},t.prototype.night=function(d,a){d=d||.1;var f=[d*-2,-d,0,0,0,-d,0,d,0,0,0,d,d*2,0,0,0,0,0,1,0];this._loadMatrix(f,a)},t.prototype.predator=function(d,a){var f=[11.224130630493164*d,-4.794486999511719*d,-2.8746118545532227*d,0*d,.40342438220977783*d,-3.6330697536468506*d,9.193157196044922*d,-2.951810836791992*d,0*d,-1.316135048866272*d,-3.2184197902679443*d,-4.2375030517578125*d,7.476448059082031*d,0*d,.8044459223747253*d,0,0,0,1,0];this._loadMatrix(f,a)},t.prototype.lsd=function(d){var a=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(a,d)},t.prototype.reset=function(){var d=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(d,!1)},l(t,[{key:"matrix",get:function(){return this.uniforms.m},set:function(d){this.uniforms.m=d}},{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(d){this.uniforms.uAlpha=d}}]),t}(c.Filter);e.default=o,o.prototype.grayscale=o.prototype.greyscale},{"../../core":65,path:8}],151:[function(_,n,e){e.__esModule=!0;var l=function(){function i(t,r){for(var d=0;d<r.length;d++){var a=r[d];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,r,d){return r&&i(t.prototype,r),d&&i(t,d),t}}(),u=_("../../core"),c=s(u);_("path");function s(i){if(i&&i.__esModule)return i;var t={};if(i!=null)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r]);return t.default=i,t}function p(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function v(i,t){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:i}function h(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(i,t):i.__proto__=t)}var o=function(i){h(t,i);function t(r,d){p(this,t);var a=new c.Matrix;r.renderable=!1;var f=v(this,i.call(this,`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

void main(void)
{
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;
   vTextureCoord = aTextureCoord;
}`,`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;

uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform vec4 filterArea;
uniform vec4 filterClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy *= scale / filterArea.xy;

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), filterClamp.xy, filterClamp.zw));
}
`));return f.maskSprite=r,f.maskMatrix=a,f.uniforms.mapSampler=r._texture,f.uniforms.filterMatrix=a,f.uniforms.scale={x:1,y:1},d==null&&(d=20),f.scale=new c.Point(d,d),f}return t.prototype.apply=function(d,a,f){this.uniforms.filterMatrix=d.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y,d.applyFilter(this,a,f)},l(t,[{key:"map",get:function(){return this.uniforms.mapSampler},set:function(d){this.uniforms.mapSampler=d}}]),t}(c.Filter);e.default=o},{"../../core":65,path:8}],152:[function(_,n,e){e.__esModule=!0;var l=_("../../core"),u=c(l);_("path");function c(o){if(o&&o.__esModule)return o;var i={};if(o!=null)for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(i[t]=o[t]);return i.default=o,i}function s(o,i){if(!(o instanceof i))throw new TypeError("Cannot call a class as a function")}function p(o,i){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i&&(typeof i=="object"||typeof i=="function")?i:o}function v(o,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);o.prototype=Object.create(i&&i.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(o,i):o.__proto__=i)}var h=function(o){v(i,o);function i(){return s(this,i),p(this,o.call(this,`
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

uniform vec4 filterArea;

varying vec2 vTextureCoord;

vec2 mapCoord( vec2 coord )
{
    coord *= filterArea.xy;
    coord += filterArea.zw;

    return coord;
}

vec2 unmapCoord( vec2 coord )
{
    coord -= filterArea.zw;
    coord /= filterArea.xy;

    return coord;
}

void texcoords(vec2 fragCoord, vec2 resolution,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    vec2 inverseVP = 1.0 / resolution.xy;
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

   vTextureCoord = aTextureCoord;

   vec2 fragCoord = vTextureCoord * filterArea.xy;

   texcoords(fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}`,`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;

/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.
 
 --
 
 From:
 https://github.com/mitsuhiko/webgl-meincraft
 
 Copyright (c) 2011 by Armin Ronacher.
 
 Some rights reserved.
 
 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:
 
 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.
 
 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.
 
 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.
 
 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));
    
    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));
    
    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);
    
    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;
    
    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);
    
    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec2 fragCoord = vTextureCoord * filterArea.xy;

      vec4 color;

    color = fxaa(uSampler, fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`))}return i}(u.Filter);e.default=h},{"../../core":65,path:8}],153:[function(_,n,e){e.__esModule=!0;var l=_("./fxaa/FXAAFilter");Object.defineProperty(e,"FXAAFilter",{enumerable:!0,get:function(){return i(l).default}});var u=_("./noise/NoiseFilter");Object.defineProperty(e,"NoiseFilter",{enumerable:!0,get:function(){return i(u).default}});var c=_("./displacement/DisplacementFilter");Object.defineProperty(e,"DisplacementFilter",{enumerable:!0,get:function(){return i(c).default}});var s=_("./blur/BlurFilter");Object.defineProperty(e,"BlurFilter",{enumerable:!0,get:function(){return i(s).default}});var p=_("./blur/BlurXFilter");Object.defineProperty(e,"BlurXFilter",{enumerable:!0,get:function(){return i(p).default}});var v=_("./blur/BlurYFilter");Object.defineProperty(e,"BlurYFilter",{enumerable:!0,get:function(){return i(v).default}});var h=_("./colormatrix/ColorMatrixFilter");Object.defineProperty(e,"ColorMatrixFilter",{enumerable:!0,get:function(){return i(h).default}});var o=_("./alpha/AlphaFilter");Object.defineProperty(e,"AlphaFilter",{enumerable:!0,get:function(){return i(o).default}});function i(t){return t&&t.__esModule?t:{default:t}}},{"./alpha/AlphaFilter":143,"./blur/BlurFilter":144,"./blur/BlurXFilter":145,"./blur/BlurYFilter":146,"./colormatrix/ColorMatrixFilter":150,"./displacement/DisplacementFilter":151,"./fxaa/FXAAFilter":152,"./noise/NoiseFilter":154}],154:[function(_,n,e){e.__esModule=!0;var l=function(){function i(t,r){for(var d=0;d<r.length;d++){var a=r[d];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,r,d){return r&&i(t.prototype,r),d&&i(t,d),t}}(),u=_("../../core"),c=s(u);_("path");function s(i){if(i&&i.__esModule)return i;var t={};if(i!=null)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r]);return t.default=i,t}function p(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function v(i,t){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:i}function h(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(i,t):i.__proto__=t)}var o=function(i){h(t,i);function t(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:.5,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Math.random();p(this,t);var a=v(this,i.call(this,`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`));return a.noise=r,a.seed=d,a}return l(t,[{key:"noise",get:function(){return this.uniforms.uNoise},set:function(d){this.uniforms.uNoise=d}},{key:"seed",get:function(){return this.uniforms.uSeed},set:function(d){this.uniforms.uSeed=d}}]),t}(c.Filter);e.default=o},{"../../core":65,path:8}],155:[function(_,n,e){e.__esModule=!0;var l=function(){function h(o,i){for(var t=0;t<i.length;t++){var r=i[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(o,r.key,r)}}return function(o,i,t){return i&&h(o.prototype,i),t&&h(o,t),o}}(),u=_("../core"),c=s(u);function s(h){if(h&&h.__esModule)return h;var o={};if(h!=null)for(var i in h)Object.prototype.hasOwnProperty.call(h,i)&&(o[i]=h[i]);return o.default=h,o}function p(h,o){if(!(h instanceof o))throw new TypeError("Cannot call a class as a function")}var v=function(){function h(){p(this,h),this.global=new c.Point,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return h.prototype.getLocalPosition=function(i,t,r){return i.worldTransform.applyInverse(r||this.global,t)},h.prototype.copyEvent=function(i){i.isPrimary&&(this.isPrimary=!0),this.button=i.button,this.buttons=Number.isInteger(i.buttons)?i.buttons:i.which,this.width=i.width,this.height=i.height,this.tiltX=i.tiltX,this.tiltY=i.tiltY,this.pointerType=i.pointerType,this.pressure=i.pressure,this.rotationAngle=i.rotationAngle,this.twist=i.twist||0,this.tangentialPressure=i.tangentialPressure||0},h.prototype.reset=function(){this.isPrimary=!1},l(h,[{key:"pointerId",get:function(){return this.identifier}}]),h}();e.default=v},{"../core":65}],156:[function(_,n,e){e.__esModule=!0;function l(c,s){if(!(c instanceof s))throw new TypeError("Cannot call a class as a function")}var u=function(){function c(){l(this,c),this.stopped=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return c.prototype.stopPropagation=function(){this.stopped=!0},c.prototype.reset=function(){this.stopped=!1,this.currentTarget=null,this.target=null},c}();e.default=u},{}],157:[function(_,n,e){e.__esModule=!0;var l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},u=_("../core"),c=m(u),s=_("./InteractionData"),p=f(s),v=_("./InteractionEvent"),h=f(v),o=_("./InteractionTrackingData"),i=f(o),t=_("eventemitter3"),r=f(t),d=_("./interactiveTarget"),a=f(d);function f(S){return S&&S.__esModule?S:{default:S}}function m(S){if(S&&S.__esModule)return S;var E={};if(S!=null)for(var O in S)Object.prototype.hasOwnProperty.call(S,O)&&(E[O]=S[O]);return E.default=S,E}function g(S,E){if(!(S instanceof E))throw new TypeError("Cannot call a class as a function")}function x(S,E){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:S}function T(S,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);S.prototype=Object.create(E&&E.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(S,E):S.__proto__=E)}c.utils.mixins.delayMixin(c.DisplayObject.prototype,a.default);var y=1,w={target:null,data:{global:null}},b=function(S){T(E,S);function E(O,P){g(this,E);var M=x(this,S.call(this));return P=P||{},M.renderer=O,M.autoPreventDefault=P.autoPreventDefault!==void 0?P.autoPreventDefault:!0,M.interactionFrequency=P.interactionFrequency||10,M.mouse=new p.default,M.mouse.identifier=y,M.mouse.global.set(-999999),M.activeInteractionData={},M.activeInteractionData[y]=M.mouse,M.interactionDataPool=[],M.eventData=new h.default,M.interactionDOMElement=null,M.moveWhenInside=!1,M.eventsAdded=!1,M.mouseOverRenderer=!1,M.supportsTouchEvents="ontouchstart"in window,M.supportsPointerEvents=!!window.PointerEvent,M.onPointerUp=M.onPointerUp.bind(M),M.processPointerUp=M.processPointerUp.bind(M),M.onPointerCancel=M.onPointerCancel.bind(M),M.processPointerCancel=M.processPointerCancel.bind(M),M.onPointerDown=M.onPointerDown.bind(M),M.processPointerDown=M.processPointerDown.bind(M),M.onPointerMove=M.onPointerMove.bind(M),M.processPointerMove=M.processPointerMove.bind(M),M.onPointerOut=M.onPointerOut.bind(M),M.processPointerOverOut=M.processPointerOverOut.bind(M),M.onPointerOver=M.onPointerOver.bind(M),M.cursorStyles={default:"inherit",pointer:"pointer"},M.currentCursorMode=null,M.cursor=null,M._tempPoint=new c.Point,M.resolution=1,M.setTargetElement(M.renderer.view,M.renderer.resolution),M}return E.prototype.hitTest=function(P,M){return w.target=null,w.data.global=P,M||(M=this.renderer._lastObjectRendered),this.processInteractive(w,M,null,!0),w.target},E.prototype.setTargetElement=function(P){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;this.removeEvents(),this.interactionDOMElement=P,this.resolution=M,this.addEvents()},E.prototype.addEvents=function(){this.interactionDOMElement&&(c.ticker.shared.add(this.update,this,c.UPDATE_PRIORITY.INTERACTION),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0)},E.prototype.removeEvents=function(){this.interactionDOMElement&&(c.ticker.shared.remove(this.update,this),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1)},E.prototype.update=function(P){if(this._deltaTime+=P,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,!!this.interactionDOMElement)){if(this.didMove){this.didMove=!1;return}this.cursor=null;for(var M in this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(M)){var A=this.activeInteractionData[M];if(A.originalEvent&&A.pointerType!=="touch"){var B=this.configureInteractionEventForDOMEvent(this.eventData,A.originalEvent,A);this.processInteractive(B,this.renderer._lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},E.prototype.setCursorMode=function(P){if(P=P||"default",this.currentCursorMode!==P){this.currentCursorMode=P;var M=this.cursorStyles[P];if(M)switch(typeof M>"u"?"undefined":l(M)){case"string":this.interactionDOMElement.style.cursor=M;break;case"function":M(P);break;case"object":Object.assign(this.interactionDOMElement.style,M);break}else typeof P=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,P)&&(this.interactionDOMElement.style.cursor=P)}},E.prototype.dispatchEvent=function(P,M,A){A.stopped||(A.currentTarget=P,A.type=M,P.emit(M,A),P[M]&&P[M](A))},E.prototype.mapPositionToPoint=function(P,M,A){var B=void 0;this.interactionDOMElement.parentElement?B=this.interactionDOMElement.getBoundingClientRect():B={x:0,y:0,width:0,height:0};var I=navigator.isCocoonJS?this.resolution:1/this.resolution;P.x=(M-B.left)*(this.interactionDOMElement.width/B.width)*I,P.y=(A-B.top)*(this.interactionDOMElement.height/B.height)*I},E.prototype.processInteractive=function(P,M,A,B,I){if(!M||!M.visible)return!1;var R=P.data.global;I=M.interactive||I;var D=!1,L=I,F=!0;if(M.hitArea?(B&&(M.worldTransform.applyInverse(R,this._tempPoint),M.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?D=!0:(B=!1,F=!1)),L=!1):M._mask&&B&&(M._mask.containsPoint(R)||(B=!1,F=!1)),F&&M.interactiveChildren&&M.children)for(var N=M.children,U=N.length-1;U>=0;U--){var k=N[U],G=this.processInteractive(P,k,A,B,L);if(G){if(!k.parent)continue;L=!1,G&&(P.target&&(B=!1),D=!0)}}return I&&(B&&!P.target&&!M.hitArea&&M.containsPoint&&M.containsPoint(R)&&(D=!0),M.interactive&&(D&&!P.target&&(P.target=M),A&&A(P,M,!!D))),D},E.prototype.onPointerDown=function(P){if(!(this.supportsTouchEvents&&P.pointerType==="touch")){var M=this.normalizeToPointerData(P);this.autoPreventDefault&&M[0].isNormalized&&P.preventDefault();for(var A=M.length,B=0;B<A;B++){var I=M[B],R=this.getInteractionDataForPointerId(I),D=this.configureInteractionEventForDOMEvent(this.eventData,I,R);if(D.data.originalEvent=P,this.processInteractive(D,this.renderer._lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",D),I.pointerType==="touch")this.emit("touchstart",D);else if(I.pointerType==="mouse"||I.pointerType==="pen"){var L=I.button===2;this.emit(L?"rightdown":"mousedown",this.eventData)}}}},E.prototype.processPointerDown=function(P,M,A){var B=P.data,I=P.data.identifier;if(A){if(M.trackedPointers[I]||(M.trackedPointers[I]=new i.default(I)),this.dispatchEvent(M,"pointerdown",P),B.pointerType==="touch")this.dispatchEvent(M,"touchstart",P);else if(B.pointerType==="mouse"||B.pointerType==="pen"){var R=B.button===2;R?M.trackedPointers[I].rightDown=!0:M.trackedPointers[I].leftDown=!0,this.dispatchEvent(M,R?"rightdown":"mousedown",P)}}},E.prototype.onPointerComplete=function(P,M,A){for(var B=this.normalizeToPointerData(P),I=B.length,R=P.target!==this.interactionDOMElement?"outside":"",D=0;D<I;D++){var L=B[D],F=this.getInteractionDataForPointerId(L),N=this.configureInteractionEventForDOMEvent(this.eventData,L,F);if(N.data.originalEvent=P,this.processInteractive(N,this.renderer._lastObjectRendered,A,M||!R),this.emit(M?"pointercancel":"pointerup"+R,N),L.pointerType==="mouse"||L.pointerType==="pen"){var U=L.button===2;this.emit(U?"rightup"+R:"mouseup"+R,N)}else L.pointerType==="touch"&&(this.emit(M?"touchcancel":"touchend"+R,N),this.releaseInteractionDataForPointerId(L.pointerId,F))}},E.prototype.onPointerCancel=function(P){this.supportsTouchEvents&&P.pointerType==="touch"||this.onPointerComplete(P,!0,this.processPointerCancel)},E.prototype.processPointerCancel=function(P,M){var A=P.data,B=P.data.identifier;M.trackedPointers[B]!==void 0&&(delete M.trackedPointers[B],this.dispatchEvent(M,"pointercancel",P),A.pointerType==="touch"&&this.dispatchEvent(M,"touchcancel",P))},E.prototype.onPointerUp=function(P){this.supportsTouchEvents&&P.pointerType==="touch"||this.onPointerComplete(P,!1,this.processPointerUp)},E.prototype.processPointerUp=function(P,M,A){var B=P.data,I=P.data.identifier,R=M.trackedPointers[I],D=B.pointerType==="touch",L=B.pointerType==="mouse"||B.pointerType==="pen",F=!1;if(L){var N=B.button===2,U=i.default.FLAGS,k=N?U.RIGHT_DOWN:U.LEFT_DOWN,G=R!==void 0&&R.flags&k;A?(this.dispatchEvent(M,N?"rightup":"mouseup",P),G&&(this.dispatchEvent(M,N?"rightclick":"click",P),F=!0)):G&&this.dispatchEvent(M,N?"rightupoutside":"mouseupoutside",P),R&&(N?R.rightDown=!1:R.leftDown=!1)}A?(this.dispatchEvent(M,"pointerup",P),D&&this.dispatchEvent(M,"touchend",P),R&&((!L||F)&&this.dispatchEvent(M,"pointertap",P),D&&(this.dispatchEvent(M,"tap",P),R.over=!1))):R&&(this.dispatchEvent(M,"pointerupoutside",P),D&&this.dispatchEvent(M,"touchendoutside",P)),R&&R.none&&delete M.trackedPointers[I]},E.prototype.onPointerMove=function(P){if(!(this.supportsTouchEvents&&P.pointerType==="touch")){var M=this.normalizeToPointerData(P);(M[0].pointerType==="mouse"||M[0].pointerType==="pen")&&(this.didMove=!0,this.cursor=null);for(var A=M.length,B=0;B<A;B++){var I=M[B],R=this.getInteractionDataForPointerId(I),D=this.configureInteractionEventForDOMEvent(this.eventData,I,R);D.data.originalEvent=P;var L=I.pointerType==="touch"?this.moveWhenInside:!0;this.processInteractive(D,this.renderer._lastObjectRendered,this.processPointerMove,L),this.emit("pointermove",D),I.pointerType==="touch"&&this.emit("touchmove",D),(I.pointerType==="mouse"||I.pointerType==="pen")&&this.emit("mousemove",D)}M[0].pointerType==="mouse"&&this.setCursorMode(this.cursor)}},E.prototype.processPointerMove=function(P,M,A){var B=P.data,I=B.pointerType==="touch",R=B.pointerType==="mouse"||B.pointerType==="pen";R&&this.processPointerOverOut(P,M,A),(!this.moveWhenInside||A)&&(this.dispatchEvent(M,"pointermove",P),I&&this.dispatchEvent(M,"touchmove",P),R&&this.dispatchEvent(M,"mousemove",P))},E.prototype.onPointerOut=function(P){if(!(this.supportsTouchEvents&&P.pointerType==="touch")){var M=this.normalizeToPointerData(P),A=M[0];A.pointerType==="mouse"&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var B=this.getInteractionDataForPointerId(A),I=this.configureInteractionEventForDOMEvent(this.eventData,A,B);I.data.originalEvent=A,this.processInteractive(I,this.renderer._lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",I),A.pointerType==="mouse"||A.pointerType==="pen"?this.emit("mouseout",I):this.releaseInteractionDataForPointerId(B.identifier)}},E.prototype.processPointerOverOut=function(P,M,A){var B=P.data,I=P.data.identifier,R=B.pointerType==="mouse"||B.pointerType==="pen",D=M.trackedPointers[I];A&&!D&&(D=M.trackedPointers[I]=new i.default(I)),D!==void 0&&(A&&this.mouseOverRenderer?(D.over||(D.over=!0,this.dispatchEvent(M,"pointerover",P),R&&this.dispatchEvent(M,"mouseover",P)),R&&this.cursor===null&&(this.cursor=M.cursor)):D.over&&(D.over=!1,this.dispatchEvent(M,"pointerout",this.eventData),R&&this.dispatchEvent(M,"mouseout",P),D.none&&delete M.trackedPointers[I]))},E.prototype.onPointerOver=function(P){var M=this.normalizeToPointerData(P),A=M[0],B=this.getInteractionDataForPointerId(A),I=this.configureInteractionEventForDOMEvent(this.eventData,A,B);I.data.originalEvent=A,A.pointerType==="mouse"&&(this.mouseOverRenderer=!0),this.emit("pointerover",I),(A.pointerType==="mouse"||A.pointerType==="pen")&&this.emit("mouseover",I)},E.prototype.getInteractionDataForPointerId=function(P){var M=P.pointerId,A=void 0;return M===y||P.pointerType==="mouse"?A=this.mouse:this.activeInteractionData[M]?A=this.activeInteractionData[M]:(A=this.interactionDataPool.pop()||new p.default,A.identifier=M,this.activeInteractionData[M]=A),A.copyEvent(P),A},E.prototype.releaseInteractionDataForPointerId=function(P){var M=this.activeInteractionData[P];M&&(delete this.activeInteractionData[P],M.reset(),this.interactionDataPool.push(M))},E.prototype.configureInteractionEventForDOMEvent=function(P,M,A){return P.data=A,this.mapPositionToPoint(A.global,M.clientX,M.clientY),navigator.isCocoonJS&&M.pointerType==="touch"&&(A.global.x=A.global.x/this.resolution,A.global.y=A.global.y/this.resolution),M.pointerType==="touch"&&(M.globalX=A.global.x,M.globalY=A.global.y),A.originalEvent=M,P.reset(),P},E.prototype.normalizeToPointerData=function(P){var M=[];if(this.supportsTouchEvents&&P instanceof TouchEvent)for(var A=0,B=P.changedTouches.length;A<B;A++){var I=P.changedTouches[A];typeof I.button>"u"&&(I.button=P.touches.length?1:0),typeof I.buttons>"u"&&(I.buttons=P.touches.length?1:0),typeof I.isPrimary>"u"&&(I.isPrimary=P.touches.length===1&&P.type==="touchstart"),typeof I.width>"u"&&(I.width=I.radiusX||1),typeof I.height>"u"&&(I.height=I.radiusY||1),typeof I.tiltX>"u"&&(I.tiltX=0),typeof I.tiltY>"u"&&(I.tiltY=0),typeof I.pointerType>"u"&&(I.pointerType="touch"),typeof I.pointerId>"u"&&(I.pointerId=I.identifier||0),typeof I.pressure>"u"&&(I.pressure=I.force||.5),I.twist=0,I.tangentialPressure=0,typeof I.layerX>"u"&&(I.layerX=I.offsetX=I.clientX),typeof I.layerY>"u"&&(I.layerY=I.offsetY=I.clientY),I.isNormalized=!0,M.push(I)}else P instanceof MouseEvent&&(!this.supportsPointerEvents||!(P instanceof window.PointerEvent))&&(typeof P.isPrimary>"u"&&(P.isPrimary=!0),typeof P.width>"u"&&(P.width=1),typeof P.height>"u"&&(P.height=1),typeof P.tiltX>"u"&&(P.tiltX=0),typeof P.tiltY>"u"&&(P.tiltY=0),typeof P.pointerType>"u"&&(P.pointerType="mouse"),typeof P.pointerId>"u"&&(P.pointerId=y),typeof P.pressure>"u"&&(P.pressure=.5),P.twist=0,P.tangentialPressure=0,P.isNormalized=!0),M.push(P);return M},E.prototype.destroy=function(){this.removeEvents(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this._tempPoint=null},E}(r.default);e.default=b,c.WebGLRenderer.registerPlugin("interaction",b),c.CanvasRenderer.registerPlugin("interaction",b)},{"../core":65,"./InteractionData":155,"./InteractionEvent":156,"./InteractionTrackingData":158,"./interactiveTarget":160,eventemitter3:3}],158:[function(_,n,e){e.__esModule=!0;var l=function(){function s(p,v){for(var h=0;h<v.length;h++){var o=v[h];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(p,o.key,o)}}return function(p,v,h){return v&&s(p.prototype,v),h&&s(p,h),p}}();function u(s,p){if(!(s instanceof p))throw new TypeError("Cannot call a class as a function")}var c=function(){function s(p){u(this,s),this._pointerId=p,this._flags=s.FLAGS.NONE}return s.prototype._doSet=function(v,h){h?this._flags=this._flags|v:this._flags=this._flags&~v},l(s,[{key:"pointerId",get:function(){return this._pointerId}},{key:"flags",get:function(){return this._flags},set:function(v){this._flags=v}},{key:"none",get:function(){return this._flags===this.constructor.FLAGS.NONE}},{key:"over",get:function(){return(this._flags&this.constructor.FLAGS.OVER)!==0},set:function(v){this._doSet(this.constructor.FLAGS.OVER,v)}},{key:"rightDown",get:function(){return(this._flags&this.constructor.FLAGS.RIGHT_DOWN)!==0},set:function(v){this._doSet(this.constructor.FLAGS.RIGHT_DOWN,v)}},{key:"leftDown",get:function(){return(this._flags&this.constructor.FLAGS.LEFT_DOWN)!==0},set:function(v){this._doSet(this.constructor.FLAGS.LEFT_DOWN,v)}}]),s}();e.default=c,c.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4})},{}],159:[function(_,n,e){e.__esModule=!0;var l=_("./InteractionData");Object.defineProperty(e,"InteractionData",{enumerable:!0,get:function(){return v(l).default}});var u=_("./InteractionManager");Object.defineProperty(e,"InteractionManager",{enumerable:!0,get:function(){return v(u).default}});var c=_("./interactiveTarget");Object.defineProperty(e,"interactiveTarget",{enumerable:!0,get:function(){return v(c).default}});var s=_("./InteractionTrackingData");Object.defineProperty(e,"InteractionTrackingData",{enumerable:!0,get:function(){return v(s).default}});var p=_("./InteractionEvent");Object.defineProperty(e,"InteractionEvent",{enumerable:!0,get:function(){return v(p).default}});function v(h){return h&&h.__esModule?h:{default:h}}},{"./InteractionData":155,"./InteractionEvent":156,"./InteractionManager":157,"./InteractionTrackingData":158,"./interactiveTarget":160}],160:[function(_,n,e){e.__esModule=!0,e.default={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return this.cursor==="pointer"},set buttonMode(l){l?this.cursor="pointer":this.cursor==="pointer"&&(this.cursor=null)},cursor:null,get trackedPointers(){return this._trackedPointers===void 0&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0}},{}],161:[function(_,n,e){e.__esModule=!0,e.parse=v,e.default=function(){return function(o,i){if(!o.data||o.type!==c.Resource.TYPE.XML){i();return}if(o.data.getElementsByTagName("page").length===0||o.data.getElementsByTagName("info").length===0||o.data.getElementsByTagName("info")[0].getAttribute("face")===null){i();return}var t=o.isDataUrl?"":u.dirname(o.url);o.isDataUrl&&(t==="."&&(t=""),this.baseUrl&&t&&this.baseUrl.charAt(this.baseUrl.length-1)==="/"&&(t+="/")),t=t.replace(this.baseUrl,""),t&&t.charAt(t.length-1)!=="/"&&(t+="/");for(var r=o.data.getElementsByTagName("page"),d={},a=function(S){d[S.metadata.pageFile]=S.texture,Object.keys(d).length===r.length&&(v(o,d),i())},f=0;f<r.length;++f){var m=r[f].getAttribute("file"),g=t+m,x=!1;for(var T in this.resources){var y=this.resources[T];if(y.url===g){y.metadata.pageFile=m,y.texture?a(y):y.onAfterMiddleware.add(a),x=!0;break}}if(!x){var w={crossOrigin:o.crossOrigin,loadType:c.Resource.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:m},o.metadata.imageMetadata),parentResource:o};this.add(g,w,a)}}}};var l=_("path"),u=p(l),c=_("resource-loader"),s=_("../extras");function p(h){if(h&&h.__esModule)return h;var o={};if(h!=null)for(var i in h)Object.prototype.hasOwnProperty.call(h,i)&&(o[i]=h[i]);return o.default=h,o}function v(h,o){h.bitmapFont=s.BitmapText.registerFont(h.data,o)}},{"../extras":141,path:8,"resource-loader":36}],162:[function(_,n,e){e.__esModule=!0,e.shared=e.Resource=e.textureParser=e.getResourcePath=e.spritesheetParser=e.parseBitmapFontData=e.bitmapFontParser=e.Loader=void 0;var l=_("./bitmapFontParser");Object.defineProperty(e,"bitmapFontParser",{enumerable:!0,get:function(){return i(l).default}}),Object.defineProperty(e,"parseBitmapFontData",{enumerable:!0,get:function(){return l.parse}});var u=_("./spritesheetParser");Object.defineProperty(e,"spritesheetParser",{enumerable:!0,get:function(){return i(u).default}}),Object.defineProperty(e,"getResourcePath",{enumerable:!0,get:function(){return u.getResourcePath}});var c=_("./textureParser");Object.defineProperty(e,"textureParser",{enumerable:!0,get:function(){return i(c).default}});var s=_("resource-loader");Object.defineProperty(e,"Resource",{enumerable:!0,get:function(){return s.Resource}});var p=_("../core/Application"),v=i(p),h=_("./loader"),o=i(h);function i(d){return d&&d.__esModule?d:{default:d}}e.Loader=o.default;var t=new o.default;t.destroy=function(){},e.shared=t;var r=v.default.prototype;r._loader=null,Object.defineProperty(r,"loader",{get:function(){if(!this._loader){var a=this._options.sharedLoader;this._loader=a?t:new o.default}return this._loader}}),r._parentDestroy=r.destroy,r.destroy=function(a,f){this._loader&&(this._loader.destroy(),this._loader=null),this._parentDestroy(a,f)}},{"../core/Application":43,"./bitmapFontParser":161,"./loader":163,"./spritesheetParser":164,"./textureParser":165,"resource-loader":36}],163:[function(_,n,e){e.__esModule=!0;var l=_("resource-loader"),u=d(l),c=_("resource-loader/lib/middlewares/parsing/blob"),s=_("eventemitter3"),p=d(s),v=_("./textureParser"),h=d(v),o=_("./spritesheetParser"),i=d(o),t=_("./bitmapFontParser"),r=d(t);function d(y){return y&&y.__esModule?y:{default:y}}function a(y,w){if(!(y instanceof w))throw new TypeError("Cannot call a class as a function")}function f(y,w){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:y}function m(y,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);y.prototype=Object.create(w&&w.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(y,w):y.__proto__=w)}var g=function(y){m(w,y);function w(b,S){a(this,w);var E=f(this,y.call(this,b,S));p.default.call(E);for(var O=0;O<w._pixiMiddleware.length;++O)E.use(w._pixiMiddleware[O]());return E.onStart.add(function(P){return E.emit("start",P)}),E.onProgress.add(function(P,M){return E.emit("progress",P,M)}),E.onError.add(function(P,M,A){return E.emit("error",P,M,A)}),E.onLoad.add(function(P,M){return E.emit("load",P,M)}),E.onComplete.add(function(P,M){return E.emit("complete",P,M)}),E}return w.addPixiMiddleware=function(S){w._pixiMiddleware.push(S)},w.prototype.destroy=function(){this.removeAllListeners(),this.reset()},w}(u.default);e.default=g;for(var x in p.default.prototype)g.prototype[x]=p.default.prototype[x];g._pixiMiddleware=[c.blobMiddlewareFactory,h.default,i.default,r.default];var T=u.default.Resource;T.setExtensionXhrType("fnt",T.XHR_RESPONSE_TYPE.DOCUMENT)},{"./bitmapFontParser":161,"./spritesheetParser":164,"./textureParser":165,eventemitter3:3,"resource-loader":36,"resource-loader/lib/middlewares/parsing/blob":37}],164:[function(_,n,e){e.__esModule=!0,e.default=function(){return function(o,i){var t=o.name+"_image";if(!o.data||o.type!==l.Resource.TYPE.JSON||!o.data.frames||this.resources[t]){i();return}var r={crossOrigin:o.crossOrigin,metadata:o.metadata.imageMetadata,parentResource:o},d=v(o,this.baseUrl);this.add(t,d,r,function(f){if(f.error){i(f.error);return}var m=new s.Spritesheet(f.texture.baseTexture,o.data,o.url);m.parse(function(){o.spritesheet=m,o.textures=m.textures,i()})})}},e.getResourcePath=v;var l=_("resource-loader"),u=_("url"),c=p(u),s=_("../core");function p(h){return h&&h.__esModule?h:{default:h}}function v(h,o){return h.isDataUrl?h.data.meta.image:c.default.resolve(h.url.replace(o,""),h.data.meta.image)}},{"../core":65,"resource-loader":36,url:38}],165:[function(_,n,e){e.__esModule=!0,e.default=function(){return function(v,h){v.data&&v.type===l.Resource.TYPE.IMAGE&&(v.texture=c.default.fromLoader(v.data,v.url,v.name)),h()}};var l=_("resource-loader"),u=_("../core/textures/Texture"),c=s(u);function s(p){return p&&p.__esModule?p:{default:p}}},{"../core/textures/Texture":115,"resource-loader":36}],166:[function(_,n,e){e.__esModule=!0;var l=function(){function f(m,g){for(var x=0;x<g.length;x++){var T=g[x];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(m,T.key,T)}}return function(m,g,x){return g&&f(m.prototype,g),x&&f(m,x),m}}(),u=_("../core"),c=h(u),s=_("../core/textures/Texture"),p=v(s);function v(f){return f&&f.__esModule?f:{default:f}}function h(f){if(f&&f.__esModule)return f;var m={};if(f!=null)for(var g in f)Object.prototype.hasOwnProperty.call(f,g)&&(m[g]=f[g]);return m.default=f,m}function o(f,m){if(!(f instanceof m))throw new TypeError("Cannot call a class as a function")}function i(f,m){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:f}function t(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(f,m):f.__proto__=m)}var r=new c.Point,d=new c.Polygon,a=function(f){t(m,f);function m(g,x,T,y,w){o(this,m);var b=i(this,f.call(this));return b._texture=g||p.default.EMPTY,b.uvs=T||new Float32Array([0,0,1,0,1,1,0,1]),b.vertices=x||new Float32Array([0,0,100,0,100,100,0,100]),b.indices=y||new Uint16Array([0,1,3,2]),b.dirty=0,b.indexDirty=0,b.vertexDirty=0,b.autoUpdate=!0,b.blendMode=c.BLEND_MODES.NORMAL,b.canvasPadding=c.settings.MESH_CANVAS_PADDING,b.drawMode=w||m.DRAW_MODES.TRIANGLE_MESH,b.shader=null,b.tintRgb=new Float32Array([1,1,1]),b._glDatas={},b._uvTransform=new c.TextureMatrix(b._texture),b.uploadUvTransform=!1,b.pluginName="mesh",b}return m.prototype._renderWebGL=function(x){this.refresh(),x.setObjectRenderer(x.plugins[this.pluginName]),x.plugins[this.pluginName].render(this)},m.prototype._renderCanvas=function(x){this.refresh(),x.plugins[this.pluginName].render(this)},m.prototype._onTextureUpdate=function(){this._uvTransform.texture=this._texture,this.refresh()},m.prototype.multiplyUvs=function(){this.uploadUvTransform||this._uvTransform.multiplyUvs(this.uvs)},m.prototype.refresh=function(x){this.autoUpdate&&this.vertexDirty++,this._uvTransform.update(x)&&this._refresh()},m.prototype._refresh=function(){},m.prototype._calculateBounds=function(){this._bounds.addVertices(this.transform,this.vertices,0,this.vertices.length)},m.prototype.containsPoint=function(x){if(!this.getBounds().contains(x.x,x.y))return!1;this.worldTransform.applyInverse(x,r);for(var T=this.vertices,y=d.points,w=this.indices,b=this.indices.length,S=this.drawMode===m.DRAW_MODES.TRIANGLES?3:1,E=0;E+2<b;E+=S){var O=w[E]*2,P=w[E+1]*2,M=w[E+2]*2;if(y[0]=T[O],y[1]=T[O+1],y[2]=T[P],y[3]=T[P+1],y[4]=T[M],y[5]=T[M+1],d.contains(r.x,r.y))return!0}return!1},m.prototype.destroy=function(x){for(var T in this._glDatas){var y=this._glDatas[T];y.destroy?y.destroy():(y.vertexBuffer&&(y.vertexBuffer.destroy(),y.vertexBuffer=null),y.indexBuffer&&(y.indexBuffer.destroy(),y.indexBuffer=null),y.uvBuffer&&(y.uvBuffer.destroy(),y.uvBuffer=null),y.vao&&(y.vao.destroy(),y.vao=null))}this._glDatas=null,f.prototype.destroy.call(this,x)},l(m,[{key:"texture",get:function(){return this._texture},set:function(x){this._texture!==x&&(this._texture=x,x&&(x.baseTexture.hasLoaded?this._onTextureUpdate():x.once("update",this._onTextureUpdate,this)))}},{key:"tint",get:function(){return c.utils.rgb2hex(this.tintRgb)},set:function(x){this.tintRgb=c.utils.hex2rgb(x,this.tintRgb)}}]),m}(c.Container);e.default=a,a.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},{"../core":65,"../core/textures/Texture":115}],167:[function(_,n,e){e.__esModule=!0;var l=function(){function t(r,d){for(var a=0;a<d.length;a++){var f=d[a];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(r,f.key,f)}}return function(r,d,a){return d&&t(r.prototype,d),a&&t(r,a),r}}(),u=_("./Plane"),c=s(u);function s(t){return t&&t.__esModule?t:{default:t}}function p(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function v(t,r){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&(typeof r=="object"||typeof r=="function")?r:t}function h(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof r);t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(t,r):t.__proto__=r)}var o=10,i=function(t){h(r,t);function r(d,a,f,m,g){p(this,r);var x=v(this,t.call(this,d,4,4));return x._origWidth=d.orig.width,x._origHeight=d.orig.height,x._width=x._origWidth,x._height=x._origHeight,x._leftWidth=typeof a<"u"?a:o,x._rightWidth=typeof m<"u"?m:o,x._topHeight=typeof f<"u"?f:o,x._bottomHeight=typeof g<"u"?g:o,x.refresh(!0),x}return r.prototype.updateHorizontalVertices=function(){var a=this.vertices,f=this._topHeight+this._bottomHeight,m=this._height>f?1:this._height/f;a[9]=a[11]=a[13]=a[15]=this._topHeight*m,a[17]=a[19]=a[21]=a[23]=this._height-this._bottomHeight*m,a[25]=a[27]=a[29]=a[31]=this._height},r.prototype.updateVerticalVertices=function(){var a=this.vertices,f=this._leftWidth+this._rightWidth,m=this._width>f?1:this._width/f;a[2]=a[10]=a[18]=a[26]=this._leftWidth*m,a[4]=a[12]=a[20]=a[28]=this._width-this._rightWidth*m,a[6]=a[14]=a[22]=a[30]=this._width},r.prototype._renderCanvas=function(a){var f=a.context;f.globalAlpha=this.worldAlpha,a.setBlendMode(this.blendMode);var m=this.worldTransform,g=a.resolution;a.roundPixels?f.setTransform(m.a*g,m.b*g,m.c*g,m.d*g,m.tx*g|0,m.ty*g|0):f.setTransform(m.a*g,m.b*g,m.c*g,m.d*g,m.tx*g,m.ty*g);var x=this._texture.baseTexture,T=x.source,y=x.width*x.resolution,w=x.height*x.resolution;this.drawSegment(f,T,y,w,0,1,10,11),this.drawSegment(f,T,y,w,2,3,12,13),this.drawSegment(f,T,y,w,4,5,14,15),this.drawSegment(f,T,y,w,8,9,18,19),this.drawSegment(f,T,y,w,10,11,20,21),this.drawSegment(f,T,y,w,12,13,22,23),this.drawSegment(f,T,y,w,16,17,26,27),this.drawSegment(f,T,y,w,18,19,28,29),this.drawSegment(f,T,y,w,20,21,30,31)},r.prototype.drawSegment=function(a,f,m,g,x,T,y,w){var b=this.uvs,S=this.vertices,E=(b[y]-b[x])*m,O=(b[w]-b[T])*g,P=S[y]-S[x],M=S[w]-S[T];E<1&&(E=1),O<1&&(O=1),P<1&&(P=1),M<1&&(M=1),a.drawImage(f,b[x]*m,b[T]*g,E,O,S[x],S[T],P,M)},r.prototype._refresh=function(){t.prototype._refresh.call(this);var a=this.uvs,f=this._texture;this._origWidth=f.orig.width,this._origHeight=f.orig.height;var m=1/this._origWidth,g=1/this._origHeight;a[0]=a[8]=a[16]=a[24]=0,a[1]=a[3]=a[5]=a[7]=0,a[6]=a[14]=a[22]=a[30]=1,a[25]=a[27]=a[29]=a[31]=1,a[2]=a[10]=a[18]=a[26]=m*this._leftWidth,a[4]=a[12]=a[20]=a[28]=1-m*this._rightWidth,a[9]=a[11]=a[13]=a[15]=g*this._topHeight,a[17]=a[19]=a[21]=a[23]=1-g*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.dirty++,this.multiplyUvs()},l(r,[{key:"width",get:function(){return this._width},set:function(a){this._width=a,this._refresh()}},{key:"height",get:function(){return this._height},set:function(a){this._height=a,this._refresh()}},{key:"leftWidth",get:function(){return this._leftWidth},set:function(a){this._leftWidth=a,this._refresh()}},{key:"rightWidth",get:function(){return this._rightWidth},set:function(a){this._rightWidth=a,this._refresh()}},{key:"topHeight",get:function(){return this._topHeight},set:function(a){this._topHeight=a,this._refresh()}},{key:"bottomHeight",get:function(){return this._bottomHeight},set:function(a){this._bottomHeight=a,this._refresh()}}]),r}(c.default);e.default=i},{"./Plane":168}],168:[function(_,n,e){e.__esModule=!0;var l=_("./Mesh"),u=c(l);function c(o){return o&&o.__esModule?o:{default:o}}function s(o,i){if(!(o instanceof i))throw new TypeError("Cannot call a class as a function")}function p(o,i){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i&&(typeof i=="object"||typeof i=="function")?i:o}function v(o,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);o.prototype=Object.create(i&&i.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(o,i):o.__proto__=i)}var h=function(o){v(i,o);function i(t,r,d){s(this,i);var a=p(this,o.call(this,t));return a._ready=!0,a.verticesX=r||10,a.verticesY=d||10,a.drawMode=u.default.DRAW_MODES.TRIANGLES,a.refresh(),a}return i.prototype._refresh=function(){for(var r=this._texture,d=this.verticesX*this.verticesY,a=[],f=[],m=[],g=[],x=this.verticesX-1,T=this.verticesY-1,y=r.width/x,w=r.height/T,b=0;b<d;b++){var S=b%this.verticesX,E=b/this.verticesX|0;a.push(S*y,E*w),m.push(S/x,E/T)}for(var O=x*T,P=0;P<O;P++){var M=P%x,A=P/x|0,B=A*this.verticesX+M,I=A*this.verticesX+M+1,R=(A+1)*this.verticesX+M,D=(A+1)*this.verticesX+M+1;g.push(B,I,R),g.push(I,D,R)}this.vertices=new Float32Array(a),this.uvs=new Float32Array(m),this.colors=new Float32Array(f),this.indices=new Uint16Array(g),this.dirty++,this.indexDirty++,this.multiplyUvs()},i.prototype._onTextureUpdate=function(){u.default.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},i}(u.default);e.default=h},{"./Mesh":166}],169:[function(_,n,e){e.__esModule=!0;var l=_("./Mesh"),u=c(l);function c(o){return o&&o.__esModule?o:{default:o}}function s(o,i){if(!(o instanceof i))throw new TypeError("Cannot call a class as a function")}function p(o,i){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i&&(typeof i=="object"||typeof i=="function")?i:o}function v(o,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);o.prototype=Object.create(i&&i.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(o,i):o.__proto__=i)}var h=function(o){v(i,o);function i(t,r){s(this,i);var d=p(this,o.call(this,t));return d.points=r,d.vertices=new Float32Array(r.length*4),d.uvs=new Float32Array(r.length*4),d.colors=new Float32Array(r.length*2),d.indices=new Uint16Array(r.length*2),d.autoUpdate=!0,d.refresh(),d}return i.prototype._refresh=function(){var r=this.points;if(!(r.length<1||!this._texture._uvs)){this.vertices.length/4!==r.length&&(this.vertices=new Float32Array(r.length*4),this.uvs=new Float32Array(r.length*4),this.colors=new Float32Array(r.length*2),this.indices=new Uint16Array(r.length*2));var d=this.uvs,a=this.indices,f=this.colors;d[0]=0,d[1]=0,d[2]=0,d[3]=1,f[0]=1,f[1]=1,a[0]=0,a[1]=1;for(var m=r.length,g=1;g<m;g++){var x=g*4,T=g/(m-1);d[x]=T,d[x+1]=0,d[x+2]=T,d[x+3]=1,x=g*2,f[x]=1,f[x+1]=1,x=g*2,a[x]=x,a[x+1]=x+1}this.dirty++,this.indexDirty++,this.multiplyUvs(),this.refreshVertices()}},i.prototype.refreshVertices=function(){var r=this.points;if(!(r.length<1))for(var d=r[0],a=void 0,f=0,m=0,g=this.vertices,x=r.length,T=0;T<x;T++){var y=r[T],w=T*4;T<r.length-1?a=r[T+1]:a=y,m=-(a.x-d.x),f=a.y-d.y;var b=Math.sqrt(f*f+m*m),S=this._texture.height/2;f/=b,m/=b,f*=S,m*=S,g[w]=y.x+f,g[w+1]=y.y+m,g[w+2]=y.x-f,g[w+3]=y.y-m,d=y}},i.prototype.updateTransform=function(){this.autoUpdate&&this.refreshVertices(),this.containerUpdateTransform()},i}(u.default);e.default=h},{"./Mesh":166}],170:[function(_,n,e){e.__esModule=!0;var l=_("../../core"),u=v(l),c=_("../Mesh"),s=p(c);function p(i){return i&&i.__esModule?i:{default:i}}function v(i){if(i&&i.__esModule)return i;var t={};if(i!=null)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r]);return t.default=i,t}function h(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function i(t){h(this,i),this.renderer=t}return i.prototype.render=function(r){var d=this.renderer,a=d.context,f=r.worldTransform,m=d.resolution;d.roundPixels?a.setTransform(f.a*m,f.b*m,f.c*m,f.d*m,f.tx*m|0,f.ty*m|0):a.setTransform(f.a*m,f.b*m,f.c*m,f.d*m,f.tx*m,f.ty*m),d.context.globalAlpha=r.worldAlpha,d.setBlendMode(r.blendMode),r.drawMode===s.default.DRAW_MODES.TRIANGLE_MESH?this._renderTriangleMesh(r):this._renderTriangles(r)},i.prototype._renderTriangleMesh=function(r){for(var d=r.vertices.length/2,a=0;a<d-2;a++){var f=a*2;this._renderDrawTriangle(r,f,f+2,f+4)}},i.prototype._renderTriangles=function(r){for(var d=r.indices,a=d.length,f=0;f<a;f+=3){var m=d[f]*2,g=d[f+1]*2,x=d[f+2]*2;this._renderDrawTriangle(r,m,g,x)}},i.prototype._renderDrawTriangle=function(r,d,a,f){var m=this.renderer.context,g=r.uvs,x=r.vertices,T=r._texture;if(T.valid){var y=T.baseTexture,w=y.source,b=y.width,S=y.height,E=void 0,O=void 0,P=void 0,M=void 0,A=void 0,B=void 0;if(r.uploadUvTransform){var I=r._uvTransform.mapCoord;E=(g[d]*I.a+g[d+1]*I.c+I.tx)*y.width,O=(g[a]*I.a+g[a+1]*I.c+I.tx)*y.width,P=(g[f]*I.a+g[f+1]*I.c+I.tx)*y.width,M=(g[d]*I.b+g[d+1]*I.d+I.ty)*y.height,A=(g[a]*I.b+g[a+1]*I.d+I.ty)*y.height,B=(g[f]*I.b+g[f+1]*I.d+I.ty)*y.height}else E=g[d]*y.width,O=g[a]*y.width,P=g[f]*y.width,M=g[d+1]*y.height,A=g[a+1]*y.height,B=g[f+1]*y.height;var R=x[d],D=x[a],L=x[f],F=x[d+1],N=x[a+1],U=x[f+1],k=r.canvasPadding/this.renderer.resolution;if(k>0){var G=k/Math.abs(r.worldTransform.a),W=k/Math.abs(r.worldTransform.d),K=(R+D+L)/3,q=(F+N+U)/3,Q=R-K,J=F-q,V=Math.sqrt(Q*Q+J*J);R=K+Q/V*(V+G),F=q+J/V*(V+W),Q=D-K,J=N-q,V=Math.sqrt(Q*Q+J*J),D=K+Q/V*(V+G),N=q+J/V*(V+W),Q=L-K,J=U-q,V=Math.sqrt(Q*Q+J*J),L=K+Q/V*(V+G),U=q+J/V*(V+W)}m.save(),m.beginPath(),m.moveTo(R,F),m.lineTo(D,N),m.lineTo(L,U),m.closePath(),m.clip();var Z=E*A+M*P+O*B-A*P-M*O-E*B,$=R*A+M*L+D*B-A*L-M*D-R*B,ie=E*D+R*P+O*L-D*P-R*O-E*L,ne=E*A*L+M*D*P+R*O*B-R*A*P-M*O*L-E*D*B,ae=F*A+M*U+N*B-A*U-M*N-F*B,se=E*N+F*P+O*U-N*P-F*O-E*U,re=E*A*U+M*N*P+F*O*B-F*A*P-M*O*U-E*N*B;m.transform($/Z,ae/Z,ie/Z,se/Z,ne/Z,re/Z),m.drawImage(w,0,0,b*y.resolution,S*y.resolution,0,0,b,S),m.restore(),this.renderer.invalidateBlendMode()}},i.prototype.renderMeshFlat=function(r){var d=this.renderer.context,a=r.vertices,f=a.length/2;d.beginPath();for(var m=1;m<f-2;++m){var g=m*2,x=a[g],T=a[g+1],y=a[g+2],w=a[g+3],b=a[g+4],S=a[g+5];d.moveTo(x,T),d.lineTo(y,w),d.lineTo(b,S)}d.fillStyle="#FF0000",d.fill(),d.closePath()},i.prototype.destroy=function(){this.renderer=null},i}();e.default=o,u.CanvasRenderer.registerPlugin("mesh",o)},{"../../core":65,"../Mesh":166}],171:[function(_,n,e){e.__esModule=!0;var l=_("./Mesh");Object.defineProperty(e,"Mesh",{enumerable:!0,get:function(){return h(l).default}});var u=_("./webgl/MeshRenderer");Object.defineProperty(e,"MeshRenderer",{enumerable:!0,get:function(){return h(u).default}});var c=_("./canvas/CanvasMeshRenderer");Object.defineProperty(e,"CanvasMeshRenderer",{enumerable:!0,get:function(){return h(c).default}});var s=_("./Plane");Object.defineProperty(e,"Plane",{enumerable:!0,get:function(){return h(s).default}});var p=_("./NineSlicePlane");Object.defineProperty(e,"NineSlicePlane",{enumerable:!0,get:function(){return h(p).default}});var v=_("./Rope");Object.defineProperty(e,"Rope",{enumerable:!0,get:function(){return h(v).default}});function h(o){return o&&o.__esModule?o:{default:o}}},{"./Mesh":166,"./NineSlicePlane":167,"./Plane":168,"./Rope":169,"./canvas/CanvasMeshRenderer":170,"./webgl/MeshRenderer":172}],172:[function(_,n,e){e.__esModule=!0;var l=_("../../core"),u=o(l),c=_("pixi-gl-core"),s=h(c),p=_("../Mesh"),v=h(p);_("path");function h(f){return f&&f.__esModule?f:{default:f}}function o(f){if(f&&f.__esModule)return f;var m={};if(f!=null)for(var g in f)Object.prototype.hasOwnProperty.call(f,g)&&(m[g]=f[g]);return m.default=f,m}function i(f,m){if(!(f instanceof m))throw new TypeError("Cannot call a class as a function")}function t(f,m){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:f}function r(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(f,m):f.__proto__=m)}var d=u.Matrix.IDENTITY,a=function(f){r(m,f);function m(g){i(this,m);var x=t(this,f.call(this,g));return x.shader=null,x}return m.prototype.onContextChange=function(){var x=this.renderer.gl;this.shader=new u.Shader(x,`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`)},m.prototype.render=function(x){var T=this.renderer,y=T.gl,w=x._texture;if(w.valid){var b=x._glDatas[T.CONTEXT_UID];b||(T.bindVao(null),b={shader:this.shader,vertexBuffer:s.default.GLBuffer.createVertexBuffer(y,x.vertices,y.STREAM_DRAW),uvBuffer:s.default.GLBuffer.createVertexBuffer(y,x.uvs,y.STREAM_DRAW),indexBuffer:s.default.GLBuffer.createIndexBuffer(y,x.indices,y.STATIC_DRAW),vao:null,dirty:x.dirty,indexDirty:x.indexDirty,vertexDirty:x.vertexDirty},b.vao=new s.default.VertexArrayObject(y).addIndex(b.indexBuffer).addAttribute(b.vertexBuffer,b.shader.attributes.aVertexPosition,y.FLOAT,!1,2*4,0).addAttribute(b.uvBuffer,b.shader.attributes.aTextureCoord,y.FLOAT,!1,2*4,0),x._glDatas[T.CONTEXT_UID]=b),T.bindVao(b.vao),x.dirty!==b.dirty&&(b.dirty=x.dirty,b.uvBuffer.upload(x.uvs)),x.indexDirty!==b.indexDirty&&(b.indexDirty=x.indexDirty,b.indexBuffer.upload(x.indices)),x.vertexDirty!==b.vertexDirty&&(b.vertexDirty=x.vertexDirty,b.vertexBuffer.upload(x.vertices)),T.bindShader(b.shader),b.shader.uniforms.uSampler=T.bindTexture(w),T.state.setBlendMode(u.utils.correctBlendMode(x.blendMode,w.baseTexture.premultipliedAlpha)),b.shader.uniforms.uTransform&&(x.uploadUvTransform?b.shader.uniforms.uTransform=x._uvTransform.mapCoord.toArray(!0):b.shader.uniforms.uTransform=d.toArray(!0)),b.shader.uniforms.translationMatrix=x.worldTransform.toArray(!0),b.shader.uniforms.uColor=u.utils.premultiplyRgba(x.tintRgb,x.worldAlpha,b.shader.uniforms.uColor,w.baseTexture.premultipliedAlpha);var S=x.drawMode===v.default.DRAW_MODES.TRIANGLE_MESH?y.TRIANGLE_STRIP:y.TRIANGLES;b.vao.draw(S,x.indices.length,0)}},m}(u.ObjectRenderer);e.default=a,u.WebGLRenderer.registerPlugin("mesh",a)},{"../../core":65,"../Mesh":166,path:8,"pixi-gl-core":15}],173:[function(_,n,e){e.__esModule=!0;var l=function(){function t(r,d){for(var a=0;a<d.length;a++){var f=d[a];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(r,f.key,f)}}return function(r,d,a){return d&&t(r.prototype,d),a&&t(r,a),r}}(),u=_("../core"),c=p(u),s=_("../core/utils");function p(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var d in t)Object.prototype.hasOwnProperty.call(t,d)&&(r[d]=t[d]);return r.default=t,r}function v(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function h(t,r){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&(typeof r=="object"||typeof r=="function")?r:t}function o(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof r);t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(t,r):t.__proto__=r)}var i=function(t){o(r,t);function r(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1500,a=arguments[1],f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:16384,m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;v(this,r);var g=h(this,t.call(this)),x=16384;return f>x&&(f=x),f>d&&(f=d),g._properties=[!1,!0,!1,!1,!1],g._maxSize=d,g._batchSize=f,g._glBuffers={},g._bufferUpdateIDs=[],g._updateID=0,g.interactiveChildren=!1,g.blendMode=c.BLEND_MODES.NORMAL,g.autoResize=m,g.roundPixels=!0,g.baseTexture=null,g.setProperties(a),g._tint=0,g.tintRgb=new Float32Array(4),g.tint=16777215,g}return r.prototype.setProperties=function(a){a&&(this._properties[0]="vertices"in a||"scale"in a?!!a.vertices||!!a.scale:this._properties[0],this._properties[1]="position"in a?!!a.position:this._properties[1],this._properties[2]="rotation"in a?!!a.rotation:this._properties[2],this._properties[3]="uvs"in a?!!a.uvs:this._properties[3],this._properties[4]="tint"in a||"alpha"in a?!!a.tint||!!a.alpha:this._properties[4])},r.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},r.prototype.renderWebGL=function(a){var f=this;!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.hasLoaded||this.baseTexture.once("update",function(){return f.onChildrenChange(0)})),a.setObjectRenderer(a.plugins.particle),a.plugins.particle.render(this))},r.prototype.onChildrenChange=function(a){for(var f=Math.floor(a/this._batchSize);this._bufferUpdateIDs.length<f;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[f]=++this._updateID},r.prototype.renderCanvas=function(a){if(!(!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable)){var f=a.context,m=this.worldTransform,g=!0,x=0,T=0,y=0,w=0;a.setBlendMode(this.blendMode),f.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var b=0;b<this.children.length;++b){var S=this.children[b];if(S.visible){var E=S._texture.frame;if(f.globalAlpha=this.worldAlpha*S.alpha,S.rotation%(Math.PI*2)===0)g&&(f.setTransform(m.a,m.b,m.c,m.d,m.tx*a.resolution,m.ty*a.resolution),g=!1),x=S.anchor.x*(-E.width*S.scale.x)+S.position.x+.5,T=S.anchor.y*(-E.height*S.scale.y)+S.position.y+.5,y=E.width*S.scale.x,w=E.height*S.scale.y;else{g||(g=!0),S.displayObjectUpdateTransform();var O=S.worldTransform;a.roundPixels?f.setTransform(O.a,O.b,O.c,O.d,O.tx*a.resolution|0,O.ty*a.resolution|0):f.setTransform(O.a,O.b,O.c,O.d,O.tx*a.resolution,O.ty*a.resolution),x=S.anchor.x*-E.width+.5,T=S.anchor.y*-E.height+.5,y=E.width,w=E.height}var P=S._texture.baseTexture.resolution;f.drawImage(S._texture.baseTexture.source,E.x*P,E.y*P,E.width*P,E.height*P,x*a.resolution,T*a.resolution,y*a.resolution,w*a.resolution)}}}},r.prototype.destroy=function(a){if(t.prototype.destroy.call(this,a),this._buffers)for(var f=0;f<this._buffers.length;++f)this._buffers[f].destroy();this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},l(r,[{key:"tint",get:function(){return this._tint},set:function(a){this._tint=a,(0,s.hex2rgb)(a,this.tintRgb)}}]),r}(c.Container);e.default=i},{"../core":65,"../core/utils":125}],174:[function(_,n,e){e.__esModule=!0;var l=_("./ParticleContainer");Object.defineProperty(e,"ParticleContainer",{enumerable:!0,get:function(){return c(l).default}});var u=_("./webgl/ParticleRenderer");Object.defineProperty(e,"ParticleRenderer",{enumerable:!0,get:function(){return c(u).default}});function c(s){return s&&s.__esModule?s:{default:s}}},{"./ParticleContainer":173,"./webgl/ParticleRenderer":176}],175:[function(_,n,e){e.__esModule=!0;var l=_("pixi-gl-core"),u=p(l),c=_("../../core/utils/createIndicesForQuads"),s=p(c);function p(o){return o&&o.__esModule?o:{default:o}}function v(o,i){if(!(o instanceof i))throw new TypeError("Cannot call a class as a function")}var h=function(){function o(i,t,r,d){v(this,o),this.gl=i,this.size=d,this.dynamicProperties=[],this.staticProperties=[];for(var a=0;a<t.length;++a){var f=t[a];f={attribute:f.attribute,size:f.size,uploadFunction:f.uploadFunction,unsignedByte:f.unsignedByte,offset:f.offset},r[a]?this.dynamicProperties.push(f):this.staticProperties.push(f)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return o.prototype.initBuffers=function(){var t=this.gl,r=0;this.indices=(0,s.default)(this.size),this.indexBuffer=u.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.dynamicStride=0;for(var d=0;d<this.dynamicProperties.length;++d){var a=this.dynamicProperties[d];a.offset=r,r+=a.size,this.dynamicStride+=a.size}var f=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(f),this.dynamicDataUint32=new Uint32Array(f),this.dynamicBuffer=u.default.GLBuffer.createVertexBuffer(t,f,t.STREAM_DRAW);var m=0;this.staticStride=0;for(var g=0;g<this.staticProperties.length;++g){var x=this.staticProperties[g];x.offset=m,m+=x.size,this.staticStride+=x.size}var T=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(T),this.staticDataUint32=new Uint32Array(T),this.staticBuffer=u.default.GLBuffer.createVertexBuffer(t,T,t.STATIC_DRAW),this.vao=new u.default.VertexArrayObject(t).addIndex(this.indexBuffer);for(var y=0;y<this.dynamicProperties.length;++y){var w=this.dynamicProperties[y];w.unsignedByte?this.vao.addAttribute(this.dynamicBuffer,w.attribute,t.UNSIGNED_BYTE,!0,this.dynamicStride*4,w.offset*4):this.vao.addAttribute(this.dynamicBuffer,w.attribute,t.FLOAT,!1,this.dynamicStride*4,w.offset*4)}for(var b=0;b<this.staticProperties.length;++b){var S=this.staticProperties[b];S.unsignedByte?this.vao.addAttribute(this.staticBuffer,S.attribute,t.UNSIGNED_BYTE,!0,this.staticStride*4,S.offset*4):this.vao.addAttribute(this.staticBuffer,S.attribute,t.FLOAT,!1,this.staticStride*4,S.offset*4)}},o.prototype.uploadDynamic=function(t,r,d){for(var a=0;a<this.dynamicProperties.length;a++){var f=this.dynamicProperties[a];f.uploadFunction(t,r,d,f.unsignedByte?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,f.offset)}this.dynamicBuffer.upload()},o.prototype.uploadStatic=function(t,r,d){for(var a=0;a<this.staticProperties.length;a++){var f=this.staticProperties[a];f.uploadFunction(t,r,d,f.unsignedByte?this.staticDataUint32:this.staticData,this.staticStride,f.offset)}this.staticBuffer.upload()},o.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicBuffer.destroy(),this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer.destroy(),this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null},o}();e.default=h},{"../../core/utils/createIndicesForQuads":123,"pixi-gl-core":15}],176:[function(_,n,e){e.__esModule=!0;var l=_("../../core"),u=i(l),c=_("./ParticleShader"),s=o(c),p=_("./ParticleBuffer"),v=o(p),h=_("../../core/utils");function o(f){return f&&f.__esModule?f:{default:f}}function i(f){if(f&&f.__esModule)return f;var m={};if(f!=null)for(var g in f)Object.prototype.hasOwnProperty.call(f,g)&&(m[g]=f[g]);return m.default=f,m}function t(f,m){if(!(f instanceof m))throw new TypeError("Cannot call a class as a function")}function r(f,m){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:f}function d(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(f,m):f.__proto__=m)}var a=function(f){d(m,f);function m(g){t(this,m);var x=r(this,f.call(this,g));return x.shader=null,x.indexBuffer=null,x.properties=null,x.tempMatrix=new u.Matrix,x.CONTEXT_UID=0,x}return m.prototype.onContextChange=function(){var x=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.shader=new s.default(x),this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,unsignedByte:!0,uploadFunction:this.uploadTint,offset:0}]},m.prototype.start=function(){this.renderer.bindShader(this.shader)},m.prototype.render=function(x){var T=x.children,y=x._maxSize,w=x._batchSize,b=this.renderer,S=T.length;if(S!==0){S>y&&(S=y);var E=x._glBuffers[b.CONTEXT_UID];E||(E=x._glBuffers[b.CONTEXT_UID]=this.generateBuffers(x));var O=T[0]._texture.baseTexture;this.renderer.setBlendMode(u.utils.correctBlendMode(x.blendMode,O.premultipliedAlpha));var P=b.gl,M=x.worldTransform.copy(this.tempMatrix);M.prepend(b._activeRenderTarget.projectionMatrix),this.shader.uniforms.projectionMatrix=M.toArray(!0),this.shader.uniforms.uColor=u.utils.premultiplyRgba(x.tintRgb,x.worldAlpha,this.shader.uniforms.uColor,O.premultipliedAlpha),this.shader.uniforms.uSampler=b.bindTexture(O);for(var A=!1,B=0,I=0;B<S;B+=w,I+=1){var R=S-B;if(R>w&&(R=w),I>=E.length){if(!x.autoResize)break;E.push(this._generateOneMoreBuffer(x))}var D=E[I];D.uploadDynamic(T,B,R);var L=x._bufferUpdateIDs[I]||0;A=A||D._updateID<L,A&&(D._updateID=x._updateID,D.uploadStatic(T,B,R)),b.bindVao(D.vao),D.vao.draw(P.TRIANGLES,R*6)}}},m.prototype.generateBuffers=function(x){for(var T=this.renderer.gl,y=[],w=x._maxSize,b=x._batchSize,S=x._properties,E=0;E<w;E+=b)y.push(new v.default(T,this.properties,S,b));return y},m.prototype._generateOneMoreBuffer=function(x){var T=this.renderer.gl,y=x._batchSize,w=x._properties;return new v.default(T,this.properties,w,y)},m.prototype.uploadVertices=function(x,T,y,w,b,S){for(var E=0,O=0,P=0,M=0,A=0;A<y;++A){var B=x[T+A],I=B._texture,R=B.scale.x,D=B.scale.y,L=I.trim,F=I.orig;L?(O=L.x-B.anchor.x*F.width,E=O+L.width,M=L.y-B.anchor.y*F.height,P=M+L.height):(E=F.width*(1-B.anchor.x),O=F.width*-B.anchor.x,P=F.height*(1-B.anchor.y),M=F.height*-B.anchor.y),w[S]=O*R,w[S+1]=M*D,w[S+b]=E*R,w[S+b+1]=M*D,w[S+b*2]=E*R,w[S+b*2+1]=P*D,w[S+b*3]=O*R,w[S+b*3+1]=P*D,S+=b*4}},m.prototype.uploadPosition=function(x,T,y,w,b,S){for(var E=0;E<y;E++){var O=x[T+E].position;w[S]=O.x,w[S+1]=O.y,w[S+b]=O.x,w[S+b+1]=O.y,w[S+b*2]=O.x,w[S+b*2+1]=O.y,w[S+b*3]=O.x,w[S+b*3+1]=O.y,S+=b*4}},m.prototype.uploadRotation=function(x,T,y,w,b,S){for(var E=0;E<y;E++){var O=x[T+E].rotation;w[S]=O,w[S+b]=O,w[S+b*2]=O,w[S+b*3]=O,S+=b*4}},m.prototype.uploadUvs=function(x,T,y,w,b,S){for(var E=0;E<y;++E){var O=x[T+E]._texture._uvs;O?(w[S]=O.x0,w[S+1]=O.y0,w[S+b]=O.x1,w[S+b+1]=O.y1,w[S+b*2]=O.x2,w[S+b*2+1]=O.y2,w[S+b*3]=O.x3,w[S+b*3+1]=O.y3,S+=b*4):(w[S]=0,w[S+1]=0,w[S+b]=0,w[S+b+1]=0,w[S+b*2]=0,w[S+b*2+1]=0,w[S+b*3]=0,w[S+b*3+1]=0,S+=b*4)}},m.prototype.uploadTint=function(x,T,y,w,b,S){for(var E=0;E<y;++E){var O=x[T+E],P=O._texture.baseTexture.premultipliedAlpha,M=O.alpha,A=M<1&&P?(0,h.premultiplyTint)(O._tintRGB,M):O._tintRGB+(M*255<<24);w[S]=A,w[S+b]=A,w[S+b*2]=A,w[S+b*3]=A,S+=b*4}},m.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),f.prototype.destroy.call(this),this.shader.destroy(),this.indices=null,this.tempMatrix=null},m}(u.ObjectRenderer);e.default=a,u.WebGLRenderer.registerPlugin("particle",a)},{"../../core":65,"../../core/utils":125,"./ParticleBuffer":175,"./ParticleShader":177}],177:[function(_,n,e){e.__esModule=!0;var l=_("../../core/Shader"),u=c(l);function c(o){return o&&o.__esModule?o:{default:o}}function s(o,i){if(!(o instanceof i))throw new TypeError("Cannot call a class as a function")}function p(o,i){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i&&(typeof i=="object"||typeof i=="function")?i:o}function v(o,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);o.prototype=Object.create(i&&i.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(o,i):o.__proto__=i)}var h=function(o){v(i,o);function i(t){return s(this,i),p(this,o.call(this,t,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","attribute vec2 aPositionCoord;","attribute float aRotation;","uniform mat3 projectionMatrix;","uniform vec4 uColor;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   vec2 v = vec2(x, y);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor * uColor;","}"].join(`
`),["varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void){","  vec4 color = texture2D(uSampler, vTextureCoord) * vColor;","  gl_FragColor = color;","}"].join(`
`)))}return i}(u.default);e.default=h},{"../../core/Shader":44}],178:[function(_,n,e){Math.sign||(Math.sign=function(u){return u=Number(u),u===0||isNaN(u)?u:u>0?1:-1})},{}],179:[function(_,n,e){Number.isInteger||(Number.isInteger=function(u){return typeof u=="number"&&isFinite(u)&&Math.floor(u)===u})},{}],180:[function(_,n,e){var l=_("object-assign"),u=c(l);function c(s){return s&&s.__esModule?s:{default:s}}Object.assign||(Object.assign=u.default)},{"object-assign":6}],181:[function(_,n,e){_("./Object.assign"),_("./requestAnimationFrame"),_("./Math.sign"),_("./Number.isInteger"),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array)},{"./Math.sign":178,"./Number.isInteger":179,"./Object.assign":180,"./requestAnimationFrame":182}],182:[function(_,n,e){(function(l){var u=16;if(Date.now&&Date.prototype.getTime||(Date.now=function(){return new Date().getTime()}),!(l.performance&&l.performance.now)){var c=Date.now();l.performance||(l.performance={}),l.performance.now=function(){return Date.now()-c}}for(var s=Date.now(),p=["ms","moz","webkit","o"],v=0;v<p.length&&!l.requestAnimationFrame;++v){var h=p[v];l.requestAnimationFrame=l[h+"RequestAnimationFrame"],l.cancelAnimationFrame=l[h+"CancelAnimationFrame"]||l[h+"CancelRequestAnimationFrame"]}l.requestAnimationFrame||(l.requestAnimationFrame=function(o){if(typeof o!="function")throw new TypeError(o+"is not a function");var i=Date.now(),t=u+s-i;return t<0&&(t=0),s=i,setTimeout(function(){s=Date.now(),o(performance.now())},t)}),l.cancelAnimationFrame||(l.cancelAnimationFrame=function(o){return clearTimeout(o)})}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],183:[function(_,n,e){e.__esModule=!0;var l=_("../core"),u=v(l),c=_("./limiters/CountLimiter"),s=p(c);function p(x){return x&&x.__esModule?x:{default:x}}function v(x){if(x&&x.__esModule)return x;var T={};if(x!=null)for(var y in x)Object.prototype.hasOwnProperty.call(x,y)&&(T[y]=x[y]);return T.default=x,T}function h(x,T){if(!(x instanceof T))throw new TypeError("Cannot call a class as a function")}var o=u.ticker.shared;u.settings.UPLOADS_PER_FRAME=4;var i=function(){function x(T){var y=this;h(this,x),this.limiter=new s.default(u.settings.UPLOADS_PER_FRAME),this.renderer=T,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){y.queue&&y.prepareItems()},this.registerFindHook(m),this.registerFindHook(g),this.registerFindHook(t),this.registerFindHook(r),this.registerFindHook(d),this.registerUploadHook(a),this.registerUploadHook(f)}return x.prototype.upload=function(y,w){typeof y=="function"&&(w=y,y=null),y&&this.add(y),this.queue.length?(w&&this.completes.push(w),this.ticking||(this.ticking=!0,o.addOnce(this.tick,this,u.UPDATE_PRIORITY.UTILITY))):w&&w()},x.prototype.tick=function(){setTimeout(this.delayedTick,0)},x.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var y=this.queue[0],w=!1;if(y&&!y._destroyed){for(var b=0,S=this.uploadHooks.length;b<S;b++)if(this.uploadHooks[b](this.uploadHookHelper,y)){this.queue.shift(),w=!0;break}}w||this.queue.shift()}if(this.queue.length)o.addOnce(this.tick,this,u.UPDATE_PRIORITY.UTILITY);else{this.ticking=!1;var E=this.completes.slice(0);this.completes.length=0;for(var O=0,P=E.length;O<P;O++)E[O]()}},x.prototype.registerFindHook=function(y){return y&&this.addHooks.push(y),this},x.prototype.registerUploadHook=function(y){return y&&this.uploadHooks.push(y),this},x.prototype.add=function(y){for(var w=0,b=this.addHooks.length;w<b&&!this.addHooks[w](y,this.queue);w++);if(y instanceof u.Container)for(var S=y.children.length-1;S>=0;S--)this.add(y.children[S]);return this},x.prototype.destroy=function(){this.ticking&&o.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},x}();e.default=i;function t(x,T){var y=!1;if(x&&x._textures&&x._textures.length){for(var w=0;w<x._textures.length;w++)if(x._textures[w]instanceof u.Texture){var b=x._textures[w].baseTexture;T.indexOf(b)===-1&&(T.push(b),y=!0)}}return y}function r(x,T){return x instanceof u.BaseTexture?(T.indexOf(x)===-1&&T.push(x),!0):!1}function d(x,T){if(x._texture&&x._texture instanceof u.Texture){var y=x._texture.baseTexture;return T.indexOf(y)===-1&&T.push(y),!0}return!1}function a(x,T){return T instanceof u.Text?(T.updateText(!0),!0):!1}function f(x,T){if(T instanceof u.TextStyle){var y=T.toFontString();return u.TextMetrics.measureFont(y),!0}return!1}function m(x,T){if(x instanceof u.Text){T.indexOf(x.style)===-1&&T.push(x.style),T.indexOf(x)===-1&&T.push(x);var y=x._texture.baseTexture;return T.indexOf(y)===-1&&T.push(y),!0}return!1}function g(x,T){return x instanceof u.TextStyle?(T.indexOf(x)===-1&&T.push(x),!0):!1}},{"../core":65,"./limiters/CountLimiter":186}],184:[function(_,n,e){e.__esModule=!0;var l=_("../../core"),u=v(l),c=_("../BasePrepare"),s=p(c);function p(a){return a&&a.__esModule?a:{default:a}}function v(a){if(a&&a.__esModule)return a;var f={};if(a!=null)for(var m in a)Object.prototype.hasOwnProperty.call(a,m)&&(f[m]=a[m]);return f.default=a,f}function h(a,f){if(!(a instanceof f))throw new TypeError("Cannot call a class as a function")}function o(a,f){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:a}function i(a,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);a.prototype=Object.create(f&&f.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(a,f):a.__proto__=f)}var t=16,r=function(a){i(f,a);function f(m){h(this,f);var g=o(this,a.call(this,m));return g.uploadHookHelper=g,g.canvas=document.createElement("canvas"),g.canvas.width=t,g.canvas.height=t,g.ctx=g.canvas.getContext("2d"),g.registerUploadHook(d),g}return f.prototype.destroy=function(){a.prototype.destroy.call(this),this.ctx=null,this.canvas=null},f}(s.default);e.default=r;function d(a,f){if(f instanceof u.BaseTexture){var m=f.source,g=m.width===0?a.canvas.width:Math.min(a.canvas.width,m.width),x=m.height===0?a.canvas.height:Math.min(a.canvas.height,m.height);return a.ctx.drawImage(m,0,0,g,x,0,0,a.canvas.width,a.canvas.height),!0}return!1}u.CanvasRenderer.registerPlugin("prepare",r)},{"../../core":65,"../BasePrepare":183}],185:[function(_,n,e){e.__esModule=!0;var l=_("./webgl/WebGLPrepare");Object.defineProperty(e,"webgl",{enumerable:!0,get:function(){return v(l).default}});var u=_("./canvas/CanvasPrepare");Object.defineProperty(e,"canvas",{enumerable:!0,get:function(){return v(u).default}});var c=_("./BasePrepare");Object.defineProperty(e,"BasePrepare",{enumerable:!0,get:function(){return v(c).default}});var s=_("./limiters/CountLimiter");Object.defineProperty(e,"CountLimiter",{enumerable:!0,get:function(){return v(s).default}});var p=_("./limiters/TimeLimiter");Object.defineProperty(e,"TimeLimiter",{enumerable:!0,get:function(){return v(p).default}});function v(h){return h&&h.__esModule?h:{default:h}}},{"./BasePrepare":183,"./canvas/CanvasPrepare":184,"./limiters/CountLimiter":186,"./limiters/TimeLimiter":187,"./webgl/WebGLPrepare":188}],186:[function(_,n,e){e.__esModule=!0;function l(c,s){if(!(c instanceof s))throw new TypeError("Cannot call a class as a function")}var u=function(){function c(s){l(this,c),this.maxItemsPerFrame=s,this.itemsLeft=0}return c.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},c.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},c}();e.default=u},{}],187:[function(_,n,e){e.__esModule=!0;function l(c,s){if(!(c instanceof s))throw new TypeError("Cannot call a class as a function")}var u=function(){function c(s){l(this,c),this.maxMilliseconds=s,this.frameStart=0}return c.prototype.beginFrame=function(){this.frameStart=Date.now()},c.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},c}();e.default=u},{}],188:[function(_,n,e){e.__esModule=!0;var l=_("../../core"),u=v(l),c=_("../BasePrepare"),s=p(c);function p(f){return f&&f.__esModule?f:{default:f}}function v(f){if(f&&f.__esModule)return f;var m={};if(f!=null)for(var g in f)Object.prototype.hasOwnProperty.call(f,g)&&(m[g]=f[g]);return m.default=f,m}function h(f,m){if(!(f instanceof m))throw new TypeError("Cannot call a class as a function")}function o(f,m){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:f}function i(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(f,m):f.__proto__=m)}var t=function(f){i(m,f);function m(g){h(this,m);var x=o(this,f.call(this,g));return x.uploadHookHelper=x.renderer,x.registerFindHook(a),x.registerUploadHook(r),x.registerUploadHook(d),x}return m}(s.default);e.default=t;function r(f,m){return m instanceof u.BaseTexture?(m._glTextures[f.CONTEXT_UID]||f.textureManager.updateTexture(m),!0):!1}function d(f,m){return m instanceof u.Graphics?((m.dirty||m.clearDirty||!m._webGL[f.plugins.graphics.CONTEXT_UID])&&f.plugins.graphics.updateGraphics(m),!0):!1}function a(f,m){return f instanceof u.Graphics?(m.push(f),!0):!1}u.WebGLRenderer.registerPlugin("prepare",t)},{"../../core":65,"../BasePrepare":183}],189:[function(_,n,e){(function(l){e.__esModule=!0,e.loader=e.prepare=e.particles=e.mesh=e.loaders=e.interaction=e.filters=e.extras=e.extract=e.accessibility=void 0;var u=_("./polyfill");Object.keys(u).forEach(function(A){A==="default"||A==="__esModule"||Object.defineProperty(e,A,{enumerable:!0,get:function(){return u[A]}})});var c=_("./core");Object.keys(c).forEach(function(A){A==="default"||A==="__esModule"||Object.defineProperty(e,A,{enumerable:!0,get:function(){return c[A]}})});var s=_("./deprecation"),p=P(s),v=_("./accessibility"),h=O(v),o=_("./extract"),i=O(o),t=_("./extras"),r=O(t),d=_("./filters"),a=O(d),f=_("./interaction"),m=O(f),g=_("./loaders"),x=O(g),T=_("./mesh"),y=O(T),w=_("./particles"),b=O(w),S=_("./prepare"),E=O(S);function O(A){if(A&&A.__esModule)return A;var B={};if(A!=null)for(var I in A)Object.prototype.hasOwnProperty.call(A,I)&&(B[I]=A[I]);return B.default=A,B}function P(A){return A&&A.__esModule?A:{default:A}}c.utils.mixins.performMixins();var M=x.shared||null;e.accessibility=h,e.extract=i,e.extras=r,e.filters=a,e.interaction=m,e.loaders=x,e.mesh=y,e.particles=b,e.prepare=E,e.loader=M,typeof p.default=="function"&&(0,p.default)(e),l.PIXI=e}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./accessibility":42,"./core":65,"./deprecation":131,"./extract":133,"./extras":141,"./filters":153,"./interaction":159,"./loaders":162,"./mesh":171,"./particles":174,"./polyfill":181,"./prepare":185}]},{},[189])(189)});/*!
 * pixi-filters - v2.6.1
 * Compiled Thu, 03 May 2018 14:20:43 UTC
 *
 * pixi-filters is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Oa=function(_,n){var e=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,l=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform float gamma;
uniform float contrast;
uniform float saturation;
uniform float brightness;
uniform float red;
uniform float green;
uniform float blue;
uniform float alpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (c.a > 0.0) {
        c.rgb /= c.a;

        vec3 rgb = pow(c.rgb, vec3(1. / gamma));
        rgb = mix(vec3(.5), mix(vec3(dot(vec3(.2125, .7154, .0721), rgb)), rgb, saturation), contrast);
        rgb.r *= red;
        rgb.g *= green;
        rgb.b *= blue;
        c.rgb = rgb * brightness;

        c.rgb *= c.a;
    }

    gl_FragColor = c * alpha;
}
`,u=function(Y){function X(z){Y.call(this,e,l),Object.assign(this,{gamma:1,saturation:1,contrast:1,brightness:1,red:1,green:1,blue:1,alpha:1},z)}return Y&&(X.__proto__=Y),X.prototype=Object.create(Y&&Y.prototype),X.prototype.constructor=X,X.prototype.apply=function(z,C,H,j){this.uniforms.gamma=Math.max(this.gamma,1e-4),this.uniforms.saturation=this.saturation,this.uniforms.contrast=this.contrast,this.uniforms.brightness=this.brightness,this.uniforms.red=this.red,this.uniforms.green=this.green,this.uniforms.blue=this.blue,this.uniforms.alpha=this.alpha,z.applyFilter(this,C,H,j)},X}(n.Filter),c=e,s=`
varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec2 uOffset;

void main(void)
{
    vec4 color = vec4(0.0);

    // Sample top left pixel
    color += texture2D(uSampler, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y));

    // Sample top right pixel
    color += texture2D(uSampler, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y));

    // Sample bottom right pixel
    color += texture2D(uSampler, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y));

    // Sample bottom left pixel
    color += texture2D(uSampler, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y));

    // Average
    color *= 0.25;

    gl_FragColor = color;
}`,p=`
varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec2 uOffset;
uniform vec4 filterClamp;

void main(void)
{
    vec4 color = vec4(0.0);

    // Sample top left pixel
    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));

    // Sample top right pixel
    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));

    // Sample bottom right pixel
    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));

    // Sample bottom left pixel
    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));

    // Average
    color *= 0.25;

    gl_FragColor = color;
}
`,v=function(Y){function X(C,H,j){C===void 0&&(C=4),H===void 0&&(H=3),j===void 0&&(j=!1),Y.call(this,c,j?p:s),this.uniforms.uOffset=new Float32Array(2),this._pixelSize=new n.Point,this.pixelSize=1,this._clamp=j,this._kernels=null,Array.isArray(C)?this.kernels=C:(this._blur=C,this.quality=H)}Y&&(X.__proto__=Y),X.prototype=Object.create(Y&&Y.prototype),X.prototype.constructor=X;var z={kernels:{configurable:!0},clamp:{configurable:!0},pixelSize:{configurable:!0},quality:{configurable:!0},blur:{configurable:!0}};return X.prototype.apply=function(C,H,j,te){var oe,le=this.pixelSize.x/H.size.width,ce=this.pixelSize.y/H.size.height;if(this._quality===1||this._blur===0)oe=this._kernels[0]+.5,this.uniforms.uOffset[0]=oe*le,this.uniforms.uOffset[1]=oe*ce,C.applyFilter(this,H,j,te);else{for(var Ce,at=C.getRenderTarget(!0),Ze=H,Et=at,Ut=this._quality-1,zt=0;zt<Ut;zt++)oe=this._kernels[zt]+.5,this.uniforms.uOffset[0]=oe*le,this.uniforms.uOffset[1]=oe*ce,C.applyFilter(this,Ze,Et,!0),Ce=Ze,Ze=Et,Et=Ce;oe=this._kernels[Ut]+.5,this.uniforms.uOffset[0]=oe*le,this.uniforms.uOffset[1]=oe*ce,C.applyFilter(this,Ze,j,te),C.returnRenderTarget(at)}},X.prototype._generateKernels=function(){var C=this._blur,H=this._quality,j=[C];if(C>0)for(var te=C,oe=C/H,le=1;le<H;le++)te-=oe,j.push(te);this._kernels=j},z.kernels.get=function(){return this._kernels},z.kernels.set=function(C){Array.isArray(C)&&C.length>0?(this._kernels=C,this._quality=C.length,this._blur=Math.max.apply(Math,C)):(this._kernels=[0],this._quality=1)},z.clamp.get=function(){return this._clamp},z.pixelSize.set=function(C){typeof C=="number"?(this._pixelSize.x=C,this._pixelSize.y=C):Array.isArray(C)?(this._pixelSize.x=C[0],this._pixelSize.y=C[1]):C instanceof n.Point?(this._pixelSize.x=C.x,this._pixelSize.y=C.y):(this._pixelSize.x=1,this._pixelSize.y=1)},z.pixelSize.get=function(){return this._pixelSize},z.quality.get=function(){return this._quality},z.quality.set=function(C){this._quality=Math.max(1,Math.round(C)),this._generateKernels()},z.blur.get=function(){return this._blur},z.blur.set=function(C){this._blur=C,this._generateKernels()},Object.defineProperties(X.prototype,z),X}(n.Filter),h=e,o=`
uniform sampler2D uSampler;
varying vec2 vTextureCoord;

uniform float threshold;

void main() {
    vec4 color = texture2D(uSampler, vTextureCoord);

    // A simple & fast algorithm for getting brightness.
    // It's inaccuracy , but good enought for this feature.
    float _max = max(max(color.r, color.g), color.b);
    float _min = min(min(color.r, color.g), color.b);
    float brightness = (_max + _min) * 0.5;

    if(brightness > threshold) {
        gl_FragColor = color;
    } else {
        gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
    }
}
`,i=function(Y){function X(C){C===void 0&&(C=.5),Y.call(this,h,o),this.threshold=C}Y&&(X.__proto__=Y),X.prototype=Object.create(Y&&Y.prototype),X.prototype.constructor=X;var z={threshold:{configurable:!0}};return z.threshold.get=function(){return this.uniforms.threshold},z.threshold.set=function(C){this.uniforms.threshold=C},Object.defineProperties(X.prototype,z),X}(n.Filter),t=`uniform sampler2D uSampler;
varying vec2 vTextureCoord;

uniform sampler2D bloomTexture;
uniform float bloomScale;
uniform float brightness;

void main() {
    vec4 color = texture2D(uSampler, vTextureCoord);
    color.rgb *= brightness;
    vec4 bloomColor = vec4(texture2D(bloomTexture, vTextureCoord).rgb, 0.0);
    bloomColor.rgb *= bloomScale;
    gl_FragColor = color + bloomColor;
}
`,r=function(Y){function X(C){Y.call(this,h,t),typeof C=="number"&&(C={threshold:C}),C=Object.assign({threshold:.5,bloomScale:1,brightness:1,kernels:null,blur:8,quality:4,pixelSize:1,resolution:n.settings.RESOLUTION},C),this.bloomScale=C.bloomScale,this.brightness=C.brightness;var H=C.kernels,j=C.blur,te=C.quality,oe=C.pixelSize,le=C.resolution;this._extractFilter=new i(C.threshold),this._extractFilter.resolution=le,this._blurFilter=H?new v(H):new v(j,te),this.pixelSize=oe,this.resolution=le}Y&&(X.__proto__=Y),X.prototype=Object.create(Y&&Y.prototype),X.prototype.constructor=X;var z={resolution:{configurable:!0},threshold:{configurable:!0},kernels:{configurable:!0},blur:{configurable:!0},quality:{configurable:!0},pixelSize:{configurable:!0}};return X.prototype.apply=function(C,H,j,te,oe){var le=C.getRenderTarget(!0);this._extractFilter.apply(C,H,le,!0,oe);var ce=C.getRenderTarget(!0);this._blurFilter.apply(C,le,ce,!0,oe),this.uniforms.bloomScale=this.bloomScale,this.uniforms.brightness=this.brightness,this.uniforms.bloomTexture=ce,C.applyFilter(this,H,j,te),C.returnRenderTarget(ce),C.returnRenderTarget(le)},z.resolution.get=function(){return this._resolution},z.resolution.set=function(C){this._resolution=C,this._extractFilter&&(this._extractFilter.resolution=C),this._blurFilter&&(this._blurFilter.resolution=C)},z.threshold.get=function(){return this._extractFilter.threshold},z.threshold.set=function(C){this._extractFilter.threshold=C},z.kernels.get=function(){return this._blurFilter.kernels},z.kernels.set=function(C){this._blurFilter.kernels=C},z.blur.get=function(){return this._blurFilter.blur},z.blur.set=function(C){this._blurFilter.blur=C},z.quality.get=function(){return this._blurFilter.quality},z.quality.set=function(C){this._blurFilter.quality=C},z.pixelSize.get=function(){return this._blurFilter.pixelSize},z.pixelSize.set=function(C){this._blurFilter.pixelSize=C},Object.defineProperties(X.prototype,z),X}(n.Filter),d=e,a=`varying vec2 vTextureCoord;

uniform vec4 filterArea;
uniform float pixelSize;
uniform sampler2D uSampler;

vec2 mapCoord( vec2 coord )
{
    coord *= filterArea.xy;
    coord += filterArea.zw;

    return coord;
}

vec2 unmapCoord( vec2 coord )
{
    coord -= filterArea.zw;
    coord /= filterArea.xy;

    return coord;
}

vec2 pixelate(vec2 coord, vec2 size)
{
    return floor( coord / size ) * size;
}

vec2 getMod(vec2 coord, vec2 size)
{
    return mod( coord , size) / size;
}

float character(float n, vec2 p)
{
    p = floor(p*vec2(4.0, -4.0) + 2.5);
    if (clamp(p.x, 0.0, 4.0) == p.x && clamp(p.y, 0.0, 4.0) == p.y)
    {
        if (int(mod(n/exp2(p.x + 5.0*p.y), 2.0)) == 1) return 1.0;
    }
    return 0.0;
}

void main()
{
    vec2 coord = mapCoord(vTextureCoord);

    // get the rounded color..
    vec2 pixCoord = pixelate(coord, vec2(pixelSize));
    pixCoord = unmapCoord(pixCoord);

    vec4 color = texture2D(uSampler, pixCoord);

    // determine the character to use
    float gray = (color.r + color.g + color.b) / 3.0;

    float n =  65536.0;             // .
    if (gray > 0.2) n = 65600.0;    // :
    if (gray > 0.3) n = 332772.0;   // *
    if (gray > 0.4) n = 15255086.0; // o
    if (gray > 0.5) n = 23385164.0; // &
    if (gray > 0.6) n = 15252014.0; // 8
    if (gray > 0.7) n = 13199452.0; // @
    if (gray > 0.8) n = 11512810.0; // #

    // get the mod..
    vec2 modd = getMod(coord, vec2(pixelSize));

    gl_FragColor = color * character( n, vec2(-1.0) + modd * 2.0);

}`,f=function(Y){function X(C){C===void 0&&(C=8),Y.call(this,d,a),this.size=C}Y&&(X.__proto__=Y),X.prototype=Object.create(Y&&Y.prototype),X.prototype.constructor=X;var z={size:{configurable:!0}};return z.size.get=function(){return this.uniforms.pixelSize},z.size.set=function(C){this.uniforms.pixelSize=C},Object.defineProperties(X.prototype,z),X}(n.Filter),m=e,g=`precision mediump float;

varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;

uniform float transformX;
uniform float transformY;
uniform vec3 lightColor;
uniform float lightAlpha;
uniform vec3 shadowColor;
uniform float shadowAlpha;

void main(void) {
    vec2 transform = vec2(1.0 / filterArea) * vec2(transformX, transformY);
    vec4 color = texture2D(uSampler, vTextureCoord);
    float light = texture2D(uSampler, vTextureCoord - transform).a;
    float shadow = texture2D(uSampler, vTextureCoord + transform).a;

    color.rgb = mix(color.rgb, lightColor, clamp((color.a - light) * lightAlpha, 0.0, 1.0));
    color.rgb = mix(color.rgb, shadowColor, clamp((color.a - shadow) * shadowAlpha, 0.0, 1.0));
    gl_FragColor = vec4(color.rgb * color.a, color.a);
}
`,x=function(Y){function X(C){C===void 0&&(C={}),Y.call(this,m,g),this.uniforms.lightColor=new Float32Array(3),this.uniforms.shadowColor=new Float32Array(3),C=Object.assign({rotation:45,thickness:2,lightColor:16777215,lightAlpha:.7,shadowColor:0,shadowAlpha:.7},C),this.rotation=C.rotation,this.thickness=C.thickness,this.lightColor=C.lightColor,this.lightAlpha=C.lightAlpha,this.shadowColor=C.shadowColor,this.shadowAlpha=C.shadowAlpha}Y&&(X.__proto__=Y),X.prototype=Object.create(Y&&Y.prototype),X.prototype.constructor=X;var z={rotation:{configurable:!0},thickness:{configurable:!0},lightColor:{configurable:!0},lightAlpha:{configurable:!0},shadowColor:{configurable:!0},shadowAlpha:{configurable:!0}};return X.prototype._updateTransform=function(){this.uniforms.transformX=this._thickness*Math.cos(this._angle),this.uniforms.transformY=this._thickness*Math.sin(this._angle)},z.rotation.get=function(){return this._angle/n.DEG_TO_RAD},z.rotation.set=function(C){this._angle=C*n.DEG_TO_RAD,this._updateTransform()},z.thickness.get=function(){return this._thickness},z.thickness.set=function(C){this._thickness=C,this._updateTransform()},z.lightColor.get=function(){return n.utils.rgb2hex(this.uniforms.lightColor)},z.lightColor.set=function(C){n.utils.hex2rgb(C,this.uniforms.lightColor)},z.lightAlpha.get=function(){return this.uniforms.lightAlpha},z.lightAlpha.set=function(C){this.uniforms.lightAlpha=C},z.shadowColor.get=function(){return n.utils.rgb2hex(this.uniforms.shadowColor)},z.shadowColor.set=function(C){n.utils.hex2rgb(C,this.uniforms.shadowColor)},z.shadowAlpha.get=function(){return this.uniforms.shadowAlpha},z.shadowAlpha.set=function(C){this.uniforms.shadowAlpha=C},Object.defineProperties(X.prototype,z),X}(n.Filter),T=n.filters,y=T.BlurXFilter,w=T.BlurYFilter,b=T.AlphaFilter,S=function(Y){function X(C,H,j,te){var oe,le;C===void 0&&(C=2),H===void 0&&(H=4),j===void 0&&(j=n.settings.RESOLUTION),te===void 0&&(te=5),Y.call(this),typeof C=="number"?(oe=C,le=C):C instanceof n.Point?(oe=C.x,le=C.y):Array.isArray(C)&&(oe=C[0],le=C[1]),this.blurXFilter=new y(oe,H,j,te),this.blurYFilter=new w(le,H,j,te),this.blurYFilter.blendMode=n.BLEND_MODES.SCREEN,this.defaultFilter=new b}Y&&(X.__proto__=Y),X.prototype=Object.create(Y&&Y.prototype),X.prototype.constructor=X;var z={blur:{configurable:!0},blurX:{configurable:!0},blurY:{configurable:!0}};return X.prototype.apply=function(C,H,j){var te=C.getRenderTarget(!0);this.defaultFilter.apply(C,H,j),this.blurXFilter.apply(C,H,te),this.blurYFilter.apply(C,te,j),C.returnRenderTarget(te)},z.blur.get=function(){return this.blurXFilter.blur},z.blur.set=function(C){this.blurXFilter.blur=this.blurYFilter.blur=C},z.blurX.get=function(){return this.blurXFilter.blur},z.blurX.set=function(C){this.blurXFilter.blur=C},z.blurY.get=function(){return this.blurYFilter.blur},z.blurY.set=function(C){this.blurYFilter.blur=C},Object.defineProperties(X.prototype,z),X}(n.Filter),E=e,O=`uniform float radius;
uniform float strength;
uniform vec2 center;
uniform sampler2D uSampler;
varying vec2 vTextureCoord;

uniform vec4 filterArea;
uniform vec4 filterClamp;
uniform vec2 dimensions;

void main()
{
    vec2 coord = vTextureCoord * filterArea.xy;
    coord -= center * dimensions.xy;
    float distance = length(coord);
    if (distance < radius) {
        float percent = distance / radius;
        if (strength > 0.0) {
            coord *= mix(1.0, smoothstep(0.0, radius / distance, percent), strength * 0.75);
        } else {
            coord *= mix(1.0, pow(percent, 1.0 + strength * 0.75) * radius / distance, 1.0 - percent);
        }
    }
    coord += center * dimensions.xy;
    coord /= filterArea.xy;
    vec2 clampedCoord = clamp(coord, filterClamp.xy, filterClamp.zw);
    vec4 color = texture2D(uSampler, clampedCoord);
    if (coord != clampedCoord) {
        color *= max(0.0, 1.0 - length(coord - clampedCoord));
    }

    gl_FragColor = color;
}
`,P=function(Y){function X(C,H,j){Y.call(this,E,O),this.uniforms.dimensions=new Float32Array(2),this.center=C||[.5,.5],this.radius=H||100,this.strength=j||1}Y&&(X.__proto__=Y),X.prototype=Object.create(Y&&Y.prototype),X.prototype.constructor=X;var z={radius:{configurable:!0},strength:{configurable:!0},center:{configurable:!0}};return X.prototype.apply=function(C,H,j,te){this.uniforms.dimensions[0]=H.sourceFrame.width,this.uniforms.dimensions[1]=H.sourceFrame.height,C.applyFilter(this,H,j,te)},z.radius.get=function(){return this.uniforms.radius},z.radius.set=function(C){this.uniforms.radius=C},z.strength.get=function(){return this.uniforms.strength},z.strength.set=function(C){this.uniforms.strength=C},z.center.get=function(){return this.uniforms.center},z.center.set=function(C){this.uniforms.center=C},Object.defineProperties(X.prototype,z),X}(n.Filter),M=e,A=`
varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform sampler2D colorMap;

uniform float _mix;
uniform float _size;
uniform float _sliceSize;
uniform float _slicePixelSize;
uniform float _sliceInnerSize;

void main() {
    vec4 color = texture2D(uSampler, vTextureCoord.xy);

    float sliceIndex = color.b * (_size - 1.0);
    float zSlice0 = floor(sliceIndex);
    float zSlice1 = ceil(sliceIndex);

    float xOffset = _slicePixelSize * 0.5 + color.r * _sliceInnerSize;
    float s0 = xOffset + zSlice0 * _sliceSize;
    float s1 = xOffset + zSlice1 * _sliceSize;
    vec4 slice0Color = texture2D(colorMap, vec2(s0, color.g));
    vec4 slice1Color = texture2D(colorMap, vec2(s1, color.g));
    vec4 adjusted = mix(slice0Color, slice1Color, fract(sliceIndex));

    gl_FragColor = mix(color, adjusted, _mix);
}
`,B=function(Y){function X(C,H,j){H===void 0&&(H=!1),j===void 0&&(j=1),Y.call(this,M,A),this._size=0,this._sliceSize=0,this._slicePixelSize=0,this._sliceInnerSize=0,this._scaleMode=null,this._nearest=!1,this.nearest=H,this.mix=j,this.colorMap=C}Y&&(X.__proto__=Y),X.prototype=Object.create(Y&&Y.prototype),X.prototype.constructor=X;var z={colorSize:{configurable:!0},colorMap:{configurable:!0},nearest:{configurable:!0}};return X.prototype.apply=function(C,H,j,te){this.uniforms._mix=this.mix,C.applyFilter(this,H,j,te)},z.colorSize.get=function(){return this._size},z.colorMap.get=function(){return this._colorMap},z.colorMap.set=function(C){C instanceof n.Texture||(C=n.Texture.from(C)),C&&C.baseTexture&&(C.baseTexture.scaleMode=this._scaleMode,C.baseTexture.mipmap=!1,this._size=C.height,this._sliceSize=1/this._size,this._slicePixelSize=this._sliceSize/this._size,this._sliceInnerSize=this._slicePixelSize*(this._size-1),this.uniforms._size=this._size,this.uniforms._sliceSize=this._sliceSize,this.uniforms._slicePixelSize=this._slicePixelSize,this.uniforms._sliceInnerSize=this._sliceInnerSize,this.uniforms.colorMap=C),this._colorMap=C},z.nearest.get=function(){return this._nearest},z.nearest.set=function(C){this._nearest=C,this._scaleMode=C?n.SCALE_MODES.NEAREST:n.SCALE_MODES.LINEAR;var H=this._colorMap;H&&H.baseTexture&&(H.baseTexture._glTextures={},H.baseTexture.scaleMode=this._scaleMode,H.baseTexture.mipmap=!1,H._updateID++,H.baseTexture.emit("update",H.baseTexture))},X.prototype.updateColorMap=function(){var C=this._colorMap;C&&C.baseTexture&&(C._updateID++,C.baseTexture.emit("update",C.baseTexture),this.colorMap=C)},X.prototype.destroy=function(C){this._colorMap&&this._colorMap.destroy(C),Y.prototype.destroy.call(this)},Object.defineProperties(X.prototype,z),X}(n.Filter),I=e,R=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec3 originalColor;
uniform vec3 newColor;
uniform float epsilon;
void main(void) {
    vec4 currentColor = texture2D(uSampler, vTextureCoord);
    vec3 colorDiff = originalColor - (currentColor.rgb / max(currentColor.a, 0.0000000001));
    float colorDistance = length(colorDiff);
    float doReplace = step(colorDistance, epsilon);
    gl_FragColor = vec4(mix(currentColor.rgb, (newColor + colorDiff) * currentColor.a, doReplace), currentColor.a);
}
`,D=function(Y){function X(C,H,j){C===void 0&&(C=16711680),H===void 0&&(H=0),j===void 0&&(j=.4),Y.call(this,I,R),this.uniforms.originalColor=new Float32Array(3),this.uniforms.newColor=new Float32Array(3),this.originalColor=C,this.newColor=H,this.epsilon=j}Y&&(X.__proto__=Y),X.prototype=Object.create(Y&&Y.prototype),X.prototype.constructor=X;var z={originalColor:{configurable:!0},newColor:{configurable:!0},epsilon:{configurable:!0}};return z.originalColor.set=function(C){var H=this.uniforms.originalColor;typeof C=="number"?(n.utils.hex2rgb(C,H),this._originalColor=C):(H[0]=C[0],H[1]=C[1],H[2]=C[2],this._originalColor=n.utils.rgb2hex(H))},z.originalColor.get=function(){return this._originalColor},z.newColor.set=function(C){var H=this.uniforms.newColor;typeof C=="number"?(n.utils.hex2rgb(C,H),this._newColor=C):(H[0]=C[0],H[1]=C[1],H[2]=C[2],this._newColor=n.utils.rgb2hex(H))},z.newColor.get=function(){return this._newColor},z.epsilon.set=function(C){this.uniforms.epsilon=C},z.epsilon.get=function(){return this.uniforms.epsilon},Object.defineProperties(X.prototype,z),X}(n.Filter),L=e,F=`precision mediump float;

varying mediump vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec2 texelSize;
uniform float matrix[9];

void main(void)
{
   vec4 c11 = texture2D(uSampler, vTextureCoord - texelSize); // top left
   vec4 c12 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - texelSize.y)); // top center
   vec4 c13 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y - texelSize.y)); // top right

   vec4 c21 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y)); // mid left
   vec4 c22 = texture2D(uSampler, vTextureCoord); // mid center
   vec4 c23 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y)); // mid right

   vec4 c31 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y + texelSize.y)); // bottom left
   vec4 c32 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + texelSize.y)); // bottom center
   vec4 c33 = texture2D(uSampler, vTextureCoord + texelSize); // bottom right

   gl_FragColor =
       c11 * matrix[0] + c12 * matrix[1] + c13 * matrix[2] +
       c21 * matrix[3] + c22 * matrix[4] + c23 * matrix[5] +
       c31 * matrix[6] + c32 * matrix[7] + c33 * matrix[8];

   gl_FragColor.a = c22.a;
}
`,N=function(Y){function X(C,H,j){Y.call(this,L,F),this.uniforms.texelSize=new Float32Array(9),this.matrix=C,this.width=H,this.height=j}Y&&(X.__proto__=Y),X.prototype=Object.create(Y&&Y.prototype),X.prototype.constructor=X;var z={matrix:{configurable:!0},width:{configurable:!0},height:{configurable:!0}};return z.matrix.get=function(){return this.uniforms.matrix},z.matrix.set=function(C){this.uniforms.matrix=new Float32Array(C)},z.width.get=function(){return 1/this.uniforms.texelSize[0]},z.width.set=function(C){this.uniforms.texelSize[0]=1/C},z.height.get=function(){return 1/this.uniforms.texelSize[1]},z.height.set=function(C){this.uniforms.texelSize[1]=1/C},Object.defineProperties(X.prototype,z),X}(n.Filter),U=e,k=`precision mediump float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void)
{
    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);

    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);

    if (lum < 1.00)
    {
        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0)
        {
            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
        }
    }

    if (lum < 0.75)
    {
        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0)
        {
            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
        }
    }

    if (lum < 0.50)
    {
        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0)
        {
            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
        }
    }

    if (lum < 0.3)
    {
        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0)
        {
            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
        }
    }
}
`,G=function(Y){function X(){Y.call(this,U,k)}return Y&&(X.__proto__=Y),X.prototype=Object.create(Y&&Y.prototype),X.prototype.constructor=X,X}(n.Filter),W=e,K=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec4 filterArea;
uniform vec2 dimensions;

const float SQRT_2 = 1.414213;

const float light = 1.0;

uniform float curvature;
uniform float lineWidth;
uniform float lineContrast;
uniform bool verticalLine;
uniform float noise;
uniform float noiseSize;

uniform float vignetting;
uniform float vignettingAlpha;
uniform float vignettingBlur;

uniform float seed;
uniform float time;

float rand(vec2 co) {
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main(void)
{
    vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;
    vec2 coord = pixelCoord / dimensions;

    vec2 dir = vec2(coord - vec2(0.5, 0.5));

    float _c = curvature > 0. ? curvature : 1.;
    float k = curvature > 0. ?(length(dir * dir) * 0.25 * _c * _c + 0.935 * _c) : 1.;
    vec2 uv = dir * k;

    gl_FragColor = texture2D(uSampler, vTextureCoord);
    vec3 rgb = gl_FragColor.rgb;


    if (noise > 0.0 && noiseSize > 0.0)
    {
        pixelCoord.x = floor(pixelCoord.x / noiseSize);
        pixelCoord.y = floor(pixelCoord.y / noiseSize);
        float _noise = rand(pixelCoord * noiseSize * seed) - 0.5;
        rgb += _noise * noise;
    }

    if (lineWidth > 0.0) {
        float v = (verticalLine ? uv.x * dimensions.x : uv.y * dimensions.y) * min(1.0, 2.0 / lineWidth ) / _c;
        float j = 1. + cos(v * 1.2 - time) * 0.5 * lineContrast;
        rgb *= j;
        float segment = verticalLine ? mod((dir.x + .5) * dimensions.x, 4.) : mod((dir.y + .5) * dimensions.y, 4.);
        rgb *= 0.99 + ceil(segment) * 0.015;
    }

    if (vignetting > 0.0)
    {
        float outter = SQRT_2 - vignetting * SQRT_2;
        float darker = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + vignettingBlur * SQRT_2), 0.0, 1.0);
        rgb *= darker + (1.0 - darker) * (1.0 - vignettingAlpha);
    }

    gl_FragColor.rgb = rgb;
}
`,q=function(Y){function X(C){Y.call(this,W,K),this.uniforms.dimensions=new Float32Array(2),this.time=0,this.seed=0,Object.assign(this,{curvature:1,lineWidth:1,lineContrast:.25,verticalLine:!1,noise:0,noiseSize:1,seed:0,vignetting:.3,vignettingAlpha:1,vignettingBlur:.3,time:0},C)}Y&&(X.__proto__=Y),X.prototype=Object.create(Y&&Y.prototype),X.prototype.constructor=X;var z={curvature:{configurable:!0},lineWidth:{configurable:!0},lineContrast:{configurable:!0},verticalLine:{configurable:!0},noise:{configurable:!0},noiseSize:{configurable:!0},vignetting:{configurable:!0},vignettingAlpha:{configurable:!0},vignettingBlur:{configurable:!0}};return X.prototype.apply=function(C,H,j,te){this.uniforms.dimensions[0]=H.sourceFrame.width,this.uniforms.dimensions[1]=H.sourceFrame.height,this.uniforms.seed=this.seed,this.uniforms.time=this.time,C.applyFilter(this,H,j,te)},z.curvature.set=function(C){this.uniforms.curvature=C},z.curvature.get=function(){return this.uniforms.curvature},z.lineWidth.set=function(C){this.uniforms.lineWidth=C},z.lineWidth.get=function(){return this.uniforms.lineWidth},z.lineContrast.set=function(C){this.uniforms.lineContrast=C},z.lineContrast.get=function(){return this.uniforms.lineContrast},z.verticalLine.set=function(C){this.uniforms.verticalLine=C},z.verticalLine.get=function(){return this.uniforms.verticalLine},z.noise.set=function(C){this.uniforms.noise=C},z.noise.get=function(){return this.uniforms.noise},z.noiseSize.set=function(C){this.uniforms.noiseSize=C},z.noiseSize.get=function(){return this.uniforms.noiseSize},z.vignetting.set=function(C){this.uniforms.vignetting=C},z.vignetting.get=function(){return this.uniforms.vignetting},z.vignettingAlpha.set=function(C){this.uniforms.vignettingAlpha=C},z.vignettingAlpha.get=function(){return this.uniforms.vignettingAlpha},z.vignettingBlur.set=function(C){this.uniforms.vignettingBlur=C},z.vignettingBlur.get=function(){return this.uniforms.vignettingBlur},Object.defineProperties(X.prototype,z),X}(n.Filter),Q=e,J=`precision mediump float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform vec4 filterArea;
uniform sampler2D uSampler;

uniform float angle;
uniform float scale;

float pattern()
{
   float s = sin(angle), c = cos(angle);
   vec2 tex = vTextureCoord * filterArea.xy;
   vec2 point = vec2(
       c * tex.x - s * tex.y,
       s * tex.x + c * tex.y
   ) * scale;
   return (sin(point.x) * sin(point.y)) * 4.0;
}

void main()
{
   vec4 color = texture2D(uSampler, vTextureCoord);
   float average = (color.r + color.g + color.b) / 3.0;
   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);
}
`,V=function(Y){function X(C,H){C===void 0&&(C=1),H===void 0&&(H=5),Y.call(this,Q,J),this.scale=C,this.angle=H}Y&&(X.__proto__=Y),X.prototype=Object.create(Y&&Y.prototype),X.prototype.constructor=X;var z={scale:{configurable:!0},angle:{configurable:!0}};return z.scale.get=function(){return this.uniforms.scale},z.scale.set=function(C){this.uniforms.scale=C},z.angle.get=function(){return this.uniforms.angle},z.angle.set=function(C){this.uniforms.angle=C},Object.defineProperties(X.prototype,z),X}(n.Filter),Z=e,$=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float alpha;
uniform vec3 color;
void main(void){
    vec4 sample = texture2D(uSampler, vTextureCoord);

    // Un-premultiply alpha before applying the color
    if (sample.a > 0.0) {
        sample.rgb /= sample.a;
    }

    // Premultiply alpha again
    sample.rgb = color.rgb * sample.a;

    // alpha user alpha
    sample *= alpha;

    gl_FragColor = sample;
}`,ie=function(Y){function X(C){C&&C.constructor!==Object&&(console.warn("DropShadowFilter now uses options instead of (rotation, distance, blur, color, alpha)"),C={rotation:C},arguments[1]!==void 0&&(C.distance=arguments[1]),arguments[2]!==void 0&&(C.blur=arguments[2]),arguments[3]!==void 0&&(C.color=arguments[3]),arguments[4]!==void 0&&(C.alpha=arguments[4])),C=Object.assign({rotation:45,distance:5,color:0,alpha:.5,shadowOnly:!1,kernels:null,blur:2,quality:3,pixelSize:1,resolution:n.settings.RESOLUTION},C),Y.call(this);var H=C.kernels,j=C.blur,te=C.quality,oe=C.pixelSize,le=C.resolution;this._tintFilter=new n.Filter(Z,$),this._tintFilter.uniforms.color=new Float32Array(4),this._tintFilter.resolution=le,this._blurFilter=H?new v(H):new v(j,te),this.pixelSize=oe,this.resolution=le,this.targetTransform=new n.Matrix;var ce=C.shadowOnly,Ce=C.rotation,at=C.distance,Ze=C.alpha,Et=C.color;this.shadowOnly=ce,this.rotation=Ce,this.distance=at,this.alpha=Ze,this.color=Et,this._updatePadding()}Y&&(X.__proto__=Y),X.prototype=Object.create(Y&&Y.prototype),X.prototype.constructor=X;var z={resolution:{configurable:!0},distance:{configurable:!0},rotation:{configurable:!0},alpha:{configurable:!0},color:{configurable:!0},kernels:{configurable:!0},blur:{configurable:!0},quality:{configurable:!0},pixelSize:{configurable:!0}};return X.prototype.apply=function(C,H,j,te){var oe=C.getRenderTarget();oe.transform=this.targetTransform,this._tintFilter.apply(C,H,oe,!0),oe.transform=null,this._blurFilter.apply(C,oe,j),this.shadowOnly!==!0&&C.applyFilter(this,H,j,te),C.returnRenderTarget(oe)},X.prototype._updatePadding=function(){this.padding=this.distance+2*this.blur},X.prototype._updateTargetTransform=function(){this.targetTransform.tx=this.distance*Math.cos(this.angle),this.targetTransform.ty=this.distance*Math.sin(this.angle)},z.resolution.get=function(){return this._resolution},z.resolution.set=function(C){this._resolution=C,this._tintFilter&&(this._tintFilter.resolution=C),this._blurFilter&&(this._blurFilter.resolution=C)},z.distance.get=function(){return this._distance},z.distance.set=function(C){this._distance=C,this._updatePadding(),this._updateTargetTransform()},z.rotation.get=function(){return this.angle/n.DEG_TO_RAD},z.rotation.set=function(C){this.angle=C*n.DEG_TO_RAD,this._updateTargetTransform()},z.alpha.get=function(){return this._tintFilter.uniforms.alpha},z.alpha.set=function(C){this._tintFilter.uniforms.alpha=C},z.color.get=function(){return n.utils.rgb2hex(this._tintFilter.uniforms.color)},z.color.set=function(C){n.utils.hex2rgb(C,this._tintFilter.uniforms.color)},z.kernels.get=function(){return this._blurFilter.kernels},z.kernels.set=function(C){this._blurFilter.kernels=C},z.blur.get=function(){return this._blurFilter.blur},z.blur.set=function(C){this._blurFilter.blur=C,this._updatePadding()},z.quality.get=function(){return this._blurFilter.quality},z.quality.set=function(C){this._blurFilter.quality=C},z.pixelSize.get=function(){return this._blurFilter.pixelSize},z.pixelSize.set=function(C){this._blurFilter.pixelSize=C},Object.defineProperties(X.prototype,z),X}(n.Filter),ne=e,ae=`precision mediump float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float strength;
uniform vec4 filterArea;


void main(void)
{
	vec2 onePixel = vec2(1.0 / filterArea);

	vec4 color;

	color.rgb = vec3(0.5);

	color -= texture2D(uSampler, vTextureCoord - onePixel) * strength;
	color += texture2D(uSampler, vTextureCoord + onePixel) * strength;

	color.rgb = vec3((color.r + color.g + color.b) / 3.0);

	float alpha = texture2D(uSampler, vTextureCoord).a;

	gl_FragColor = vec4(color.rgb * alpha, alpha);
}
`,se=function(Y){function X(C){C===void 0&&(C=5),Y.call(this,ne,ae),this.strength=C}Y&&(X.__proto__=Y),X.prototype=Object.create(Y&&Y.prototype),X.prototype.constructor=X;var z={strength:{configurable:!0}};return z.strength.get=function(){return this.uniforms.strength},z.strength.set=function(C){this.uniforms.strength=C},Object.defineProperties(X.prototype,z),X}(n.Filter),re=e,ee=`// precision highp float;

varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec4 filterArea;
uniform vec4 filterClamp;
uniform vec2 dimensions;
uniform float aspect;

uniform sampler2D displacementMap;
uniform float offset;
uniform float sinDir;
uniform float cosDir;
uniform int fillMode;

uniform float seed;
uniform vec2 red;
uniform vec2 green;
uniform vec2 blue;

const int TRANSPARENT = 0;
const int ORIGINAL = 1;
const int LOOP = 2;
const int CLAMP = 3;
const int MIRROR = 4;

void main(void)
{
    vec2 coord = (vTextureCoord * filterArea.xy) / dimensions;

    if (coord.x > 1.0 || coord.y > 1.0) {
        return;
    }

    float cx = coord.x - 0.5;
    float cy = (coord.y - 0.5) * aspect;
    float ny = (-sinDir * cx + cosDir * cy) / aspect + 0.5;

    // displacementMap: repeat
    // ny = ny > 1.0 ? ny - 1.0 : (ny < 0.0 ? 1.0 + ny : ny);

    // displacementMap: mirror
    ny = ny > 1.0 ? 2.0 - ny : (ny < 0.0 ? -ny : ny);

    vec4 dc = texture2D(displacementMap, vec2(0.5, ny));

    float displacement = (dc.r - dc.g) * (offset / filterArea.x);

    coord = vTextureCoord + vec2(cosDir * displacement, sinDir * displacement * aspect);

    if (fillMode == CLAMP) {
        coord = clamp(coord, filterClamp.xy, filterClamp.zw);
    } else {
        if( coord.x > filterClamp.z ) {
            if (fillMode == ORIGINAL) {
                gl_FragColor = texture2D(uSampler, vTextureCoord);
                return;
            } else if (fillMode == LOOP) {
                coord.x -= filterClamp.z;
            } else if (fillMode == MIRROR) {
                coord.x = filterClamp.z * 2.0 - coord.x;
            } else {
                gl_FragColor = vec4(0., 0., 0., 0.);
                return;
            }
        } else if( coord.x < filterClamp.x ) {
            if (fillMode == ORIGINAL) {
                gl_FragColor = texture2D(uSampler, vTextureCoord);
                return;
            } else if (fillMode == LOOP) {
                coord.x += filterClamp.z;
            } else if (fillMode == MIRROR) {
                coord.x *= -filterClamp.z;
            } else {
                gl_FragColor = vec4(0., 0., 0., 0.);
                return;
            }
        }

        if( coord.y > filterClamp.w ) {
            if (fillMode == ORIGINAL) {
                gl_FragColor = texture2D(uSampler, vTextureCoord);
                return;
            } else if (fillMode == LOOP) {
                coord.y -= filterClamp.w;
            } else if (fillMode == MIRROR) {
                coord.y = filterClamp.w * 2.0 - coord.y;
            } else {
                gl_FragColor = vec4(0., 0., 0., 0.);
                return;
            }
        } else if( coord.y < filterClamp.y ) {
            if (fillMode == ORIGINAL) {
                gl_FragColor = texture2D(uSampler, vTextureCoord);
                return;
            } else if (fillMode == LOOP) {
                coord.y += filterClamp.w;
            } else if (fillMode == MIRROR) {
                coord.y *= -filterClamp.w;
            } else {
                gl_FragColor = vec4(0., 0., 0., 0.);
                return;
            }
        }
    }

    gl_FragColor.r = texture2D(uSampler, coord + red * (1.0 - seed * 0.4) / filterArea.xy).r;
    gl_FragColor.g = texture2D(uSampler, coord + green * (1.0 - seed * 0.3) / filterArea.xy).g;
    gl_FragColor.b = texture2D(uSampler, coord + blue * (1.0 - seed * 0.2) / filterArea.xy).b;
    gl_FragColor.a = texture2D(uSampler, coord).a;
}
`,ue=function(Y){function X(C){C===void 0&&(C={}),Y.call(this,re,ee),this.uniforms.dimensions=new Float32Array(2),C=Object.assign({slices:5,offset:100,direction:0,fillMode:0,average:!1,seed:0,red:[0,0],green:[0,0],blue:[0,0],minSize:8,sampleSize:512},C),this.direction=C.direction,this.red=C.red,this.green=C.green,this.blue=C.blue,this.offset=C.offset,this.fillMode=C.fillMode,this.average=C.average,this.seed=C.seed,this.minSize=C.minSize,this.sampleSize=C.sampleSize,this._canvas=document.createElement("canvas"),this._canvas.width=4,this._canvas.height=this.sampleSize,this.texture=n.Texture.fromCanvas(this._canvas,n.SCALE_MODES.NEAREST),this._slices=0,this.slices=C.slices}Y&&(X.__proto__=Y),X.prototype=Object.create(Y&&Y.prototype),X.prototype.constructor=X;var z={sizes:{configurable:!0},offsets:{configurable:!0},slices:{configurable:!0},direction:{configurable:!0},red:{configurable:!0},green:{configurable:!0},blue:{configurable:!0}};return X.prototype.apply=function(C,H,j,te){var oe=H.sourceFrame.width,le=H.sourceFrame.height;this.uniforms.dimensions[0]=oe,this.uniforms.dimensions[1]=le,this.uniforms.aspect=le/oe,this.uniforms.seed=this.seed,this.uniforms.offset=this.offset,this.uniforms.fillMode=this.fillMode,C.applyFilter(this,H,j,te)},X.prototype._randomizeSizes=function(){var C=this._sizes,H=this._slices-1,j=this.sampleSize,te=Math.min(this.minSize/j,.9/this._slices);if(this.average){for(var oe=this._slices,le=1,ce=0;ce<H;ce++){var Ce=le/(oe-ce),at=Math.max(Ce*(1-.6*Math.random()),te);C[ce]=at,le-=at}C[H]=le}else{for(var Ze=1,Et=Math.sqrt(1/this._slices),Ut=0;Ut<H;Ut++){var zt=Math.max(Et*Ze*Math.random(),te);C[Ut]=zt,Ze-=zt}C[H]=Ze}this.shuffle()},X.prototype.shuffle=function(){for(var C=this._sizes,H=this._slices-1;H>0;H--){var j=Math.random()*H>>0,te=C[H];C[H]=C[j],C[j]=te}},X.prototype._randomizeOffsets=function(){for(var C=0;C<this._slices;C++)this._offsets[C]=Math.random()*(Math.random()<.5?-1:1)},X.prototype.refresh=function(){this._randomizeSizes(),this._randomizeOffsets(),this.redraw()},X.prototype.redraw=function(){var C,H=this.sampleSize,j=this.texture,te=this._canvas.getContext("2d");te.clearRect(0,0,8,H);for(var oe=0,le=0;le<this._slices;le++){C=Math.floor(256*this._offsets[le]);var ce=this._sizes[le]*H,Ce=C>0?C:0,at=C<0?-C:0;te.fillStyle="rgba("+Ce+", "+at+", 0, 1)",te.fillRect(0,oe>>0,H,ce+1>>0),oe+=ce}j.baseTexture.emit("update",j.baseTexture),this.uniforms.displacementMap=j},z.sizes.set=function(C){for(var H=Math.min(this._slices,C.length),j=0;j<H;j++)this._sizes[j]=C[j]},z.sizes.get=function(){return this._sizes},z.offsets.set=function(C){for(var H=Math.min(this._slices,C.length),j=0;j<H;j++)this._offsets[j]=C[j]},z.offsets.get=function(){return this._offsets},z.slices.get=function(){return this._slices},z.slices.set=function(C){this._slices!==C&&(this._slices=C,this.uniforms.slices=C,this._sizes=this.uniforms.slicesWidth=new Float32Array(C),this._offsets=this.uniforms.slicesOffset=new Float32Array(C),this.refresh())},z.direction.get=function(){return this._direction},z.direction.set=function(C){if(this._direction!==C){this._direction=C;var H=C*n.DEG_TO_RAD;this.uniforms.sinDir=Math.sin(H),this.uniforms.cosDir=Math.cos(H)}},z.red.get=function(){return this.uniforms.red},z.red.set=function(C){this.uniforms.red=C},z.green.get=function(){return this.uniforms.green},z.green.set=function(C){this.uniforms.green=C},z.blue.get=function(){return this.uniforms.blue},z.blue.set=function(C){this.uniforms.blue=C},X.prototype.destroy=function(){this.texture.destroy(!0),this.texture=null,this._canvas=null,this.red=null,this.green=null,this.blue=null,this._sizes=null,this._offsets=null},Object.defineProperties(X.prototype,z),X}(n.Filter);ue.TRANSPARENT=0,ue.ORIGINAL=1,ue.LOOP=2,ue.CLAMP=3,ue.MIRROR=4;var fe=e,_e=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

uniform float distance;
uniform float outerStrength;
uniform float innerStrength;
uniform vec4 glowColor;
uniform vec4 filterArea;
uniform vec4 filterClamp;
const float PI = 3.14159265358979323846264;

void main(void) {
    vec2 px = vec2(1.0 / filterArea.x, 1.0 / filterArea.y);
    vec4 ownColor = texture2D(uSampler, vTextureCoord);
    vec4 curColor;
    float totalAlpha = 0.0;
    float maxTotalAlpha = 0.0;
    float cosAngle;
    float sinAngle;
    vec2 displaced;
    for (float angle = 0.0; angle <= PI * 2.0; angle += %QUALITY_DIST%) {
       cosAngle = cos(angle);
       sinAngle = sin(angle);
       for (float curDistance = 1.0; curDistance <= %DIST%; curDistance++) {
           displaced.x = vTextureCoord.x + cosAngle * curDistance * px.x;
           displaced.y = vTextureCoord.y + sinAngle * curDistance * px.y;
           curColor = texture2D(uSampler, clamp(displaced, filterClamp.xy, filterClamp.zw));
           totalAlpha += (distance - curDistance) * curColor.a;
           maxTotalAlpha += (distance - curDistance);
       }
    }
    maxTotalAlpha = max(maxTotalAlpha, 0.0001);

    ownColor.a = max(ownColor.a, 0.0001);
    ownColor.rgb = ownColor.rgb / ownColor.a;
    float outerGlowAlpha = (totalAlpha / maxTotalAlpha)  * outerStrength * (1. - ownColor.a);
    float innerGlowAlpha = ((maxTotalAlpha - totalAlpha) / maxTotalAlpha) * innerStrength * ownColor.a;
    float resultAlpha = (ownColor.a + outerGlowAlpha);
    gl_FragColor = vec4(mix(mix(ownColor.rgb, glowColor.rgb, innerGlowAlpha / ownColor.a), glowColor.rgb, outerGlowAlpha / resultAlpha) * resultAlpha, resultAlpha);
}
`,pe=function(Y){function X(C,H,j,te,oe){C===void 0&&(C=10),H===void 0&&(H=4),j===void 0&&(j=0),te===void 0&&(te=16777215),oe===void 0&&(oe=.1),Y.call(this,fe,_e.replace(/%QUALITY_DIST%/gi,""+(1/oe/C).toFixed(7)).replace(/%DIST%/gi,""+C.toFixed(7))),this.uniforms.glowColor=new Float32Array([0,0,0,1]),this.distance=C,this.color=te,this.outerStrength=H,this.innerStrength=j}Y&&(X.__proto__=Y),X.prototype=Object.create(Y&&Y.prototype),X.prototype.constructor=X;var z={color:{configurable:!0},distance:{configurable:!0},outerStrength:{configurable:!0},innerStrength:{configurable:!0}};return z.color.get=function(){return n.utils.rgb2hex(this.uniforms.glowColor)},z.color.set=function(C){n.utils.hex2rgb(C,this.uniforms.glowColor)},z.distance.get=function(){return this.uniforms.distance},z.distance.set=function(C){this.uniforms.distance=C},z.outerStrength.get=function(){return this.uniforms.outerStrength},z.outerStrength.set=function(C){this.uniforms.outerStrength=C},z.innerStrength.get=function(){return this.uniforms.innerStrength},z.innerStrength.set=function(C){this.uniforms.innerStrength=C},Object.defineProperties(X.prototype,z),X}(n.Filter),Pe=e,kt=`vec3 mod289(vec3 x)
{
    return x - floor(x * (1.0 / 289.0)) * 289.0;
}
vec4 mod289(vec4 x)
{
    return x - floor(x * (1.0 / 289.0)) * 289.0;
}
vec4 permute(vec4 x)
{
    return mod289(((x * 34.0) + 1.0) * x);
}
vec4 taylorInvSqrt(vec4 r)
{
    return 1.79284291400159 - 0.85373472095314 * r;
}
vec3 fade(vec3 t)
{
    return t * t * t * (t * (t * 6.0 - 15.0) + 10.0);
}
// Classic Perlin noise, periodic variant
float pnoise(vec3 P, vec3 rep)
{
    vec3 Pi0 = mod(floor(P), rep); // Integer part, modulo period
    vec3 Pi1 = mod(Pi0 + vec3(1.0), rep); // Integer part + 1, mod period
    Pi0 = mod289(Pi0);
    Pi1 = mod289(Pi1);
    vec3 Pf0 = fract(P); // Fractional part for interpolation
    vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0
    vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
    vec4 iy = vec4(Pi0.yy, Pi1.yy);
    vec4 iz0 = Pi0.zzzz;
    vec4 iz1 = Pi1.zzzz;
    vec4 ixy = permute(permute(ix) + iy);
    vec4 ixy0 = permute(ixy + iz0);
    vec4 ixy1 = permute(ixy + iz1);
    vec4 gx0 = ixy0 * (1.0 / 7.0);
    vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;
    gx0 = fract(gx0);
    vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
    vec4 sz0 = step(gz0, vec4(0.0));
    gx0 -= sz0 * (step(0.0, gx0) - 0.5);
    gy0 -= sz0 * (step(0.0, gy0) - 0.5);
    vec4 gx1 = ixy1 * (1.0 / 7.0);
    vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;
    gx1 = fract(gx1);
    vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
    vec4 sz1 = step(gz1, vec4(0.0));
    gx1 -= sz1 * (step(0.0, gx1) - 0.5);
    gy1 -= sz1 * (step(0.0, gy1) - 0.5);
    vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);
    vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);
    vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);
    vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);
    vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);
    vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);
    vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);
    vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);
    vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
    g000 *= norm0.x;
    g010 *= norm0.y;
    g100 *= norm0.z;
    g110 *= norm0.w;
    vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
    g001 *= norm1.x;
    g011 *= norm1.y;
    g101 *= norm1.z;
    g111 *= norm1.w;
    float n000 = dot(g000, Pf0);
    float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
    float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
    float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
    float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
    float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
    float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
    float n111 = dot(g111, Pf1);
    vec3 fade_xyz = fade(Pf0);
    vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
    vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
    float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);
    return 2.2 * n_xyz;
}
float turb(vec3 P, vec3 rep, float lacunarity, float gain)
{
    float sum = 0.0;
    float sc = 1.0;
    float totalgain = 1.0;
    for (float i = 0.0; i < 6.0; i++)
    {
        sum += totalgain * pnoise(P * sc, rep);
        sc *= lacunarity;
        totalgain *= gain;
    }
    return abs(sum);
}
`,be=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;
uniform vec2 dimensions;

uniform vec2 light;
uniform bool parallel;
uniform float aspect;

uniform float gain;
uniform float lacunarity;
uniform float time;

\${perlin}

void main(void) {
    vec2 coord = vTextureCoord * filterArea.xy / dimensions.xy;

    float d;

    if (parallel) {
        float _cos = light.x;
        float _sin = light.y;
        d = (_cos * coord.x) + (_sin * coord.y * aspect);
    } else {
        float dx = coord.x - light.x / dimensions.x;
        float dy = (coord.y - light.y / dimensions.y) * aspect;
        float dis = sqrt(dx * dx + dy * dy) + 0.00001;
        d = dy / dis;
    }

    vec3 dir = vec3(d, d, 0.0);

    float noise = turb(dir + vec3(time, 0.0, 62.1 + time) * 0.05, vec3(480.0, 320.0, 480.0), lacunarity, gain);
    noise = mix(noise, 0.0, 0.3);
    //fade vertically.
    vec4 mist = vec4(noise, noise, noise, 1.0) * (1.0 - coord.y);
    mist.a = 1.0;

    gl_FragColor = texture2D(uSampler, vTextureCoord) + mist;
}
`,bt=function(Y){function X(C){Y.call(this,Pe,be.replace("${perlin}",kt)),this.uniforms.dimensions=new Float32Array(2),typeof C=="number"&&(console.warn("GodrayFilter now uses options instead of (angle, gain, lacunarity, time)"),C={angle:C},arguments[1]!==void 0&&(C.gain=arguments[1]),arguments[2]!==void 0&&(C.lacunarity=arguments[2]),arguments[3]!==void 0&&(C.time=arguments[3])),C=Object.assign({angle:30,gain:.5,lacunarity:2.5,time:0,parallel:!0,center:[0,0]},C),this._angleLight=new n.Point,this.angle=C.angle,this.gain=C.gain,this.lacunarity=C.lacunarity,this.parallel=C.parallel,this.center=C.center,this.time=C.time}Y&&(X.__proto__=Y),X.prototype=Object.create(Y&&Y.prototype),X.prototype.constructor=X;var z={angle:{configurable:!0},gain:{configurable:!0},lacunarity:{configurable:!0}};return X.prototype.apply=function(C,H,j,te){var oe=H.sourceFrame,le=oe.width,ce=oe.height;this.uniforms.light=this.parallel?this._angleLight:this.center,this.uniforms.parallel=this.parallel,this.uniforms.dimensions[0]=le,this.uniforms.dimensions[1]=ce,this.uniforms.aspect=ce/le,this.uniforms.time=this.time,C.applyFilter(this,H,j,te)},z.angle.get=function(){return this._angle},z.angle.set=function(C){this._angle=C;var H=C*n.DEG_TO_RAD;this._angleLight.x=Math.cos(H),this._angleLight.y=Math.sin(H)},z.gain.get=function(){return this.uniforms.gain},z.gain.set=function(C){this.uniforms.gain=C},z.lacunarity.get=function(){return this.uniforms.lacunarity},z.lacunarity.set=function(C){this.uniforms.lacunarity=C},Object.defineProperties(X.prototype,z),X}(n.Filter),rr=e,St=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;

uniform vec2 uVelocity;
uniform int uKernelSize;
uniform float uOffset;

const int MAX_KERNEL_SIZE = 2048;

// Notice:
// the perfect way:
//    int kernelSize = min(uKernelSize, MAX_KERNELSIZE);
// BUT in real use-case , uKernelSize < MAX_KERNELSIZE almost always.
// So use uKernelSize directly.

void main(void)
{
    vec4 color = texture2D(uSampler, vTextureCoord);

    if (uKernelSize == 0)
    {
        gl_FragColor = color;
        return;
    }

    vec2 velocity = uVelocity / filterArea.xy;
    float offset = -uOffset / length(uVelocity) - 0.5;
    int k = uKernelSize - 1;

    for(int i = 0; i < MAX_KERNEL_SIZE - 1; i++) {
        if (i == k) {
            break;
        }
        vec2 bias = velocity * (float(i) / float(k) + offset);
        color += texture2D(uSampler, vTextureCoord + bias);
    }
    gl_FragColor = color / float(uKernelSize);
}
`,Nt=function(Y){function X(C,H,j){C===void 0&&(C=[0,0]),H===void 0&&(H=5),j===void 0&&(j=0),Y.call(this,rr,St),this.uniforms.uVelocity=new Float32Array(2),this._velocity=new n.ObservablePoint(this.velocityChanged,this),this.velocity=C,this.kernelSize=H,this.offset=j}Y&&(X.__proto__=Y),X.prototype=Object.create(Y&&Y.prototype),X.prototype.constructor=X;var z={velocity:{configurable:!0},offset:{configurable:!0}};return X.prototype.apply=function(C,H,j,te){var oe=this.velocity,le=oe.x,ce=oe.y;this.uniforms.uKernelSize=le!==0||ce!==0?this.kernelSize:0,C.applyFilter(this,H,j,te)},z.velocity.set=function(C){Array.isArray(C)?this._velocity.set(C[0],C[1]):(C instanceof n.Point||C instanceof n.ObservablePoint)&&this._velocity.copy(C)},z.velocity.get=function(){return this._velocity},X.prototype.velocityChanged=function(){this.uniforms.uVelocity[0]=this._velocity.x,this.uniforms.uVelocity[1]=this._velocity.y},z.offset.set=function(C){this.uniforms.uOffset=C},z.offset.get=function(){return this.uniforms.uOffset},Object.defineProperties(X.prototype,z),X}(n.Filter),Tr=e,it=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform float epsilon;

const int MAX_COLORS = %maxColors%;

uniform vec3 originalColors[MAX_COLORS];
uniform vec3 targetColors[MAX_COLORS];

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord);

    float alpha = gl_FragColor.a;
    if (alpha < 0.0001)
    {
      return;
    }

    vec3 color = gl_FragColor.rgb / alpha;

    for(int i = 0; i < MAX_COLORS; i++)
    {
      vec3 origColor = originalColors[i];
      if (origColor.r < 0.0)
      {
        break;
      }
      vec3 colorDiff = origColor - color;
      if (length(colorDiff) < epsilon)
      {
        vec3 targetColor = targetColors[i];
        gl_FragColor = vec4((targetColor + colorDiff) * alpha, alpha);
        return;
      }
    }
}
`,Gr=function(Y){function X(C,H,j){H===void 0&&(H=.05),j===void 0&&(j=null),j=j||C.length,Y.call(this,Tr,it.replace(/%maxColors%/g,j)),this.epsilon=H,this._maxColors=j,this._replacements=null,this.uniforms.originalColors=new Float32Array(3*j),this.uniforms.targetColors=new Float32Array(3*j),this.replacements=C}Y&&(X.__proto__=Y),X.prototype=Object.create(Y&&Y.prototype),X.prototype.constructor=X;var z={replacements:{configurable:!0},maxColors:{configurable:!0},epsilon:{configurable:!0}};return z.replacements.set=function(C){var H=this.uniforms.originalColors,j=this.uniforms.targetColors,te=C.length;if(te>this._maxColors)throw"Length of replacements ("+te+") exceeds the maximum colors length ("+this._maxColors+")";H[3*te]=-1;for(var oe=0;oe<te;oe++){var le=C[oe],ce=le[0];typeof ce=="number"?ce=n.utils.hex2rgb(ce):le[0]=n.utils.rgb2hex(ce),H[3*oe]=ce[0],H[3*oe+1]=ce[1],H[3*oe+2]=ce[2];var Ce=le[1];typeof Ce=="number"?Ce=n.utils.hex2rgb(Ce):le[1]=n.utils.rgb2hex(Ce),j[3*oe]=Ce[0],j[3*oe+1]=Ce[1],j[3*oe+2]=Ce[2]}this._replacements=C},z.replacements.get=function(){return this._replacements},X.prototype.refresh=function(){this.replacements=this._replacements},z.maxColors.get=function(){return this._maxColors},z.epsilon.set=function(C){this.uniforms.epsilon=C},z.epsilon.get=function(){return this.uniforms.epsilon},Object.defineProperties(X.prototype,z),X}(n.Filter),wt=e,ji=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;
uniform vec2 dimensions;

uniform float sepia;
uniform float noise;
uniform float noiseSize;
uniform float scratch;
uniform float scratchDensity;
uniform float scratchWidth;
uniform float vignetting;
uniform float vignettingAlpha;
uniform float vignettingBlur;
uniform float seed;

const float SQRT_2 = 1.414213;
const vec3 SEPIA_RGB = vec3(112.0 / 255.0, 66.0 / 255.0, 20.0 / 255.0);

float rand(vec2 co) {
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

vec3 Overlay(vec3 src, vec3 dst)
{
    // if (dst <= 0.5) then: 2 * src * dst
    // if (dst > 0.5) then: 1 - 2 * (1 - dst) * (1 - src)
    return vec3((dst.x <= 0.5) ? (2.0 * src.x * dst.x) : (1.0 - 2.0 * (1.0 - dst.x) * (1.0 - src.x)),
                (dst.y <= 0.5) ? (2.0 * src.y * dst.y) : (1.0 - 2.0 * (1.0 - dst.y) * (1.0 - src.y)),
                (dst.z <= 0.5) ? (2.0 * src.z * dst.z) : (1.0 - 2.0 * (1.0 - dst.z) * (1.0 - src.z)));
}


void main()
{
    gl_FragColor = texture2D(uSampler, vTextureCoord);
    vec3 color = gl_FragColor.rgb;

    if (sepia > 0.0)
    {
        float gray = (color.x + color.y + color.z) / 3.0;
        vec3 grayscale = vec3(gray);

        color = Overlay(SEPIA_RGB, grayscale);

        color = grayscale + sepia * (color - grayscale);
    }

    vec2 coord = vTextureCoord * filterArea.xy / dimensions.xy;

    if (vignetting > 0.0)
    {
        float outter = SQRT_2 - vignetting * SQRT_2;
        vec2 dir = vec2(vec2(0.5, 0.5) - coord);
        dir.y *= dimensions.y / dimensions.x;
        float darker = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + vignettingBlur * SQRT_2), 0.0, 1.0);
        color.rgb *= darker + (1.0 - darker) * (1.0 - vignettingAlpha);
    }

    if (scratchDensity > seed && scratch != 0.0)
    {
        float phase = seed * 256.0;
        float s = mod(floor(phase), 2.0);
        float dist = 1.0 / scratchDensity;
        float d = distance(coord, vec2(seed * dist, abs(s - seed * dist)));
        if (d < seed * 0.6 + 0.4)
        {
            highp float period = scratchDensity * 10.0;

            float xx = coord.x * period + phase;
            float aa = abs(mod(xx, 0.5) * 4.0);
            float bb = mod(floor(xx / 0.5), 2.0);
            float yy = (1.0 - bb) * aa + bb * (2.0 - aa);

            float kk = 2.0 * period;
            float dw = scratchWidth / dimensions.x * (0.75 + seed);
            float dh = dw * kk;

            float tine = (yy - (2.0 - dh));

            if (tine > 0.0) {
                float _sign = sign(scratch);

                tine = s * tine / period + scratch + 0.1;
                tine = clamp(tine + 1.0, 0.5 + _sign * 0.5, 1.5 + _sign * 0.5);

                color.rgb *= tine;
            }
        }
    }

    if (noise > 0.0 && noiseSize > 0.0)
    {
        vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;
        pixelCoord.x = floor(pixelCoord.x / noiseSize);
        pixelCoord.y = floor(pixelCoord.y / noiseSize);
        // vec2 d = pixelCoord * noiseSize * vec2(1024.0 + seed * 512.0, 1024.0 - seed * 512.0);
        // float _noise = snoise(d) * 0.5;
        float _noise = rand(pixelCoord * noiseSize * seed) - 0.5;
        color += _noise * noise;
    }

    gl_FragColor.rgb = color;
}
`,$i=function(Y){function X(C,H){H===void 0&&(H=0),Y.call(this,wt,ji),this.uniforms.dimensions=new Float32Array(2),typeof C=="number"?(this.seed=C,C=null):this.seed=H,Object.assign(this,{sepia:.3,noise:.3,noiseSize:1,scratch:.5,scratchDensity:.3,scratchWidth:1,vignetting:.3,vignettingAlpha:1,vignettingBlur:.3},C)}Y&&(X.__proto__=Y),X.prototype=Object.create(Y&&Y.prototype),X.prototype.constructor=X;var z={sepia:{configurable:!0},noise:{configurable:!0},noiseSize:{configurable:!0},scratch:{configurable:!0},scratchDensity:{configurable:!0},scratchWidth:{configurable:!0},vignetting:{configurable:!0},vignettingAlpha:{configurable:!0},vignettingBlur:{configurable:!0}};return X.prototype.apply=function(C,H,j,te){this.uniforms.dimensions[0]=H.sourceFrame.width,this.uniforms.dimensions[1]=H.sourceFrame.height,this.uniforms.seed=this.seed,C.applyFilter(this,H,j,te)},z.sepia.set=function(C){this.uniforms.sepia=C},z.sepia.get=function(){return this.uniforms.sepia},z.noise.set=function(C){this.uniforms.noise=C},z.noise.get=function(){return this.uniforms.noise},z.noiseSize.set=function(C){this.uniforms.noiseSize=C},z.noiseSize.get=function(){return this.uniforms.noiseSize},z.scratch.set=function(C){this.uniforms.scratch=C},z.scratch.get=function(){return this.uniforms.scratch},z.scratchDensity.set=function(C){this.uniforms.scratchDensity=C},z.scratchDensity.get=function(){return this.uniforms.scratchDensity},z.scratchWidth.set=function(C){this.uniforms.scratchWidth=C},z.scratchWidth.get=function(){return this.uniforms.scratchWidth},z.vignetting.set=function(C){this.uniforms.vignetting=C},z.vignetting.get=function(){return this.uniforms.vignetting},z.vignettingAlpha.set=function(C){this.uniforms.vignettingAlpha=C},z.vignettingAlpha.get=function(){return this.uniforms.vignettingAlpha},z.vignettingBlur.set=function(C){this.uniforms.vignettingBlur=C},z.vignettingBlur.get=function(){return this.uniforms.vignettingBlur},Object.defineProperties(X.prototype,z),X}(n.Filter),ea=e,ta=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec2 thickness;
uniform vec4 outlineColor;
uniform vec4 filterClamp;

const float DOUBLE_PI = 3.14159265358979323846264 * 2.;

void main(void) {
    vec4 ownColor = texture2D(uSampler, vTextureCoord);
    vec4 curColor;
    float maxAlpha = 0.;
    vec2 displaced;
    for (float angle = 0.; angle <= DOUBLE_PI; angle += \${angleStep}) {
        displaced.x = vTextureCoord.x + thickness.x * cos(angle);
        displaced.y = vTextureCoord.y + thickness.y * sin(angle);
        curColor = texture2D(uSampler, clamp(displaced, filterClamp.xy, filterClamp.zw));
        maxAlpha = max(maxAlpha, curColor.a);
    }
    float resultAlpha = max(maxAlpha, ownColor.a);
    gl_FragColor = vec4((ownColor.rgb + outlineColor.rgb * (1. - ownColor.a)) * resultAlpha, resultAlpha);
}
`,Xr=function(Y){function X(C,H,j){C===void 0&&(C=1),H===void 0&&(H=0),j===void 0&&(j=.1);var te=Math.max(j*X.MAX_SAMPLES,X.MIN_SAMPLES),oe=(2*Math.PI/te).toFixed(7);Y.call(this,ea,ta.replace(/\$\{angleStep\}/,oe)),this.uniforms.thickness=new Float32Array([0,0]),this.thickness=C,this.uniforms.outlineColor=new Float32Array([0,0,0,1]),this.color=H,this.quality=j}Y&&(X.__proto__=Y),X.prototype=Object.create(Y&&Y.prototype),X.prototype.constructor=X;var z={color:{configurable:!0}};return X.prototype.apply=function(C,H,j,te){this.uniforms.thickness[0]=this.thickness/H.size.width,this.uniforms.thickness[1]=this.thickness/H.size.height,C.applyFilter(this,H,j,te)},z.color.get=function(){return n.utils.rgb2hex(this.uniforms.outlineColor)},z.color.set=function(C){n.utils.hex2rgb(C,this.uniforms.outlineColor)},Object.defineProperties(X.prototype,z),X}(n.Filter);Xr.MIN_SAMPLES=1,Xr.MAX_SAMPLES=100;var ra=e,na=`precision mediump float;

varying vec2 vTextureCoord;

uniform vec2 size;
uniform sampler2D uSampler;

uniform vec4 filterArea;

vec2 mapCoord( vec2 coord )
{
    coord *= filterArea.xy;
    coord += filterArea.zw;

    return coord;
}

vec2 unmapCoord( vec2 coord )
{
    coord -= filterArea.zw;
    coord /= filterArea.xy;

    return coord;
}

vec2 pixelate(vec2 coord, vec2 size)
{
	return floor( coord / size ) * size;
}

void main(void)
{
    vec2 coord = mapCoord(vTextureCoord);

    coord = pixelate(coord, size);

    coord = unmapCoord(coord);

    gl_FragColor = texture2D(uSampler, coord);
}
`,ia=function(Y){function X(C){C===void 0&&(C=10),Y.call(this,ra,na),this.size=C}Y&&(X.__proto__=Y),X.prototype=Object.create(Y&&Y.prototype),X.prototype.constructor=X;var z={size:{configurable:!0}};return z.size.get=function(){return this.uniforms.size},z.size.set=function(C){typeof C=="number"&&(C=[C,C]),this.uniforms.size=C},Object.defineProperties(X.prototype,z),X}(n.Filter),aa=e,oa=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;

uniform float uRadian;
uniform vec2 uCenter;
uniform float uRadius;
uniform int uKernelSize;

const int MAX_KERNEL_SIZE = 2048;

void main(void)
{
    vec4 color = texture2D(uSampler, vTextureCoord);

    if (uKernelSize == 0)
    {
        gl_FragColor = color;
        return;
    }

    float aspect = filterArea.y / filterArea.x;
    vec2 center = uCenter.xy / filterArea.xy;
    float gradient = uRadius / filterArea.x * 0.3;
    float radius = uRadius / filterArea.x - gradient * 0.5;
    int k = uKernelSize - 1;

    vec2 coord = vTextureCoord;
    vec2 dir = vec2(center - coord);
    float dist = length(vec2(dir.x, dir.y * aspect));

    float radianStep = uRadian;
    if (radius >= 0.0 && dist > radius) {
        float delta = dist - radius;
        float gap = gradient;
        float scale = 1.0 - abs(delta / gap);
        if (scale <= 0.0) {
            gl_FragColor = color;
            return;
        }
        radianStep *= scale;
    }
    radianStep /= float(k);

    float s = sin(radianStep);
    float c = cos(radianStep);
    mat2 rotationMatrix = mat2(vec2(c, -s), vec2(s, c));

    for(int i = 0; i < MAX_KERNEL_SIZE - 1; i++) {
        if (i == k) {
            break;
        }

        coord -= center;
        coord.y *= aspect;
        coord = rotationMatrix * coord;
        coord.y /= aspect;
        coord += center;

        vec4 sample = texture2D(uSampler, coord);

        // switch to pre-multiplied alpha to correctly blur transparent images
        // sample.rgb *= sample.a;

        color += sample;
    }

    gl_FragColor = color / float(uKernelSize);
}
`,sa=function(Y){function X(C,H,j,te){C===void 0&&(C=0),H===void 0&&(H=[0,0]),j===void 0&&(j=5),te===void 0&&(te=-1),Y.call(this,aa,oa),this._angle=0,this.angle=C,this.center=H,this.kernelSize=j,this.radius=te}Y&&(X.__proto__=Y),X.prototype=Object.create(Y&&Y.prototype),X.prototype.constructor=X;var z={angle:{configurable:!0},center:{configurable:!0},radius:{configurable:!0}};return X.prototype.apply=function(C,H,j,te){this.uniforms.uKernelSize=this._angle!==0?this.kernelSize:0,C.applyFilter(this,H,j,te)},z.angle.set=function(C){this._angle=C,this.uniforms.uRadian=C*Math.PI/180},z.angle.get=function(){return this._angle},z.center.get=function(){return this.uniforms.uCenter},z.center.set=function(C){this.uniforms.uCenter=C},z.radius.get=function(){return this.uniforms.uRadius},z.radius.set=function(C){(C<0||C===1/0)&&(C=-1),this.uniforms.uRadius=C},Object.defineProperties(X.prototype,z),X}(n.Filter),ua=e,la=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec4 filterArea;
uniform vec4 filterClamp;
uniform vec2 dimensions;

uniform bool mirror;
uniform float boundary;
uniform vec2 amplitude;
uniform vec2 waveLength;
uniform vec2 alpha;
uniform float time;

float rand(vec2 co) {
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main(void)
{
    vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;
    vec2 coord = pixelCoord / dimensions;

    if (coord.y < boundary) {
        gl_FragColor = texture2D(uSampler, vTextureCoord);
        return;
    }

    float k = (coord.y - boundary) / (1. - boundary + 0.0001);
    float areaY = boundary * dimensions.y / filterArea.y;
    float v = areaY + areaY - vTextureCoord.y;
    float y = mirror ? v : vTextureCoord.y;

    float _amplitude = ((amplitude.y - amplitude.x) * k + amplitude.x ) / filterArea.x;
    float _waveLength = ((waveLength.y - waveLength.x) * k + waveLength.x) / filterArea.y;
    float _alpha = (alpha.y - alpha.x) * k + alpha.x;

    float x = vTextureCoord.x + cos(v * 6.28 / _waveLength - time) * _amplitude;
    x = clamp(x, filterClamp.x, filterClamp.z);

    vec4 color = texture2D(uSampler, vec2(x, y));

    gl_FragColor = color * _alpha;
}
`,ha=function(Y){function X(C){Y.call(this,ua,la),this.uniforms.amplitude=new Float32Array(2),this.uniforms.waveLength=new Float32Array(2),this.uniforms.alpha=new Float32Array(2),this.uniforms.dimensions=new Float32Array(2),Object.assign(this,{mirror:!0,boundary:.5,amplitude:[0,20],waveLength:[30,100],alpha:[1,1],time:0},C)}Y&&(X.__proto__=Y),X.prototype=Object.create(Y&&Y.prototype),X.prototype.constructor=X;var z={mirror:{configurable:!0},boundary:{configurable:!0},amplitude:{configurable:!0},waveLength:{configurable:!0},alpha:{configurable:!0}};return X.prototype.apply=function(C,H,j,te){this.uniforms.dimensions[0]=H.sourceFrame.width,this.uniforms.dimensions[1]=H.sourceFrame.height,this.uniforms.time=this.time,C.applyFilter(this,H,j,te)},z.mirror.set=function(C){this.uniforms.mirror=C},z.mirror.get=function(){return this.uniforms.mirror},z.boundary.set=function(C){this.uniforms.boundary=C},z.boundary.get=function(){return this.uniforms.boundary},z.amplitude.set=function(C){this.uniforms.amplitude[0]=C[0],this.uniforms.amplitude[1]=C[1]},z.amplitude.get=function(){return this.uniforms.amplitude},z.waveLength.set=function(C){this.uniforms.waveLength[0]=C[0],this.uniforms.waveLength[1]=C[1]},z.waveLength.get=function(){return this.uniforms.waveLength},z.alpha.set=function(C){this.uniforms.alpha[0]=C[0],this.uniforms.alpha[1]=C[1]},z.alpha.get=function(){return this.uniforms.alpha},Object.defineProperties(X.prototype,z),X}(n.Filter),fa=e,ca=`precision mediump float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 filterArea;
uniform vec2 red;
uniform vec2 green;
uniform vec2 blue;

void main(void)
{
   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/filterArea.xy).r;
   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/filterArea.xy).g;
   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/filterArea.xy).b;
   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;
}
`,da=function(Y){function X(C,H,j){C===void 0&&(C=[-10,0]),H===void 0&&(H=[0,10]),j===void 0&&(j=[0,0]),Y.call(this,fa,ca),this.red=C,this.green=H,this.blue=j}Y&&(X.__proto__=Y),X.prototype=Object.create(Y&&Y.prototype),X.prototype.constructor=X;var z={red:{configurable:!0},green:{configurable:!0},blue:{configurable:!0}};return z.red.get=function(){return this.uniforms.red},z.red.set=function(C){this.uniforms.red=C},z.green.get=function(){return this.uniforms.green},z.green.set=function(C){this.uniforms.green=C},z.blue.get=function(){return this.uniforms.blue},z.blue.set=function(C){this.uniforms.blue=C},Object.defineProperties(X.prototype,z),X}(n.Filter),pa=e,va=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;
uniform vec4 filterClamp;

uniform vec2 center;

uniform float amplitude;
uniform float wavelength;
// uniform float power;
uniform float brightness;
uniform float speed;
uniform float radius;

uniform float time;

const float PI = 3.14159;

void main()
{
    float halfWavelength = wavelength * 0.5 / filterArea.x;
    float maxRadius = radius / filterArea.x;
    float currentRadius = time * speed / filterArea.x;

    float fade = 1.0;

    if (maxRadius > 0.0) {
        if (currentRadius > maxRadius) {
            gl_FragColor = texture2D(uSampler, vTextureCoord);
            return;
        }
        fade = 1.0 - pow(currentRadius / maxRadius, 2.0);
    }

    vec2 dir = vec2(vTextureCoord - center / filterArea.xy);
    dir.y *= filterArea.y / filterArea.x;
    float dist = length(dir);

    if (dist <= 0.0 || dist < currentRadius - halfWavelength || dist > currentRadius + halfWavelength) {
        gl_FragColor = texture2D(uSampler, vTextureCoord);
        return;
    }

    vec2 diffUV = normalize(dir);

    float diff = (dist - currentRadius) / halfWavelength;

    float p = 1.0 - pow(abs(diff), 2.0);

    // float powDiff = diff * pow(p, 2.0) * ( amplitude * fade );
    float powDiff = 1.25 * sin(diff * PI) * p * ( amplitude * fade );

    vec2 offset = diffUV * powDiff / filterArea.xy;

    // Do clamp :
    vec2 coord = vTextureCoord + offset;
    vec2 clampedCoord = clamp(coord, filterClamp.xy, filterClamp.zw);
    vec4 color = texture2D(uSampler, clampedCoord);
    if (coord != clampedCoord) {
        color *= max(0.0, 1.0 - length(coord - clampedCoord));
    }

    // No clamp :
    // gl_FragColor = texture2D(uSampler, vTextureCoord + offset);

    color.rgb *= 1.0 + (brightness - 1.0) * p * fade;

    gl_FragColor = color;
}
`,_a=function(Y){function X(C,H,j){C===void 0&&(C=[0,0]),H===void 0&&(H={}),j===void 0&&(j=0),Y.call(this,pa,va),this.center=C,Array.isArray(H)&&(console.warn("Deprecated Warning: ShockwaveFilter params Array has been changed to options Object."),H={}),H=Object.assign({amplitude:30,wavelength:160,brightness:1,speed:500,radius:-1},H),this.amplitude=H.amplitude,this.wavelength=H.wavelength,this.brightness=H.brightness,this.speed=H.speed,this.radius=H.radius,this.time=j}Y&&(X.__proto__=Y),X.prototype=Object.create(Y&&Y.prototype),X.prototype.constructor=X;var z={center:{configurable:!0},amplitude:{configurable:!0},wavelength:{configurable:!0},brightness:{configurable:!0},speed:{configurable:!0},radius:{configurable:!0}};return X.prototype.apply=function(C,H,j,te){this.uniforms.time=this.time,C.applyFilter(this,H,j,te)},z.center.get=function(){return this.uniforms.center},z.center.set=function(C){this.uniforms.center=C},z.amplitude.get=function(){return this.uniforms.amplitude},z.amplitude.set=function(C){this.uniforms.amplitude=C},z.wavelength.get=function(){return this.uniforms.wavelength},z.wavelength.set=function(C){this.uniforms.wavelength=C},z.brightness.get=function(){return this.uniforms.brightness},z.brightness.set=function(C){this.uniforms.brightness=C},z.speed.get=function(){return this.uniforms.speed},z.speed.set=function(C){this.uniforms.speed=C},z.radius.get=function(){return this.uniforms.radius},z.radius.set=function(C){this.uniforms.radius=C},Object.defineProperties(X.prototype,z),X}(n.Filter),ga=e,ma=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform sampler2D uLightmap;
uniform vec4 filterArea;
uniform vec2 dimensions;
uniform vec4 ambientColor;
void main() {
    vec4 diffuseColor = texture2D(uSampler, vTextureCoord);
    vec2 lightCoord = (vTextureCoord * filterArea.xy) / dimensions;
    vec4 light = texture2D(uLightmap, lightCoord);
    vec3 ambient = ambientColor.rgb * ambientColor.a;
    vec3 intensity = ambient + light.rgb;
    vec3 finalColor = diffuseColor.rgb * intensity;
    gl_FragColor = vec4(finalColor, diffuseColor.a);
}
`,ya=function(Y){function X(C,H,j){H===void 0&&(H=0),j===void 0&&(j=1),Y.call(this,ga,ma),this.uniforms.dimensions=new Float32Array(2),this.uniforms.ambientColor=new Float32Array([0,0,0,j]),this.texture=C,this.color=H}Y&&(X.__proto__=Y),X.prototype=Object.create(Y&&Y.prototype),X.prototype.constructor=X;var z={texture:{configurable:!0},color:{configurable:!0},alpha:{configurable:!0}};return X.prototype.apply=function(C,H,j,te){this.uniforms.dimensions[0]=H.sourceFrame.width,this.uniforms.dimensions[1]=H.sourceFrame.height,C.applyFilter(this,H,j,te)},z.texture.get=function(){return this.uniforms.uLightmap},z.texture.set=function(C){this.uniforms.uLightmap=C},z.color.set=function(C){var H=this.uniforms.ambientColor;typeof C=="number"?(n.utils.hex2rgb(C,H),this._color=C):(H[0]=C[0],H[1]=C[1],H[2]=C[2],H[3]=C[3],this._color=n.utils.rgb2hex(H))},z.color.get=function(){return this._color},z.alpha.get=function(){return this.uniforms.ambientColor[3]},z.alpha.set=function(C){this.uniforms.ambientColor[3]=C},Object.defineProperties(X.prototype,z),X}(n.Filter),xa=e,Ta=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float blur;
uniform float gradientBlur;
uniform vec2 start;
uniform vec2 end;
uniform vec2 delta;
uniform vec2 texSize;

float random(vec3 scale, float seed)
{
    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);
}

void main(void)
{
    vec4 color = vec4(0.0);
    float total = 0.0;

    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);
    vec2 normal = normalize(vec2(start.y - end.y, end.x - start.x));
    float radius = smoothstep(0.0, 1.0, abs(dot(vTextureCoord * texSize - start, normal)) / gradientBlur) * blur;

    for (float t = -30.0; t <= 30.0; t++)
    {
        float percent = (t + offset - 0.5) / 30.0;
        float weight = 1.0 - abs(percent);
        vec4 sample = texture2D(uSampler, vTextureCoord + delta / texSize * percent * radius);
        sample.rgb *= sample.a;
        color += sample * weight;
        total += weight;
    }

    color /= total;
    color.rgb /= color.a + 0.00001;

    gl_FragColor = color;
}
`,Wr=function(Y){function X(C,H,j,te){C===void 0&&(C=100),H===void 0&&(H=600),j===void 0&&(j=null),te===void 0&&(te=null),Y.call(this,xa,Ta),this.uniforms.blur=C,this.uniforms.gradientBlur=H,this.uniforms.start=j||new n.Point(0,window.innerHeight/2),this.uniforms.end=te||new n.Point(600,window.innerHeight/2),this.uniforms.delta=new n.Point(30,30),this.uniforms.texSize=new n.Point(window.innerWidth,window.innerHeight),this.updateDelta()}Y&&(X.__proto__=Y),X.prototype=Object.create(Y&&Y.prototype),X.prototype.constructor=X;var z={blur:{configurable:!0},gradientBlur:{configurable:!0},start:{configurable:!0},end:{configurable:!0}};return X.prototype.updateDelta=function(){this.uniforms.delta.x=0,this.uniforms.delta.y=0},z.blur.get=function(){return this.uniforms.blur},z.blur.set=function(C){this.uniforms.blur=C},z.gradientBlur.get=function(){return this.uniforms.gradientBlur},z.gradientBlur.set=function(C){this.uniforms.gradientBlur=C},z.start.get=function(){return this.uniforms.start},z.start.set=function(C){this.uniforms.start=C,this.updateDelta()},z.end.get=function(){return this.uniforms.end},z.end.set=function(C){this.uniforms.end=C,this.updateDelta()},Object.defineProperties(X.prototype,z),X}(n.Filter),In=function(Y){function X(){Y.apply(this,arguments)}return Y&&(X.__proto__=Y),X.prototype=Object.create(Y&&Y.prototype),X.prototype.constructor=X,X.prototype.updateDelta=function(){var z=this.uniforms.end.x-this.uniforms.start.x,C=this.uniforms.end.y-this.uniforms.start.y,H=Math.sqrt(z*z+C*C);this.uniforms.delta.x=z/H,this.uniforms.delta.y=C/H},X}(Wr),Fn=function(Y){function X(){Y.apply(this,arguments)}return Y&&(X.__proto__=Y),X.prototype=Object.create(Y&&Y.prototype),X.prototype.constructor=X,X.prototype.updateDelta=function(){var z=this.uniforms.end.x-this.uniforms.start.x,C=this.uniforms.end.y-this.uniforms.start.y,H=Math.sqrt(z*z+C*C);this.uniforms.delta.x=-C/H,this.uniforms.delta.y=z/H},X}(Wr),ba=function(Y){function X(C,H,j,te){C===void 0&&(C=100),H===void 0&&(H=600),j===void 0&&(j=null),te===void 0&&(te=null),Y.call(this),this.tiltShiftXFilter=new In(C,H,j,te),this.tiltShiftYFilter=new Fn(C,H,j,te)}Y&&(X.__proto__=Y),X.prototype=Object.create(Y&&Y.prototype),X.prototype.constructor=X;var z={blur:{configurable:!0},gradientBlur:{configurable:!0},start:{configurable:!0},end:{configurable:!0}};return X.prototype.apply=function(C,H,j){var te=C.getRenderTarget(!0);this.tiltShiftXFilter.apply(C,H,te),this.tiltShiftYFilter.apply(C,te,j),C.returnRenderTarget(te)},z.blur.get=function(){return this.tiltShiftXFilter.blur},z.blur.set=function(C){this.tiltShiftXFilter.blur=this.tiltShiftYFilter.blur=C},z.gradientBlur.get=function(){return this.tiltShiftXFilter.gradientBlur},z.gradientBlur.set=function(C){this.tiltShiftXFilter.gradientBlur=this.tiltShiftYFilter.gradientBlur=C},z.start.get=function(){return this.tiltShiftXFilter.start},z.start.set=function(C){this.tiltShiftXFilter.start=this.tiltShiftYFilter.start=C},z.end.get=function(){return this.tiltShiftXFilter.end},z.end.set=function(C){this.tiltShiftXFilter.end=this.tiltShiftYFilter.end=C},Object.defineProperties(X.prototype,z),X}(n.Filter),Sa=e,wa=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float radius;
uniform float angle;
uniform vec2 offset;
uniform vec4 filterArea;

vec2 mapCoord( vec2 coord )
{
    coord *= filterArea.xy;
    coord += filterArea.zw;

    return coord;
}

vec2 unmapCoord( vec2 coord )
{
    coord -= filterArea.zw;
    coord /= filterArea.xy;

    return coord;
}

vec2 twist(vec2 coord)
{
    coord -= offset;

    float dist = length(coord);

    if (dist < radius)
    {
        float ratioDist = (radius - dist) / radius;
        float angleMod = ratioDist * ratioDist * angle;
        float s = sin(angleMod);
        float c = cos(angleMod);
        coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);
    }

    coord += offset;

    return coord;
}

void main(void)
{

    vec2 coord = mapCoord(vTextureCoord);

    coord = twist(coord);

    coord = unmapCoord(coord);

    gl_FragColor = texture2D(uSampler, coord );

}
`,Ea=function(Y){function X(C,H,j){C===void 0&&(C=200),H===void 0&&(H=4),j===void 0&&(j=20),Y.call(this,Sa,wa),this.radius=C,this.angle=H,this.padding=j}Y&&(X.__proto__=Y),X.prototype=Object.create(Y&&Y.prototype),X.prototype.constructor=X;var z={offset:{configurable:!0},radius:{configurable:!0},angle:{configurable:!0}};return z.offset.get=function(){return this.uniforms.offset},z.offset.set=function(C){this.uniforms.offset=C},z.radius.get=function(){return this.uniforms.radius},z.radius.set=function(C){this.uniforms.radius=C},z.angle.get=function(){return this.uniforms.angle},z.angle.set=function(C){this.uniforms.angle=C},Object.defineProperties(X.prototype,z),X}(n.Filter),Pa=e,Ca=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;

uniform vec2 uCenter;
uniform float uStrength;
uniform float uInnerRadius;
uniform float uRadius;

const float MAX_KERNEL_SIZE = 32.0;

float random(vec3 scale, float seed) {
    // use the fragment position for a different seed per-pixel
    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);
}

void main() {

    float minGradient = uInnerRadius * 0.3;
    float innerRadius = (uInnerRadius + minGradient * 0.5) / filterArea.x;

    float gradient = uRadius * 0.3;
    float radius = (uRadius - gradient * 0.5) / filterArea.x;

    float countLimit = MAX_KERNEL_SIZE;

    vec2 dir = vec2(uCenter.xy / filterArea.xy - vTextureCoord);
    float dist = length(vec2(dir.x, dir.y * filterArea.y / filterArea.x));

    float strength = uStrength;

    float delta = 0.0;
    float gap;
    if (dist < innerRadius) {
        delta = innerRadius - dist;
        gap = minGradient;
    } else if (radius >= 0.0 && dist > radius) { // radius < 0 means it's infinity
        delta = dist - radius;
        gap = gradient;
    }

    if (delta > 0.0) {
        float normalCount = gap / filterArea.x;
        delta = (normalCount - delta) / normalCount;
        countLimit *= delta;
        strength *= delta;
        if (countLimit < 1.0)
        {
            gl_FragColor = texture2D(uSampler, vTextureCoord);
            return;
        }
    }

    // randomize the lookup values to hide the fixed number of samples
    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);

    float total = 0.0;
    vec4 color = vec4(0.0);

    dir *= strength;

    for (float t = 0.0; t < MAX_KERNEL_SIZE; t++) {
        float percent = (t + offset) / MAX_KERNEL_SIZE;
        float weight = 4.0 * (percent - percent * percent);
        vec2 p = vTextureCoord + dir * percent;
        vec4 sample = texture2D(uSampler, p);

        // switch to pre-multiplied alpha to correctly blur transparent images
        // sample.rgb *= sample.a;

        color += sample * weight;
        total += weight;

        if (t > countLimit){
            break;
        }
    }

    color /= total;
    // switch back from pre-multiplied alpha
    color.rgb /= color.a + 0.00001;

    gl_FragColor = color;
}
`,Ma=function(Y){function X(C,H,j,te){C===void 0&&(C=.1),H===void 0&&(H=[0,0]),j===void 0&&(j=0),te===void 0&&(te=-1),Y.call(this,Pa,Ca),this.center=H,this.strength=C,this.innerRadius=j,this.radius=te}Y&&(X.__proto__=Y),X.prototype=Object.create(Y&&Y.prototype),X.prototype.constructor=X;var z={center:{configurable:!0},strength:{configurable:!0},innerRadius:{configurable:!0},radius:{configurable:!0}};return z.center.get=function(){return this.uniforms.uCenter},z.center.set=function(C){this.uniforms.uCenter=C},z.strength.get=function(){return this.uniforms.uStrength},z.strength.set=function(C){this.uniforms.uStrength=C},z.innerRadius.get=function(){return this.uniforms.uInnerRadius},z.innerRadius.set=function(C){this.uniforms.uInnerRadius=C},z.radius.get=function(){return this.uniforms.uRadius},z.radius.set=function(C){(C<0||C===1/0)&&(C=-1),this.uniforms.uRadius=C},Object.defineProperties(X.prototype,z),X}(n.Filter);return _.AdjustmentFilter=u,_.AdvancedBloomFilter=r,_.AsciiFilter=f,_.BevelFilter=x,_.BloomFilter=S,_.BulgePinchFilter=P,_.ColorMapFilter=B,_.ColorReplaceFilter=D,_.ConvolutionFilter=N,_.CrossHatchFilter=G,_.CRTFilter=q,_.DotFilter=V,_.DropShadowFilter=ie,_.EmbossFilter=se,_.GlitchFilter=ue,_.GlowFilter=pe,_.GodrayFilter=bt,_.KawaseBlurFilter=v,_.MotionBlurFilter=Nt,_.MultiColorReplaceFilter=Gr,_.OldFilmFilter=$i,_.OutlineFilter=Xr,_.PixelateFilter=ia,_.RadialBlurFilter=sa,_.ReflectionFilter=ha,_.RGBSplitFilter=da,_.ShockwaveFilter=_a,_.SimpleLightmapFilter=ya,_.TiltShiftFilter=ba,_.TiltShiftAxisFilter=Wr,_.TiltShiftXFilter=In,_.TiltShiftYFilter=Fn,_.TwistFilter=Ea,_.ZoomBlurFilter=Ma,_}({},PIXI);Object.assign(PIXI.filters,globalThis?globalThis.__filters:Oa);/*!
 * pixi-particles - v3.0.0
 * Compiled Mon, 12 Feb 2018 04:21:37 UTC
 *
 * pixi-particles is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */(function(_){if(typeof Dn=="object"&&typeof yr<"u")yr.exports=_();else if(typeof define=="function"&&define.amd)define([],_);else{var n;typeof window<"u"?n=window:typeof global<"u"?n=global:typeof self<"u"?n=self:n=this,n.pixiParticles=_()}})(function(){return function(){function _(n,e,l){function u(p,v){if(!e[p]){if(!n[p]){var h=typeof require=="function"&&require;if(!v&&h)return h(p,!0);if(c)return c(p,!0);var o=new Error("Cannot find module '"+p+"'");throw o.code="MODULE_NOT_FOUND",o}var i=e[p]={exports:{}};n[p][0].call(i.exports,function(t){var r=n[p][1][t];return u(r||t)},i,i.exports,_,n,e,l)}return e[p].exports}for(var c=typeof require=="function"&&require,s=0;s<l.length;s++)u(l[s]);return u}return _}()({1:[function(_,n,e){var l=this&&this.__extends||function(){var p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,h){v.__proto__=h}||function(v,h){for(var o in h)h.hasOwnProperty(o)&&(v[o]=h[o])};return function(v,h){p(v,h);function o(){this.constructor=v}v.prototype=h===null?Object.create(h):(o.prototype=h.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var u=_("Particle"),c=PIXI.Texture,s=function(p){l(v,p);function v(h){var o=p.call(this,h)||this;return o.textures=null,o.duration=0,o.framerate=0,o.elapsed=0,o.loop=!1,o}return v.prototype.init=function(){this.Particle_init(),this.elapsed=0,this.framerate<0&&(this.duration=this.maxLife,this.framerate=this.textures.length/this.duration)},v.prototype.applyArt=function(h){this.textures=h.textures,this.framerate=h.framerate,this.duration=h.duration,this.loop=h.loop},v.prototype.update=function(h){var o=this.Particle_update(h);if(o>=0){this.elapsed+=h,this.elapsed>this.duration&&(this.loop?this.elapsed=this.elapsed%this.duration:this.elapsed=this.duration-1e-6);var i=this.elapsed*this.framerate+1e-7|0;this.texture=this.textures[i]||PIXI.Texture.EMPTY}return o},v.prototype.destroy=function(){this.Particle_destroy(),this.textures=null},v.parseArt=function(h){for(var o,i,t,r,d,a=[],f=0;f<h.length;++f){o=h[f],a[f]=i={},i.textures=d=[],t=o.textures;for(var m=0;m<t.length;++m)if(r=t[m],typeof r=="string")d.push(c.fromImage(r));else if(r instanceof c)d.push(r);else{var g=r.count||1;for(typeof r.texture=="string"?r=c.fromImage(r.texture):r=r.texture;g>0;--g)d.push(r)}o.framerate=="matchLife"?(i.framerate=-1,i.duration=0,i.loop=!1):(i.loop=!!o.loop,i.framerate=o.framerate>0?o.framerate:60,i.duration=d.length/i.framerate)}return a},v}(u.default);e.default=s},{Particle:3}],2:[function(_,n,e){Object.defineProperty(e,"__esModule",{value:!0});var l=_("ParticleUtils"),u=_("Particle"),c=_("PropertyNode"),s=PIXI.ticker.shared,p=new PIXI.Point,v=function(){function h(o,i,t){this._particleConstructor=u.default,this.particleImages=null,this.startAlpha=null,this.startSpeed=null,this.minimumSpeedMultiplier=1,this.acceleration=null,this.maxSpeed=NaN,this.startScale=null,this.minimumScaleMultiplier=1,this.startColor=null,this.minLifetime=0,this.maxLifetime=0,this.minStartRotation=0,this.maxStartRotation=0,this.noRotation=!1,this.minRotationSpeed=0,this.maxRotationSpeed=0,this.particleBlendMode=0,this.customEase=null,this.extraData=null,this._frequency=1,this.spawnChance=1,this.maxParticles=1e3,this.emitterLifetime=-1,this.spawnPos=null,this.spawnType=null,this._spawnFunc=null,this.spawnRect=null,this.spawnCircle=null,this.particlesPerWave=1,this.particleSpacing=0,this.angleStart=0,this.rotation=0,this.ownerPos=null,this._prevEmitterPos=null,this._prevPosIsValid=!1,this._posChanged=!1,this._parent=null,this.addAtBack=!1,this.particleCount=0,this._emit=!1,this._spawnTimer=0,this._emitterLife=-1,this._activeParticlesFirst=null,this._activeParticlesLast=null,this._poolFirst=null,this._origConfig=null,this._origArt=null,this._autoUpdate=!1,this._destroyWhenComplete=!1,this._completeCallback=null,this.parent=o,i&&t&&this.init(i,t),this.recycle=this.recycle,this.update=this.update,this.rotate=this.rotate,this.updateSpawnPos=this.updateSpawnPos,this.updateOwnerPos=this.updateOwnerPos}return Object.defineProperty(h.prototype,"frequency",{get:function(){return this._frequency},set:function(o){typeof o=="number"&&o>0?this._frequency=o:this._frequency=1},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"particleConstructor",{get:function(){return this._particleConstructor},set:function(o){if(o!=this._particleConstructor){this._particleConstructor=o,this.cleanup();for(var i=this._poolFirst;i;i=i.next)i.destroy();this._poolFirst=null,this._origConfig&&this._origArt&&this.init(this._origArt,this._origConfig)}},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"parent",{get:function(){return this._parent},set:function(o){this.cleanup(),this._parent=o},enumerable:!0,configurable:!0}),h.prototype.init=function(o,i){if(!(!o||!i)){this.cleanup(),this._origConfig=i,this._origArt=o,o=Array.isArray(o)?o.slice():[o];var t=this._particleConstructor;this.particleImages=t.parseArt?t.parseArt(o):o,i.alpha?this.startAlpha=c.default.createList(i.alpha):this.startAlpha=new c.default(1,0),i.speed?(this.startSpeed=c.default.createList(i.speed),this.minimumSpeedMultiplier=i.speed.minimumSpeedMultiplier||1):(this.minimumSpeedMultiplier=1,this.startSpeed=new c.default(0,0));var r=i.acceleration;r&&(r.x||r.y)?(this.startSpeed.next=null,this.acceleration=new PIXI.Point(r.x,r.y),this.maxSpeed=i.maxSpeed||NaN):this.acceleration=new PIXI.Point,i.scale?(this.startScale=c.default.createList(i.scale),this.minimumScaleMultiplier=i.scale.minimumScaleMultiplier||1):(this.startScale=new c.default(1,0),this.minimumScaleMultiplier=1),i.color?this.startColor=c.default.createList(i.color):this.startColor=new c.default({r:255,g:255,b:255},0),i.startRotation?(this.minStartRotation=i.startRotation.min,this.maxStartRotation=i.startRotation.max):this.minStartRotation=this.maxStartRotation=0,i.noRotation&&(this.minStartRotation||this.maxStartRotation)?this.noRotation=!!i.noRotation:this.noRotation=!1,i.rotationSpeed?(this.minRotationSpeed=i.rotationSpeed.min,this.maxRotationSpeed=i.rotationSpeed.max):this.minRotationSpeed=this.maxRotationSpeed=0,this.minLifetime=i.lifetime.min,this.maxLifetime=i.lifetime.max,this.particleBlendMode=l.default.getBlendMode(i.blendMode),i.ease?this.customEase=typeof i.ease=="function"?i.ease:l.default.generateEase(i.ease):this.customEase=null,t.parseData?this.extraData=t.parseData(i.extraData):this.extraData=i.extraData||null,this.spawnRect=this.spawnCircle=null,this.particlesPerWave=1,i.particlesPerWave&&i.particlesPerWave>1&&(this.particlesPerWave=i.particlesPerWave),this.particleSpacing=0,this.angleStart=0;var d;switch(i.spawnType){case"rect":this.spawnType="rect",this._spawnFunc=this._spawnRect;var a=i.spawnRect;this.spawnRect=new PIXI.Rectangle(a.x,a.y,a.w,a.h);break;case"circle":this.spawnType="circle",this._spawnFunc=this._spawnCircle,d=i.spawnCircle,this.spawnCircle=new PIXI.Circle(d.x,d.y,d.r);break;case"ring":this.spawnType="ring",this._spawnFunc=this._spawnRing,d=i.spawnCircle,this.spawnCircle=new PIXI.Circle(d.x,d.y,d.r),this.spawnCircle.minRadius=d.minR;break;case"burst":this.spawnType="burst",this._spawnFunc=this._spawnBurst,this.particleSpacing=i.particleSpacing,this.angleStart=i.angleStart?i.angleStart:0;break;case"point":this.spawnType="point",this._spawnFunc=this._spawnPoint;break;default:this.spawnType="point",this._spawnFunc=this._spawnPoint;break}this.frequency=i.frequency,this.spawnChance=typeof i.spawnChance=="number"&&i.spawnChance>0?i.spawnChance:1,this.emitterLifetime=i.emitterLifetime||-1,this.maxParticles=i.maxParticles>0?i.maxParticles:1e3,this.addAtBack=!!i.addAtBack,this.rotation=0,this.ownerPos=new PIXI.Point,this.spawnPos=new PIXI.Point(i.pos.x,i.pos.y),this._prevEmitterPos=this.spawnPos.clone(),this._prevPosIsValid=!1,this._spawnTimer=0,this.emit=i.emit===void 0?!0:!!i.emit,this.autoUpdate=i.autoUpdate===void 0?!1:!!i.autoUpdate}},h.prototype.recycle=function(o){o.next&&(o.next.prev=o.prev),o.prev&&(o.prev.next=o.next),o==this._activeParticlesLast&&(this._activeParticlesLast=o.prev),o==this._activeParticlesFirst&&(this._activeParticlesFirst=o.next),o.prev=null,o.next=this._poolFirst,this._poolFirst=o,o.parent&&o.parent.removeChild(o),--this.particleCount},h.prototype.rotate=function(o){if(this.rotation!=o){var i=o-this.rotation;this.rotation=o,l.default.rotatePoint(i,this.spawnPos),this._posChanged=!0}},h.prototype.updateSpawnPos=function(o,i){this._posChanged=!0,this.spawnPos.x=o,this.spawnPos.y=i},h.prototype.updateOwnerPos=function(o,i){this._posChanged=!0,this.ownerPos.x=o,this.ownerPos.y=i},h.prototype.resetPositionTracking=function(){this._prevPosIsValid=!1},Object.defineProperty(h.prototype,"emit",{get:function(){return this._emit},set:function(o){this._emit=!!o,this._emitterLife=this.emitterLifetime},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(o){this._autoUpdate&&!o?s.remove(this.update,this):!this._autoUpdate&&o&&s.add(this.update,this),this._autoUpdate=!!o},enumerable:!0,configurable:!0}),h.prototype.playOnceAndDestroy=function(o){this.autoUpdate=!0,this.emit=!0,this._destroyWhenComplete=!0,this._completeCallback=o},h.prototype.playOnce=function(o){this.emit=!0,this._completeCallback=o},h.prototype.update=function(o){if(this._autoUpdate&&(o=o/PIXI.settings.TARGET_FPMS/1e3),!!this._parent){var i,t,r;for(t=this._activeParticlesFirst;t;t=r)r=t.next,t.update(o);var d,a;this._prevPosIsValid&&(d=this._prevEmitterPos.x,a=this._prevEmitterPos.y);var f=this.ownerPos.x+this.spawnPos.x,m=this.ownerPos.y+this.spawnPos.y;if(this._emit)for(this._spawnTimer-=o;this._spawnTimer<=0;){if(this._emitterLife>0&&(this._emitterLife-=this._frequency,this._emitterLife<=0)){this._spawnTimer=0,this._emitterLife=0,this.emit=!1;break}if(this.particleCount>=this.maxParticles){this._spawnTimer+=this._frequency;continue}var g=void 0;if(this.minLifetime==this.maxLifetime?g=this.minLifetime:g=Math.random()*(this.maxLifetime-this.minLifetime)+this.minLifetime,-this._spawnTimer<g){var x=void 0,T=void 0;if(this._prevPosIsValid&&this._posChanged){var y=1+this._spawnTimer/o;x=(f-d)*y+d,T=(m-a)*y+a}else x=f,T=m;i=0;for(var w=Math.min(this.particlesPerWave,this.maxParticles-this.particleCount);i<w;++i)if(!(this.spawnChance<1&&Math.random()>=this.spawnChance)){var b=void 0;if(this._poolFirst?(b=this._poolFirst,this._poolFirst=this._poolFirst.next,b.next=null):b=new this.particleConstructor(this),this.particleImages.length>1?b.applyArt(this.particleImages[Math.floor(Math.random()*this.particleImages.length)]):b.applyArt(this.particleImages[0]),b.alphaList.reset(this.startAlpha),this.minimumSpeedMultiplier!=1&&(b.speedMultiplier=Math.random()*(1-this.minimumSpeedMultiplier)+this.minimumSpeedMultiplier),b.speedList.reset(this.startSpeed),b.acceleration.x=this.acceleration.x,b.acceleration.y=this.acceleration.y,b.maxSpeed=this.maxSpeed,this.minimumScaleMultiplier!=1&&(b.scaleMultiplier=Math.random()*(1-this.minimumScaleMultiplier)+this.minimumScaleMultiplier),b.scaleList.reset(this.startScale),b.colorList.reset(this.startColor),this.minRotationSpeed==this.maxRotationSpeed?b.rotationSpeed=this.minRotationSpeed:b.rotationSpeed=Math.random()*(this.maxRotationSpeed-this.minRotationSpeed)+this.minRotationSpeed,b.noRotation=this.noRotation,b.maxLife=g,b.blendMode=this.particleBlendMode,b.ease=this.customEase,b.extraData=this.extraData,this._spawnFunc(b,x,T,i),b.init(),b.update(-this._spawnTimer),!b.parent)this.addAtBack?this._parent.addChildAt(b,0):this._parent.addChild(b);else{var S=this._parent.children;if(S[0]==b)S.shift();else if(S[S.length-1]==b)S.pop();else{var E=S.indexOf(b);S.splice(E,1)}this.addAtBack?S.unshift(b):S.push(b)}this._activeParticlesLast?(this._activeParticlesLast.next=b,b.prev=this._activeParticlesLast,this._activeParticlesLast=b):this._activeParticlesLast=this._activeParticlesFirst=b,++this.particleCount}}this._spawnTimer+=this._frequency}this._posChanged&&(this._prevEmitterPos.x=f,this._prevEmitterPos.y=m,this._prevPosIsValid=!0,this._posChanged=!1),!this._emit&&!this._activeParticlesFirst&&(this._completeCallback&&this._completeCallback(),this._destroyWhenComplete&&this.destroy())}},h.prototype._spawnPoint=function(o,i,t){this.minStartRotation==this.maxStartRotation?o.rotation=this.minStartRotation+this.rotation:o.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,o.position.x=i,o.position.y=t},h.prototype._spawnRect=function(o,i,t){this.minStartRotation==this.maxStartRotation?o.rotation=this.minStartRotation+this.rotation:o.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,p.x=Math.random()*this.spawnRect.width+this.spawnRect.x,p.y=Math.random()*this.spawnRect.height+this.spawnRect.y,this.rotation!==0&&l.default.rotatePoint(this.rotation,p),o.position.x=i+p.x,o.position.y=t+p.y},h.prototype._spawnCircle=function(o,i,t){this.minStartRotation==this.maxStartRotation?o.rotation=this.minStartRotation+this.rotation:o.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,p.x=Math.random()*this.spawnCircle.radius,p.y=0,l.default.rotatePoint(Math.random()*360,p),p.x+=this.spawnCircle.x,p.y+=this.spawnCircle.y,this.rotation!==0&&l.default.rotatePoint(this.rotation,p),o.position.x=i+p.x,o.position.y=t+p.y},h.prototype._spawnRing=function(o,i,t){var r=this.spawnCircle;this.minStartRotation==this.maxStartRotation?o.rotation=this.minStartRotation+this.rotation:o.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,r.minRadius==r.radius?p.x=Math.random()*(r.radius-r.minRadius)+r.minRadius:p.x=r.radius,p.y=0;var d=Math.random()*360;o.rotation+=d,l.default.rotatePoint(d,p),p.x+=this.spawnCircle.x,p.y+=this.spawnCircle.y,this.rotation!==0&&l.default.rotatePoint(this.rotation,p),o.position.x=i+p.x,o.position.y=t+p.y},h.prototype._spawnBurst=function(o,i,t,r){this.particleSpacing===0?o.rotation=Math.random()*360:o.rotation=this.angleStart+this.particleSpacing*r+this.rotation,o.position.x=i,o.position.y=t},h.prototype.cleanup=function(){var o,i;for(o=this._activeParticlesFirst;o;o=i)i=o.next,this.recycle(o),o.parent&&o.parent.removeChild(o);this._activeParticlesFirst=this._activeParticlesLast=null,this.particleCount=0},h.prototype.destroy=function(){this.autoUpdate=!1,this.cleanup();for(var o,i=this._poolFirst;i;i=o)o=i.next,i.destroy();this._poolFirst=this._parent=this.particleImages=this.spawnPos=this.ownerPos=this.startColor=this.startScale=this.startAlpha=this.startSpeed=this.customEase=this._completeCallback=null},h}();e.default=v},{Particle:3,ParticleUtils:4,PropertyNode:7}],3:[function(_,n,e){var l=this&&this.__extends||function(){var v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,o){h.__proto__=o}||function(h,o){for(var i in o)o.hasOwnProperty(i)&&(h[i]=o[i])};return function(h,o){v(h,o);function i(){this.constructor=h}h.prototype=o===null?Object.create(o):(i.prototype=o.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var u=_("ParticleUtils"),c=_("PropertyList"),s=PIXI.Sprite,p=function(v){l(h,v);function h(o){var i=v.call(this)||this;return i.emitter=o,i.anchor.x=i.anchor.y=.5,i.velocity=new PIXI.Point,i.maxLife=0,i.age=0,i.ease=null,i.extraData=null,i.alphaList=new c.default,i.speedList=new c.default,i.speedMultiplier=1,i.acceleration=new PIXI.Point,i.maxSpeed=NaN,i.scaleList=new c.default,i.scaleMultiplier=1,i.colorList=new c.default(!0),i._doAlpha=!1,i._doScale=!1,i._doSpeed=!1,i._doAcceleration=!1,i._doColor=!1,i._doNormalMovement=!1,i._oneOverLife=0,i.next=null,i.prev=null,i.init=i.init,i.Particle_init=h.prototype.init,i.update=i.update,i.Particle_update=h.prototype.update,i.Sprite_destroy=v.prototype.destroy,i.Particle_destroy=h.prototype.destroy,i.applyArt=i.applyArt,i.kill=i.kill,i}return h.prototype.init=function(){this.age=0,this.velocity.x=this.speedList.current.value*this.speedMultiplier,this.velocity.y=0,u.default.rotatePoint(this.rotation,this.velocity),this.noRotation?this.rotation=0:this.rotation*=u.default.DEG_TO_RADS,this.rotationSpeed*=u.default.DEG_TO_RADS,this.alpha=this.alphaList.current.value,this.scale.x=this.scale.y=this.scaleList.current.value,this._doAlpha=!!this.alphaList.current.next,this._doSpeed=!!this.speedList.current.next,this._doScale=!!this.scaleList.current.next,this._doColor=!!this.colorList.current.next,this._doAcceleration=this.acceleration.x!==0||this.acceleration.y!==0,this._doNormalMovement=this._doSpeed||this.speedList.current.value!==0||this._doAcceleration,this._oneOverLife=1/this.maxLife;var o=this.colorList.current.value;this.tint=u.default.combineRGBComponents(o.r,o.g,o.b),this.visible=!0},h.prototype.applyArt=function(o){this.texture=o||PIXI.Texture.EMPTY},h.prototype.update=function(o){if(this.age+=o,this.age>=this.maxLife)return this.kill(),-1;var i=this.age*this._oneOverLife;if(this.ease&&(this.ease.length==4?i=this.ease(i,0,1,1):i=this.ease(i)),this._doAlpha&&(this.alpha=this.alphaList.interpolate(i)),this._doScale){var t=this.scaleList.interpolate(i)*this.scaleMultiplier;this.scale.x=this.scale.y=t}if(this._doNormalMovement){if(this._doSpeed){var r=this.speedList.interpolate(i)*this.speedMultiplier;u.default.normalize(this.velocity),u.default.scaleBy(this.velocity,r)}else if(this._doAcceleration&&(this.velocity.x+=this.acceleration.x*o,this.velocity.y+=this.acceleration.y*o,this.maxSpeed)){var d=u.default.length(this.velocity);d>this.maxSpeed&&u.default.scaleBy(this.velocity,this.maxSpeed/d)}this.position.x+=this.velocity.x*o,this.position.y+=this.velocity.y*o}return this._doColor&&(this.tint=this.colorList.interpolate(i)),this.rotationSpeed!==0?this.rotation+=this.rotationSpeed*o:this.acceleration&&!this.noRotation&&(this.rotation=Math.atan2(this.velocity.y,this.velocity.x)),i},h.prototype.kill=function(){this.emitter.recycle(this)},h.prototype.destroy=function(){this.parent&&this.parent.removeChild(this),this.Sprite_destroy(),this.emitter=this.velocity=this.colorList=this.scaleList=this.alphaList=this.speedList=this.ease=this.next=this.prev=null},h.parseArt=function(o){var i;for(i=o.length;i>=0;--i)typeof o[i]=="string"&&(o[i]=PIXI.Texture.fromImage(o[i]));if(u.default.verbose){for(i=o.length-1;i>0;--i)if(o[i].baseTexture!=o[i-1].baseTexture){window.console&&console.warn("PixiParticles: using particle textures from different images may hinder performance in WebGL");break}}return o},h.parseData=function(o){return o},h}(s);e.default=p},{ParticleUtils:4,PropertyList:6}],4:[function(_,n,e){Object.defineProperty(e,"__esModule",{value:!0});var l=PIXI.BLEND_MODES,u=_("PropertyNode"),c={verbose:!1,DEG_TO_RADS:Math.PI/180,rotatePoint:function(s,p){if(s){s*=c.DEG_TO_RADS;var v=Math.sin(s),h=Math.cos(s),o=p.x*h-p.y*v,i=p.x*v+p.y*h;p.x=o,p.y=i}},combineRGBComponents:function(s,p,v){return s<<16|p<<8|v},normalize:function(s){var p=1/c.length(s);s.x*=p,s.y*=p},scaleBy:function(s,p){s.x*=p,s.y*=p},length:function(s){return Math.sqrt(s.x*s.x+s.y*s.y)},hexToRGB:function(s,p){p||(p={}),s.charAt(0)=="#"?s=s.substr(1):s.indexOf("0x")===0&&(s=s.substr(2));var v;return s.length==8&&(v=s.substr(0,2),s=s.substr(2)),p.r=parseInt(s.substr(0,2),16),p.g=parseInt(s.substr(2,2),16),p.b=parseInt(s.substr(4,2),16),v&&(p.a=parseInt(v,16)),p},generateEase:function(s){var p=s.length,v=1/p;return function(h){var o,i,t=p*h|0;return o=(h-t*v)*p,i=s[t]||s[p-1],i.s+o*(2*(1-o)*(i.cp-i.s)+o*(i.e-i.s))}},getBlendMode:function(s){if(!s)return l.NORMAL;for(s=s.toUpperCase();s.indexOf(" ")>=0;)s=s.replace(" ","_");return l[s]||l.NORMAL},createSteppedGradient:function(s,p){p===void 0&&(p=10),(typeof p!="number"||p<=0)&&(p=10);var v=new u.default(s[0].value,s[0].time);v.isStepped=!0;for(var h=v,o=s[0],i=1,t=s[i],r=1;r<p;++r){for(var d=r/p;d>t.time;)o=t,t=s[++i];d=(d-o.time)/(t.time-o.time);var a=c.hexToRGB(o.value),f=c.hexToRGB(t.value),m={};m.r=(f.r-a.r)*d+a.r,m.g=(f.g-a.g)*d+a.g,m.b=(f.b-a.b)*d+a.b,h.next=new u.default(m,r/p),h=h.next}return v}};e.default=c},{PropertyNode:7}],5:[function(_,n,e){var l=this&&this.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var d in r)r.hasOwnProperty(d)&&(t[d]=r[d])};return function(t,r){i(t,r);function d(){this.constructor=t}t.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)}}();Object.defineProperty(e,"__esModule",{value:!0});var u=_("ParticleUtils"),c=_("Particle"),s=new PIXI.Point,p=["pow","sqrt","abs","floor","round","ceil","E","PI","sin","cos","tan","asin","acos","atan","atan2","log"],v=new RegExp(["[01234567890\\.\\*\\-\\+\\/\\(\\)x ,]"].concat(p).join("|"),"g"),h=function(i){for(var t=i.match(v),r=t.length-1;r>=0;--r)p.indexOf(t[r])>=0&&(t[r]="Math."+t[r]);return i=t.join(""),new Function("x","return "+i+";")},o=function(i){l(t,i);function t(r){var d=i.call(this,r)||this;return d.path=null,d.initialRotation=0,d.initialPosition=new PIXI.Point,d.movement=0,d}return t.prototype.init=function(){this.initialRotation=this.rotation,this.Particle_init(),this.path=this.extraData.path,this._doNormalMovement=!this.path,this.movement=0,this.initialPosition.x=this.position.x,this.initialPosition.y=this.position.y},t.prototype.update=function(r){var d=this.Particle_update(r);if(d>=0&&this.path){var a=this.speedList.interpolate(d)*this.speedMultiplier;this.movement+=a*r,s.x=this.movement,s.y=this.path(this.movement),u.default.rotatePoint(this.initialRotation,s),this.position.x=this.initialPosition.x+s.x,this.position.y=this.initialPosition.y+s.y}return d},t.prototype.destroy=function(){this.Particle_destroy(),this.path=this.initialPosition=null},t.parseArt=function(r){return c.default.parseArt(r)},t.parseData=function(r){var d={};if(r&&r.path)try{d.path=h(r.path)}catch{u.default.verbose&&console.error("PathParticle: error in parsing path expression"),d.path=null}else u.default.verbose&&console.error("PathParticle requires a path string in extraData!"),d.path=null;return d},t}(c.default);e.default=o},{Particle:3,ParticleUtils:4}],6:[function(_,n,e){Object.defineProperty(e,"__esModule",{value:!0});var l=_("ParticleUtils"),u=function(){function i(t){t===void 0&&(t=!1),this.current=null,this.next=null,this.isColor=!!t,this.interpolate=null,this.ease=null}return i.prototype.reset=function(t){this.current=t,this.next=t.next;var r=this.next&&this.next.time>=1;r?this.interpolate=this.isColor?s:c:t.isStepped?this.interpolate=this.isColor?o:h:this.interpolate=this.isColor?v:p,this.ease=this.current.ease},i}();e.default=u;function c(i){return this.ease&&(i=this.ease(i)),(this.next.value-this.current.value)*i+this.current.value}function s(i){this.ease&&(i=this.ease(i));var t=this.current.value,r=this.next.value,d=(r.r-t.r)*i+t.r,a=(r.g-t.g)*i+t.g,f=(r.b-t.b)*i+t.b;return l.default.combineRGBComponents(d,a,f)}function p(i){for(this.ease&&(i=this.ease(i));i>this.next.time;)this.current=this.next,this.next=this.next.next;return i=(i-this.current.time)/(this.next.time-this.current.time),(this.next.value-this.current.value)*i+this.current.value}function v(i){for(this.ease&&(i=this.ease(i));i>this.next.time;)this.current=this.next,this.next=this.next.next;i=(i-this.current.time)/(this.next.time-this.current.time);var t=this.current.value,r=this.next.value,d=(r.r-t.r)*i+t.r,a=(r.g-t.g)*i+t.g,f=(r.b-t.b)*i+t.b;return l.default.combineRGBComponents(d,a,f)}function h(i){for(this.ease&&(i=this.ease(i));this.next&&i>this.next.time;)this.current=this.next,this.next=this.next.next;return this.current.value}function o(i){for(this.ease&&(i=this.ease(i));this.next&&i>this.next.time;)this.current=this.next,this.next=this.next.next;var t=this.current.value;return l.default.combineRGBComponents(t.r,t.g,t.b)}},{ParticleUtils:4}],7:[function(_,n,e){Object.defineProperty(e,"__esModule",{value:!0});var l=_("ParticleUtils"),u=function(){function c(s,p,v){this.value=typeof s=="string"?l.default.hexToRGB(s):s,this.time=p,this.next=null,this.isStepped=!1,v?this.ease=typeof v=="function"?v:l.default.generateEase(v):this.ease=null}return c.createList=function(s){if(Array.isArray(s.list)){var p=s.list,v=void 0,h=void 0;if(h=v=new c(p[0].value,p[0].time,s.ease),p.length>2||p.length===2&&p[1].value!==p[0].value)for(var o=1;o<p.length;++o)v.next=new c(p[o].value,p[o].time),v=v.next;return h.isStepped=!!s.isStepped,h}else{var i=new c(s.start,0);return s.end!==s.start&&(i.next=new c(s.end,1)),i}},c}();e.default=u},{ParticleUtils:4}],8:[function(_,n,e){Object.defineProperty(e,"__esModule",{value:!0});var l=_("ParticleUtils.js");e.ParticleUtils=l.default;var u=_("Particle.js");e.Particle=u.default;var c=_("Emitter.js");e.Emitter=c.default;var s=_("PathParticle.js");e.PathParticle=s.default;var p=_("AnimatedParticle.js");e.AnimatedParticle=p.default},{"AnimatedParticle.js":1,"Emitter.js":2,"Particle.js":3,"ParticleUtils.js":4,"PathParticle.js":5}],9:[function(_,n,e){if(Object.defineProperty(e,"__esModule",{value:!0}),typeof PIXI>"u")throw"pixi-particles requires pixi.js to be loaded first";PIXI.particles||(PIXI.particles={});var l=_("particles");for(var u in l)PIXI.particles[u]=l[u]},{particles:8}]},{},[9])(9)});var Aa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Da(_){return _&&_.__esModule&&Object.prototype.hasOwnProperty.call(_,"default")?_.default:_}var Jn={exports:{}};(function(_,n){(function(e,l){_.exports=l()})(Aa,function(){var e=function(){function l(r){return s.appendChild(r.dom),r}function u(r){for(var d=0;d<s.children.length;d++)s.children[d].style.display=d===r?"block":"none";c=r}var c=0,s=document.createElement("div");s.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",s.addEventListener("click",function(r){r.preventDefault(),u(++c%s.children.length)},!1);var p=(performance||Date).now(),v=p,h=0,o=l(new e.Panel("FPS","#0ff","#002")),i=l(new e.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var t=l(new e.Panel("MB","#f08","#201"));return u(0),{REVISION:16,dom:s,addPanel:l,showPanel:u,begin:function(){p=(performance||Date).now()},end:function(){h++;var r=(performance||Date).now();if(i.update(r-p,200),r>v+1e3&&(o.update(1e3*h/(r-v),100),v=r,h=0,t)){var d=performance.memory;t.update(d.usedJSHeapSize/1048576,d.jsHeapSizeLimit/1048576)}return r},update:function(){p=this.end()},domElement:s,setMode:u}};return e.Panel=function(l,u,c){var s=1/0,p=0,v=Math.round,h=v(window.devicePixelRatio||1),o=80*h,i=48*h,t=3*h,r=2*h,d=3*h,a=15*h,f=74*h,m=30*h,g=document.createElement("canvas");g.width=o,g.height=i,g.style.cssText="width:80px;height:48px";var x=g.getContext("2d");return x.font="bold "+9*h+"px Helvetica,Arial,sans-serif",x.textBaseline="top",x.fillStyle=c,x.fillRect(0,0,o,i),x.fillStyle=u,x.fillText(l,t,r),x.fillRect(d,a,f,m),x.fillStyle=c,x.globalAlpha=.9,x.fillRect(d,a,f,m),{dom:g,update:function(T,y){s=Math.min(s,T),p=Math.max(p,T),x.fillStyle=c,x.globalAlpha=1,x.fillRect(0,0,o,a),x.fillStyle=u,x.fillText(v(T)+" "+l+" ("+v(s)+"-"+v(p)+")",t,r),x.drawImage(g,d+h,a,f-h,m,d,a,f-h,m),x.fillRect(d+f-h,a,h,m),x.fillStyle=c,x.globalAlpha=.9,x.fillRect(d+f-h,a,h,v((1-T/y)*m))}}},e})})(Jn);var Ia=Jn.exports;const Fa=Da(Ia);class La{constructor(){const n=new Fa;document.body.appendChild(n.dom);function e(){n.begin(),n.end(),requestAnimationFrame(e)}e()}}var Ke=(_=>(_.Menu="MainStage",_.FirstTask="FirstTask",_.SecondTask="SecondTaskStage",_.ThirdTask="ThirdTaskStage",_))(Ke||{}),Ht=(_=>(_[_.Landscape=0]="Landscape",_[_.Portrait=1]="Portrait",_[_.None=2]="None",_))(Ht||{});class Yt{}Yt.DisplayResolution={width:1280,height:720};class hr extends PIXI.utils.EventEmitter{constructor(n,e){super(),hr.instance=this,this.initProperties(n,e),this.addResizeEvent()}initProperties(n,e){const l=new PIXI.Application({width:n,height:e,backgroundColor:0,resolution:window.devicePixelRatio||1,autoDensity:!0});l.renderer.view.id="videoslot",document.body.appendChild(l.view),this.rendererContainer=l.stage,this.renderer=l.renderer,this.width=n,this.height=e,this.scaleFactor=1,document.body.ontouchend=this.onFullscreenChange.bind(this),document.body.onclick=this.onFullscreenChange.bind(this),this.currentOrientation=Ht.None,this.onResize()}addResizeEvent(){window.addEventListener("resize",this.onResize.bind(this)),this.onResize()}onResize(){const n=window.innerWidth/this.width,e=window.innerHeight/this.height;this.scaleFactor=Math.min(n,e),this.renderer.resize(window.innerWidth,window.innerHeight),this.rendererContainer.scale.set(this.scaleFactor),this.emit("resize",{width:this.width*this.scaleFactor,height:this.height*this.scaleFactor}),this.setOrientationMode()}setOrientationMode(){const n=window.innerWidth,e=window.innerHeight;this.currentOrientation=e>=n?Ht.Portrait:Ht.Landscape}getCurrentOrientation(){return this.currentOrientation}setCurrentOrientation(n){this.currentOrientation=n,this.emit("orientationChanged",n)}onFullscreenChange(){const n=document.documentElement;n.requestFullscreen?n.requestFullscreen():n.mozRequestFullScreen?n.mozRequestFullScreen():n.webkitRequestFullscreen?n.webkitRequestFullscreen():n.msRequestFullscreen&&n.msRequestFullscreen()}getRenderer(){return this.renderer}getRendererContainer(){return this.rendererContainer}getWidth(){return this.width}getHeight(){return this.height}getScaleFactor(){return this.scaleFactor}}class Je extends PIXI.Container{constructor(n={}){super(),n.name&&(this.name=n.name),n.parent&&n.parent.addChild(this),n.x!==void 0&&(this.position.x=n.x),n.y!==void 0&&(this.position.y=n.y)}sortChildren(){this.children.sort(function(n,e){return n.zIndex=n.zIndex||0,e.zIndex=e.zIndex||0,n.zIndex-e.zIndex})}}class Lr extends PIXI.Sprite{constructor(n){super(),this._state="Out",this._callback=null,this._isEnabled=!0,this._zIndex=0,this.width=n.width,this.height=n.height,this.anchor.set(.5,.5),this.position.set(n.x,n.y),this.buttonMode=!0,this.interactive=!0,this.frames=n.config.frames,this._callback=n.callback||null,this.name=n.config.name||"button",n.parent&&n.parent.addChild(this),this.state="Out",this.initEvents()}initEvents(){this.on("pointerdown",this.onButtonDown,this),this.on("pointerup",this.onButtonUp,this),this.on("pointerover",this.onButtonOver,this),this.on("pointerout",this.onButtonOut,this),this.on("pointertap",this.onButtonOut,this)}onButtonDown(){this.state="Down"}onButtonUp(){this._callback&&this._callback.call(null,this)}onButtonOver(){this.state="Over"}onButtonOut(){this.state="Out"}set state(n){this._state=n,this.texture=PIXI.Texture.from(this.frames[n.toLowerCase()])}get state(){return this._state}set isEnabled(n){this._isEnabled=n,this.state=n?"Out":"Disabled",this.interactive=n}get isEnabled(){return this._isEnabled}get zIndex(){return this._zIndex}set zIndex(n){this._zIndex=n}}class Ba extends PIXI.Text{constructor(n){const{x:e,y:l,config:u,parent:c}=n;super(u.text,u.textStyle),u.name&&(this.name=u.name),this.position.set(e,l),this.anchor.set(.5,.5),c&&c.addChild(this)}setTextConfig(n){this.style=new PIXI.TextStyle(n.textStyle),this.text=n.text}}class wr extends Lr{constructor(n){super(n),this.text=new Ba({x:0,y:0,config:n.textConfig,parent:this}),n.config.name&&(this.name=n.config.name)}get textAsset(){return this.text}}class Br extends Je{constructor(n={}){super(n),this.game=n.game}initDisplayEvents(){this.game&&this.game.on("orientationChanged",this.onOrientationChanged.bind(this))}onOrientationChanged(n){switch(n){case Ht.Landscape:this.setVisualLandscape();break;case Ht.Portrait:this.setVisualPortrait();break}}}const mt=class{};mt.GeneralButton={frames:{out:"generalbutton_out",over:"generalbutton_over",down:"generalbutton_down",disabled:"generalbutton_disabled"},name:"generalButton"};mt.GeneralTextStyle={fontFamily:"Montserrat, sans-serif",fontSize:"14px",fontWeight:"bold",fill:"#d08f38",stroke:0,strokeThickness:3,align:"center"};mt.GenericText={text:"Generic Text",textStyle:mt.GeneralTextStyle,name:"Generic Text"};mt.MenuText={text:"Menu",textStyle:mt.GeneralTextStyle,name:"Menu Text"};mt.MenuButton={frames:{out:"home_out",over:"home_over",down:"home_down",disabled:"home_disabled"},name:"Menu Button"};let ht=mt;const rt=class{};rt.FirstTaskText={text:"First Task",textStyle:ht.GeneralTextStyle,name:"First Text"};rt.SecondTaskText={text:"Second Task",textStyle:ht.GeneralTextStyle,name:"Second Text"};rt.ThirdTaskText={text:"Third Task",textStyle:ht.GeneralTextStyle,name:"Third Text"};rt.FirstTaskButtonText={bConfig:ht.GeneralButton,tConfig:rt.FirstTaskText,name:"First Task Button Text"};rt.SecondTaskButtonText={bConfig:ht.GeneralButton,tConfig:rt.SecondTaskText,name:"First Task Button Text"};rt.ThirdTaskButtonText={bConfig:ht.GeneralButton,tConfig:rt.ThirdTaskText,name:"Third Task Button Text"};let Gt=rt;class jn extends PIXI.Sprite{constructor(n){const{x:e,y:l,width:u,height:c,config:s,parent:p}=n;super(PIXI.utils.TextureCache[s.frame]),this.width=u,this.height=c,this.name=s.name?s.name:"sprite",this.anchor.set(.5,.5),this.position.set(e,l),p&&p.addChild(this)}}const qe=class{};qe.CardSprite={frame:"card",name:"card"};qe.CardStackGeneralTextStyle={fontFamily:"Montserrat, sans-serif",fontSize:"14px",fontWeight:"bold",fill:"#d08f38",stroke:0,strokeThickness:3,align:"center"};qe.CardStackGeneralButtonStyle={frames:{out:"generalbutton_out",over:"generalbutton_over",down:"generalbutton_down",disabled:"generalbutton_disabled"},name:"generalButton"};qe.RestartText={text:"Restart",textStyle:qe.CardStackGeneralTextStyle,name:"Restart Text"};qe.PlayText={text:"Play",textStyle:qe.CardStackGeneralTextStyle,name:"Play Text"};qe.RestartButton={bConfig:qe.CardStackGeneralButtonStyle,tConfig:qe.PlayText,name:"Restart Button Text"};let nr=qe;class Kt{}Kt.CardCounter=144;Kt.CardAnimationDelay=1;Kt.CardAnimationDuration=2;function ot(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}function $n(_,n){_.prototype=Object.create(n.prototype),_.prototype.constructor=_,_.__proto__=n}/*!
 * GSAP 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var ze={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Jt={duration:.5,overwrite:!1,delay:0},vn,Oe,ge,We=1e8,ve=1/We,$r=Math.PI*2,ka=$r/4,Na=0,ei=Math.sqrt,Ua=Math.cos,za=Math.sin,Ee=function(n){return typeof n=="string"},xe=function(n){return typeof n=="function"},ut=function(n){return typeof n=="number"},_n=function(n){return typeof n>"u"},nt=function(n){return typeof n=="object"},De=function(n){return n!==!1},gn=function(){return typeof window<"u"},br=function(n){return xe(n)||Ee(n)},ti=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Ae=Array.isArray,en=/(?:-?\.?\d|\.)+/gi,ri=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Wt=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Vr=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,ni=/[+-]=-?[.\d]+/,ii=/[^,'"\[\]\s]+/gi,Ga=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,me,Qe,tn,mn,Ge={},Mr={},ai,oi=function(n){return(Mr=Ft(n,Ge))&&Be},yn=function(n,e){return console.warn("Invalid property",n,"set to",e,"Missing plugin? gsap.registerPlugin()")},fr=function(n,e){return!e&&console.warn(n)},si=function(n,e){return n&&(Ge[n]=e)&&Mr&&(Mr[n]=e)||Ge},cr=function(){return 0},Xa={suppressEvents:!0,isStart:!0,kill:!1},Er={suppressEvents:!0,kill:!1},Wa={suppressEvents:!0},xn={},_t=[],rn={},ui,ke={},Hr={},Ln=30,Pr=[],Tn="",bn=function(n){var e=n[0],l,u;if(nt(e)||xe(e)||(n=[n]),!(l=(e._gsap||{}).harness)){for(u=Pr.length;u--&&!Pr[u].targetTest(e););l=Pr[u]}for(u=n.length;u--;)n[u]&&(n[u]._gsap||(n[u]._gsap=new Di(n[u],l)))||n.splice(u,1);return n},Ot=function(n){return n._gsap||bn(Ve(n))[0]._gsap},li=function(n,e,l){return(l=n[e])&&xe(l)?n[e]():_n(l)&&n.getAttribute&&n.getAttribute(e)||l},Ie=function(n,e){return(n=n.split(",")).forEach(e)||n},Te=function(n){return Math.round(n*1e5)/1e5||0},we=function(n){return Math.round(n*1e7)/1e7||0},qt=function(n,e){var l=e.charAt(0),u=parseFloat(e.substr(2));return n=parseFloat(n),l==="+"?n+u:l==="-"?n-u:l==="*"?n*u:n/u},Va=function(n,e){for(var l=e.length,u=0;n.indexOf(e[u])<0&&++u<l;);return u<l},Rr=function(){var n=_t.length,e=_t.slice(0),l,u;for(rn={},_t.length=0,l=0;l<n;l++)u=e[l],u&&u._lazy&&(u.render(u._lazy[0],u._lazy[1],!0)._lazy=0)},hi=function(n,e,l,u){_t.length&&!Oe&&Rr(),n.render(e,l,u||Oe&&e<0&&(n._initted||n._startAt)),_t.length&&!Oe&&Rr()},fi=function(n){var e=parseFloat(n);return(e||e===0)&&(n+"").match(ii).length<2?e:Ee(n)?n.trim():n},ci=function(n){return n},He=function(n,e){for(var l in e)l in n||(n[l]=e[l]);return n},Ha=function(n){return function(e,l){for(var u in l)u in e||u==="duration"&&n||u==="ease"||(e[u]=l[u])}},Ft=function(n,e){for(var l in e)n[l]=e[l];return n},Bn=function _(n,e){for(var l in e)l!=="__proto__"&&l!=="constructor"&&l!=="prototype"&&(n[l]=nt(e[l])?_(n[l]||(n[l]={}),e[l]):e[l]);return n},Or=function(n,e){var l={},u;for(u in n)u in e||(l[u]=n[u]);return l},sr=function(n){var e=n.parent||me,l=n.keyframes?Ha(Ae(n.keyframes)):He;if(De(n.inherit))for(;e;)l(n,e.vars.defaults),e=e.parent||e._dp;return n},Ya=function(n,e){for(var l=n.length,u=l===e.length;u&&l--&&n[l]===e[l];);return l<0},di=function(n,e,l,u,c){l===void 0&&(l="_first"),u===void 0&&(u="_last");var s=n[u],p;if(c)for(p=e[c];s&&s[c]>p;)s=s._prev;return s?(e._next=s._next,s._next=e):(e._next=n[l],n[l]=e),e._next?e._next._prev=e:n[u]=e,e._prev=s,e.parent=e._dp=n,e},kr=function(n,e,l,u){l===void 0&&(l="_first"),u===void 0&&(u="_last");var c=e._prev,s=e._next;c?c._next=s:n[l]===e&&(n[l]=s),s?s._prev=c:n[u]===e&&(n[u]=c),e._next=e._prev=e.parent=null},yt=function(n,e){n.parent&&(!e||n.parent.autoRemoveChildren)&&n.parent.remove&&n.parent.remove(n),n._act=0},At=function(n,e){if(n&&(!e||e._end>n._dur||e._start<0))for(var l=n;l;)l._dirty=1,l=l.parent;return n},Ka=function(n){for(var e=n.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return n},nn=function(n,e,l,u){return n._startAt&&(Oe?n._startAt.revert(Er):n.vars.immediateRender&&!n.vars.autoRevert||n._startAt.render(e,!0,u))},qa=function _(n){return!n||n._ts&&_(n.parent)},kn=function(n){return n._repeat?jt(n._tTime,n=n.duration()+n._rDelay)*n:0},jt=function(n,e){var l=Math.floor(n/=e);return n&&l===n?l-1:l},Ar=function(n,e){return(n-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},Nr=function(n){return n._end=we(n._start+(n._tDur/Math.abs(n._ts||n._rts||ve)||0))},Ur=function(n,e){var l=n._dp;return l&&l.smoothChildTiming&&n._ts&&(n._start=we(l._time-(n._ts>0?e/n._ts:((n._dirty?n.totalDuration():n._tDur)-e)/-n._ts)),Nr(n),l._dirty||At(l,n)),n},pi=function(n,e){var l;if((e._time||!e._dur&&e._initted||e._start<n._time&&(e._dur||!e.add))&&(l=Ar(n.rawTime(),e),(!e._dur||xr(0,e.totalDuration(),l)-e._tTime>ve)&&e.render(l,!0)),At(n,e)._dp&&n._initted&&n._time>=n._dur&&n._ts){if(n._dur<n.duration())for(l=n;l._dp;)l.rawTime()>=0&&l.totalTime(l._tTime),l=l._dp;n._zTime=-ve}},je=function(n,e,l,u){return e.parent&&yt(e),e._start=we((ut(l)?l:l||n!==me?Xe(n,l,e):n._time)+e._delay),e._end=we(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),di(n,e,"_first","_last",n._sort?"_start":0),an(e)||(n._recent=e),u||pi(n,e),n._ts<0&&Ur(n,n._tTime),n},vi=function(n,e){return(Ge.ScrollTrigger||yn("scrollTrigger",e))&&Ge.ScrollTrigger.create(e,n)},_i=function(n,e,l,u,c){if(wn(n,e,c),!n._initted)return 1;if(!l&&n._pt&&!Oe&&(n._dur&&n.vars.lazy!==!1||!n._dur&&n.vars.lazy)&&ui!==Ne.frame)return _t.push(n),n._lazy=[c,u],1},Za=function _(n){var e=n.parent;return e&&e._ts&&e._initted&&!e._lock&&(e.rawTime()<0||_(e))},an=function(n){var e=n.data;return e==="isFromStart"||e==="isStart"},Qa=function(n,e,l,u){var c=n.ratio,s=e<0||!e&&(!n._start&&Za(n)&&!(!n._initted&&an(n))||(n._ts<0||n._dp._ts<0)&&!an(n))?0:1,p=n._rDelay,v=0,h,o,i;if(p&&n._repeat&&(v=xr(0,n._tDur,e),o=jt(v,p),n._yoyo&&o&1&&(s=1-s),o!==jt(n._tTime,p)&&(c=1-s,n.vars.repeatRefresh&&n._initted&&n.invalidate())),s!==c||Oe||u||n._zTime===ve||!e&&n._zTime){if(!n._initted&&_i(n,e,u,l,v))return;for(i=n._zTime,n._zTime=e||(l?ve:0),l||(l=e&&!i),n.ratio=s,n._from&&(s=1-s),n._time=0,n._tTime=v,h=n._pt;h;)h.r(s,h.d),h=h._next;e<0&&nn(n,e,l,!0),n._onUpdate&&!l&&Ue(n,"onUpdate"),v&&n._repeat&&!l&&n.parent&&Ue(n,"onRepeat"),(e>=n._tDur||e<0)&&n.ratio===s&&(s&&yt(n,1),!l&&!Oe&&(Ue(n,s?"onComplete":"onReverseComplete",!0),n._prom&&n._prom()))}else n._zTime||(n._zTime=e)},Ja=function(n,e,l){var u;if(l>e)for(u=n._first;u&&u._start<=l;){if(u.data==="isPause"&&u._start>e)return u;u=u._next}else for(u=n._last;u&&u._start>=l;){if(u.data==="isPause"&&u._start<e)return u;u=u._prev}},$t=function(n,e,l,u){var c=n._repeat,s=we(e)||0,p=n._tTime/n._tDur;return p&&!u&&(n._time*=s/n._dur),n._dur=s,n._tDur=c?c<0?1e10:we(s*(c+1)+n._rDelay*c):s,p>0&&!u&&Ur(n,n._tTime=n._tDur*p),n.parent&&Nr(n),l||At(n.parent,n),n},Nn=function(n){return n instanceof Re?At(n):$t(n,n._dur)},ja={_start:0,endTime:cr,totalDuration:cr},Xe=function _(n,e,l){var u=n.labels,c=n._recent||ja,s=n.duration()>=We?c.endTime(!1):n._dur,p,v,h;return Ee(e)&&(isNaN(e)||e in u)?(v=e.charAt(0),h=e.substr(-1)==="%",p=e.indexOf("="),v==="<"||v===">"?(p>=0&&(e=e.replace(/=/,"")),(v==="<"?c._start:c.endTime(c._repeat>=0))+(parseFloat(e.substr(1))||0)*(h?(p<0?c:l).totalDuration()/100:1)):p<0?(e in u||(u[e]=s),u[e]):(v=parseFloat(e.charAt(p-1)+e.substr(p+1)),h&&l&&(v=v/100*(Ae(l)?l[0]:l).totalDuration()),p>1?_(n,e.substr(0,p-1),l)+v:s+v)):e==null?s:+e},ur=function(n,e,l){var u=ut(e[1]),c=(u?2:1)+(n<2?0:1),s=e[c],p,v;if(u&&(s.duration=e[1]),s.parent=l,n){for(p=s,v=l;v&&!("immediateRender"in p);)p=v.vars.defaults||{},v=De(v.vars.inherit)&&v.parent;s.immediateRender=De(p.immediateRender),n<2?s.runBackwards=1:s.startAt=e[c-1]}return new Se(e[0],s,e[c+1])},Tt=function(n,e){return n||n===0?e(n):e},xr=function(n,e,l){return l<n?n:l>e?e:l},Me=function(n,e){return!Ee(n)||!(e=Ga.exec(n))?"":e[1]},$a=function(n,e,l){return Tt(l,function(u){return xr(n,e,u)})},on=[].slice,gi=function(n,e){return n&&nt(n)&&"length"in n&&(!e&&!n.length||n.length-1 in n&&nt(n[0]))&&!n.nodeType&&n!==Qe},eo=function(n,e,l){return l===void 0&&(l=[]),n.forEach(function(u){var c;return Ee(u)&&!e||gi(u,1)?(c=l).push.apply(c,Ve(u)):l.push(u)})||l},Ve=function(n,e,l){return ge&&!e&&ge.selector?ge.selector(n):Ee(n)&&!l&&(tn||!er())?on.call((e||mn).querySelectorAll(n),0):Ae(n)?eo(n,l):gi(n)?on.call(n,0):n?[n]:[]},sn=function(n){return n=Ve(n)[0]||fr("Invalid scope")||{},function(e){var l=n.current||n.nativeElement||n;return Ve(e,l.querySelectorAll?l:l===n?fr("Invalid scope")||mn.createElement("div"):n)}},mi=function(n){return n.sort(function(){return .5-Math.random()})},yi=function(n){if(xe(n))return n;var e=nt(n)?n:{each:n},l=Dt(e.ease),u=e.from||0,c=parseFloat(e.base)||0,s={},p=u>0&&u<1,v=isNaN(u)||p,h=e.axis,o=u,i=u;return Ee(u)?o=i={center:.5,edges:.5,end:1}[u]||0:!p&&v&&(o=u[0],i=u[1]),function(t,r,d){var a=(d||e).length,f=s[a],m,g,x,T,y,w,b,S,E;if(!f){if(E=e.grid==="auto"?0:(e.grid||[1,We])[1],!E){for(b=-We;b<(b=d[E++].getBoundingClientRect().left)&&E<a;);E<a&&E--}for(f=s[a]=[],m=v?Math.min(E,a)*o-.5:u%E,g=E===We?0:v?a*i/E-.5:u/E|0,b=0,S=We,w=0;w<a;w++)x=w%E-m,T=g-(w/E|0),f[w]=y=h?Math.abs(h==="y"?T:x):ei(x*x+T*T),y>b&&(b=y),y<S&&(S=y);u==="random"&&mi(f),f.max=b-S,f.min=S,f.v=a=(parseFloat(e.amount)||parseFloat(e.each)*(E>a?a-1:h?h==="y"?a/E:E:Math.max(E,a/E))||0)*(u==="edges"?-1:1),f.b=a<0?c-a:c,f.u=Me(e.amount||e.each)||0,l=l&&a<0?Ri(l):l}return a=(f[t]-f.min)/f.max||0,we(f.b+(l?l(a):a)*f.v)+f.u}},un=function(n){var e=Math.pow(10,((n+"").split(".")[1]||"").length);return function(l){var u=we(Math.round(parseFloat(l)/n)*n*e);return(u-u%1)/e+(ut(l)?0:Me(l))}},xi=function(n,e){var l=Ae(n),u,c;return!l&&nt(n)&&(u=l=n.radius||We,n.values?(n=Ve(n.values),(c=!ut(n[0]))&&(u*=u)):n=un(n.increment)),Tt(e,l?xe(n)?function(s){return c=n(s),Math.abs(c-s)<=u?c:s}:function(s){for(var p=parseFloat(c?s.x:s),v=parseFloat(c?s.y:0),h=We,o=0,i=n.length,t,r;i--;)c?(t=n[i].x-p,r=n[i].y-v,t=t*t+r*r):t=Math.abs(n[i]-p),t<h&&(h=t,o=i);return o=!u||h<=u?n[o]:s,c||o===s||ut(s)?o:o+Me(s)}:un(n))},Ti=function(n,e,l,u){return Tt(Ae(n)?!e:l===!0?!!(l=0):!u,function(){return Ae(n)?n[~~(Math.random()*n.length)]:(l=l||1e-5)&&(u=l<1?Math.pow(10,(l+"").length-2):1)&&Math.floor(Math.round((n-l/2+Math.random()*(e-n+l*.99))/l)*l*u)/u})},to=function(){for(var n=arguments.length,e=new Array(n),l=0;l<n;l++)e[l]=arguments[l];return function(u){return e.reduce(function(c,s){return s(c)},u)}},ro=function(n,e){return function(l){return n(parseFloat(l))+(e||Me(l))}},no=function(n,e,l){return Si(n,e,0,1,l)},bi=function(n,e,l){return Tt(l,function(u){return n[~~e(u)]})},io=function _(n,e,l){var u=e-n;return Ae(n)?bi(n,_(0,n.length),e):Tt(l,function(c){return(u+(c-n)%u)%u+n})},ao=function _(n,e,l){var u=e-n,c=u*2;return Ae(n)?bi(n,_(0,n.length-1),e):Tt(l,function(s){return s=(c+(s-n)%c)%c||0,n+(s>u?c-s:s)})},dr=function(n){for(var e=0,l="",u,c,s,p;~(u=n.indexOf("random(",e));)s=n.indexOf(")",u),p=n.charAt(u+7)==="[",c=n.substr(u+7,s-u-7).match(p?ii:en),l+=n.substr(e,u-e)+Ti(p?c:+c[0],p?0:+c[1],+c[2]||1e-5),e=s+1;return l+n.substr(e,n.length-e)},Si=function(n,e,l,u,c){var s=e-n,p=u-l;return Tt(c,function(v){return l+((v-n)/s*p||0)})},oo=function _(n,e,l,u){var c=isNaN(n+e)?0:function(r){return(1-r)*n+r*e};if(!c){var s=Ee(n),p={},v,h,o,i,t;if(l===!0&&(u=1)&&(l=null),s)n={p:n},e={p:e};else if(Ae(n)&&!Ae(e)){for(o=[],i=n.length,t=i-2,h=1;h<i;h++)o.push(_(n[h-1],n[h]));i--,c=function(d){d*=i;var a=Math.min(t,~~d);return o[a](d-a)},l=e}else u||(n=Ft(Ae(n)?[]:{},n));if(!o){for(v in e)Sn.call(p,n,v,"get",e[v]);c=function(d){return Cn(d,p)||(s?n.p:n)}}}return Tt(l,c)},Un=function(n,e,l){var u=n.labels,c=We,s,p,v;for(s in u)p=u[s]-e,p<0==!!l&&p&&c>(p=Math.abs(p))&&(v=s,c=p);return v},Ue=function(n,e,l){var u=n.vars,c=u[e],s=ge,p=n._ctx,v,h,o;if(c)return v=u[e+"Params"],h=u.callbackScope||n,l&&_t.length&&Rr(),p&&(ge=p),o=v?c.apply(h,v):c.call(h),ge=s,o},ar=function(n){return yt(n),n.scrollTrigger&&n.scrollTrigger.kill(!!Oe),n.progress()<1&&Ue(n,"onInterrupt"),n},Vt,wi=[],Ei=function(n){if(n)if(n=!n.name&&n.default||n,gn()||n.headless){var e=n.name,l=xe(n),u=e&&!l&&n.init?function(){this._props=[]}:n,c={init:cr,render:Cn,add:Sn,kill:So,modifier:bo,rawVars:0},s={targetTest:0,get:0,getSetter:Pn,aliases:{},register:0};if(er(),n!==u){if(ke[e])return;He(u,He(Or(n,c),s)),Ft(u.prototype,Ft(c,Or(n,s))),ke[u.prop=e]=u,n.targetTest&&(Pr.push(u),xn[e]=1),e=(e==="css"?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}si(e,u),n.register&&n.register(Be,u,Fe)}else wi.push(n)},de=255,or={aqua:[0,de,de],lime:[0,de,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,de],navy:[0,0,128],white:[de,de,de],olive:[128,128,0],yellow:[de,de,0],orange:[de,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[de,0,0],pink:[de,192,203],cyan:[0,de,de],transparent:[de,de,de,0]},Yr=function(n,e,l){return n+=n<0?1:n>1?-1:0,(n*6<1?e+(l-e)*n*6:n<.5?l:n*3<2?e+(l-e)*(2/3-n)*6:e)*de+.5|0},Pi=function(n,e,l){var u=n?ut(n)?[n>>16,n>>8&de,n&de]:0:or.black,c,s,p,v,h,o,i,t,r,d;if(!u){if(n.substr(-1)===","&&(n=n.substr(0,n.length-1)),or[n])u=or[n];else if(n.charAt(0)==="#"){if(n.length<6&&(c=n.charAt(1),s=n.charAt(2),p=n.charAt(3),n="#"+c+c+s+s+p+p+(n.length===5?n.charAt(4)+n.charAt(4):"")),n.length===9)return u=parseInt(n.substr(1,6),16),[u>>16,u>>8&de,u&de,parseInt(n.substr(7),16)/255];n=parseInt(n.substr(1),16),u=[n>>16,n>>8&de,n&de]}else if(n.substr(0,3)==="hsl"){if(u=d=n.match(en),!e)v=+u[0]%360/360,h=+u[1]/100,o=+u[2]/100,s=o<=.5?o*(h+1):o+h-o*h,c=o*2-s,u.length>3&&(u[3]*=1),u[0]=Yr(v+1/3,c,s),u[1]=Yr(v,c,s),u[2]=Yr(v-1/3,c,s);else if(~n.indexOf("="))return u=n.match(ri),l&&u.length<4&&(u[3]=1),u}else u=n.match(en)||or.transparent;u=u.map(Number)}return e&&!d&&(c=u[0]/de,s=u[1]/de,p=u[2]/de,i=Math.max(c,s,p),t=Math.min(c,s,p),o=(i+t)/2,i===t?v=h=0:(r=i-t,h=o>.5?r/(2-i-t):r/(i+t),v=i===c?(s-p)/r+(s<p?6:0):i===s?(p-c)/r+2:(c-s)/r+4,v*=60),u[0]=~~(v+.5),u[1]=~~(h*100+.5),u[2]=~~(o*100+.5)),l&&u.length<4&&(u[3]=1),u},Ci=function(n){var e=[],l=[],u=-1;return n.split(gt).forEach(function(c){var s=c.match(Wt)||[];e.push.apply(e,s),l.push(u+=s.length+1)}),e.c=l,e},zn=function(n,e,l){var u="",c=(n+u).match(gt),s=e?"hsla(":"rgba(",p=0,v,h,o,i;if(!c)return n;if(c=c.map(function(t){return(t=Pi(t,e,1))&&s+(e?t[0]+","+t[1]+"%,"+t[2]+"%,"+t[3]:t.join(","))+")"}),l&&(o=Ci(n),v=l.c,v.join(u)!==o.c.join(u)))for(h=n.replace(gt,"1").split(Wt),i=h.length-1;p<i;p++)u+=h[p]+(~v.indexOf(p)?c.shift()||s+"0,0,0,0)":(o.length?o:c.length?c:l).shift());if(!h)for(h=n.split(gt),i=h.length-1;p<i;p++)u+=h[p]+c[p];return u+h[i]},gt=function(){var _="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",n;for(n in or)_+="|"+n+"\\b";return new RegExp(_+")","gi")}(),so=/hsl[a]?\(/,Mi=function(n){var e=n.join(" "),l;if(gt.lastIndex=0,gt.test(e))return l=so.test(e),n[1]=zn(n[1],l),n[0]=zn(n[0],l,Ci(n[1])),!0},pr,Ne=function(){var _=Date.now,n=500,e=33,l=_(),u=l,c=1e3/240,s=c,p=[],v,h,o,i,t,r,d=function a(f){var m=_()-u,g=f===!0,x,T,y,w;if((m>n||m<0)&&(l+=m-e),u+=m,y=u-l,x=y-s,(x>0||g)&&(w=++i.frame,t=y-i.time*1e3,i.time=y=y/1e3,s+=x+(x>=c?4:c-x),T=1),g||(v=h(a)),T)for(r=0;r<p.length;r++)p[r](y,t,w,f)};return i={time:0,frame:0,tick:function(){d(!0)},deltaRatio:function(f){return t/(1e3/(f||60))},wake:function(){ai&&(!tn&&gn()&&(Qe=tn=window,mn=Qe.document||{},Ge.gsap=Be,(Qe.gsapVersions||(Qe.gsapVersions=[])).push(Be.version),oi(Mr||Qe.GreenSockGlobals||!Qe.gsap&&Qe||{}),wi.forEach(Ei)),o=typeof requestAnimationFrame<"u"&&requestAnimationFrame,v&&i.sleep(),h=o||function(f){return setTimeout(f,s-i.time*1e3+1|0)},pr=1,d(2))},sleep:function(){(o?cancelAnimationFrame:clearTimeout)(v),pr=0,h=cr},lagSmoothing:function(f,m){n=f||1/0,e=Math.min(m||33,n)},fps:function(f){c=1e3/(f||240),s=i.time*1e3+c},add:function(f,m,g){var x=m?function(T,y,w,b){f(T,y,w,b),i.remove(x)}:f;return i.remove(f),p[g?"unshift":"push"](x),er(),x},remove:function(f,m){~(m=p.indexOf(f))&&p.splice(m,1)&&r>=m&&r--},_listeners:p},i}(),er=function(){return!pr&&Ne.wake()},he={},uo=/^[\d.\-M][\d.\-,\s]/,lo=/["']/g,ho=function(n){for(var e={},l=n.substr(1,n.length-3).split(":"),u=l[0],c=1,s=l.length,p,v,h;c<s;c++)v=l[c],p=c!==s-1?v.lastIndexOf(","):v.length,h=v.substr(0,p),e[u]=isNaN(h)?h.replace(lo,"").trim():+h,u=v.substr(p+1).trim();return e},fo=function(n){var e=n.indexOf("(")+1,l=n.indexOf(")"),u=n.indexOf("(",e);return n.substring(e,~u&&u<l?n.indexOf(")",l+1):l)},co=function(n){var e=(n+"").split("("),l=he[e[0]];return l&&e.length>1&&l.config?l.config.apply(null,~n.indexOf("{")?[ho(e[1])]:fo(n).split(",").map(fi)):he._CE&&uo.test(n)?he._CE("",n):l},Ri=function(n){return function(e){return 1-n(1-e)}},Oi=function _(n,e){for(var l=n._first,u;l;)l instanceof Re?_(l,e):l.vars.yoyoEase&&(!l._yoyo||!l._repeat)&&l._yoyo!==e&&(l.timeline?_(l.timeline,e):(u=l._ease,l._ease=l._yEase,l._yEase=u,l._yoyo=e)),l=l._next},Dt=function(n,e){return n&&(xe(n)?n:he[n]||co(n))||e},Bt=function(n,e,l,u){l===void 0&&(l=function(v){return 1-e(1-v)}),u===void 0&&(u=function(v){return v<.5?e(v*2)/2:1-e((1-v)*2)/2});var c={easeIn:e,easeOut:l,easeInOut:u},s;return Ie(n,function(p){he[p]=Ge[p]=c,he[s=p.toLowerCase()]=l;for(var v in c)he[s+(v==="easeIn"?".in":v==="easeOut"?".out":".inOut")]=he[p+"."+v]=c[v]}),c},Ai=function(n){return function(e){return e<.5?(1-n(1-e*2))/2:.5+n((e-.5)*2)/2}},Kr=function _(n,e,l){var u=e>=1?e:1,c=(l||(n?.3:.45))/(e<1?e:1),s=c/$r*(Math.asin(1/u)||0),p=function(o){return o===1?1:u*Math.pow(2,-10*o)*za((o-s)*c)+1},v=n==="out"?p:n==="in"?function(h){return 1-p(1-h)}:Ai(p);return c=$r/c,v.config=function(h,o){return _(n,h,o)},v},qr=function _(n,e){e===void 0&&(e=1.70158);var l=function(s){return s?--s*s*((e+1)*s+e)+1:0},u=n==="out"?l:n==="in"?function(c){return 1-l(1-c)}:Ai(l);return u.config=function(c){return _(n,c)},u};Ie("Linear,Quad,Cubic,Quart,Quint,Strong",function(_,n){var e=n<5?n+1:n;Bt(_+",Power"+(e-1),n?function(l){return Math.pow(l,e)}:function(l){return l},function(l){return 1-Math.pow(1-l,e)},function(l){return l<.5?Math.pow(l*2,e)/2:1-Math.pow((1-l)*2,e)/2})});he.Linear.easeNone=he.none=he.Linear.easeIn;Bt("Elastic",Kr("in"),Kr("out"),Kr());(function(_,n){var e=1/n,l=2*e,u=2.5*e,c=function(p){return p<e?_*p*p:p<l?_*Math.pow(p-1.5/n,2)+.75:p<u?_*(p-=2.25/n)*p+.9375:_*Math.pow(p-2.625/n,2)+.984375};Bt("Bounce",function(s){return 1-c(1-s)},c)})(7.5625,2.75);Bt("Expo",function(_){return _?Math.pow(2,10*(_-1)):0});Bt("Circ",function(_){return-(ei(1-_*_)-1)});Bt("Sine",function(_){return _===1?1:-Ua(_*ka)+1});Bt("Back",qr("in"),qr("out"),qr());he.SteppedEase=he.steps=Ge.SteppedEase={config:function(n,e){n===void 0&&(n=1);var l=1/n,u=n+(e?0:1),c=e?1:0,s=1-ve;return function(p){return((u*xr(0,s,p)|0)+c)*l}}};Jt.ease=he["quad.out"];Ie("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(_){return Tn+=_+","+_+"Params,"});var Di=function(n,e){this.id=Na++,n._gsap=this,this.target=n,this.harness=e,this.get=e?e.get:li,this.set=e?e.getSetter:Pn},vr=function(){function _(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,$t(this,+e.duration,1,1),this.data=e.data,ge&&(this._ctx=ge,ge.data.push(this)),pr||Ne.wake()}var n=_.prototype;return n.delay=function(l){return l||l===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+l-this._delay),this._delay=l,this):this._delay},n.duration=function(l){return arguments.length?this.totalDuration(this._repeat>0?l+(l+this._rDelay)*this._repeat:l):this.totalDuration()&&this._dur},n.totalDuration=function(l){return arguments.length?(this._dirty=0,$t(this,this._repeat<0?l:(l-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},n.totalTime=function(l,u){if(er(),!arguments.length)return this._tTime;var c=this._dp;if(c&&c.smoothChildTiming&&this._ts){for(Ur(this,l),!c._dp||c.parent||pi(c,this);c&&c.parent;)c.parent._time!==c._start+(c._ts>=0?c._tTime/c._ts:(c.totalDuration()-c._tTime)/-c._ts)&&c.totalTime(c._tTime,!0),c=c.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&l<this._tDur||this._ts<0&&l>0||!this._tDur&&!l)&&je(this._dp,this,this._start-this._delay)}return(this._tTime!==l||!this._dur&&!u||this._initted&&Math.abs(this._zTime)===ve||!l&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=l),hi(this,l,u)),this},n.time=function(l,u){return arguments.length?this.totalTime(Math.min(this.totalDuration(),l+kn(this))%(this._dur+this._rDelay)||(l?this._dur:0),u):this._time},n.totalProgress=function(l,u){return arguments.length?this.totalTime(this.totalDuration()*l,u):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},n.progress=function(l,u){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-l:l)+kn(this),u):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},n.iteration=function(l,u){var c=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(l-1)*c,u):this._repeat?jt(this._tTime,c)+1:1},n.timeScale=function(l,u){if(!arguments.length)return this._rts===-ve?0:this._rts;if(this._rts===l)return this;var c=this.parent&&this._ts?Ar(this.parent._time,this):this._tTime;return this._rts=+l||0,this._ts=this._ps||l===-ve?0:this._rts,this.totalTime(xr(-Math.abs(this._delay),this._tDur,c),u!==!1),Nr(this),Ka(this)},n.paused=function(l){return arguments.length?(this._ps!==l&&(this._ps=l,l?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(er(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==ve&&(this._tTime-=ve)))),this):this._ps},n.startTime=function(l){if(arguments.length){this._start=l;var u=this.parent||this._dp;return u&&(u._sort||!this.parent)&&je(u,this,l-this._delay),this}return this._start},n.endTime=function(l){return this._start+(De(l)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},n.rawTime=function(l){var u=this.parent||this._dp;return u?l&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Ar(u.rawTime(l),this):this._tTime:this._tTime},n.revert=function(l){l===void 0&&(l=Wa);var u=Oe;return Oe=l,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(l),this.totalTime(-.01,l.suppressEvents)),this.data!=="nested"&&l.kill!==!1&&this.kill(),Oe=u,this},n.globalTime=function(l){for(var u=this,c=arguments.length?l:u.rawTime();u;)c=u._start+c/(Math.abs(u._ts)||1),u=u._dp;return!this.parent&&this._sat?this._sat.globalTime(l):c},n.repeat=function(l){return arguments.length?(this._repeat=l===1/0?-2:l,Nn(this)):this._repeat===-2?1/0:this._repeat},n.repeatDelay=function(l){if(arguments.length){var u=this._time;return this._rDelay=l,Nn(this),u?this.time(u):this}return this._rDelay},n.yoyo=function(l){return arguments.length?(this._yoyo=l,this):this._yoyo},n.seek=function(l,u){return this.totalTime(Xe(this,l),De(u))},n.restart=function(l,u){return this.play().totalTime(l?-this._delay:0,De(u))},n.play=function(l,u){return l!=null&&this.seek(l,u),this.reversed(!1).paused(!1)},n.reverse=function(l,u){return l!=null&&this.seek(l||this.totalDuration(),u),this.reversed(!0).paused(!1)},n.pause=function(l,u){return l!=null&&this.seek(l,u),this.paused(!0)},n.resume=function(){return this.paused(!1)},n.reversed=function(l){return arguments.length?(!!l!==this.reversed()&&this.timeScale(-this._rts||(l?-ve:0)),this):this._rts<0},n.invalidate=function(){return this._initted=this._act=0,this._zTime=-ve,this},n.isActive=function(){var l=this.parent||this._dp,u=this._start,c;return!!(!l||this._ts&&this._initted&&l.isActive()&&(c=l.rawTime(!0))>=u&&c<this.endTime(!0)-ve)},n.eventCallback=function(l,u,c){var s=this.vars;return arguments.length>1?(u?(s[l]=u,c&&(s[l+"Params"]=c),l==="onUpdate"&&(this._onUpdate=u)):delete s[l],this):s[l]},n.then=function(l){var u=this;return new Promise(function(c){var s=xe(l)?l:ci,p=function(){var h=u.then;u.then=null,xe(s)&&(s=s(u))&&(s.then||s===u)&&(u.then=h),c(s),u.then=h};u._initted&&u.totalProgress()===1&&u._ts>=0||!u._tTime&&u._ts<0?p():u._prom=p})},n.kill=function(){ar(this)},_}();He(vr.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-ve,_prom:0,_ps:!1,_rts:1});var Re=function(_){$n(n,_);function n(l,u){var c;return l===void 0&&(l={}),c=_.call(this,l)||this,c.labels={},c.smoothChildTiming=!!l.smoothChildTiming,c.autoRemoveChildren=!!l.autoRemoveChildren,c._sort=De(l.sortChildren),me&&je(l.parent||me,ot(c),u),l.reversed&&c.reverse(),l.paused&&c.paused(!0),l.scrollTrigger&&vi(ot(c),l.scrollTrigger),c}var e=n.prototype;return e.to=function(u,c,s){return ur(0,arguments,this),this},e.from=function(u,c,s){return ur(1,arguments,this),this},e.fromTo=function(u,c,s,p){return ur(2,arguments,this),this},e.set=function(u,c,s){return c.duration=0,c.parent=this,sr(c).repeatDelay||(c.repeat=0),c.immediateRender=!!c.immediateRender,new Se(u,c,Xe(this,s),1),this},e.call=function(u,c,s){return je(this,Se.delayedCall(0,u,c),s)},e.staggerTo=function(u,c,s,p,v,h,o){return s.duration=c,s.stagger=s.stagger||p,s.onComplete=h,s.onCompleteParams=o,s.parent=this,new Se(u,s,Xe(this,v)),this},e.staggerFrom=function(u,c,s,p,v,h,o){return s.runBackwards=1,sr(s).immediateRender=De(s.immediateRender),this.staggerTo(u,c,s,p,v,h,o)},e.staggerFromTo=function(u,c,s,p,v,h,o,i){return p.startAt=s,sr(p).immediateRender=De(p.immediateRender),this.staggerTo(u,c,p,v,h,o,i)},e.render=function(u,c,s){var p=this._time,v=this._dirty?this.totalDuration():this._tDur,h=this._dur,o=u<=0?0:we(u),i=this._zTime<0!=u<0&&(this._initted||!h),t,r,d,a,f,m,g,x,T,y,w,b;if(this!==me&&o>v&&u>=0&&(o=v),o!==this._tTime||s||i){if(p!==this._time&&h&&(o+=this._time-p,u+=this._time-p),t=o,T=this._start,x=this._ts,m=!x,i&&(h||(p=this._zTime),(u||!c)&&(this._zTime=u)),this._repeat){if(w=this._yoyo,f=h+this._rDelay,this._repeat<-1&&u<0)return this.totalTime(f*100+u,c,s);if(t=we(o%f),o===v?(a=this._repeat,t=h):(a=~~(o/f),a&&a===o/f&&(t=h,a--),t>h&&(t=h)),y=jt(this._tTime,f),!p&&this._tTime&&y!==a&&this._tTime-y*f-this._dur<=0&&(y=a),w&&a&1&&(t=h-t,b=1),a!==y&&!this._lock){var S=w&&y&1,E=S===(w&&a&1);if(a<y&&(S=!S),p=S?0:o%h?h:o,this._lock=1,this.render(p||(b?0:we(a*f)),c,!h)._lock=0,this._tTime=o,!c&&this.parent&&Ue(this,"onRepeat"),this.vars.repeatRefresh&&!b&&(this.invalidate()._lock=1),p&&p!==this._time||m!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(h=this._dur,v=this._tDur,E&&(this._lock=2,p=S?h:-1e-4,this.render(p,!0),this.vars.repeatRefresh&&!b&&this.invalidate()),this._lock=0,!this._ts&&!m)return this;Oi(this,b)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(g=Ja(this,we(p),we(t)),g&&(o-=t-(t=g._start))),this._tTime=o,this._time=t,this._act=!x,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=u,p=0),!p&&t&&!c&&!a&&(Ue(this,"onStart"),this._tTime!==o))return this;if(t>=p&&u>=0)for(r=this._first;r;){if(d=r._next,(r._act||t>=r._start)&&r._ts&&g!==r){if(r.parent!==this)return this.render(u,c,s);if(r.render(r._ts>0?(t-r._start)*r._ts:(r._dirty?r.totalDuration():r._tDur)+(t-r._start)*r._ts,c,s),t!==this._time||!this._ts&&!m){g=0,d&&(o+=this._zTime=-ve);break}}r=d}else{r=this._last;for(var O=u<0?u:t;r;){if(d=r._prev,(r._act||O<=r._end)&&r._ts&&g!==r){if(r.parent!==this)return this.render(u,c,s);if(r.render(r._ts>0?(O-r._start)*r._ts:(r._dirty?r.totalDuration():r._tDur)+(O-r._start)*r._ts,c,s||Oe&&(r._initted||r._startAt)),t!==this._time||!this._ts&&!m){g=0,d&&(o+=this._zTime=O?-ve:ve);break}}r=d}}if(g&&!c&&(this.pause(),g.render(t>=p?0:-ve)._zTime=t>=p?1:-1,this._ts))return this._start=T,Nr(this),this.render(u,c,s);this._onUpdate&&!c&&Ue(this,"onUpdate",!0),(o===v&&this._tTime>=this.totalDuration()||!o&&p)&&(T===this._start||Math.abs(x)!==Math.abs(this._ts))&&(this._lock||((u||!h)&&(o===v&&this._ts>0||!o&&this._ts<0)&&yt(this,1),!c&&!(u<0&&!p)&&(o||p||!v)&&(Ue(this,o===v&&u>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(o<v&&this.timeScale()>0)&&this._prom())))}return this},e.add=function(u,c){var s=this;if(ut(c)||(c=Xe(this,c,u)),!(u instanceof vr)){if(Ae(u))return u.forEach(function(p){return s.add(p,c)}),this;if(Ee(u))return this.addLabel(u,c);if(xe(u))u=Se.delayedCall(0,u);else return this}return this!==u?je(this,u,c):this},e.getChildren=function(u,c,s,p){u===void 0&&(u=!0),c===void 0&&(c=!0),s===void 0&&(s=!0),p===void 0&&(p=-We);for(var v=[],h=this._first;h;)h._start>=p&&(h instanceof Se?c&&v.push(h):(s&&v.push(h),u&&v.push.apply(v,h.getChildren(!0,c,s)))),h=h._next;return v},e.getById=function(u){for(var c=this.getChildren(1,1,1),s=c.length;s--;)if(c[s].vars.id===u)return c[s]},e.remove=function(u){return Ee(u)?this.removeLabel(u):xe(u)?this.killTweensOf(u):(kr(this,u),u===this._recent&&(this._recent=this._last),At(this))},e.totalTime=function(u,c){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=we(Ne.time-(this._ts>0?u/this._ts:(this.totalDuration()-u)/-this._ts))),_.prototype.totalTime.call(this,u,c),this._forcing=0,this):this._tTime},e.addLabel=function(u,c){return this.labels[u]=Xe(this,c),this},e.removeLabel=function(u){return delete this.labels[u],this},e.addPause=function(u,c,s){var p=Se.delayedCall(0,c||cr,s);return p.data="isPause",this._hasPause=1,je(this,p,Xe(this,u))},e.removePause=function(u){var c=this._first;for(u=Xe(this,u);c;)c._start===u&&c.data==="isPause"&&yt(c),c=c._next},e.killTweensOf=function(u,c,s){for(var p=this.getTweensOf(u,s),v=p.length;v--;)ct!==p[v]&&p[v].kill(u,c);return this},e.getTweensOf=function(u,c){for(var s=[],p=Ve(u),v=this._first,h=ut(c),o;v;)v instanceof Se?Va(v._targets,p)&&(h?(!ct||v._initted&&v._ts)&&v.globalTime(0)<=c&&v.globalTime(v.totalDuration())>c:!c||v.isActive())&&s.push(v):(o=v.getTweensOf(p,c)).length&&s.push.apply(s,o),v=v._next;return s},e.tweenTo=function(u,c){c=c||{};var s=this,p=Xe(s,u),v=c,h=v.startAt,o=v.onStart,i=v.onStartParams,t=v.immediateRender,r,d=Se.to(s,He({ease:c.ease||"none",lazy:!1,immediateRender:!1,time:p,overwrite:"auto",duration:c.duration||Math.abs((p-(h&&"time"in h?h.time:s._time))/s.timeScale())||ve,onStart:function(){if(s.pause(),!r){var f=c.duration||Math.abs((p-(h&&"time"in h?h.time:s._time))/s.timeScale());d._dur!==f&&$t(d,f,0,1).render(d._time,!0,!0),r=1}o&&o.apply(d,i||[])}},c));return t?d.render(0):d},e.tweenFromTo=function(u,c,s){return this.tweenTo(c,He({startAt:{time:Xe(this,u)}},s))},e.recent=function(){return this._recent},e.nextLabel=function(u){return u===void 0&&(u=this._time),Un(this,Xe(this,u))},e.previousLabel=function(u){return u===void 0&&(u=this._time),Un(this,Xe(this,u),1)},e.currentLabel=function(u){return arguments.length?this.seek(u,!0):this.previousLabel(this._time+ve)},e.shiftChildren=function(u,c,s){s===void 0&&(s=0);for(var p=this._first,v=this.labels,h;p;)p._start>=s&&(p._start+=u,p._end+=u),p=p._next;if(c)for(h in v)v[h]>=s&&(v[h]+=u);return At(this)},e.invalidate=function(u){var c=this._first;for(this._lock=0;c;)c.invalidate(u),c=c._next;return _.prototype.invalidate.call(this,u)},e.clear=function(u){u===void 0&&(u=!0);for(var c=this._first,s;c;)s=c._next,this.remove(c),c=s;return this._dp&&(this._time=this._tTime=this._pTime=0),u&&(this.labels={}),At(this)},e.totalDuration=function(u){var c=0,s=this,p=s._last,v=We,h,o,i;if(arguments.length)return s.timeScale((s._repeat<0?s.duration():s.totalDuration())/(s.reversed()?-u:u));if(s._dirty){for(i=s.parent;p;)h=p._prev,p._dirty&&p.totalDuration(),o=p._start,o>v&&s._sort&&p._ts&&!s._lock?(s._lock=1,je(s,p,o-p._delay,1)._lock=0):v=o,o<0&&p._ts&&(c-=o,(!i&&!s._dp||i&&i.smoothChildTiming)&&(s._start+=o/s._ts,s._time-=o,s._tTime-=o),s.shiftChildren(-o,!1,-1/0),v=0),p._end>c&&p._ts&&(c=p._end),p=h;$t(s,s===me&&s._time>c?s._time:c,1,1),s._dirty=0}return s._tDur},n.updateRoot=function(u){if(me._ts&&(hi(me,Ar(u,me)),ui=Ne.frame),Ne.frame>=Ln){Ln+=ze.autoSleep||120;var c=me._first;if((!c||!c._ts)&&ze.autoSleep&&Ne._listeners.length<2){for(;c&&!c._ts;)c=c._next;c||Ne.sleep()}}},n}(vr);He(Re.prototype,{_lock:0,_hasPause:0,_forcing:0});var po=function(n,e,l,u,c,s,p){var v=new Fe(this._pt,n,e,0,1,Ni,null,c),h=0,o=0,i,t,r,d,a,f,m,g;for(v.b=l,v.e=u,l+="",u+="",(m=~u.indexOf("random("))&&(u=dr(u)),s&&(g=[l,u],s(g,n,e),l=g[0],u=g[1]),t=l.match(Vr)||[];i=Vr.exec(u);)d=i[0],a=u.substring(h,i.index),r?r=(r+1)%5:a.substr(-5)==="rgba("&&(r=1),d!==t[o++]&&(f=parseFloat(t[o-1])||0,v._pt={_next:v._pt,p:a||o===1?a:",",s:f,c:d.charAt(1)==="="?qt(f,d)-f:parseFloat(d)-f,m:r&&r<4?Math.round:0},h=Vr.lastIndex);return v.c=h<u.length?u.substring(h,u.length):"",v.fp=p,(ni.test(u)||m)&&(v.e=0),this._pt=v,v},Sn=function(n,e,l,u,c,s,p,v,h,o){xe(u)&&(u=u(c||0,n,s));var i=n[e],t=l!=="get"?l:xe(i)?h?n[e.indexOf("set")||!xe(n["get"+e.substr(3)])?e:"get"+e.substr(3)](h):n[e]():i,r=xe(i)?h?yo:Bi:En,d;if(Ee(u)&&(~u.indexOf("random(")&&(u=dr(u)),u.charAt(1)==="="&&(d=qt(t,u)+(Me(t)||0),(d||d===0)&&(u=d))),!o||t!==u||ln)return!isNaN(t*u)&&u!==""?(d=new Fe(this._pt,n,e,+t||0,u-(t||0),typeof i=="boolean"?To:ki,0,r),h&&(d.fp=h),p&&d.modifier(p,this,n),this._pt=d):(!i&&!(e in n)&&yn(e,u),po.call(this,n,e,t,u,r,v||ze.stringFilter,h))},vo=function(n,e,l,u,c){if(xe(n)&&(n=lr(n,c,e,l,u)),!nt(n)||n.style&&n.nodeType||Ae(n)||ti(n))return Ee(n)?lr(n,c,e,l,u):n;var s={},p;for(p in n)s[p]=lr(n[p],c,e,l,u);return s},Ii=function(n,e,l,u,c,s){var p,v,h,o;if(ke[n]&&(p=new ke[n]).init(c,p.rawVars?e[n]:vo(e[n],u,c,s,l),l,u,s)!==!1&&(l._pt=v=new Fe(l._pt,c,n,0,1,p.render,p,0,p.priority),l!==Vt))for(h=l._ptLookup[l._targets.indexOf(c)],o=p._props.length;o--;)h[p._props[o]]=v;return p},ct,ln,wn=function _(n,e,l){var u=n.vars,c=u.ease,s=u.startAt,p=u.immediateRender,v=u.lazy,h=u.onUpdate,o=u.runBackwards,i=u.yoyoEase,t=u.keyframes,r=u.autoRevert,d=n._dur,a=n._startAt,f=n._targets,m=n.parent,g=m&&m.data==="nested"?m.vars.targets:f,x=n._overwrite==="auto"&&!vn,T=n.timeline,y,w,b,S,E,O,P,M,A,B,I,R,D;if(T&&(!t||!c)&&(c="none"),n._ease=Dt(c,Jt.ease),n._yEase=i?Ri(Dt(i===!0?c:i,Jt.ease)):0,i&&n._yoyo&&!n._repeat&&(i=n._yEase,n._yEase=n._ease,n._ease=i),n._from=!T&&!!u.runBackwards,!T||t&&!u.stagger){if(M=f[0]?Ot(f[0]).harness:0,R=M&&u[M.prop],y=Or(u,xn),a&&(a._zTime<0&&a.progress(1),e<0&&o&&p&&!r?a.render(-1,!0):a.revert(o&&d?Er:Xa),a._lazy=0),s){if(yt(n._startAt=Se.set(f,He({data:"isStart",overwrite:!1,parent:m,immediateRender:!0,lazy:!a&&De(v),startAt:null,delay:0,onUpdate:h&&function(){return Ue(n,"onUpdate")},stagger:0},s))),n._startAt._dp=0,n._startAt._sat=n,e<0&&(Oe||!p&&!r)&&n._startAt.revert(Er),p&&d&&e<=0&&l<=0){e&&(n._zTime=e);return}}else if(o&&d&&!a){if(e&&(p=!1),b=He({overwrite:!1,data:"isFromStart",lazy:p&&!a&&De(v),immediateRender:p,stagger:0,parent:m},y),R&&(b[M.prop]=R),yt(n._startAt=Se.set(f,b)),n._startAt._dp=0,n._startAt._sat=n,e<0&&(Oe?n._startAt.revert(Er):n._startAt.render(-1,!0)),n._zTime=e,!p)_(n._startAt,ve,ve);else if(!e)return}for(n._pt=n._ptCache=0,v=d&&De(v)||v&&!d,w=0;w<f.length;w++){if(E=f[w],P=E._gsap||bn(f)[w]._gsap,n._ptLookup[w]=B={},rn[P.id]&&_t.length&&Rr(),I=g===f?w:g.indexOf(E),M&&(A=new M).init(E,R||y,n,I,g)!==!1&&(n._pt=S=new Fe(n._pt,E,A.name,0,1,A.render,A,0,A.priority),A._props.forEach(function(L){B[L]=S}),A.priority&&(O=1)),!M||R)for(b in y)ke[b]&&(A=Ii(b,y,n,I,E,g))?A.priority&&(O=1):B[b]=S=Sn.call(n,E,b,"get",y[b],I,g,0,u.stringFilter);n._op&&n._op[w]&&n.kill(E,n._op[w]),x&&n._pt&&(ct=n,me.killTweensOf(E,B,n.globalTime(e)),D=!n.parent,ct=0),n._pt&&v&&(rn[P.id]=1)}O&&Ui(n),n._onInit&&n._onInit(n)}n._onUpdate=h,n._initted=(!n._op||n._pt)&&!D,t&&e<=0&&T.render(We,!0,!0)},_o=function(n,e,l,u,c,s,p,v){var h=(n._pt&&n._ptCache||(n._ptCache={}))[e],o,i,t,r;if(!h)for(h=n._ptCache[e]=[],t=n._ptLookup,r=n._targets.length;r--;){if(o=t[r][e],o&&o.d&&o.d._pt)for(o=o.d._pt;o&&o.p!==e&&o.fp!==e;)o=o._next;if(!o)return ln=1,n.vars[e]="+=0",wn(n,p),ln=0,v?fr(e+" not eligible for reset"):1;h.push(o)}for(r=h.length;r--;)i=h[r],o=i._pt||i,o.s=(u||u===0)&&!c?u:o.s+(u||0)+s*o.c,o.c=l-o.s,i.e&&(i.e=Te(l)+Me(i.e)),i.b&&(i.b=o.s+Me(i.b))},go=function(n,e){var l=n[0]?Ot(n[0]).harness:0,u=l&&l.aliases,c,s,p,v;if(!u)return e;c=Ft({},e);for(s in u)if(s in c)for(v=u[s].split(","),p=v.length;p--;)c[v[p]]=c[s];return c},mo=function(n,e,l,u){var c=e.ease||u||"power1.inOut",s,p;if(Ae(e))p=l[n]||(l[n]=[]),e.forEach(function(v,h){return p.push({t:h/(e.length-1)*100,v,e:c})});else for(s in e)p=l[s]||(l[s]=[]),s==="ease"||p.push({t:parseFloat(n),v:e[s],e:c})},lr=function(n,e,l,u,c){return xe(n)?n.call(e,l,u,c):Ee(n)&&~n.indexOf("random(")?dr(n):n},Fi=Tn+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",Li={};Ie(Fi+",id,stagger,delay,duration,paused,scrollTrigger",function(_){return Li[_]=1});var Se=function(_){$n(n,_);function n(l,u,c,s){var p;typeof u=="number"&&(c.duration=u,u=c,c=null),p=_.call(this,s?u:sr(u))||this;var v=p.vars,h=v.duration,o=v.delay,i=v.immediateRender,t=v.stagger,r=v.overwrite,d=v.keyframes,a=v.defaults,f=v.scrollTrigger,m=v.yoyoEase,g=u.parent||me,x=(Ae(l)||ti(l)?ut(l[0]):"length"in u)?[l]:Ve(l),T,y,w,b,S,E,O,P;if(p._targets=x.length?bn(x):fr("GSAP target "+l+" not found. https://gsap.com",!ze.nullTargetWarn)||[],p._ptLookup=[],p._overwrite=r,d||t||br(h)||br(o)){if(u=p.vars,T=p.timeline=new Re({data:"nested",defaults:a||{},targets:g&&g.data==="nested"?g.vars.targets:x}),T.kill(),T.parent=T._dp=ot(p),T._start=0,t||br(h)||br(o)){if(b=x.length,O=t&&yi(t),nt(t))for(S in t)~Fi.indexOf(S)&&(P||(P={}),P[S]=t[S]);for(y=0;y<b;y++)w=Or(u,Li),w.stagger=0,m&&(w.yoyoEase=m),P&&Ft(w,P),E=x[y],w.duration=+lr(h,ot(p),y,E,x),w.delay=(+lr(o,ot(p),y,E,x)||0)-p._delay,!t&&b===1&&w.delay&&(p._delay=o=w.delay,p._start+=o,w.delay=0),T.to(E,w,O?O(y,E,x):0),T._ease=he.none;T.duration()?h=o=0:p.timeline=0}else if(d){sr(He(T.vars.defaults,{ease:"none"})),T._ease=Dt(d.ease||u.ease||"none");var M=0,A,B,I;if(Ae(d))d.forEach(function(R){return T.to(x,R,">")}),T.duration();else{w={};for(S in d)S==="ease"||S==="easeEach"||mo(S,d[S],w,d.easeEach);for(S in w)for(A=w[S].sort(function(R,D){return R.t-D.t}),M=0,y=0;y<A.length;y++)B=A[y],I={ease:B.e,duration:(B.t-(y?A[y-1].t:0))/100*h},I[S]=B.v,T.to(x,I,M),M+=I.duration;T.duration()<h&&T.to({},{duration:h-T.duration()})}}h||p.duration(h=T.duration())}else p.timeline=0;return r===!0&&!vn&&(ct=ot(p),me.killTweensOf(x),ct=0),je(g,ot(p),c),u.reversed&&p.reverse(),u.paused&&p.paused(!0),(i||!h&&!d&&p._start===we(g._time)&&De(i)&&qa(ot(p))&&g.data!=="nested")&&(p._tTime=-ve,p.render(Math.max(0,-o)||0)),f&&vi(ot(p),f),p}var e=n.prototype;return e.render=function(u,c,s){var p=this._time,v=this._tDur,h=this._dur,o=u<0,i=u>v-ve&&!o?v:u<ve?0:u,t,r,d,a,f,m,g,x,T;if(!h)Qa(this,u,c,s);else if(i!==this._tTime||!u||s||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==o){if(t=i,x=this.timeline,this._repeat){if(a=h+this._rDelay,this._repeat<-1&&o)return this.totalTime(a*100+u,c,s);if(t=we(i%a),i===v?(d=this._repeat,t=h):(d=~~(i/a),d&&d===we(i/a)&&(t=h,d--),t>h&&(t=h)),m=this._yoyo&&d&1,m&&(T=this._yEase,t=h-t),f=jt(this._tTime,a),t===p&&!s&&this._initted&&d===f)return this._tTime=i,this;d!==f&&(x&&this._yEase&&Oi(x,m),this.vars.repeatRefresh&&!m&&!this._lock&&this._time!==a&&this._initted&&(this._lock=s=1,this.render(we(a*d),!0).invalidate()._lock=0))}if(!this._initted){if(_i(this,o?u:t,s,c,i))return this._tTime=0,this;if(p!==this._time&&!(s&&this.vars.repeatRefresh&&d!==f))return this;if(h!==this._dur)return this.render(u,c,s)}if(this._tTime=i,this._time=t,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=g=(T||this._ease)(t/h),this._from&&(this.ratio=g=1-g),t&&!p&&!c&&!d&&(Ue(this,"onStart"),this._tTime!==i))return this;for(r=this._pt;r;)r.r(g,r.d),r=r._next;x&&x.render(u<0?u:x._dur*x._ease(t/this._dur),c,s)||this._startAt&&(this._zTime=u),this._onUpdate&&!c&&(o&&nn(this,u,c,s),Ue(this,"onUpdate")),this._repeat&&d!==f&&this.vars.onRepeat&&!c&&this.parent&&Ue(this,"onRepeat"),(i===this._tDur||!i)&&this._tTime===i&&(o&&!this._onUpdate&&nn(this,u,!0,!0),(u||!h)&&(i===this._tDur&&this._ts>0||!i&&this._ts<0)&&yt(this,1),!c&&!(o&&!p)&&(i||p||m)&&(Ue(this,i===v?"onComplete":"onReverseComplete",!0),this._prom&&!(i<v&&this.timeScale()>0)&&this._prom()))}return this},e.targets=function(){return this._targets},e.invalidate=function(u){return(!u||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(u),_.prototype.invalidate.call(this,u)},e.resetTo=function(u,c,s,p,v){pr||Ne.wake(),this._ts||this.play();var h=Math.min(this._dur,(this._dp._time-this._start)*this._ts),o;return this._initted||wn(this,h),o=this._ease(h/this._dur),_o(this,u,c,s,p,o,h,v)?this.resetTo(u,c,s,p,1):(Ur(this,0),this.parent||di(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},e.kill=function(u,c){if(c===void 0&&(c="all"),!u&&(!c||c==="all"))return this._lazy=this._pt=0,this.parent?ar(this):this;if(this.timeline){var s=this.timeline.totalDuration();return this.timeline.killTweensOf(u,c,ct&&ct.vars.overwrite!==!0)._first||ar(this),this.parent&&s!==this.timeline.totalDuration()&&$t(this,this._dur*this.timeline._tDur/s,0,1),this}var p=this._targets,v=u?Ve(u):p,h=this._ptLookup,o=this._pt,i,t,r,d,a,f,m;if((!c||c==="all")&&Ya(p,v))return c==="all"&&(this._pt=0),ar(this);for(i=this._op=this._op||[],c!=="all"&&(Ee(c)&&(a={},Ie(c,function(g){return a[g]=1}),c=a),c=go(p,c)),m=p.length;m--;)if(~v.indexOf(p[m])){t=h[m],c==="all"?(i[m]=c,d=t,r={}):(r=i[m]=i[m]||{},d=c);for(a in d)f=t&&t[a],f&&((!("kill"in f.d)||f.d.kill(a)===!0)&&kr(this,f,"_pt"),delete t[a]),r!=="all"&&(r[a]=1)}return this._initted&&!this._pt&&o&&ar(this),this},n.to=function(u,c){return new n(u,c,arguments[2])},n.from=function(u,c){return ur(1,arguments)},n.delayedCall=function(u,c,s,p){return new n(c,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:u,onComplete:c,onReverseComplete:c,onCompleteParams:s,onReverseCompleteParams:s,callbackScope:p})},n.fromTo=function(u,c,s){return ur(2,arguments)},n.set=function(u,c){return c.duration=0,c.repeatDelay||(c.repeat=0),new n(u,c)},n.killTweensOf=function(u,c,s){return me.killTweensOf(u,c,s)},n}(vr);He(Se.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Ie("staggerTo,staggerFrom,staggerFromTo",function(_){Se[_]=function(){var n=new Re,e=on.call(arguments,0);return e.splice(_==="staggerFromTo"?5:4,0,0),n[_].apply(n,e)}});var En=function(n,e,l){return n[e]=l},Bi=function(n,e,l){return n[e](l)},yo=function(n,e,l,u){return n[e](u.fp,l)},xo=function(n,e,l){return n.setAttribute(e,l)},Pn=function(n,e){return xe(n[e])?Bi:_n(n[e])&&n.setAttribute?xo:En},ki=function(n,e){return e.set(e.t,e.p,Math.round((e.s+e.c*n)*1e6)/1e6,e)},To=function(n,e){return e.set(e.t,e.p,!!(e.s+e.c*n),e)},Ni=function(n,e){var l=e._pt,u="";if(!n&&e.b)u=e.b;else if(n===1&&e.e)u=e.e;else{for(;l;)u=l.p+(l.m?l.m(l.s+l.c*n):Math.round((l.s+l.c*n)*1e4)/1e4)+u,l=l._next;u+=e.c}e.set(e.t,e.p,u,e)},Cn=function(n,e){for(var l=e._pt;l;)l.r(n,l.d),l=l._next},bo=function(n,e,l,u){for(var c=this._pt,s;c;)s=c._next,c.p===u&&c.modifier(n,e,l),c=s},So=function(n){for(var e=this._pt,l,u;e;)u=e._next,e.p===n&&!e.op||e.op===n?kr(this,e,"_pt"):e.dep||(l=1),e=u;return!l},wo=function(n,e,l,u){u.mSet(n,e,u.m.call(u.tween,l,u.mt),u)},Ui=function(n){for(var e=n._pt,l,u,c,s;e;){for(l=e._next,u=c;u&&u.pr>e.pr;)u=u._next;(e._prev=u?u._prev:s)?e._prev._next=e:c=e,(e._next=u)?u._prev=e:s=e,e=l}n._pt=c},Fe=function(){function _(e,l,u,c,s,p,v,h,o){this.t=l,this.s=c,this.c=s,this.p=u,this.r=p||ki,this.d=v||this,this.set=h||En,this.pr=o||0,this._next=e,e&&(e._prev=this)}var n=_.prototype;return n.modifier=function(l,u,c){this.mSet=this.mSet||this.set,this.set=wo,this.m=l,this.mt=c,this.tween=u},_}();Ie(Tn+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(_){return xn[_]=1});Ge.TweenMax=Ge.TweenLite=Se;Ge.TimelineLite=Ge.TimelineMax=Re;me=new Re({sortChildren:!1,defaults:Jt,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});ze.stringFilter=Mi;var It=[],Cr={},Eo=[],Gn=0,Po=0,Zr=function(n){return(Cr[n]||Eo).map(function(e){return e()})},hn=function(){var n=Date.now(),e=[];n-Gn>2&&(Zr("matchMediaInit"),It.forEach(function(l){var u=l.queries,c=l.conditions,s,p,v,h;for(p in u)s=Qe.matchMedia(u[p]).matches,s&&(v=1),s!==c[p]&&(c[p]=s,h=1);h&&(l.revert(),v&&e.push(l))}),Zr("matchMediaRevert"),e.forEach(function(l){return l.onMatch(l,function(u){return l.add(null,u)})}),Gn=n,Zr("matchMedia"))},zi=function(){function _(e,l){this.selector=l&&sn(l),this.data=[],this._r=[],this.isReverted=!1,this.id=Po++,e&&this.add(e)}var n=_.prototype;return n.add=function(l,u,c){xe(l)&&(c=u,u=l,l=xe);var s=this,p=function(){var h=ge,o=s.selector,i;return h&&h!==s&&h.data.push(s),c&&(s.selector=sn(c)),ge=s,i=u.apply(s,arguments),xe(i)&&s._r.push(i),ge=h,s.selector=o,s.isReverted=!1,i};return s.last=p,l===xe?p(s,function(v){return s.add(null,v)}):l?s[l]=p:p},n.ignore=function(l){var u=ge;ge=null,l(this),ge=u},n.getTweens=function(){var l=[];return this.data.forEach(function(u){return u instanceof _?l.push.apply(l,u.getTweens()):u instanceof Se&&!(u.parent&&u.parent.data==="nested")&&l.push(u)}),l},n.clear=function(){this._r.length=this.data.length=0},n.kill=function(l,u){var c=this;if(l?function(){for(var p=c.getTweens(),v=c.data.length,h;v--;)h=c.data[v],h.data==="isFlip"&&(h.revert(),h.getChildren(!0,!0,!1).forEach(function(o){return p.splice(p.indexOf(o),1)}));for(p.map(function(o){return{g:o._dur||o._delay||o._sat&&!o._sat.vars.immediateRender?o.globalTime(0):-1/0,t:o}}).sort(function(o,i){return i.g-o.g||-1/0}).forEach(function(o){return o.t.revert(l)}),v=c.data.length;v--;)h=c.data[v],h instanceof Re?h.data!=="nested"&&(h.scrollTrigger&&h.scrollTrigger.revert(),h.kill()):!(h instanceof Se)&&h.revert&&h.revert(l);c._r.forEach(function(o){return o(l,c)}),c.isReverted=!0}():this.data.forEach(function(p){return p.kill&&p.kill()}),this.clear(),u)for(var s=It.length;s--;)It[s].id===this.id&&It.splice(s,1)},n.revert=function(l){this.kill(l||{})},_}(),Co=function(){function _(e){this.contexts=[],this.scope=e,ge&&ge.data.push(this)}var n=_.prototype;return n.add=function(l,u,c){nt(l)||(l={matches:l});var s=new zi(0,c||this.scope),p=s.conditions={},v,h,o;ge&&!s.selector&&(s.selector=ge.selector),this.contexts.push(s),u=s.add("onMatch",u),s.queries=l;for(h in l)h==="all"?o=1:(v=Qe.matchMedia(l[h]),v&&(It.indexOf(s)<0&&It.push(s),(p[h]=v.matches)&&(o=1),v.addListener?v.addListener(hn):v.addEventListener("change",hn)));return o&&u(s,function(i){return s.add(null,i)}),this},n.revert=function(l){this.kill(l||{})},n.kill=function(l){this.contexts.forEach(function(u){return u.kill(l,!0)})},_}(),Dr={registerPlugin:function(){for(var n=arguments.length,e=new Array(n),l=0;l<n;l++)e[l]=arguments[l];e.forEach(function(u){return Ei(u)})},timeline:function(n){return new Re(n)},getTweensOf:function(n,e){return me.getTweensOf(n,e)},getProperty:function(n,e,l,u){Ee(n)&&(n=Ve(n)[0]);var c=Ot(n||{}).get,s=l?ci:fi;return l==="native"&&(l=""),n&&(e?s((ke[e]&&ke[e].get||c)(n,e,l,u)):function(p,v,h){return s((ke[p]&&ke[p].get||c)(n,p,v,h))})},quickSetter:function(n,e,l){if(n=Ve(n),n.length>1){var u=n.map(function(o){return Be.quickSetter(o,e,l)}),c=u.length;return function(o){for(var i=c;i--;)u[i](o)}}n=n[0]||{};var s=ke[e],p=Ot(n),v=p.harness&&(p.harness.aliases||{})[e]||e,h=s?function(o){var i=new s;Vt._pt=0,i.init(n,l?o+l:o,Vt,0,[n]),i.render(1,i),Vt._pt&&Cn(1,Vt)}:p.set(n,v);return s?h:function(o){return h(n,v,l?o+l:o,p,1)}},quickTo:function(n,e,l){var u,c=Be.to(n,Ft((u={},u[e]="+=0.1",u.paused=!0,u),l||{})),s=function(v,h,o){return c.resetTo(e,v,h,o)};return s.tween=c,s},isTweening:function(n){return me.getTweensOf(n,!0).length>0},defaults:function(n){return n&&n.ease&&(n.ease=Dt(n.ease,Jt.ease)),Bn(Jt,n||{})},config:function(n){return Bn(ze,n||{})},registerEffect:function(n){var e=n.name,l=n.effect,u=n.plugins,c=n.defaults,s=n.extendTimeline;(u||"").split(",").forEach(function(p){return p&&!ke[p]&&!Ge[p]&&fr(e+" effect requires "+p+" plugin.")}),Hr[e]=function(p,v,h){return l(Ve(p),He(v||{},c),h)},s&&(Re.prototype[e]=function(p,v,h){return this.add(Hr[e](p,nt(v)?v:(h=v)&&{},this),h)})},registerEase:function(n,e){he[n]=Dt(e)},parseEase:function(n,e){return arguments.length?Dt(n,e):he},getById:function(n){return me.getById(n)},exportRoot:function(n,e){n===void 0&&(n={});var l=new Re(n),u,c;for(l.smoothChildTiming=De(n.smoothChildTiming),me.remove(l),l._dp=0,l._time=l._tTime=me._time,u=me._first;u;)c=u._next,(e||!(!u._dur&&u instanceof Se&&u.vars.onComplete===u._targets[0]))&&je(l,u,u._start-u._delay),u=c;return je(me,l,0),l},context:function(n,e){return n?new zi(n,e):ge},matchMedia:function(n){return new Co(n)},matchMediaRefresh:function(){return It.forEach(function(n){var e=n.conditions,l,u;for(u in e)e[u]&&(e[u]=!1,l=1);l&&n.revert()})||hn()},addEventListener:function(n,e){var l=Cr[n]||(Cr[n]=[]);~l.indexOf(e)||l.push(e)},removeEventListener:function(n,e){var l=Cr[n],u=l&&l.indexOf(e);u>=0&&l.splice(u,1)},utils:{wrap:io,wrapYoyo:ao,distribute:yi,random:Ti,snap:xi,normalize:no,getUnit:Me,clamp:$a,splitColor:Pi,toArray:Ve,selector:sn,mapRange:Si,pipe:to,unitize:ro,interpolate:oo,shuffle:mi},install:oi,effects:Hr,ticker:Ne,updateRoot:Re.updateRoot,plugins:ke,globalTimeline:me,core:{PropTween:Fe,globals:si,Tween:Se,Timeline:Re,Animation:vr,getCache:Ot,_removeLinkedListItem:kr,reverting:function(){return Oe},context:function(n){return n&&ge&&(ge.data.push(n),n._ctx=ge),ge},suppressOverwrites:function(n){return vn=n}}};Ie("to,from,fromTo,delayedCall,set,killTweensOf",function(_){return Dr[_]=Se[_]});Ne.add(Re.updateRoot);Vt=Dr.to({},{duration:0});var Mo=function(n,e){for(var l=n._pt;l&&l.p!==e&&l.op!==e&&l.fp!==e;)l=l._next;return l},Ro=function(n,e){var l=n._targets,u,c,s;for(u in e)for(c=l.length;c--;)s=n._ptLookup[c][u],s&&(s=s.d)&&(s._pt&&(s=Mo(s,u)),s&&s.modifier&&s.modifier(e[u],n,l[c],u))},Qr=function(n,e){return{name:n,rawVars:1,init:function(u,c,s){s._onInit=function(p){var v,h;if(Ee(c)&&(v={},Ie(c,function(o){return v[o]=1}),c=v),e){v={};for(h in c)v[h]=e(c[h]);c=v}Ro(p,c)}}}},Be=Dr.registerPlugin({name:"attr",init:function(n,e,l,u,c){var s,p,v;this.tween=l;for(s in e)v=n.getAttribute(s)||"",p=this.add(n,"setAttribute",(v||0)+"",e[s],u,c,0,0,s),p.op=s,p.b=v,this._props.push(s)},render:function(n,e){for(var l=e._pt;l;)Oe?l.set(l.t,l.p,l.b,l):l.r(n,l.d),l=l._next}},{name:"endArray",init:function(n,e){for(var l=e.length;l--;)this.add(n,l,n[l]||0,e[l],0,0,0,0,0,1)}},Qr("roundProps",un),Qr("modifiers"),Qr("snap",xi))||Dr;Se.version=Re.version=Be.version="3.12.5";ai=1;gn()&&er();he.Power0;he.Power1;he.Power2;he.Power3;he.Power4;he.Linear;he.Quad;he.Cubic;he.Quart;he.Quint;he.Strong;he.Elastic;he.Back;he.SteppedEase;he.Bounce;he.Sine;he.Expo;he.Circ;/*!
 * CSSPlugin 3.12.5
 * https://gsap.com
 *
 * Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Xn,dt,Zt,Mn,Rt,Wn,Rn,Oo=function(){return typeof window<"u"},lt={},Mt=180/Math.PI,Qt=Math.PI/180,Xt=Math.atan2,Vn=1e8,On=/([A-Z])/g,Ao=/(left|right|width|margin|padding|x)/i,Do=/[\s,\(]\S/,$e={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},fn=function(n,e){return e.set(e.t,e.p,Math.round((e.s+e.c*n)*1e4)/1e4+e.u,e)},Io=function(n,e){return e.set(e.t,e.p,n===1?e.e:Math.round((e.s+e.c*n)*1e4)/1e4+e.u,e)},Fo=function(n,e){return e.set(e.t,e.p,n?Math.round((e.s+e.c*n)*1e4)/1e4+e.u:e.b,e)},Lo=function(n,e){var l=e.s+e.c*n;e.set(e.t,e.p,~~(l+(l<0?-.5:.5))+e.u,e)},Gi=function(n,e){return e.set(e.t,e.p,n?e.e:e.b,e)},Xi=function(n,e){return e.set(e.t,e.p,n!==1?e.b:e.e,e)},Bo=function(n,e,l){return n.style[e]=l},ko=function(n,e,l){return n.style.setProperty(e,l)},No=function(n,e,l){return n._gsap[e]=l},Uo=function(n,e,l){return n._gsap.scaleX=n._gsap.scaleY=l},zo=function(n,e,l,u,c){var s=n._gsap;s.scaleX=s.scaleY=l,s.renderTransform(c,s)},Go=function(n,e,l,u,c){var s=n._gsap;s[e]=l,s.renderTransform(c,s)},ye="transform",Le=ye+"Origin",Xo=function _(n,e){var l=this,u=this.target,c=u.style,s=u._gsap;if(n in lt&&c){if(this.tfm=this.tfm||{},n!=="transform")n=$e[n]||n,~n.indexOf(",")?n.split(",").forEach(function(p){return l.tfm[p]=st(u,p)}):this.tfm[n]=s.x?s[n]:st(u,n),n===Le&&(this.tfm.zOrigin=s.zOrigin);else return $e.transform.split(",").forEach(function(p){return _.call(l,p,e)});if(this.props.indexOf(ye)>=0)return;s.svg&&(this.svgo=u.getAttribute("data-svg-origin"),this.props.push(Le,e,"")),n=ye}(c||e)&&this.props.push(n,e,c[n])},Wi=function(n){n.translate&&(n.removeProperty("translate"),n.removeProperty("scale"),n.removeProperty("rotate"))},Wo=function(){var n=this.props,e=this.target,l=e.style,u=e._gsap,c,s;for(c=0;c<n.length;c+=3)n[c+1]?e[n[c]]=n[c+2]:n[c+2]?l[n[c]]=n[c+2]:l.removeProperty(n[c].substr(0,2)==="--"?n[c]:n[c].replace(On,"-$1").toLowerCase());if(this.tfm){for(s in this.tfm)u[s]=this.tfm[s];u.svg&&(u.renderTransform(),e.setAttribute("data-svg-origin",this.svgo||"")),c=Rn(),(!c||!c.isStart)&&!l[ye]&&(Wi(l),u.zOrigin&&l[Le]&&(l[Le]+=" "+u.zOrigin+"px",u.zOrigin=0,u.renderTransform()),u.uncache=1)}},Vi=function(n,e){var l={target:n,props:[],revert:Wo,save:Xo};return n._gsap||Be.core.getCache(n),e&&e.split(",").forEach(function(u){return l.save(u)}),l},Hi,cn=function(n,e){var l=dt.createElementNS?dt.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),n):dt.createElement(n);return l&&l.style?l:dt.createElement(n)},et=function _(n,e,l){var u=getComputedStyle(n);return u[e]||u.getPropertyValue(e.replace(On,"-$1").toLowerCase())||u.getPropertyValue(e)||!l&&_(n,tr(e)||e,1)||""},Hn="O,Moz,ms,Ms,Webkit".split(","),tr=function(n,e,l){var u=e||Rt,c=u.style,s=5;if(n in c&&!l)return n;for(n=n.charAt(0).toUpperCase()+n.substr(1);s--&&!(Hn[s]+n in c););return s<0?null:(s===3?"ms":s>=0?Hn[s]:"")+n},dn=function(){Oo()&&window.document&&(Xn=window,dt=Xn.document,Zt=dt.documentElement,Rt=cn("div")||{style:{}},cn("div"),ye=tr(ye),Le=ye+"Origin",Rt.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Hi=!!tr("perspective"),Rn=Be.core.reverting,Mn=1)},Jr=function _(n){var e=cn("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),l=this.parentNode,u=this.nextSibling,c=this.style.cssText,s;if(Zt.appendChild(e),e.appendChild(this),this.style.display="block",n)try{s=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=_}catch{}else this._gsapBBox&&(s=this._gsapBBox());return l&&(u?l.insertBefore(this,u):l.appendChild(this)),Zt.removeChild(e),this.style.cssText=c,s},Yn=function(n,e){for(var l=e.length;l--;)if(n.hasAttribute(e[l]))return n.getAttribute(e[l])},Yi=function(n){var e;try{e=n.getBBox()}catch{e=Jr.call(n,!0)}return e&&(e.width||e.height)||n.getBBox===Jr||(e=Jr.call(n,!0)),e&&!e.width&&!e.x&&!e.y?{x:+Yn(n,["x","cx","x1"])||0,y:+Yn(n,["y","cy","y1"])||0,width:0,height:0}:e},Ki=function(n){return!!(n.getCTM&&(!n.parentNode||n.ownerSVGElement)&&Yi(n))},Lt=function(n,e){if(e){var l=n.style,u;e in lt&&e!==Le&&(e=ye),l.removeProperty?(u=e.substr(0,2),(u==="ms"||e.substr(0,6)==="webkit")&&(e="-"+e),l.removeProperty(u==="--"?e:e.replace(On,"-$1").toLowerCase())):l.removeAttribute(e)}},pt=function(n,e,l,u,c,s){var p=new Fe(n._pt,e,l,0,1,s?Xi:Gi);return n._pt=p,p.b=u,p.e=c,n._props.push(l),p},Kn={deg:1,rad:1,turn:1},Vo={grid:1,flex:1},xt=function _(n,e,l,u){var c=parseFloat(l)||0,s=(l+"").trim().substr((c+"").length)||"px",p=Rt.style,v=Ao.test(e),h=n.tagName.toLowerCase()==="svg",o=(h?"client":"offset")+(v?"Width":"Height"),i=100,t=u==="px",r=u==="%",d,a,f,m;if(u===s||!c||Kn[u]||Kn[s])return c;if(s!=="px"&&!t&&(c=_(n,e,l,"px")),m=n.getCTM&&Ki(n),(r||s==="%")&&(lt[e]||~e.indexOf("adius")))return d=m?n.getBBox()[v?"width":"height"]:n[o],Te(r?c/d*i:c/100*d);if(p[v?"width":"height"]=i+(t?s:u),a=~e.indexOf("adius")||u==="em"&&n.appendChild&&!h?n:n.parentNode,m&&(a=(n.ownerSVGElement||{}).parentNode),(!a||a===dt||!a.appendChild)&&(a=dt.body),f=a._gsap,f&&r&&f.width&&v&&f.time===Ne.time&&!f.uncache)return Te(c/f.width*i);if(r&&(e==="height"||e==="width")){var g=n.style[e];n.style[e]=i+u,d=n[o],g?n.style[e]=g:Lt(n,e)}else(r||s==="%")&&!Vo[et(a,"display")]&&(p.position=et(n,"position")),a===n&&(p.position="static"),a.appendChild(Rt),d=Rt[o],a.removeChild(Rt),p.position="absolute";return v&&r&&(f=Ot(a),f.time=Ne.time,f.width=a[o]),Te(t?d*c/i:d&&c?i/d*c:0)},st=function(n,e,l,u){var c;return Mn||dn(),e in $e&&e!=="transform"&&(e=$e[e],~e.indexOf(",")&&(e=e.split(",")[0])),lt[e]&&e!=="transform"?(c=gr(n,u),c=e!=="transformOrigin"?c[e]:c.svg?c.origin:Fr(et(n,Le))+" "+c.zOrigin+"px"):(c=n.style[e],(!c||c==="auto"||u||~(c+"").indexOf("calc("))&&(c=Ir[e]&&Ir[e](n,e,l)||et(n,e)||li(n,e)||(e==="opacity"?1:0))),l&&!~(c+"").trim().indexOf(" ")?xt(n,e,c,l)+l:c},Ho=function(n,e,l,u){if(!l||l==="none"){var c=tr(e,n,1),s=c&&et(n,c,1);s&&s!==l?(e=c,l=s):e==="borderColor"&&(l=et(n,"borderTopColor"))}var p=new Fe(this._pt,n.style,e,0,1,Ni),v=0,h=0,o,i,t,r,d,a,f,m,g,x,T,y;if(p.b=l,p.e=u,l+="",u+="",u==="auto"&&(a=n.style[e],n.style[e]=u,u=et(n,e)||u,a?n.style[e]=a:Lt(n,e)),o=[l,u],Mi(o),l=o[0],u=o[1],t=l.match(Wt)||[],y=u.match(Wt)||[],y.length){for(;i=Wt.exec(u);)f=i[0],g=u.substring(v,i.index),d?d=(d+1)%5:(g.substr(-5)==="rgba("||g.substr(-5)==="hsla(")&&(d=1),f!==(a=t[h++]||"")&&(r=parseFloat(a)||0,T=a.substr((r+"").length),f.charAt(1)==="="&&(f=qt(r,f)+T),m=parseFloat(f),x=f.substr((m+"").length),v=Wt.lastIndex-x.length,x||(x=x||ze.units[e]||T,v===u.length&&(u+=x,p.e+=x)),T!==x&&(r=xt(n,e,a,x)||0),p._pt={_next:p._pt,p:g||h===1?g:",",s:r,c:m-r,m:d&&d<4||e==="zIndex"?Math.round:0});p.c=v<u.length?u.substring(v,u.length):""}else p.r=e==="display"&&u==="none"?Xi:Gi;return ni.test(u)&&(p.e=0),this._pt=p,p},qn={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Yo=function(n){var e=n.split(" "),l=e[0],u=e[1]||"50%";return(l==="top"||l==="bottom"||u==="left"||u==="right")&&(n=l,l=u,u=n),e[0]=qn[l]||l,e[1]=qn[u]||u,e.join(" ")},Ko=function(n,e){if(e.tween&&e.tween._time===e.tween._dur){var l=e.t,u=l.style,c=e.u,s=l._gsap,p,v,h;if(c==="all"||c===!0)u.cssText="",v=1;else for(c=c.split(","),h=c.length;--h>-1;)p=c[h],lt[p]&&(v=1,p=p==="transformOrigin"?Le:ye),Lt(l,p);v&&(Lt(l,ye),s&&(s.svg&&l.removeAttribute("transform"),gr(l,1),s.uncache=1,Wi(u)))}},Ir={clearProps:function(n,e,l,u,c){if(c.data!=="isFromStart"){var s=n._pt=new Fe(n._pt,e,l,0,0,Ko);return s.u=u,s.pr=-10,s.tween=c,n._props.push(l),1}}},_r=[1,0,0,1,0,0],qi={},Zi=function(n){return n==="matrix(1, 0, 0, 1, 0, 0)"||n==="none"||!n},Zn=function(n){var e=et(n,ye);return Zi(e)?_r:e.substr(7).match(ri).map(Te)},An=function(n,e){var l=n._gsap||Ot(n),u=n.style,c=Zn(n),s,p,v,h;return l.svg&&n.getAttribute("transform")?(v=n.transform.baseVal.consolidate().matrix,c=[v.a,v.b,v.c,v.d,v.e,v.f],c.join(",")==="1,0,0,1,0,0"?_r:c):(c===_r&&!n.offsetParent&&n!==Zt&&!l.svg&&(v=u.display,u.display="block",s=n.parentNode,(!s||!n.offsetParent)&&(h=1,p=n.nextElementSibling,Zt.appendChild(n)),c=Zn(n),v?u.display=v:Lt(n,"display"),h&&(p?s.insertBefore(n,p):s?s.appendChild(n):Zt.removeChild(n))),e&&c.length>6?[c[0],c[1],c[4],c[5],c[12],c[13]]:c)},pn=function(n,e,l,u,c,s){var p=n._gsap,v=c||An(n,!0),h=p.xOrigin||0,o=p.yOrigin||0,i=p.xOffset||0,t=p.yOffset||0,r=v[0],d=v[1],a=v[2],f=v[3],m=v[4],g=v[5],x=e.split(" "),T=parseFloat(x[0])||0,y=parseFloat(x[1])||0,w,b,S,E;l?v!==_r&&(b=r*f-d*a)&&(S=T*(f/b)+y*(-a/b)+(a*g-f*m)/b,E=T*(-d/b)+y*(r/b)-(r*g-d*m)/b,T=S,y=E):(w=Yi(n),T=w.x+(~x[0].indexOf("%")?T/100*w.width:T),y=w.y+(~(x[1]||x[0]).indexOf("%")?y/100*w.height:y)),u||u!==!1&&p.smooth?(m=T-h,g=y-o,p.xOffset=i+(m*r+g*a)-m,p.yOffset=t+(m*d+g*f)-g):p.xOffset=p.yOffset=0,p.xOrigin=T,p.yOrigin=y,p.smooth=!!u,p.origin=e,p.originIsAbsolute=!!l,n.style[Le]="0px 0px",s&&(pt(s,p,"xOrigin",h,T),pt(s,p,"yOrigin",o,y),pt(s,p,"xOffset",i,p.xOffset),pt(s,p,"yOffset",t,p.yOffset)),n.setAttribute("data-svg-origin",T+" "+y)},gr=function(n,e){var l=n._gsap||new Di(n);if("x"in l&&!e&&!l.uncache)return l;var u=n.style,c=l.scaleX<0,s="px",p="deg",v=getComputedStyle(n),h=et(n,Le)||"0",o,i,t,r,d,a,f,m,g,x,T,y,w,b,S,E,O,P,M,A,B,I,R,D,L,F,N,U,k,G,W,K;return o=i=t=a=f=m=g=x=T=0,r=d=1,l.svg=!!(n.getCTM&&Ki(n)),v.translate&&((v.translate!=="none"||v.scale!=="none"||v.rotate!=="none")&&(u[ye]=(v.translate!=="none"?"translate3d("+(v.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(v.rotate!=="none"?"rotate("+v.rotate+") ":"")+(v.scale!=="none"?"scale("+v.scale.split(" ").join(",")+") ":"")+(v[ye]!=="none"?v[ye]:"")),u.scale=u.rotate=u.translate="none"),b=An(n,l.svg),l.svg&&(l.uncache?(L=n.getBBox(),h=l.xOrigin-L.x+"px "+(l.yOrigin-L.y)+"px",D=""):D=!e&&n.getAttribute("data-svg-origin"),pn(n,D||h,!!D||l.originIsAbsolute,l.smooth!==!1,b)),y=l.xOrigin||0,w=l.yOrigin||0,b!==_r&&(P=b[0],M=b[1],A=b[2],B=b[3],o=I=b[4],i=R=b[5],b.length===6?(r=Math.sqrt(P*P+M*M),d=Math.sqrt(B*B+A*A),a=P||M?Xt(M,P)*Mt:0,g=A||B?Xt(A,B)*Mt+a:0,g&&(d*=Math.abs(Math.cos(g*Qt))),l.svg&&(o-=y-(y*P+w*A),i-=w-(y*M+w*B))):(K=b[6],G=b[7],N=b[8],U=b[9],k=b[10],W=b[11],o=b[12],i=b[13],t=b[14],S=Xt(K,k),f=S*Mt,S&&(E=Math.cos(-S),O=Math.sin(-S),D=I*E+N*O,L=R*E+U*O,F=K*E+k*O,N=I*-O+N*E,U=R*-O+U*E,k=K*-O+k*E,W=G*-O+W*E,I=D,R=L,K=F),S=Xt(-A,k),m=S*Mt,S&&(E=Math.cos(-S),O=Math.sin(-S),D=P*E-N*O,L=M*E-U*O,F=A*E-k*O,W=B*O+W*E,P=D,M=L,A=F),S=Xt(M,P),a=S*Mt,S&&(E=Math.cos(S),O=Math.sin(S),D=P*E+M*O,L=I*E+R*O,M=M*E-P*O,R=R*E-I*O,P=D,I=L),f&&Math.abs(f)+Math.abs(a)>359.9&&(f=a=0,m=180-m),r=Te(Math.sqrt(P*P+M*M+A*A)),d=Te(Math.sqrt(R*R+K*K)),S=Xt(I,R),g=Math.abs(S)>2e-4?S*Mt:0,T=W?1/(W<0?-W:W):0),l.svg&&(D=n.getAttribute("transform"),l.forceCSS=n.setAttribute("transform","")||!Zi(et(n,ye)),D&&n.setAttribute("transform",D))),Math.abs(g)>90&&Math.abs(g)<270&&(c?(r*=-1,g+=a<=0?180:-180,a+=a<=0?180:-180):(d*=-1,g+=g<=0?180:-180)),e=e||l.uncache,l.x=o-((l.xPercent=o&&(!e&&l.xPercent||(Math.round(n.offsetWidth/2)===Math.round(-o)?-50:0)))?n.offsetWidth*l.xPercent/100:0)+s,l.y=i-((l.yPercent=i&&(!e&&l.yPercent||(Math.round(n.offsetHeight/2)===Math.round(-i)?-50:0)))?n.offsetHeight*l.yPercent/100:0)+s,l.z=t+s,l.scaleX=Te(r),l.scaleY=Te(d),l.rotation=Te(a)+p,l.rotationX=Te(f)+p,l.rotationY=Te(m)+p,l.skewX=g+p,l.skewY=x+p,l.transformPerspective=T+s,(l.zOrigin=parseFloat(h.split(" ")[2])||!e&&l.zOrigin||0)&&(u[Le]=Fr(h)),l.xOffset=l.yOffset=0,l.force3D=ze.force3D,l.renderTransform=l.svg?Zo:Hi?Qi:qo,l.uncache=0,l},Fr=function(n){return(n=n.split(" "))[0]+" "+n[1]},jr=function(n,e,l){var u=Me(e);return Te(parseFloat(e)+parseFloat(xt(n,"x",l+"px",u)))+u},qo=function(n,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,Qi(n,e)},Pt="0deg",ir="0px",Ct=") ",Qi=function(n,e){var l=e||this,u=l.xPercent,c=l.yPercent,s=l.x,p=l.y,v=l.z,h=l.rotation,o=l.rotationY,i=l.rotationX,t=l.skewX,r=l.skewY,d=l.scaleX,a=l.scaleY,f=l.transformPerspective,m=l.force3D,g=l.target,x=l.zOrigin,T="",y=m==="auto"&&n&&n!==1||m===!0;if(x&&(i!==Pt||o!==Pt)){var w=parseFloat(o)*Qt,b=Math.sin(w),S=Math.cos(w),E;w=parseFloat(i)*Qt,E=Math.cos(w),s=jr(g,s,b*E*-x),p=jr(g,p,-Math.sin(w)*-x),v=jr(g,v,S*E*-x+x)}f!==ir&&(T+="perspective("+f+Ct),(u||c)&&(T+="translate("+u+"%, "+c+"%) "),(y||s!==ir||p!==ir||v!==ir)&&(T+=v!==ir||y?"translate3d("+s+", "+p+", "+v+") ":"translate("+s+", "+p+Ct),h!==Pt&&(T+="rotate("+h+Ct),o!==Pt&&(T+="rotateY("+o+Ct),i!==Pt&&(T+="rotateX("+i+Ct),(t!==Pt||r!==Pt)&&(T+="skew("+t+", "+r+Ct),(d!==1||a!==1)&&(T+="scale("+d+", "+a+Ct),g.style[ye]=T||"translate(0, 0)"},Zo=function(n,e){var l=e||this,u=l.xPercent,c=l.yPercent,s=l.x,p=l.y,v=l.rotation,h=l.skewX,o=l.skewY,i=l.scaleX,t=l.scaleY,r=l.target,d=l.xOrigin,a=l.yOrigin,f=l.xOffset,m=l.yOffset,g=l.forceCSS,x=parseFloat(s),T=parseFloat(p),y,w,b,S,E;v=parseFloat(v),h=parseFloat(h),o=parseFloat(o),o&&(o=parseFloat(o),h+=o,v+=o),v||h?(v*=Qt,h*=Qt,y=Math.cos(v)*i,w=Math.sin(v)*i,b=Math.sin(v-h)*-t,S=Math.cos(v-h)*t,h&&(o*=Qt,E=Math.tan(h-o),E=Math.sqrt(1+E*E),b*=E,S*=E,o&&(E=Math.tan(o),E=Math.sqrt(1+E*E),y*=E,w*=E)),y=Te(y),w=Te(w),b=Te(b),S=Te(S)):(y=i,S=t,w=b=0),(x&&!~(s+"").indexOf("px")||T&&!~(p+"").indexOf("px"))&&(x=xt(r,"x",s,"px"),T=xt(r,"y",p,"px")),(d||a||f||m)&&(x=Te(x+d-(d*y+a*b)+f),T=Te(T+a-(d*w+a*S)+m)),(u||c)&&(E=r.getBBox(),x=Te(x+u/100*E.width),T=Te(T+c/100*E.height)),E="matrix("+y+","+w+","+b+","+S+","+x+","+T+")",r.setAttribute("transform",E),g&&(r.style[ye]=E)},Qo=function(n,e,l,u,c){var s=360,p=Ee(c),v=parseFloat(c)*(p&&~c.indexOf("rad")?Mt:1),h=v-u,o=u+h+"deg",i,t;return p&&(i=c.split("_")[1],i==="short"&&(h%=s,h!==h%(s/2)&&(h+=h<0?s:-s)),i==="cw"&&h<0?h=(h+s*Vn)%s-~~(h/s)*s:i==="ccw"&&h>0&&(h=(h-s*Vn)%s-~~(h/s)*s)),n._pt=t=new Fe(n._pt,e,l,u,h,Io),t.e=o,t.u="deg",n._props.push(l),t},Qn=function(n,e){for(var l in e)n[l]=e[l];return n},Jo=function(n,e,l){var u=Qn({},l._gsap),c="perspective,force3D,transformOrigin,svgOrigin",s=l.style,p,v,h,o,i,t,r,d;u.svg?(h=l.getAttribute("transform"),l.setAttribute("transform",""),s[ye]=e,p=gr(l,1),Lt(l,ye),l.setAttribute("transform",h)):(h=getComputedStyle(l)[ye],s[ye]=e,p=gr(l,1),s[ye]=h);for(v in lt)h=u[v],o=p[v],h!==o&&c.indexOf(v)<0&&(r=Me(h),d=Me(o),i=r!==d?xt(l,v,h,d):parseFloat(h),t=parseFloat(o),n._pt=new Fe(n._pt,p,v,i,t-i,fn),n._pt.u=d||0,n._props.push(v));Qn(p,u)};Ie("padding,margin,Width,Radius",function(_,n){var e="Top",l="Right",u="Bottom",c="Left",s=(n<3?[e,l,u,c]:[e+c,e+l,u+l,u+c]).map(function(p){return n<2?_+p:"border"+p+_});Ir[n>1?"border"+_:_]=function(p,v,h,o,i){var t,r;if(arguments.length<4)return t=s.map(function(d){return st(p,d,h)}),r=t.join(" "),r.split(t[0]).length===5?t[0]:r;t=(o+"").split(" "),r={},s.forEach(function(d,a){return r[d]=t[a]=t[a]||t[(a-1)/2|0]}),p.init(v,r,i)}});var Ji={name:"css",register:dn,targetTest:function(n){return n.style&&n.nodeType},init:function(n,e,l,u,c){var s=this._props,p=n.style,v=l.vars.startAt,h,o,i,t,r,d,a,f,m,g,x,T,y,w,b,S;Mn||dn(),this.styles=this.styles||Vi(n),S=this.styles.props,this.tween=l;for(a in e)if(a!=="autoRound"&&(o=e[a],!(ke[a]&&Ii(a,e,l,u,n,c)))){if(r=typeof o,d=Ir[a],r==="function"&&(o=o.call(l,u,n,c),r=typeof o),r==="string"&&~o.indexOf("random(")&&(o=dr(o)),d)d(this,n,a,o,l)&&(b=1);else if(a.substr(0,2)==="--")h=(getComputedStyle(n).getPropertyValue(a)+"").trim(),o+="",gt.lastIndex=0,gt.test(h)||(f=Me(h),m=Me(o)),m?f!==m&&(h=xt(n,a,h,m)+m):f&&(o+=f),this.add(p,"setProperty",h,o,u,c,0,0,a),s.push(a),S.push(a,0,p[a]);else if(r!=="undefined"){if(v&&a in v?(h=typeof v[a]=="function"?v[a].call(l,u,n,c):v[a],Ee(h)&&~h.indexOf("random(")&&(h=dr(h)),Me(h+"")||h==="auto"||(h+=ze.units[a]||Me(st(n,a))||""),(h+"").charAt(1)==="="&&(h=st(n,a))):h=st(n,a),t=parseFloat(h),g=r==="string"&&o.charAt(1)==="="&&o.substr(0,2),g&&(o=o.substr(2)),i=parseFloat(o),a in $e&&(a==="autoAlpha"&&(t===1&&st(n,"visibility")==="hidden"&&i&&(t=0),S.push("visibility",0,p.visibility),pt(this,p,"visibility",t?"inherit":"hidden",i?"inherit":"hidden",!i)),a!=="scale"&&a!=="transform"&&(a=$e[a],~a.indexOf(",")&&(a=a.split(",")[0]))),x=a in lt,x){if(this.styles.save(a),T||(y=n._gsap,y.renderTransform&&!e.parseTransform||gr(n,e.parseTransform),w=e.smoothOrigin!==!1&&y.smooth,T=this._pt=new Fe(this._pt,p,ye,0,1,y.renderTransform,y,0,-1),T.dep=1),a==="scale")this._pt=new Fe(this._pt,y,"scaleY",y.scaleY,(g?qt(y.scaleY,g+i):i)-y.scaleY||0,fn),this._pt.u=0,s.push("scaleY",a),a+="X";else if(a==="transformOrigin"){S.push(Le,0,p[Le]),o=Yo(o),y.svg?pn(n,o,0,w,0,this):(m=parseFloat(o.split(" ")[2])||0,m!==y.zOrigin&&pt(this,y,"zOrigin",y.zOrigin,m),pt(this,p,a,Fr(h),Fr(o)));continue}else if(a==="svgOrigin"){pn(n,o,1,w,0,this);continue}else if(a in qi){Qo(this,y,a,t,g?qt(t,g+o):o);continue}else if(a==="smoothOrigin"){pt(this,y,"smooth",y.smooth,o);continue}else if(a==="force3D"){y[a]=o;continue}else if(a==="transform"){Jo(this,o,n);continue}}else a in p||(a=tr(a)||a);if(x||(i||i===0)&&(t||t===0)&&!Do.test(o)&&a in p)f=(h+"").substr((t+"").length),i||(i=0),m=Me(o)||(a in ze.units?ze.units[a]:f),f!==m&&(t=xt(n,a,h,m)),this._pt=new Fe(this._pt,x?y:p,a,t,(g?qt(t,g+i):i)-t,!x&&(m==="px"||a==="zIndex")&&e.autoRound!==!1?Lo:fn),this._pt.u=m||0,f!==m&&m!=="%"&&(this._pt.b=h,this._pt.r=Fo);else if(a in p)Ho.call(this,n,a,h,g?g+o:o);else if(a in n)this.add(n,a,h||n[a],g?g+o:o,u,c);else if(a!=="parseTransform"){yn(a,o);continue}x||(a in p?S.push(a,0,p[a]):S.push(a,1,h||n[a])),s.push(a)}}b&&Ui(this)},render:function(n,e){if(e.tween._time||!Rn())for(var l=e._pt;l;)l.r(n,l.d),l=l._next;else e.styles.revert()},get:st,aliases:$e,getSetter:function(n,e,l){var u=$e[e];return u&&u.indexOf(",")<0&&(e=u),e in lt&&e!==Le&&(n._gsap.x||st(n,"x"))?l&&Wn===l?e==="scale"?Uo:No:(Wn=l||{})&&(e==="scale"?zo:Go):n.style&&!_n(n.style[e])?Bo:~e.indexOf("-")?ko:Pn(n,e)},core:{_removeProperty:Lt,_getMatrix:An}};Be.utils.checkPrefix=tr;Be.core.getStyleSaver=Vi;(function(_,n,e,l){var u=Ie(_+","+n+","+e,function(c){lt[c]=1});Ie(n,function(c){ze.units[c]="deg",qi[c]=1}),$e[u[13]]=_+","+n,Ie(l,function(c){var s=c.split(":");$e[s[1]]=u[s[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Ie("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(_){ze.units[_]="px"});Be.registerPlugin(Ji);var jo=Be.registerPlugin(Ji)||Be;jo.core.Tween;class $o extends Br{constructor(){super(...arguments),this.cards=[],this.displayWidth=hr.instance.getWidth(),this.displayHeight=hr.instance.getHeight(),this.animationTimeline=new Re({paused:!0}),this.restart=!1}init(){this.container=new Je({x:0,y:0,name:"CardStackStage",parent:this}),this.restartButton=new wr({x:640,y:654,width:200,height:100,config:nr.RestartButton.bConfig,callback:this.cardButtonUp.bind(this),parent:this.container,textConfig:nr.RestartButton.tConfig}),this.restartButton.isEnabled=!1;const n=tt.instance.backMenuButtonUp;new Lr({x:1245,y:35,width:70,height:70,config:ht.MenuButton,callback:n.bind(this,this.name),parent:this.container}),this.createCardAssets(Kt.CardCounter),this.initDisplayEvents()}cardButtonUp(){this.restart=!this.restart,this.restart?(this.restartButton.textAsset.setTextConfig(nr.RestartText),this.animationTimeline.play()):(this.restartButton.textAsset.setTextConfig(nr.PlayText),this.animationTimeline.restart(),this.animationTimeline.paused(!0))}playCardAnimations(){this.animationTimeline.clear();for(let n=0,e=this.cards.length;n<e;n++){const l=this.cards[e-1-n],u=n*1.5,c=(Math.random()-.5)*.2;this.animationTimeline.to(l,Kt.CardAnimationDuration,{x:5/6*this.displayWidth,y:this.displayHeight/3+u,rotation:c,onStart:()=>{this.container.addChild(l)}},n*Kt.CardAnimationDelay)}}createCardAssets(n){for(let e=0;e<n;e++){const l=this.displayWidth/6,u=this.displayHeight/3+e*1.5,c=(Math.random()-.5)*.1,s=new jn({x:l,y:u,width:196,height:281,config:nr.CardSprite,parent:this.container});s.rotation=c,this.cards.push(s),this.container.addChild(s)}this.restartButton.isEnabled=!0,this.playCardAnimations()}dispose(){this.animationTimeline.kill(),this.cards.forEach(n=>n.destroy())}setVisualPortrait(){}setVisualLandscape(){}}class Sr extends PIXI.particles.Emitter{constructor(n,e,l){super(l,n,e);let u=Date.now();PIXI.ticker.shared.add(()=>{const c=Date.now(),s=(c-u)*8e-4;this.update(s),u=c})}start(){this.emit=!0}stop(){this.emit=!1}}const Ye=class{};Ye.MAX_PARTICLES=10;Ye.WoodSPrite={frame:"fire/wood",name:"wood"};Ye.DarkForestBackgroundSprite={frame:"fire/dark_forest_bg",name:"dark_forest_bg"};Ye.FireParticle={frame:"fire/particle",name:"particle"};Ye.FireSmallParticles=[{frame:"fire/fire01",name:"fire01"},{frame:"fire/fire02",name:"fire02"},{frame:"fire/fire03",name:"fire03"}];Ye.fireGeneralEmitter={alpha:{start:1,end:0},scale:{start:1.4,end:2.2,minimumScaleMultiplier:1},color:{start:"#d18726",end:"#333231"},speed:{start:100,end:100,minimumSpeedMultiplier:.5},acceleration:{x:0,y:0},maxSpeed:2,startRotation:{min:-110,max:-70},noRotation:!1,rotationSpeed:{min:0,max:0},lifetime:{min:.5,max:.5},blendMode:"normal",frequency:.05,emitterLifetime:-1,maxParticles:Ye.MAX_PARTICLES,pos:{x:0,y:-8},addAtBack:!0,spawnType:"circle",spawnCircle:{x:0,y:0,r:5}};Ye.fireSparkEmitter={alpha:{start:1,end:0},scale:{start:.1,end:.1,minimumScaleMultiplier:1},color:{start:"#47150b",end:"#333231"},speed:{start:100,end:100,minimumSpeedMultiplier:.5},acceleration:{x:0,y:0},maxSpeed:2,startRotation:{min:-110,max:-70},noRotation:!1,rotationSpeed:{min:0,max:0},lifetime:{min:1.5,max:2},blendMode:"normal",frequency:.05,emitterLifetime:-1,maxParticles:Ye.MAX_PARTICLES,pos:{x:0,y:-8},addAtBack:!0,spawnType:"circle",spawnCircle:{x:0,y:0,r:5}};Ye.fireGlowEmitter={alpha:{start:.25,end:0},scale:{start:1,end:1.4,minimumScaleMultiplier:1},color:{start:"0xa41e1e",end:"0xa41e1e"},speed:{start:100,end:100,minimumSpeedMultiplier:.5},acceleration:{x:0,y:0},maxSpeed:2,startRotation:{min:-110,max:-70},noRotation:!1,rotationSpeed:{min:0,max:0},lifetime:{min:1,max:1.5},blendMode:"normal",frequency:.05,emitterLifetime:-1,maxParticles:Ye.MAX_PARTICLES,pos:{x:0,y:-8},addAtBack:!0,spawnType:"circle",spawnCircle:{x:0,y:0,r:5}};let ft=Ye;class es extends Br{init(){this.container=new Je({x:0,y:0,name:"FireParticleStage",parent:this});const n=new jn({x:722,y:613,width:200,height:75,config:ft.WoodSPrite,parent:this.container});this.particleContainer=new Je({x:718,y:607,parent:this.container,name:"ParticleContainer"}),this.particleContainer.scale.set(2,2),this.particleFogContainer=new Je({x:0,y:-25,parent:this.particleContainer,name:"particleFogContainer"}),this.particleSparksContainer=new Je({x:0,y:-45,parent:this.particleContainer,name:"particleSparksContainer"}),this.particleSparksContainer.scale.set(2,1),this.particleGlowContainer=new Je({x:0,y:0,parent:this.particleContainer,name:"particleGlowContainer"}),this.particleAddContainer=new Je({x:0,y:0,parent:this.particleContainer,name:"particleAddContainer"});const e=tt.instance.backMenuButtonUp;new Lr({x:1245,y:35,width:70,height:70,config:ht.MenuButton,callback:e.bind(this,this.name),parent:this.container});const l=ft.FireSmallParticles.map(p=>p.frame);this.fEmitter=new Sr(l,ft.fireGeneralEmitter,this.particleFogContainer),this.gEmitter=new Sr(l,ft.fireGlowEmitter,this.particleGlowContainer),this.aEmitter=new Sr(l,ft.fireGeneralEmitter,this.particleAddContainer),this.aEmitter.particleBlendMode=PIXI.BLEND_MODES.ADD,this.sEmitter=new Sr(ft.FireParticle.frame,ft.fireSparkEmitter,this.particleAddContainer);const u=PIXI.Texture.fromFrame(ft.FireParticle.name),c=new PIXI.filters.SimpleLightmapFilter(u,0),s=new PIXI.filters.SimpleLightmapFilter(u,13270592);n.filters=[s,c],this.initDisplayEvents(),this.initDisplayEvents()}setVisualPortrait(){}setVisualLandscape(){}dispose(){this.fEmitter.destroy(),this.gEmitter.destroy(),this.aEmitter.destroy(),this.sEmitter.destroy()}}class ts extends PIXI.Container{constructor(n){super(),this._textStyle=n.textStyle||{},this._maxWidth=n.maxWidth,this._currentText=n.text,this.updateText(n.text)}updateText(n){this._currentText=n,this.removeChildren();const e=this.parseText(n);this.buildElements(e)}updateTextStyle(n){this._textStyle={...this._textStyle,...n},this.updateText(this._currentText)}parseText(n){const e=/(\[.*?\])|([^[\]\n]+)|(\n)/g,l=[];let u;for(;(u=e.exec(n))!==null;)l.push(u[0]);return l}buildElements(n){let e=new PIXI.Point(0,0),l=0,u=[];for(const c of n){const s=this.createElement(c);e.x+s.width>this._maxWidth&&u.length>0&&(this.positionElements(u,e.y),u=[],e.x=0,e.y+=l,l=0),s.position.set(e.x,e.y),e.x+=s.width,u.push(s),s.height>l&&(l=s.height)}u.length>0&&this.positionElements(u,e.y)}createElement(n){if(n.startsWith("[")){const e=n.substring(1,n.length-1);return new PIXI.Sprite(PIXI.Texture.from(e))}else return new PIXI.Text(n,this._textStyle)}positionElements(n,e){for(const l of n)this.addChild(l),l.position.y=e}getText(){return this._currentText}}class vt{}vt.RandomAssetCounter=3;vt.CreateAssetDuration=2;vt.RandomRichTextFontSize={min:10,max:50};vt.SpecialTextOptions=["Lorem","ipsum","dolor","sit","amet","game","images","fun","text","[fire/fire02]","[fire/fire01]","[fire/fire03]","[fire/fire04]","more text","random"];class mr extends PIXI.ticker.Ticker{constructor(){super(),this.tickers={},mr.instance=this}addTimeout(n,e,l,u){if(!this.tickers[n]){let c=new PIXI.ticker.Ticker;c.autoStart=!0,this.tickers[n]=c,this.gTime=new Date().getTime(),this.tickers[n].add(this.addLoop.bind(this,n,e,l,u))}}addLoop(n,e,l,u){var c=e*1e3,s=new Date().getTime(),p=s-this.gTime;p<c||(l.call("",this),u?this.gTime=new Date().getTime():this.tickers[n].remove(this.addLoop.bind(this)))}removeTicker(n){this.tickers[n].destroy(),delete this.tickers[n]}getTickers(){return this.tickers}}class rs extends Br{init(){this.container=new Je({x:0,y:0,name:"RandomRichTextStage",parent:this}),this.textStyle={fill:16777215,fontSize:this.generateRandomFontSize()};const n=this.generateRandomText();this.richText=new ts({maxWidth:Yt.DisplayResolution.width-100,text:n,textStyle:this.textStyle}),this.container.addChild(this.richText);const e=tt.instance.backMenuButtonUp;new Lr({x:1245,y:35,width:70,height:70,config:ht.MenuButton,callback:e.bind(this,this.name),parent:this.container}),this.setCenterRandomRichTextPosition(),mr.instance.addTimeout("RandomText",vt.CreateAssetDuration,this.updateRandomContent.bind(this),!0),this.initDisplayEvents()}generateRandomText(){const n=vt.SpecialTextOptions,e=Math.floor(Math.random()*10+5);let l="";for(let u=0;u<e;u++){const c=Math.floor(Math.random()*n.length);l+=n[c]+" "}return l.trim()}generateRandomFontSize(){return Math.floor(Math.random()*vt.RandomRichTextFontSize.max+vt.RandomRichTextFontSize.min)}setCenterRandomRichTextPosition(){this.richText.position.set((Yt.DisplayResolution.width-this.richText.width)/2,(Yt.DisplayResolution.height-this.richText.height)/2)}updateRandomContent(){const n=this.generateRandomText(),e=this.generateRandomFontSize();this.richText.updateText(n),this.richText.updateTextStyle({fill:this.textStyle.fill,fontSize:e}),this.setCenterRandomRichTextPosition()}setVisualPortrait(){}setVisualLandscape(){}dispose(){mr.instance.removeTicker("RandomText")}}class zr extends Br{constructor(){super(...arguments),this.stageMap={[Ke.FirstTask]:$o,[Ke.SecondTask]:rs,[Ke.ThirdTask]:es,[Ke.Menu]:zr}}init(){new wr({x:640,y:180,width:250,height:130,config:Gt.FirstTaskButtonText.bConfig,callback:this.changeStage.bind(this,Ke.FirstTask),parent:this,textConfig:Gt.FirstTaskButtonText.tConfig}),new wr({x:640,y:360,width:250,height:130,config:Gt.SecondTaskButtonText.bConfig,callback:this.changeStage.bind(this,Ke.SecondTask),parent:this,textConfig:Gt.SecondTaskButtonText.tConfig}),new wr({x:640,y:540,width:250,height:130,config:Gt.ThirdTaskButtonText.bConfig,callback:this.changeStage.bind(this,Ke.ThirdTask),parent:this,textConfig:Gt.ThirdTaskButtonText.tConfig}),this.initDisplayEvents()}setVisualPortrait(){}setVisualLandscape(){}changeStage(n){tt.instance.removeStage(Ke.Menu),this.stageMap[n]?tt.instance.startStage(this.stageMap[n],n):console.error("Invalid stage name provided:",n)}dispose(){}}class tt{constructor(n,e,l){this.stages={},tt.instance=this,this.stageContainer=new Je({x:n,y:e,parent:l,name:"StageContainer"})}createStage(n,e){this.stages[e]==null&&(this.stages[e]=new n,this.stages[e].name=e,this.stageContainer.addChild(this.stages[e]))}backMenuButtonUp(n){tt.instance.removeStage(n),tt.instance.startStage(zr,Ke.Menu)}startStage(n,e){this.createStage(n,e),this.stages[e].init()}getStage(n){return this.stages[n]}removeStage(n){this.stages[n].dispose(),this.stages[n].destroy({children:!0,baseTexture:!0}),delete this.stages[n]}getStageContainer(){return this.stageContainer}}class ns{constructor(){new mr,this.displayManager=new hr(Yt.DisplayResolution.width,Yt.DisplayResolution.height),this.stageManager=new tt(0,0,this.displayManager.getRendererContainer()),this.stageManager.startStage(zr,Ke.Menu),new La}}class is{constructor(){this.initProperties()}initProperties(){this.loader=new PIXI.loaders.Loader,this.loader.add("assets/sprites/ui.json"),this.loader.add("particle","assets/sprites/particle.png"),this.loader.load(),this.loader.onProgress.add(this.onProgress.bind(this)),this.loader.onError.add(this.onError.bind(this)),this.loader.onLoad.add(this.onLoad.bind(this)),this.loader.onComplete.add(this.onComplete.bind(this))}onError(){}onLoad(){}onComplete(){new ns}onProgress(){}}window.onload=function(){new is}});export default as();
